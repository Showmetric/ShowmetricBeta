function config(t){t.translations("en",{DASHBOARD:"Dashboard",GRAPHS:"Graphs",MAILBOX:"Mailbox",WIDGETS:"Widgets",METRICS:"Metrics",FORMS:"Forms",APPVIEWS:"App views",OTHERPAGES:"Other pages",UIELEMENTS:"UI elements",MISCELLANEOUS:"Miscellaneous",GRIDOPTIONS:"Grid options",TABLES:"Tables",COMMERCE:"E-commerce",GALLERY:"Gallery",MENULEVELS:"Menu levels",ANIMATIONS:"Animations",LANDING:"Landing page",LAYOUTS:"Layouts",WELCOME:"Welcome Amelia",MESSAGEINFO:"You have 42 messages and 6 notifications.",SEARCH:"Search for something..."}).translations("es",{DASHBOARD:"Salpicadero",GRAPHS:"Gráficos",MAILBOX:"El correo",WIDGETS:"Widgets",METRICS:"Métrica",FORMS:"Formas",APPVIEWS:"Vistas app",OTHERPAGES:"Otras páginas",UIELEMENTS:"UI elements",MISCELLANEOUS:"Misceláneo",GRIDOPTIONS:"Cuadrícula",TABLES:"Tablas",COMMERCE:"E-comercio",GALLERY:"Galería",MENULEVELS:"Niveles de menú",ANIMATIONS:"Animaciones",LANDING:"Página de destino",LAYOUTS:"Esquemas",WELCOME:"Bienvenido Amelia",MESSAGEINFO:"Usted tiene 42 mensajes y 6 notificaciones.",SEARCH:"Busca algo ..."}),t.preferredLanguage("en")}function pageTitle(t,e){return{link:function(a,r){var s=function(t,a,s,i,o){var n="Datapoolt";a.data&&a.data.pageTitle&&(n="Datapoolt | "+a.data.pageTitle),e(function(){r.text(n)})};t.$on("$stateChangeStart",s)}}}function sideNavigation(t){return{restrict:"A",link:function(e,a){t(function(){a.metisMenu()})}}}function hcChart(t){return{restrict:"E",template:"<div></div>",scope:{options:"="},link:function(e,a){function r(){Highcharts.chart(a[0],e.options)}t(r,200)}}}function responsiveVideo(){return{restrict:"A",link:function(t,e){var a=e,r=e.children();r.attr("data-aspectRatio",r.height()/r.width()).removeAttr("height").removeAttr("width"),$(window).resize(function(){var t=a.width();r.width(t).height(t*r.attr("data-aspectRatio"))}).resize()}}}function iboxTools(t){return{restrict:"A",scope:!0,templateUrl:"common/ibox_tools.ejs",controller:["$scope","$element",function(e,a){e.showhide=function(){var e=a.closest("div.ibox"),r=a.find("i:first"),s=e.find("div.ibox-content");s.slideToggle(200),r.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),e.toggleClass("").toggleClass("border-bottom"),t(function(){e.resize(),e.find("[id^=map-]").resize()},50)},e.closebox=function(){var t=a.closest("div.ibox");t.remove()}}]}}function iboxToolsFullScreen(t){return{restrict:"A",scope:!0,templateUrl:"common/ibox_tools_full_screen.ejs",controller:["$scope","$element",function(e,a){e.showhide=function(){var e=a.closest("div.ibox"),r=a.find("i:first"),s=e.find("div.ibox-content");s.slideToggle(200),r.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),e.toggleClass("").toggleClass("border-bottom"),t(function(){e.resize(),e.find("[id^=map-]").resize()},50)},e.closebox=function(){var t=a.closest("div.ibox");t.remove()},e.fullscreen=function(){var t=a.closest("div.ibox"),e=a.find("i.fa-expand");$("body").toggleClass("fullscreen-ibox-mode"),e.toggleClass("fa-expand").toggleClass("fa-compress"),t.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}}]}}function minimalizaSidebar(t){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()" style="margin-top: 10px;"><i class="fa fa-bars"></i></a>',controller:["$scope","$element",function(t,e){t.minimalize=function(){$("body").toggleClass("mini-navbar");var t=$(window).width();if(768==t&&($("body").hasClass("mini-navbar")?$("#side-menu").css("display","block"):$("#side-menu").css("display","none")),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")){$(".tooltip").hide();document.getElementById("CustomTemplate").offsetWidth;$("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500),!$("body").hasClass("body-small")},100)}else $("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},300)):($(".tooltip").hide(),$("#side-menu").removeAttr("style"),$("body").hasClass("mini-navbar")&&($(".tooltip").show(),$("#dashboardTitleIcons").show()))}}]}}function closeOffCanvas(){return{restrict:"A",template:'<a class="close-canvas-menu" ng-click="closeOffCanvas()"><i class="fa fa-times"></i></a>',controller:["$scope","$element",function(t,e){t.closeOffCanvas=function(){$("body").toggleClass("mini-navbar")}}]}}function vectorMap(){return{restrict:"A",scope:{myMapData:"="},link:function(t,e,a){e.vectorMap({map:"world_mill_en",backgroundColor:"transparent",regionStyle:{initial:{fill:"#e4e4e4","fill-opacity":.9,stroke:"none","stroke-width":0,"stroke-opacity":0}},series:{regions:[{values:t.myMapData,scale:["#1ab394","#22d6b1"],normalizeFunction:"polynomial"}]}})}}}function sparkline(){return{restrict:"A",scope:{sparkData:"=",sparkOptions:"="},link:function(t,e,a){t.$watch(t.sparkData,function(){r()}),t.$watch(t.sparkOptions,function(){r()});var r=function(){$(e).sparkline(t.sparkData,t.sparkOptions)}}}}function icheck(t){return{restrict:"A",require:"ngModel",link:function(e,a,r,s){return t(function(){var t;return t=r.value,e.$watch(r.ngModel,function(t){$(a).iCheck("update")}),$(a).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}).on("ifChanged",function(i){if("checkbox"===$(a).attr("type")&&r.ngModel&&e.$apply(function(){return s.$setViewValue(i.target.checked)}),"radio"===$(a).attr("type")&&r.ngModel)return e.$apply(function(){return s.$setViewValue(t)})})})}}}function ionRangeSlider(){return{restrict:"A",scope:{rangeOptions:"="},link:function(t,e,a){e.ionRangeSlider(t.rangeOptions)}}}function dropZone(){return function(t,e,a){e.dropzone({url:"/upload",maxFilesize:100,paramName:"uploadfile",maxThumbnailFilesize:5,init:function(){t.files.push({file:"added"}),this.on("success",function(t,e){}),this.on("addedfile",function(e){t.$apply(function(){alert(e),t.files.push({file:"added"})})}),this.on("drop",function(t){alert("file")})}})}}function chatSlimScroll(t){return{restrict:"A",link:function(e,a){t(function(){a.slimscroll({height:"234px",railOpacity:.4})})}}}function customValid(){return{require:"ngModel",link:function(t,e,a,r){t.$watch(a.ngModel,function(){var e="Inspinia";t.extras==e?r.$setValidity("cvalid",!0):r.$setValidity("cvalid",!1)})}}}function fullScroll(t){return{restrict:"A",link:function(e,a){t(function(){a.slimscroll({height:"100%",railOpacity:.9})})}}}function slimScroll(t){return{restrict:"A",scope:{boxHeight:"@"},link:function(e,a){t(function(){a.slimscroll({height:e.boxHeight,railOpacity:.9})})}}}function clockPicker(){return{restrict:"A",link:function(t,e){e.clockpicker()}}}function landingScrollspy(){return{restrict:"A",link:function(t,e,a){e.scrollspy({target:".navbar-fixed-top",offset:80})}}}function fitHeight(){return{restrict:"A",link:function(t,e){e.css("height",$(window).height()+"px"),e.css("min-height",$(window).height()+"px")}}}function channelDiv(){return{restrict:"E",scope:{channel:"= "},template:'<div class="col-lg-4"></div>'}}function chartHeight(){return{controller:["$scope","$element",function(t,e){this.chartHeight=e[0].offsetHeight}]}}function sizeWatcher(){return{require:"^chartHeight",scope:{sizeWatcherHeight:"=",sizeWatcherWidth:"="},link:function(t,e,a,r){var s,i=t.sizeWatcherWidth.length;s=i<=2?1:i>2&&i<=4?2:3;var o=Math.ceil(i/s);if(void 0!=r.chartHeight&&0!=r.chartHeight){if(void 0==t.sizeWatcherHeight||0==t.sizeWatcherHeight){var n=r.chartHeight;t.sizeWatcherHeight=Math.ceil(.2*n/o)}}else void 0==t.sizeWatcherHeight&&0==t.sizeWatcherHeight&&(t.sizeWatcherHeight=e.prop("offsetHeight"))}}}function expSizeWatcher(){return{scope:{expSizeWatcherHeight:"="},link:function(t,e,a,r){void 0==t.expSizeWatcherHeight&&0==t.expSizeWatcherHeight&&(t.expSizeWatcherHeight=e.prop("offsetHeight"))}}}function fileModel(t){return{restrict:"A",link:function(e,a,r){var s=t(r.fileModel),i=s.assign;a.bind("change",function(){e.$apply(function(){i(e,a[0].files[0])})})}}}function MainCtrl(t,e,a,r){t.navbarHeight=window.innerHeight,t.IntroOptions={steps:[{element:"#step8",intro:"Blank Dashboard - Click here to create a new blank dashboard. Create dashboards to organize your widgets and monitor them.",position:"right"},{element:"#step9",intro:"Dashboard Templates - Ready made pre-built dashboards comprising of specific curated widgets to address an unique theme or purpose. They provide a great way to quickly get your dashboard created rather than building it one widget at a time.",position:"right"},{element:"#step10",intro:"Reports - Take complete control of your reporting. Easily build reports with custom logos, custom text and export them as professional looking PDFs. White label your reports and use your own logo to send reports.",position:"right"},{element:"#step11",intro:"Get it, use it.",position:"bottom"},{element:"#step12",intro:"Get it, use it.",position:"left"},{element:"#step13",intro:"Get it, use it.",position:"left"},{element:"#step14",intro:"Get it, use it.",position:"left"},{element:"#soonModel",intro:"Get it, use it.",position:"left"},{element:"#step15",intro:"Get it, use it.",position:"left"},{element:"#step17",intro:"Get it, use it.",position:"left"}],showStepNumbers:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"<strong>Previous</strong>",skipLabel:'<span style="color:red">Exit</span>',doneLabel:'<span style="color:green">Thanks</span>'},window.addEventListener("resize",function(e){t.navbarHeight=window.innerHeight}),e.dropDownActive=!1,t.ShouldAutoStart=!1,e.$on("$stateChangeSuccess",function(a,r,s,i,o){e.currentStateForIntro=r.name,"app.reporting.dashboard"==e.currentStateForIntro?t.IntroOptions={steps:[{element:"#step1",intro:"Name all your dashboards here the way you see fit for easy organization",position:"bottom"},{element:"#step2",intro:"Choose the date range for which you want to analyze the data of your dashboard widgets",position:"bottom"},{element:"#step3",intro:"Add new widgets to your dashboards from all our integrated channels. Choose your channels followed by the metrics. Choose the profiles for which your want to see the data for your chosen metrics.",position:"left"},{element:"#step4",intro:"Take relevant metrics from two different channels and fuse them together to spot interesting correlations and trends.",position:"left"},{element:"#step5",intro:"Arrange all the widgets in your dashboard in a presentable manner with a single click.",position:"left"},{element:"#step6",intro:"Export the current dashboard in different available formats. Also share the url of this dashboard to people who require view access for analysis.",position:"left"},{element:"#step7",intro:"Click here to delete your current dashboard.",position:"left"},{element:"#step8",intro:"Blank Dashboard - Click here to create a new blank dashboard. Create dashboards to organize your widgets and monitor them.",position:"right"},{element:"#step9",intro:"Dashboard Templates - Ready made pre-built dashboards comprising of specific curated widgets to address an unique theme or purpose. They provide a great way to quickly get your dashboard created rather than building it one widget at a time.",position:"right"},{element:"#step10",intro:"Reports - Take complete control of your reporting. Easily build reports with custom logos, custom text and export them as professional looking PDFs. White label your reports and use your own logo to send reports.",position:"right"},{element:"#step11",intro:"Quickly navigate back and forth between your recent dashboards in a single click. Get a complete view of all your dashboards by clicking on All dashboards",position:"bottom"},{element:"#step12",intro:"Navigate to handle all your account related features and settings through this menu.",position:"left"},{element:"#step13",intro:"View and manage (create/edit/delete) all the social/digital profiles whose health you want to monitor in your dashboards.",position:"left"},{element:"#step14",intro:"View your account plan and status, invoice history and manage/upgrade your account.",position:"left"},{element:"#soonModel",intro:"View and manage all the users from your team whom you would like to use and benefit from Datapoolt",position:"left"},{element:"#step15",intro:"Have a quick tour and understand the features available in Datapoolt",position:"left"},{element:"#step17",intro:"Click here to logout of Datapoolt till you visit again soon",position:"left"}],showStepNumbers:!0,exitOnOverlayClick:!1,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"<strong>Previous</strong>",skipLabel:'<span style="color:red">Exit</span>',doneLabel:'<span style="color:green">Thanks</span>'}:t.IntroOptions={steps:[{element:"#step8",intro:"Blank Dashboard - Click here to create a new blank dashboard. Create dashboards to organize your widgets and monitor them.",position:"right"},{element:"#step9",intro:"Dashboard Templates - Ready made pre-built dashboards comprising of specific curated widgets to address an unique theme or purpose. They provide a great way to quickly get your dashboard created rather than building it one widget at a time.",position:"right"},{element:"#step10",intro:"Reports - Take complete control of your reporting. Easily build reports with custom logos, custom text and export them as professional looking PDFs. White label your reports and use your own logo to send reports.",position:"right"},{element:"#step11",intro:"Quickly navigate back and forth between your recent dashboards in a single click. Get a complete view of all your dashboards by clicking on All dashboards",position:"bottom"},{element:"#step12",intro:"Navigate to handle all your account related features and settings through this menu.",position:"left"},{element:"#step13",intro:"View and manage (create/edit/delete) all the social/digital profiles whose health you want to monitor in your dashboards.",position:"left"},{element:"#step14",intro:"View your account plan and status, invoice history and manage/upgrade your account.",position:"left"},{element:"#soonModel",intro:"View and manage all the users from your team whom you would like to use and benefit from Datapoolt",position:"left"},{element:"#step15",intro:"Have a quick tour and understand the features available in Datapoolt",position:"left"},{element:"#step17",intro:"Click here to logout of Datapoolt till you visit again soon",position:"left"}],showStepNumbers:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"<strong>Previous</strong>",skipLabel:'<span style="color:red">Exit</span>',doneLabel:'<span style="color:green">Thanks</span>'}}),t.CompletedEvent=function(t){e.dropDownActive=!1,document.getElementById("myDropdown").classList.remove("show")},t.ExitEvent=function(t){e.dropDownActive=!1,document.getElementById("myDropdown").classList.remove("show")},t.ChangeEvent=function(t,e){},t.BeforeChangeEvent=function(t,a){"step13"==t.id||"step14"==t.id||"step15"==t.id||"step16"==t.id||"step17"==t.id||"soonModel"==t.id?(e.dropDownActive=!0,document.getElementById("myDropdown").classList.contains("show")||document.getElementById("myDropdown").classList.add("show")):e.dropDownActive=!1},t.AfterChangeEvent=function(t,e){},this.daterange={startDate:null,endDate:null},this.slideInterval=5e3,this.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],this.persons=[{id:"1",firstName:"Monica",lastName:"Smith"},{id:"2",firstName:"Sandra",lastName:"Jackson"},{id:"3",firstName:"John",lastName:"Underwood"},{id:"4",firstName:"Chris",lastName:"Johnatan"},{id:"5",firstName:"Kim",lastName:"Rosowski"}],this.checkOne=!0,this.checkTwo=!0,this.checkThree=!0,this.checkFour=!0,this.knobOne=75,this.knobTwo=25,this.knobThree=50,this.bigTotalItems=175,this.bigCurrentPage=1,this.maxSize=5,this.singleModel=1,this.radioModel="Middle",this.checkModel={left:!1,middle:!0,right:!1},this.groups=[{title:"Dynamic Group Header - 1",content:"Dynamic Group Body - 1"},{title:"Dynamic Group Header - 2",content:"Dynamic Group Body - 2"}],this.alerts=[{type:"danger",msg:"Oh snap! Change a few things up and try submitting again."},{type:"success",msg:"Well done! You successfully read this important alert message."},{type:"info",msg:"OK, You are done a great job man."}],this.addAlert=function(){this.alerts.push({msg:"Another alert!"})},this.closeAlert=function(t){this.alerts.splice(t,1)},this.randomStacked=function(){this.stacked=[];for(var t=["success","info","warning","danger"],e=0,a=Math.floor(4*Math.random()+1);e<a;e++){var r=Math.floor(4*Math.random());this.stacked.push({value:Math.floor(30*Math.random()+1),type:t[r]})}},this.randomStacked(),this.summernoteText=["<h3>Hello Jonathan! </h3>","<p>dummy text of the printing and typesetting industry. <strong>Lorem Ipsum has been the dustrys</strong> standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more","recently with</p>"].join(""),this.BarChart={data:[5,3,9,6,5,9,7,3,5,2,4,7,3,2,7,9,6,4,5,7,3,2,1,0,9,5,6,8,3,2,1],options:{fill:["#1ab394","#d7d7d7"],width:100}},this.BarChart2={data:[5,3,9,6,5,9,7,3,5,2],options:{fill:["#1ab394","#d7d7d7"]}},this.BarChart3={data:[5,3,2,-1,-3,-2,2,3,5,2],options:{fill:["#1ab394","#d7d7d7"]}},this.LineChart={data:[5,9,7,3,5,2,5,3,9,6,5,9,4,7,3,2,9,8,7,4,5,1,2,9,5,4,7],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.LineChart2={data:[3,2,9,8,47,4,5,1,2,9,5,4,7],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.LineChart3={data:[5,3,2,-1,-3,-2,2,3,5,2],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.LineChart4={data:[5,3,9,6,5,9,7,3,5,2],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.PieChart={data:[1,5],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart2={data:[226,360],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart3={data:[.52,1.561],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart4={data:[1,4],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart5={data:[226,134],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart6={data:[.52,1.041],options:{fill:["#1ab394","#d7d7d7"]}}}function CustomWidgetController(t,e){t.remove=function(e){t.dashboard.widgets.splice(t.dashboard.widgets.indexOf(e),1)},t.openSettings=function(a){e.open({scope:t,backdrop:!0,templateUrl:"fusion_settings.ejs",controller:"FusionSettingsController",resolve:{widget:function(){return a}}})}}function customReportController(t,e,a,r,s,i,o,n,c){t.customReportId,t.reportId,t.reportType=null,t.loading=!1,t.reportLoading=!1,t.exportReportLoading=!0,t.$window=s,t.autoArrangeGrid=!1,t.currentDate=moment(new Date).format("YYYY-DD-MM"),t.widgetDataLength=0,t.displayDate=moment(new Date).format("MMM Do YY"),t.displayHeader,t.reportNotSupported=!1,t.exportReportPages=[],t.stepActive="step1",t.customReport={widgets:[],widgetData:[]},t.orgLogosList=[],t.cliLogosList=[];var l=c.defer();t.orgLogoSrc="/userFiles/datapoolt.png",t.cliLogoSrc="/userFiles/plain-white.jpg",t.docHeight=window.innerHeight,t.docHeight=t.docHeight-60,t.reportNotSupported=!1,window.innerWidth>=1100?t.docWidth=window.innerWidth-1080:window.innerWidth>=992?t.docWidth=window.innerWidth-990:window.innerWidth>=767?t.docWidth=window.innerWidth-720:t.reportNotSupported=!0,t.sideSpace=Math.floor(t.docWidth/2),t.selectedIconIndicator=function(t,e){if("cli"==t){var a=$(".cliIcon");a.removeClass("selectIcon"),$("#"+e).addClass("selectIcon")}else if("org"==t){var a=$(".orgIcon");a.removeClass("selectIcon"),$("#"+e).addClass("selectIcon")}},t.fetchLogosFromDB=function(e){var a={accType:e};r({method:"post",url:"/api/v1/fetchLogoToPdf/dashboard",data:a}).then(function(a){"org"==e?t.orgLogosList=JSON.parse(JSON.stringify(a.data.logosInDB)):"cli"==e&&(t.cliLogosList=JSON.parse(JSON.stringify(a.data.logosInDB)))},function(e){t.orgLogosList=[],t.cliLogosList=[],swal({title:"",text:'<span style="sweetAlertFont">Something went wrong! Please reload the dashboard</span>',html:!0})})},t.submitUpload=function(e,a){var s={file:e,accType:a},i="/api/v1/createLogoToPdf/createFolder",o=new FormData,n=e.type.split("/");if("png"==n[1]||"bmp"==n[1]||"jpg"==n[1]||"jpeg"==n[1]){for(var c in s)o.append(c,s[c]);r.post(i,o,{transformRequest:angular.indentity,headers:{"Content-Type":void 0}}).then(function(e){document.getElementById("orgUploadButton").disabled=!0,document.getElementById("clientUploadButton").disabled=!0,t.fetchLogosFromDB(a)},function(t){swal({title:"",text:'<span style="sweetAlertFont">Something went wrong! Please try again later</span>',html:!0})})}else swal({title:"",text:'<span style="sweetAlertFont">Please Upload Only Image files(.jpg,.png,.jpeg,.bmp)</span>',html:!0})},t.removeLogo=function(e,a){var s={fileUrl:e.fileUrl,accType:a};r({method:"POST",url:"/api/v1/removeLogoToPdf/dashboard",data:s}).then(function(r){e.fileUrl==t.orgLogoSrc?t.orgLogoSrc="/userFiles/datapoolt.png":e.fileUrl==t.cliLogoSrc&&(t.cliLogoSrc="/userFiles/plain-white.jpg"),t.fetchLogosFromDB(a)},function(t){swal({title:"",text:'<span style="sweetAlertFont">Something went wrong! Please try again later</span>',html:!0})})},t.enableUploadbutton=function(t){"org"==t?document.getElementById("orgUploadButton").disabled=!1:"cli"==t&&(document.getElementById("clientUploadButton").disabled=!1)},t.selectedOrgLogo=function(e){t.orgLogoSrc=e},t.selectedCliLogo=function(e){t.cliLogoSrc=e},t.exportReportGridsterOptions={margins:[10,20],columns:10,rows:11,minRows:11,maxRows:500,defaultSizeX:10,defaultSizeY:2,minSizeX:10,minSizeY:1,swapping:!0,floating:!1,pushing:!0,width:"auto",colWidth:"auto",draggable:{enabled:!1},outerMargin:!0,mobileBreakPoint:768,mobileModeEnabled:!0,resizable:{enabled:!1}},t.printReportInPDF=function(){var e=[];angular.copy(t.customReport.widgets,e);var a=[],r=0,s=0;do{var i=[];t:for(var o in e){if(e[o].pageNumber!=r)break t;if("pageBreakWidget"==e[o].widgetType)e[o]=null;else if("reportParaWidget"==e[o].widgetType||"reportHeadingWidget"==e[o].widgetType)i.push({pageNumber:r,row:s,col:0,sizeY:"reportHeadingWidget"!=typeof e[o].widgetType?e[o].sizeY:1,sizeX:12,widgetType:e[o].widgetType,name:"undefined"!=typeof e[o].name?e[o].name:"",id:e[o].id,textData:e[o].textData||""}),s+=e[o].sizeY,e[o]=null;else{e[o].id;i.push({pageNumber:r,row:s,col:0,sizeY:"undefined"!=typeof e[o].sizeY?e[o].sizeY:4,sizeX:12,name:"undefined"!=typeof e[o].name?e[o].name:"",widgetType:"undefined"!=typeof e[o].widgetType?e[o].widgetType:"",id:e[o].id,visibility:!1,channelName:"undefined"!=typeof e[o].channelName?e[o].channelName:"",dashboardId:"undefined"!=typeof e[o].dashboardId?e[o].dashboardId:""}),s+=e[o].sizeY,e[o]=null}}for(var n=e.length,c=[],l=0;l<n;l++)null!=e[l]&&c.push(e[l]);e=[],e=c,a[r]=i,s=0,++r}while(e.length>0);t.exportReportPages=a,t.reportLoading=!1,t.stepActive="step3";for(var h in t.customReport.widgetData)t.customReport.widgetData[h].visibility=!0},t.exportReportinPDF=function(){$("#reportDownloadButton").disabled=!0,$("#reportDownloadButton").addClass("exportDisabled"),$("#reportEditButton").disabled=!0,$("#reportEditButton").addClass("exportDisabled"),$(".navbar").css("z-index","1"),$(".md-overlay").css("background","rgba(0,0,0,0.5)"),$("#reportPDFModalContent").addClass("md-show"),$(".reportPdfHeadText").hide(),$(".pdfContentText").html("<b>Please wait while the PDF file is being generated</b>"),$(".loadingStatus").show();var e=[],a=[];t.exportPromise=function(t){var e=c.defer();return domtoimage.toPng(t).then(function(t){e.resolve(t)},function(t){e.reject(t),console.log("Dom to image fails",t)}),e.promise};for(var s=0;s<t.exportReportPages.length;s++)e[s]=document.getElementById("gridsterItemsInReport-"+s),a.push(t.exportPromise(e[s]));c.all(a).then(function(e){var a={dashboardLayout:e,dashboardId:i.params.id,dashboardName:t.customReport.reportName};r({method:"POST",url:"/api/v1/createHtml5ToPdf/report",data:a}).then(function(e){$("#exportOptionPDF").prop("checked",!1);var a=(Number(new Date),"");a="localhost"==window.location.hostname?"http://localhost:8080":"";var s=String(a+e.data.Response);$("#reportPDFModalContent").removeClass("md-show"),$(".md-overlay").css("background","rgba(0,0,0,0.5)"),$("#reportPDFModalContent").addClass("md-show"),$(".loadingStatus").hide(),$(".reportPdfHeadText").show().text("PDF has been generated successfully").css({"font-style":"normal",color:"#232c3b"}),$(".pdfContentText").html('<b><br/><a href="'+s+'" download style="color: green;"  id="yourLinkID">Click here to download your PDF</a></b>');var i={reportId:t.reportId,pdfLink:s};r({method:"POST",url:"/api/v1/create/reports",data:i}).then(function(t){"200"==t.status&&($("#reportDownloadButton").disabled=!1),$("#reportDownloadButton").removeClass("exportDisabled"),$("#reportEditButton").disabled=!1,$("#reportEditButton").removeClass("exportDisabled")},function(t){$("#reportDownloadButton").disabled=!1,$("#reportDownloadButton").removeClass("exportDisabled"),$("#reportEditButton").disabled=!1,$("#reportEditButton").removeClass("exportDisabled")})},function(t){$("#reportPDFModalContent").removeClass("md-show"),$(".md-overlay").css("background","rgba(0,0,0,0.5)"),$("#reportPDFModalContent").addClass("md-show"),$(".loadingStatus").hide(),$(".reportPdfHeadText").show().text("Uh-Oh!!").css({"font-style":"normal",color:"red"}),$(".pdfContentText").html("<b>Something went wrong. Please try again</b>"),$("#reportDownloadButton").disabled=!1,$("#reportDownloadButton").removeClass("exportDisabled"),$("#reportEditButton").disabled=!1,$("#reportEditButton").removeClass("exportDisabled")})},function(t){swal({title:"",text:'<span style = "sweetAlertFont"> Sorry..! PDF download failed. </span>',html:!0})})},t.reportPdfPreview=function(a){if("step3"==a){t.summaryAlignLessThanThree=[],t.toDisplayAllSummary=[],t.reportLoading=!0;for(var r in t.customReport.widgetData)t.customReport.widgetData[r].visibility=!1;e(function(){t.printReportInPDF()},1500)}else if("step2"==a)t.reportLoading=!0,t.fetchLogosFromDB("org"),t.fetchLogosFromDB("cli"),t.reportLoading=!1,t.stepActive=a;else{t.stepActive=a;for(var r in t.customReport.widgetData)t.customReport.widgetData[r].visibility=!0}},t.customReportConfiguration=function(){function o(e,a,s){var o={reportId:i.params.id,startDate:e,endDate:a};r({method:"POST",url:"/api/v1/create/reports",data:o}).then(function(e){if(200==e.status)t.startDate=e.config.data.startDate,t.endDate=e.config.data.endDate,s===!0?t.userModifyDate(t.startDate,t.endDate):t.populateReportWidgets();else{this.start_date,this.end_date;t.populateReportWidgets()}},function(e){this.start_date,this.end_date;t.populateReportWidgets()})}t.reportLoading=!0,t.dashboardWidgets=[],t.reportPagesDetails=[],t.reportWidgetsListArray=[],t.customReport.reportName="",t.widgetsPresent=!1,t.loadedWidgetCount=0,t.startDate,t.endDate,t.empWidget={col:0,sizeY:1,sizeX:10,name:"Page Options"},t.setChartSize=function(t,a){function r(){if(null!=document.getElementById("chartOptions"+t)){var e=document.getElementById("chartOptions"+t).offsetWidth,r=document.getElementById("chartOptions"+t).offsetHeight;document.getElementById("chartRepeat"+t+"-"+a).style.height=r+"px",document.getElementById("chartRepeat"+t+"-"+a).style.width=e+"px"}}e(r,100)},t.setChartSizeInReport=function(t,a,r){function s(){if(null!=document.getElementById("reportChartOptions-"+t+"-"+a)){var e=document.getElementById("reportChartOptions-"+t+"-"+a).offsetWidth,s=document.getElementById("reportChartOptions-"+t+"-"+a).offsetHeight;document.getElementById("reportChartRepeat-"+t+"-"+a+"-"+r).style.height=s+"px",document.getElementById("reportChartRepeat-"+t+"-"+a+"-"+r).style.width=e+"px"}}e(s,100)},t.summaryAlignLessThanThree=[],t.toDisplayAllSummary=[],t.summaryAlignLessThanThreePdf=[],t.toDisplayAllSummaryPdf=[],t.checkAllGraphsZero=function(e,a,r){void 0==t.summaryAlignLessThanThree[a]&&(t.summaryAlignLessThanThree[a]=[]),void 0==t.toDisplayAllSummary[a]&&(t.toDisplayAllSummary[a]=[]);for(var s=0,i=0;i<e.data.length;i++)0===e.data[i].summaryDisplay&&(s+=1);t.summaryAlignLessThanThree[a][r]=e.data.length-s,s===e.data.length?t.toDisplayAllSummary[a][r]=!0:t.toDisplayAllSummary[a][r]=!1},t.checkAllGraphsZeroForReportPdf=function(e,a,r,s){void 0==t.summaryAlignLessThanThreePdf[a]?(t.summaryAlignLessThanThreePdf[a]=[],t.summaryAlignLessThanThreePdf[a][r]=[]):void 0==t.summaryAlignLessThanThreePdf[a][r]&&(t.summaryAlignLessThanThreePdf[a][r]=[]),void 0==t.toDisplayAllSummaryPdf[a]?(t.toDisplayAllSummaryPdf[a]=[],t.toDisplayAllSummaryPdf[a][r]=[]):void 0==t.toDisplayAllSummaryPdf[a][r]&&(t.toDisplayAllSummaryPdf[a][r]=[]);for(var i=0,o=0;o<e.data.length;o++)0===e.data[o].summaryDisplay&&(i+=1);t.summaryAlignLessThanThreePdf[a][r][s]=e.data.length-i,i===e.data.length?t.toDisplayAllSummaryPdf[a][r][s]=!0:t.toDisplayAllSummaryPdf[a][r][s]=!1},t.fetchReportDetails=function(){var e,a="undefined";r({method:"GET",url:"/api/v1/getSubscriptionFromDashboard/"+a}).then(function(t){e=200==t.status?t.data.response.limits.dateRange:365}),r({method:"GET",url:"/api/v1/get/report/null",params:{customReportId:i.params.id}}).then(function(a){function r(t,e){var a=new Date(t),r=new Date(e),s=Math.abs(r.getTime()-a.getTime()),i=Math.ceil(s/864e5);return i}if(200==a.status&&1!=a.data.dashboardDeleted){t.customReportId=a.data.customReportId,t.reportId=a.data._id,t.customReport.reportName=a.data.name,t.reportType=a.data.type;for(var s in a.data.widgets)t.reportWidgetsListArray.push(a.data.widgets[s]),"reportParaWidget"==a.data.widgets[s].widgetType&&"reportHeadingWidget"==a.data.widgets[s].widgetType&&"reportParaWidget"==a.data.widgets[s].widgetType&&void 0==a.data.widgets[s].widgetId&&null==a.data.widgets[s].widgetId||t.dashboardWidgets.push(a.data.widgets[s].widgetId);t.reportWidgetsListArray=_.uniq(t.reportWidgetsListArray),t.dashboardWidgets=_.uniq(t.dashboardWidgets);var i=r(a.data.startDate,new Date),n=r(a.data.endDate,new Date),c=!0;i>=365||n>=365?(t.startDate=moment(new Date).subtract(30,"days"),t.endDate=new Date,o(t.startDate,t.endDate,c)):(t.startDate=a.data.startDate,t.endDate=a.data.endDate,t.userModifyDate(t.startDate,t.endDate,e))}else t.reportLoading=!1,t.stepActive="error",isExportOptionSet=0,211==a.status?swal({title:"",text:'<span style = "sweetAlertFont">Dashboard linked with this report is missing</span>',html:!0}):swal({title:"",text:'<span style = "sweetAlertFont">Error in populating Report! Report Doesnot Exist</span>',html:!0})},function(e){t.reportLoading=!1,t.stepActive="error",401==e.status?swal({title:"",text:'<span style = "sweetAlertFont">Authentication required to perform this action</span>',html:!0}):211==e.status?swal({title:"",text:'<span style = "sweetAlertFont">Dashboard linked with this report is missing</span>',html:!0}):swal({title:"",text:'<span style = "sweetAlertFont">Error in populating Report! Report Doesnot Exist</span>',html:!0}),isExportOptionSet=0})},t.fetchReportDetails(),t.userModifyDate=function(e,a,s){t.dashboardCalendar=new Calendar({element:$(".daterange--double"),earliest_date:moment(new Date).subtract(s,"days"),latest_date:new Date,start_date:e,end_date:a,callback:function(){o(this.start_date,this.end_date),r.pendingRequests.forEach(function(t){t.cancel&&t.cancel.resolve()})}}),t.populateReportWidgets()},t.gridsterOptions={margins:[10,20],columns:10,maxRows:500,defaultSizeX:10,defaultSizeY:2,minSizeX:10,minSizeY:1,
swapping:!0,floating:!0,pushing:!0,width:"auto",colWidth:"auto",draggable:{enabled:!1},outerMargin:!0,mobileBreakPoint:768,mobileModeEnabled:!0,resizable:{enabled:!1}},t.$on("gridster-mobile-changed",function(e,a){t.isMobile=a.isMobile}),t.$on("broadCastUpdateCharts",function(t,e){a.$broadcast("updateWidgetDetailsInReport",{})}),t.updateWidgetsInDb=function(){a.$broadcast("updateWidgetDetailsInReport",{})},angular.element(s).on("resize",function(e){t.reportNotSupported=!1,t.docHeight=window.innerHeight,t.docHeight=t.docHeight-60,window.innerWidth>=1100?t.docWidth=window.innerWidth>1080?window.innerWidth-1080:0:window.innerWidth>=992?t.docWidth=window.innerWidth>990?window.innerWidth-990:0:window.innerWidth>=767?t.docWidth=window.innerWidth>720?window.innerWidth-720:0:t.reportNotSupported=!0,t.sideSpace=Math.floor(t.docWidth/2),"step1"==t.stepActive?t.$broadcast("resize"):"step3"==t.stepActive&&t.$broadcast("report-resize")}),t.$on("resize",function(a){function r(t){return function(){if(null!=document.getElementById("chartOptions"+t))for(var e=document.getElementById("chartOptions"+t).offsetWidth,a=document.getElementById("chartOptions"+t).offsetHeight,r=0;r<Highcharts.charts.length;r++)Highcharts.charts[r].container.parentElement.id.includes("chartRepeat"+t)&&(Highcharts.charts[r].setSize(e,a),Highcharts.charts[r].reflow())}}for(var s=0;s<t.customReport.widgets.length;s++)"reportParaWidget"==t.customReport.widgets[s].widgetType&&"reportHeadingWidget"==t.customReport.widgets[s].widgetType||e(r(s),10)}),t.$on("report-resize",function(a){e(function(){function a(t,e){return function(){if(null!=document.getElementById("reportChartOptions-"+t+"-"+e))for(var a=document.getElementById("reportChartOptions-"+t+"-"+e).offsetWidth,r=document.getElementById("reportChartOptions-"+t+"-"+e).offsetHeight,s=0;s<Highcharts.charts.length;s++)Highcharts.charts[s].container.parentElement.id.includes("reportChartRepeat-"+t+"-"+e)&&(Highcharts.charts[s].setSize(a,r),Highcharts.charts[s].reflow())}}for(var r in t.exportReportPages)for(var s in t.exportReportPages[r])"reportParaWidget"==t.exportReportPages[r][s].widgetType&&"reportHeadingWidget"==t.exportReportPages[r][s].widgetType||e(a(r,s),800)},10)}),t.calculateRowHeight=function(t,e,a,r){t.showComparision=!1,a<6?e>6?t.showComparision=!1:t.showComparision=!0:e>12?t.showComparision=!1:t.showComparision=!0},t.disableTextEdit=function(t,e){t.textAreaHide=e,1==e&&a.$broadcast("updateWidgetDetailsInReport",{})},t.$on("updateWidgetDetailsInReport",function(e,a){var s=[];if(t.customReport.widgets.length>0){for(var i in t.customReport.widgets)"pageBreakWidget"==t.customReport.widgets[i].widgetType?s[i]={name:t.customReport.widgets[i].name,sizeY:t.customReport.widgets[i].sizeY,widgetType:t.customReport.widgets[i].widgetType,row:t.customReport.widgets[i].row,col:t.customReport.widgets[i].col,pageNumber:t.customReport.widgets[i].pageNumber}:(s[i]={widgetId:t.customReport.widgets[i].id,name:t.customReport.widgets[i].name,sizeY:t.customReport.widgets[i].sizeY,widgetType:t.customReport.widgets[i].widgetType,row:t.customReport.widgets[i].row,col:t.customReport.widgets[i].col,pageNumber:t.customReport.widgets[i].pageNumber},"reportParaWidget"==t.customReport.widgets[i].widgetType||"reportHeadingWidget"==t.customReport.widgets[i].widgetType?s[i].textData=t.customReport.widgets[i].textData||"":s[i].dashboardId=t.customReport.widgets[i].dashboardId),"undefined"!=t.customReport.widgets[i].isLastWidgetInPage&&1==t.customReport.widgets[i].isLastWidgetInPage&&(s[i].isLastWidgetInPage=!0,s[i].sizeFilledInPage=t.customReport.widgets[i].sizeFilledInPage,s[i].sizeLeftInPage=t.customReport.widgets[i].sizeLeftInPage),"undefined"!=t.customReport.widgets[i].isFirstWidgetInPage&&1==t.customReport.widgets[i].isFirstWidgetInPage&&(s[i].isFirstWidgetInPage=!0);var o={reportId:t.reportId,widgets:s};r({method:"POST",url:"/api/v1/create/reports",data:o}).then(function(t){toastr.info("Your changes have been saved successfully..!")},function(t){swal({title:"",text:"<span style='sweetAlertFont'>Something is missing! Please refresh the dashboard</span> .",html:!0})})}}),t.toggleLegends=function(e){for(var a in t.customReport.widgetData)if(t.customReport.widgetData[a].id==e)for(var r in t.customReport.widgetData[a].chart)"undefined"!=typeof t.customReport.widgetData[a].chart[r].options.chart.showLegend&&(1==t.customReport.widgetData[a].chart[r].options.chart.showLegend?t.customReport.widgetData[a].chart[r].options.chart.showLegend=!1:t.customReport.widgetData[a].chart[r].options.chart.showLegend=!0)}},a.populateReportWidgets=function(){t.customReport.widgets=[],t.customReport.widgetData={},t.totalPagesinReport=[],t.widgetDataLength=0;var e={widgets:t.dashboardWidgets};r({method:"POST",url:"/api/v1/get/reportWidgets/",timeout:l.promise,cancel:l,data:e}).then(function(e){if($(".dr-dates").attr("contenteditable","false"),e.data)if(e.data.error)isExportOptionSet=0,swal({title:"",text:'<span style = "sweetAlertFont">The requested Report has no widgets</span>',html:!0}),t.reportLoading=!1,t.stepActive="error";else if("null"==t.reportType)swal({title:"",text:'<span style = "sweetAlertFont">Something went wrong.Please try again later.</span>',html:!0}),t.reportLoading=!1,t.stepActive="error";else if("edited"==t.reportType){var r=[];angular.copy(t.reportWidgetsListArray,r);var s=[],i=[],o=e.data;o.length>0?(t.loadedWidgetCount=0,t.widgetsPresent=!0):t.widgetsPresent=!1;var c=[],l=[];angular.copy(o,s);var h=[],p=1;for(var d in r){if(h.push(r[d].pageNumber),"reportParaWidget"==r[d].widgetType)t.customReport.widgets.push({pageNumber:r[d].pageNumber,row:p,col:0,sizeY:"undefined"!=typeof r[d].sizeY?r[d].sizeY:4,sizeX:10,name:"undefined"!=typeof r[d].name?r[d].name:"Paragraph Widget",widgetType:"undefined"!=typeof r[d].widgetType?r[d].widgetType:"reportParaWidget",id:r[d].widgetId,textData:r[d].textData||"",textAreaHide:!0}),p+=r[d].sizeY;else if("reportHeadingWidget"==r[d].widgetType)t.customReport.widgets.push({pageNumber:r[d].pageNumber,row:p,col:0,sizeY:1,sizeX:10,name:"undefined"!=typeof r[d].name?r[d].name:"Heading Widget",widgetType:"undefined"!=typeof r[d].widgetType?r[d].widgetType:"reportHeadingWidget",id:r[d].widgetId,textData:r[d].textData||"",textAreaHide:!0}),p+=1;else if("pageBreakWidget"==r[d].widgetType)t.customReport.widgets.push({pageNumber:r[d].pageNumber,row:p,col:0,sizeY:1,sizeX:10,widgetType:"pageBreakWidget",name:"undefined"!=typeof r[d].row?r[d].name:"Page break"}),p+=1;else{var u=s.map(function(t){return t._id}).indexOf(r[d].widgetId);if(u!=-1){var g=r[d].widgetId;c[g]=n.widgetHandler(s[u],{startDate:moment(t.dashboardCalendar.start_date).format("YYYY-MM-DD"),endDate:moment(t.dashboardCalendar.end_date).format("YYYY-MM-DD")},"public"),t.customReport.widgets.push({pageNumber:r[d].pageNumber,row:p,col:0,sizeY:"undefined"!=typeof r[d].sizeY?r[d].sizeY:8,sizeX:10,name:"undefined"!=typeof r[d].name?r[d].name:"",widgetType:"undefined"!=typeof r[d].widgetType?r[d].widgetType:"",id:r[d].widgetId,visibility:!1,channelName:"undefined"!=typeof s[u].channelName?s[u].channelName:"",dashboardId:"undefined"!=typeof r[d].dashboardId?r[d].dashboardId:""}),p+=r[d].sizeY,t.customReport.widgetData[g]={pageNumber:r[d].pageNumber,id:r[d].widgetId,chart:[],visibility:!1,name:"undefined"!=typeof r[d].name?r[d].name:"",color:"undefined"!=typeof s[u].color?s[u].color:""},t.widgetDataLength+=1,c[g].then(function(e){for(var a in t.customReport.widgetData)t.customReport.widgetData[a].id==e.id&&(t.customReport.widgetData[a]=e,isExportOptionSet=1,t.loadedWidgetCount++)},function(e){401===e.status?($("#widgetData-"+e.data.id).hide(),1003===e.data.errorstatusCode&&($("#widgetData-"+e.data.id).hide(),$("#errorWidgetData-"+e.data.id).hide(),$("#errorWidgetTokenexpire-"+e.data.id).show(),t.widgetErrorCode=1,t.loadedWidgetCount++,isExportOptionSet=0)):(t.loadedWidgetCount++,"undefined"!=typeof e.data.id&&($("#widgetData-"+e.data.id).hide(),$("#errorWidgetData-"+e.data.id).show(),$("#errorWidgetTokenexpire-"+e.data.id).hide(),isExportOptionSet=0))})}}if("undefined"!=r[d].isFirstWidgetInPage&&1==r[d].isFirstWidgetInPage){var m=t.customReport.widgets.length-1;t.customReport.widgets[m].isFirstWidgetInPage=!0,t.reportPagesDetails[r[d].pageNumber]={firstWidgetIndex:m}}if("undefined"!=r[d].isLastWidgetInPage&&1==r[d].isLastWidgetInPage){var m=t.customReport.widgets.length-1;t.reportPagesDetails[r[d].pageNumber]=t.reportPagesDetails[r[d].pageNumber]||{},t.reportPagesDetails[r[d].pageNumber].sizeFilled=r[d].sizeFilledInPage,t.reportPagesDetails[r[d].pageNumber].sizeLeft=r[d].sizeLeftInPage,t.reportPagesDetails[r[d].pageNumber].lastWidgetIndex=m,t.customReport.widgets[m].isLastWidgetInPage=!0,t.customReport.widgets[m].sizeFilledInPage=r[d].sizeFilledInPage,t.customReport.widgets[m].sizeLeftInPage=r[d].sizeLeftInPage}}t.reportLoading=!1}else{var s=[],i=[],o=e.data;for(d in o)1==o[d].visibility&&i.push(o[d]);i.length>0?(t.loadedWidgetCount=0,t.widgetsPresent=!0):t.widgetsPresent=!1;var c=[],l=[];angular.copy(i,s);var f=0,p=1;do{var v={sizeFilled:0,sizeLeft:5,widgetsCount:0};for(var d in s)if((s[d].size.h<2||"undefined"==typeof s[d].size)&&(s[d].size.h=2),s[d].size.h<=v.sizeLeft){var g=s[d]._id;if(c[g]=n.widgetHandler(s[d],{startDate:moment(t.dashboardCalendar.start_date).format("YYYY-MM-DD"),endDate:moment(t.dashboardCalendar.end_date).format("YYYY-MM-DD")},"public"),t.customReport.widgets.push({pageNumber:f,row:p,col:0,sizeY:"undefined"!=typeof s[d].size?2*s[d].size.h:4,sizeX:10,name:"undefined"!=typeof s[d].name?s[d].name:"",widgetType:"undefined"!=typeof s[d].widgetType?s[d].widgetType:"",id:s[d]._id,visibility:!1,channelName:"undefined"!=typeof s[d].channelName?s[d].channelName:"",dashboardId:"undefined"!=typeof s[d].dashboardId?s[d].dashboardId:""}),t.customReport.widgetData[g]={pageNumber:f,id:s[d]._id,chart:[],visibility:!1,name:"undefined"!=typeof s[d].name?s[d].name:"",color:"undefined"!=typeof s[d].color?s[d].color:""},t.widgetDataLength+=1,c[g].then(function(e){for(var a in t.customReport.widgetData)t.customReport.widgetData[a].id==e.id&&(t.customReport.widgetData[a]=e,isExportOptionSet=1,t.loadedWidgetCount++)},function(e){401===e.status?($("#widgetData-"+e.data.id).hide(),1003===e.data.errorstatusCode&&($("#widgetData-"+e.data.id).hide(),$("#errorWidgetData-"+e.data.id).hide(),$("#errorWidgetTokenexpire-"+e.data.id).show(),t.widgetErrorCode=1,t.loadedWidgetCount++,isExportOptionSet=0)):(t.loadedWidgetCount++,"undefined"!=typeof e.data.id&&($("#widgetData-"+e.data.id).hide(),$("#errorWidgetData-"+e.data.id).show(),$("#errorWidgetTokenexpire-"+e.data.id).hide(),isExportOptionSet=0))}),5==v.sizeLeft){var m=t.customReport.widgets.length-1;t.customReport.widgets[m].isFirstWidgetInPage=!0,t.reportPagesDetails[f]={firstWidgetIndex:m}}p+=2*s[d].size.h,v.sizeLeft-=s[d].size.h,v.sizeFilled+=s[d].size.h,++v.widgetsCount,s[d]=null}if(v.widgetsCount>0){var m=t.customReport.widgets.length-1;t.reportPagesDetails[f]=t.reportPagesDetails[f]||{},t.reportPagesDetails[f].sizeFilled=2*v.sizeFilled,t.reportPagesDetails[f].sizeLeft=2*v.sizeLeft,t.reportPagesDetails[f].lastWidgetIndex=m,t.customReport.widgets[m].isLastWidgetInPage=!0,t.customReport.widgets[m].sizeFilledInPage=2*v.sizeFilled,t.customReport.widgets[m].sizeLeftInPage=2*v.sizeLeft,t.customReport.widgets.push({pageNumber:f,row:p,col:0,sizeY:1,sizeX:10,widgetType:"pageBreakWidget",name:"Page Break"})}++p;for(var y=s.length,D=[],b=0;b<y;b++)null!=s[b]&&D.push(s[b]);s=[],s=D,l[f]=v,++f}while(s.length>0);t.reportLoading=!1,a.$broadcast("updateWidgetDetailsInReport",{})}else isExportOptionSet=0,swal({title:"",text:'<span style = "sweetAlertFont">The requested Report has been deleted</span>',html:!0}),t.reportLoading=!1,t.stepActive="error"},function(e){swal({title:"",text:'<span style = "sweetAlertFont">Error in populating widgets! Please refresh the Report again</span>',html:!0}),isExportOptionSet=0,t.reportLoading=!1,t.stepActive="error"})},t.arrangingWidgetsinReport=function(e,a,r){var s,i=c.defer(),o=r;if(void 0==t.reportPagesDetails[a])t.reportPagesDetails[a]={sizeFilled:1,sizeLeft:9,firstWidgetIndex:t.customReport.widgets.length,lastWidgetIndex:t.customReport.widgets.length},t.customReport.widgets.push({pageNumber:a,row:o+1,col:0,sizeY:1,sizeX:10,widgetType:"pageBreakWidget",name:"Avaliable Options"}),e.isFirstWidgetInPage=!0,e.isLastWidgetInPage=!0,e.sizeLeftInPage=9,e.sizeFilledInPage=1,s=t.customReport.widgets.length-1,i.resolve(s);else if(e.sizeY<=t.reportPagesDetails[a].sizeLeft){s=t.reportPagesDetails[a].firstWidgetIndex;var n=t.reportPagesDetails[a].lastWidgetIndex;t.reportPagesDetails[a].sizeLeft-=e.sizeY,t.reportPagesDetails[a].sizeFilled+=e.sizeY,++t.reportPagesDetails[a].lastWidgetIndex;for(var l=s;l<=n;l++)1==t.customReport.widgets[l].isLastWidgetInPage&&(t.customReport.widgets[n].sizeFilledInPage=t.reportPagesDetails[a].sizeFilled,t.customReport.widgets[n].sizeLeftInPage=t.reportPagesDetails[a].sizeLeft);e.isFirstWidgetInPage=!0,t.customReport.widgets[s].isFirstWidgetInPage=!1;for(var h=a+1;h<t.reportPagesDetails.length;h++)++t.reportPagesDetails[h].firstWidgetIndex,++t.reportPagesDetails[h].lastWidgetIndex;i.resolve(s)}else{s=t.reportPagesDetails[a].firstWidgetIndex;var p=a;e.isFirstWidgetInPage=!0,t.customReport.widgets[s].isFirstWidgetInPage=!1;var d=t.customReport.widgets.slice(s);d[0].row+=e.sizeY;var o=d[0].row,u={sizeFilled:1,sizeLeft:9,widgetsCount:0};t:do{var g;e:for(var m in d)if("pageBreakWidget"==d[m].widgetType){var f=t.customReport.widgets.map(function(t){return t}).indexOf(d[m]);f>-1&&(t.customReport.widgets.splice(f,1),d[m]=null)}else if(g=t.customReport.widgets.map(function(t){return t.id}).indexOf(d[m].id),g!=-1){if(!(d[m].sizeY<=u.sizeLeft)){t.reportPagesDetails[p]=t.reportPagesDetails[p]||{},t.reportPagesDetails[p].sizeFilled=u.sizeFilled,t.reportPagesDetails[p].sizeLeft=u.sizeLeft,t.reportPagesDetails[p].lastWidgetIndex=g,t.customReport.widgets[g-1].isLastWidgetInPage=!0,t.customReport.widgets[g-1].sizeFilledInPage=u.sizeFilled,t.customReport.widgets[g-1].sizeLeftInPage=u.sizeLeft,t.customReport.widgets.splice(g,0,{pageNumber:p,row:o,col:0,sizeY:1,sizeX:10,widgetType:"pageBreakWidget",name:"Avaliable Options"}),o+=1,u.newPage=!0;break e}if(d[m].pageNumber>p){t.reportPagesDetails[p]=t.reportPagesDetails[p]||{},t.reportPagesDetails[p].sizeFilled=u.sizeFilled,t.reportPagesDetails[p].sizeLeft=u.sizeLeft,t.reportPagesDetails[p].lastWidgetIndex=g-1,t.customReport.widgets[g-1].isLastWidgetInPage=!0,t.customReport.widgets[g-1].sizeFilledInPage=u.sizeFilled,t.customReport.widgets[g-1].sizeLeftInPage=u.sizeLeft,t.customReport.widgets.splice(g,0,{pageNumber:p,row:o,col:0,sizeY:1,sizeX:10,widgetType:"pageBreakWidget",name:"Avaliable Options"}),o+=1;for(var h=d[m].pageNumber;h<t.reportPagesDetails.length;h++)++t.reportPagesDetails[h].firstWidgetIndex,++t.reportPagesDetails[h].lastWidgetIndex;break t}t.customReport.widgets[g].row=o,1==t.customReport.widgets[g].isLastWidgetInPage&&(t.customReport.widgets[g].isLastWidgetInPage=!1),1==t.customReport.widgets[g].isFirstWidgetInPage&&(t.customReport.widgets[g].isFirstWidgetInPage=!1),t.customReport.widgets[g].pageNumber=p,10==u.sizeLeft&&(t.customReport.widgets[g].isFirstWidgetInPage=!0,t.reportPagesDetails[p]={firstWidgetIndex:g+1}),o+=d[m].sizeY,u.sizeLeft-=d[m].sizeY,u.sizeFilled+=d[m].sizeY,u.newPage=!1,++u.widgetsCount,d[m]=null}var v=d.length,y=[];"undefined"!=u.newPage&&1!=u.newPage&&(t.reportPagesDetails[p]=t.reportPagesDetails[p]||{},t.reportPagesDetails[p].sizeFilled=u.sizeFilled,t.reportPagesDetails[p].sizeLeft=u.sizeLeft,t.reportPagesDetails[p].lastWidgetIndex=g+1,t.customReport.widgets[g].isLastWidgetInPage=!0,t.customReport.widgets[g].sizeFilledInPage=u.sizeFilled,t.customReport.widgets[g].sizeLeftInPage=u.sizeLeft,t.customReport.widgets.splice(g+1,0,{pageNumber:p,row:o,col:0,sizeY:1,sizeX:10,widgetType:"pageBreakWidget",name:"Avaliable Options"}),o+=1);for(var D=0;D<v;D++)null!=d[D]&&y.push(d[D]);d=[],d=y,++p,u={sizeFilled:0,sizeLeft:10,widgetsCount:0}}while(d.length>0);t.$broadcast("resize"),i.resolve(s)}return i.promise},t.addTextWidget=function(s,i,o,n){var l=[],h=n,p=[];angular.copy(t.customReport.widgets,p),"reportParaWidget"==s?l.push({reportId:t.reportId,row:h,col:0,sizeY:1,sizeX:10,widgetType:s,name:"Paragraph Widget",textData:""}):l.push({reportId:t.reportId,row:h,col:0,sizeY:1,sizeX:10,widgetType:s,name:"Heading Widget",textData:""}),r({method:"POST",url:"/api/v1/create/textWidgets",data:l}).then(function(r){var o,n={id:r.data.widgetsList[0]._id,pageNumber:i,row:h,col:0,sizeY:l[0].sizeY,sizeX:10,widgetType:s,name:l[0].name,textData:"",textAreaHide:!1},d=[];d.push(t.arrangingWidgetsinReport(n,i,h)),c.all(d).then(function(r){function s(){a.$broadcast("updateWidgetDetailsInReport",{widgets:t.customReport.widgets})}o=r[0],t.customReport.widgets.splice(o,0,n),e(s,2e3)},function(r){function s(){a.$broadcast("updateWidgetDetailsInReport",{widgets:t.customReport.widgets})}t.customReport.widgets=p,e(s,2e3),swal({title:"",text:"<span style='sweetAlertFont'>Cannot Insert Widget at this moment! Please refresh the report</span> .",html:!0}),t.populateReportWidgets()})},function(t){swal({title:"",text:"<span style='sweetAlertFont'>Something is missing! Cannot Insert Widget at this moment!</span> .",html:!0})})},t.deleteWidgetFromReport=function(r){var s=r.pageNumber,i=t.customReport.widgets.indexOf(r);t.reportPagesDetails[s].sizeLeft+=r.sizeY,t.reportPagesDetails[s].sizeFilled-=r.sizeY,t.customReport.widgets.splice(i,1),t.reportPagesDetails[s].lastWidgetIndex>0&&--t.reportPagesDetails[s].lastWidgetIndex;var o;o=i;var n=t.reportPagesDetails[s].lastWidgetIndex;if("pageBreakWidget"!=t.customReport.widgets[n].widgetType&&(t.customReport.widgets[n].sizeFilledInPage=t.reportPagesDetails[s].sizeFilled,t.customReport.widgets[n].sizeLeftInPage=t.reportPagesDetails[s].sizeLeft),0==t.reportPagesDetails[s].sizeFilled||10==t.reportPagesDetails[s].sizeLeft){if("pageBreakWidget"==t.customReport.widgets[i].widgetType){t.customReport.widgets.splice(i,1),t.reportPagesDetails.splice(s,1);for(var c=i;c<t.customReport.widgets.length;c++)t.customReport.widgets[c].pageNumber-=1;for(var l=s;l<t.reportPagesDetails.length;l++)t.reportPagesDetails[l].firstWidgetIndex-=2,t.reportPagesDetails[l].lastWidgetIndex-=2}}else{1==r.isLastWidgetInPage&&(t.customReport.widgets[n].isLastWidgetInPage=!0),1==r.isFirstWidgetInPage&&(t.customReport.widgets[o].isFirstWidgetInPage=!0);for(var l=s+1;l<t.reportPagesDetails.length;l++)--t.reportPagesDetails[l].firstWidgetIndex,--t.reportPagesDetails[l].lastWidgetIndex}e(function(){a.$broadcast("updateWidgetDetailsInReport",{})},3e3),"reportHeadingWidget"==r.widgetType||"reportParaWidget"==r.widgetType?t.deleteWidgetInDB(r):(delete t.customReport.widgetData[r.id],t.loadedWidgetCount-=1,t.widgetDataLength-=1)},t.deleteWidgetInDB=function(t){t.widgetType,t.id;r({method:"POST",url:"/api/v1/delete/textWidgets/"+t.id}).then(function(t){},function(t){swal({title:"",text:'<span style = "sweetAlertFont">Error in deleting the widget! Please try again</span>',html:!0})})},t.changeReportName=function(){var e={reportId:t.reportId,name:t.customReport.reportName};r({method:"POST",url:"/api/v1/create/reports",data:e}).then(function(t){},function(t){swal({title:"",text:"<span style='sweetAlertFont'>Error in changing the name! Please try again</span> .",html:!0})})},t.changeFooterText=function(e){t.displayDate=e},t.changeHeaderText=function(e){t.displayHeader=e},t.swapArrayElements=function(e,a){var r=t.customReport.widgets[e];t.customReport.widgets[e]=t.customReport.widgets[a],t.customReport.widgets[a]=r},t.pushUpWidget=function(a,r){var s={};angular.copy(a,s);var i=s.pageNumber,r=r;if(1==s.isFirstWidgetInPage){var o=t.reportPagesDetails[i-1].lastWidgetIndex;if(t.reportPagesDetails[i-1].sizeLeft>=s.sizeY){t.customReport.widgets[r].pageNumber-=1,t.customReport.widgets[r].row=t.customReport.widgets[r-1].row,t.customReport.widgets[r].isFirstWidgetInPage=!1,t.reportPagesDetails[i-1].sizeFilled+=s.sizeY,t.reportPagesDetails[i-1].sizeLeft-=s.sizeY;var n=t.reportPagesDetails[i-1].lastWidgetIndex;if(t.customReport.widgets[n].isLastWidgetInPage=!1,t.reportPagesDetails[i-1].lastWidgetIndex+=1,t.customReport.widgets[r].sizeFilledInPage=t.reportPagesDetails[i-1].sizeFilled,t.customReport.widgets[r].sizeLeftInPage=t.reportPagesDetails[i-1].sizeLeft,t.customReport.widgets[r].isLastWidgetInPage=!0,t.swapArrayElements(r,r-1),1==s.isLastWidgetInPage||t.reportPagesDetails[i].sizeFilled==s.sizeY){if("pageBreakWidget"==t.customReport.widgets[r+1].widgetType){t.customReport.widgets.splice(r+1,1),t.reportPagesDetails.splice(i,1);for(var c=r+1;c<t.customReport.widgets.length;c++)t.customReport.widgets[c].pageNumber-=1;for(var l=i;l<t.reportPagesDetails.length;l++)t.reportPagesDetails[l].firstWidgetIndex-=1,t.reportPagesDetails[l].lastWidgetIndex-=1}}else{var h=t.reportPagesDetails[i].lastWidgetIndex;t.reportPagesDetails[i].firstWidgetIndex+=1;var p=t.reportPagesDetails[i].firstWidgetIndex;t.reportPagesDetails[i].sizeLeft+=s.sizeY,t.reportPagesDetails[i].sizeFilled-=s.sizeY,t.customReport.widgets[p].isFirstWidgetInPage=!0,t.customReport.widgets[h].sizeFilledInPage=t.reportPagesDetails[i].sizeFilled,t.customReport.widgets[h].sizeLeftInPage=t.reportPagesDetails[i].sizeLeft}}else if(t.customReport.widgets[o].sizeY==s.sizeY){void 0!=t.customReport.widgets[o].isFirstWidgetInPage&&1==t.customReport.widgets[o].isFirstWidgetInPage||(t.customReport.widgets[r].isFirstWidgetInPage=!1),t.customReport.widgets[o].isFirstWidgetInPage=!0,t.customReport.widgets[o].isLastWidgetInPage=!1,1==s.isLastWidgetInPage&&(t.customReport.widgets[o].sizeFilledInPage=t.customReport.widgets[r].sizeFilledInPage||t.reportPagesDetails[i].sizeFilled,t.customReport.widgets[o].sizeLeftInPage=t.customReport.widgets[r].sizeLeftInPage||t.reportPagesDetails[i].sizeLeft,t.customReport.widgets[o].isLastWidgetInPage=!0),t.customReport.widgets[r].sizeFilledInPage=t.reportPagesDetails[i].sizeFilled,t.customReport.widgets[r].sizeLeftInPage=t.reportPagesDetails[i].sizeLeft,t.customReport.widgets[r].isLastWidgetInPage=!0,t.customReport.widgets[r].pageNumber-=1,t.customReport.widgets[o].pageNumber+=1;var d=t.customReport.widgets[r].row;t.customReport.widgets[r].row=t.customReport.widgets[o].row,t.swapArrayElements(r,o),e(function(){t.customReport.widgets[r-1].row=d-1,t.customReport.widgets[r].row=d},800)}else toastr.info("Sorry..! This widget can neither be pushed nor swapped at the moment")}else{1==s.isLastWidgetInPage&&(t.customReport.widgets[r-1].isLastWidgetInPage=!0,t.customReport.widgets[r-1].sizeFilledInPage=t.customReport.widgets[r].sizeFilledInPage||t.reportPagesDetails[i].sizeFilled,t.customReport.widgets[r-1].sizeLeftInPage=t.customReport.widgets[r].sizeLeftInPage||t.reportPagesDetails[i].sizeLeft,t.customReport.widgets[r].isLastWidgetInPage=!1),1==t.customReport.widgets[r-1].isFirstWidgetInPage&&(t.customReport.widgets[r].isFirstWidgetInPage=!0,t.customReport.widgets[r-1].isFirstWidgetInPage=!1);var d=t.customReport.widgets[r].row;t.customReport.widgets[r].sizeY==t.customReport.widgets[r-1].sizeY?(t.customReport.widgets[r].row=t.customReport.widgets[r-1].row,t.customReport.widgets[r-1].row=d):t.customReport.widgets[r].row=t.customReport.widgets[r-1].row,t.swapArrayElements(r,r-1)}},t.pullDownWidget=function(a,r){var s={};angular.copy(a,s);var r=r,i=s.pageNumber;if(1==s.isLastWidgetInPage){var o=t.reportPagesDetails[i+1].firstWidgetIndex;if(t.reportPagesDetails[i+1].sizeLeft>=s.sizeY){t.customReport.widgets[r].pageNumber+=1,t.customReport.widgets[r+1].row=t.customReport.widgets[r].row,t.customReport.widgets[r].isLastWidgetInPage=!1,t.customReport.widgets[r].isFirstWidgetInPage=!0,t.customReport.widgets[o].isFirstWidgetInPage=!1,t.reportPagesDetails[i+1].firstWidgetIndex-=1,t.swapArrayElements(r,r+1),t.reportPagesDetails[i+1].sizeLeft-=s.sizeY,t.reportPagesDetails[i+1].sizeFilled+=s.sizeY;var n=t.reportPagesDetails[i+1].lastWidgetIndex;if(t.customReport.widgets[n].sizeFilledInPage=t.reportPagesDetails[i+1].sizeFilled,t.customReport.widgets[n].sizeLeftInPage=t.reportPagesDetails[i+1].sizeLeft,1==s.isFirstWidgetInPage||t.reportPagesDetails[i].sizeFilled==s.sizeY){if("pageBreakWidget"==t.customReport.widgets[r].widgetType){t.customReport.widgets.splice(r,1),t.reportPagesDetails.splice(i,1);for(var c=r;c<t.customReport.widgets.length;c++)t.customReport.widgets[c].pageNumber-=1;for(var l=i;l<t.reportPagesDetails.length;l++)t.reportPagesDetails[l].firstWidgetIndex-=1,t.reportPagesDetails[l].lastWidgetIndex-=1}}else{t.reportPagesDetails[i].lastWidgetIndex-=1;var n=t.reportPagesDetails[i].lastWidgetIndex;t.reportPagesDetails[i].sizeLeft+=s.sizeY,t.reportPagesDetails[i].sizeFilled-=s.sizeY,t.customReport.widgets[n].isLastWidgetInPage=!0,t.customReport.widgets[n].sizeFilledInPage=t.reportPagesDetails[i].sizeFilled,t.customReport.widgets[n].sizeLeftInPage=t.reportPagesDetails[i].sizeLeft}}else if(t.customReport.widgets[o].sizeY==s.sizeY){void 0!=t.customReport.widgets[r].isFirstWidgetInPage&&1==t.customReport.widgets[r].isFirstWidgetInPage||(t.customReport.widgets[o].isFirstWidgetInPage=!1),t.customReport.widgets[r].isFirstWidgetInPage=!0,t.customReport.widgets[r].isLastWidgetInPage=!1,1==t.customReport.widgets[o].isLastWidgetInPage&&(t.customReport.widgets[r].sizeFilledInPage=t.customReport.widgets[o].sizeFilledInPage||t.reportPagesDetails[i+1].sizeFilled,t.customReport.widgets[r].sizeLeftInPage=t.customReport.widgets[o].sizeLeftInPage||t.reportPagesDetails[i+1].sizeLeft,t.customReport.widgets[r].isLastWidgetInPage=!0),t.customReport.widgets[o].sizeFilledInPage=t.reportPagesDetails[i].sizeFilled,t.customReport.widgets[o].sizeLeftInPage=t.reportPagesDetails[i].sizeLeft,t.customReport.widgets[o].isLastWidgetInPage=!0,t.customReport.widgets[r].pageNumber+=1,t.customReport.widgets[o].pageNumber-=1;var h=t.customReport.widgets[r].row;t.customReport.widgets[r].row=t.customReport.widgets[o].row,t.swapArrayElements(r,o),e(function(){t.customReport.widgets[r].row=h},800)}else toastr.info("Sorry..! This widget can neither be pulled nor swapped at the moment")}else{if(1==s.isFirstWidgetInPage&&(t.customReport.widgets[r+1].isFirstWidgetInPage=!0,t.customReport.widgets[r].isFirstWidgetInPage=!1),1==t.customReport.widgets[r+1].isLastWidgetInPage&&(t.customReport.widgets[r].isLastWidgetInPage=!0,t.customReport.widgets[r].sizeFilledInPage=t.customReport.widgets[r+1].sizeFilledInPage||t.reportPagesDetails[i].sizeFilled,t.customReport.widgets[r].sizeLeftInPage=t.customReport.widgets[r+1].sizeLeftInPage||t.reportPagesDetails[i].sizeLeft,t.customReport.widgets[r+1].isLastWidgetInPage=!1),t.customReport.widgets[r].sizeY==t.customReport.widgets[r+1].sizeY){var h=t.customReport.widgets[r+1].row;t.customReport.widgets[r+1].row=t.customReport.widgets[r].row,t.customReport.widgets[r].row=h}else{var h=t.customReport.widgets[r].row;t.customReport.widgets[r+1].row=h,t.customReport.widgets[r].row=h+t.customReport.widgets[r+1].sizeY}t.swapArrayElements(r,r+1)}}}function NavigationController(t,e,a,r,s){s.getReportBuilder=function(){a({method:"POST",url:"/api/v1/updateUserSubscription?buster="+new Date}).then(function(e){t.canAccessReportBuilder=e.data.response.reportBuilder},function(e){t.dashboard.dashboardName=null,swal({title:"",text:'<span style="sweetAlertFont">Something went wrong! Please reload the dashboard</span>',html:!0})})},s.getReportBuilder(),e.includes("app.reporting.dashboard"),t.stateValidation=function(r){switch(r){case"recommendedDashboard":a({method:"GET",url:"/api/v1/subscriptionLimits?requestType=dashboards"}).then(function(t){t.data.isExpired===!1?t.data.availableDashboards>0?e.go("app.reporting."+r):toastr.info("You have reached your Dashboards limit. Please upgrade to create more Dashboards"):toastr.info("Please renew!")},function(t){swal({title:"",text:"<span style='sweetAlertFont'>Something went wrong! Please try again!</span> .",html:!0})});break;case"chooseDashboardType":a({method:"GET",url:"/api/v1/subscriptionLimits?requestType=dashboards"}).then(function(t){t.data.isExpired===!1?t.data.availableDashboards>0?e.go("app.reporting."+r):toastr.info("You have reached your Dashboards limit. Please upgrade to create more Dashboards"):toastr.info("Please renew !")},function(t){swal({title:"",text:"<span style='sweetAlertFont'>Something went wrong! Please try again!</span> .",html:!0})});break;case"buildReports":t.canAccessReportBuilder?e.go("app.reporting."+r):swal({title:"",text:"Sorry! The Report builder feature is only available on the Agency Plan.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Upgrade",closeOnConfirm:!0},function(){e.go("app.reporting.upgrade")});break;case"insights":toastr.info("Coming Soon")}},t.addRecommendedDashboard=function(){a({method:"GET",url:"/api/v1/subscriptionLimits?requestType=dashboards"}).then(function(t){t.data.isExpired===!1?t.data.availableDashboards>0?e.go("app.reporting.dashboard.recommendedDashboard"):toastr.info("You have reached your Dashboards limit. Please upgrade to create more Dashboards"):toastr.info("Please renew!")},function(t){swal({title:"",text:"<span style='sweetAlertFont'>Something went wrong! Please try again!</span> .",html:!0})})},$(".insightsModalContent").on("click",function(t){$(".navbar").css("z-index","1"),$(".md-overlay").css("background","rgba(0,0,0,0.5)"),$("#insightsModalContent").addClass("md-show")}),$(".addRemoveModalContent").on("click",function(t){$(".navbar").css("z-index","1"),$(".md-overlay").css("background","rgba(0,0,0,0.5)"),$("#addRemoveModalContent").addClass("md-show")})}config.$inject=["$translateProvider"],pageTitle.$inject=["$rootScope","$timeout"],sideNavigation.$inject=["$timeout"],iboxTools.$inject=["$timeout"],minimalizaSidebar.$inject=["$timeout"],icheck.$inject=["$timeout"],chatSlimScroll.$inject=["$timeout"],fullScroll.$inject=["$timeout"],iboxToolsFullScreen.$inject=["$timeout"],slimScroll.$inject=["$timeout"],hcChart.$inject=["$timeout"],fileModel.$inject=["$parse"],MainCtrl.$inject=["$scope","$rootScope","$http","$timeout"],CustomWidgetController.$inject=["$scope","$uibModal"],customReportController.$inject=["$scope","$timeout","$rootScope","$http","$window","$state","$stateParams","createWidgets","$q"],NavigationController.$inject=["$scope","$state","$http","$stateParams","$rootScope"],function(t){t(["jquery"],function(t){return function(){function e(t,e,a){return g({type:w.error,iconClass:m().iconClasses.error,message:t,optionsOverride:a,title:e})}function a(e,a){return e||(e=m()),v=t("#"+e.containerId),v.length?v:(a&&(v=p(e)),v)}function r(t,e,a){return g({type:w.info,iconClass:m().iconClasses.info,message:t,optionsOverride:a,title:e})}function s(t){y=t}function i(t,e,a){return g({type:w.success,iconClass:m().iconClasses.success,message:t,optionsOverride:a,title:e})}function o(t,e,a){return g({type:w.warning,iconClass:m().iconClasses.warning,message:t,optionsOverride:a,title:e})}function n(t,e){var r=m();v||a(r),h(t,r,e)||l(r)}function c(e){var r=m();return v||a(r),e&&0===t(":focus",e).length?void f(e):void(v.children().length&&v.remove())}function l(e){for(var a=v.children(),r=a.length-1;r>=0;r--)h(t(a[r]),e)}function h(e,a,r){var s=!(!r||!r.force)&&r.force;return!(!e||!s&&0!==t(":focus",e).length)&&(e[a.hideMethod]({duration:a.hideDuration,easing:a.hideEasing,complete:function(){f(e)}}),!0)}function p(e){return v=t("<div/>").attr("id",e.containerId).addClass(e.positionClass),v.appendTo(t(e.target)),v}function d(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:100,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",closeButton:!0,positionClass:"toast-top-right",
timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function u(t){y&&y(t)}function g(e){function r(t){return null==t&&(t=""),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(){c(),h(),p(),d(),g(),y(),l(),i()}function i(){var t="";switch(e.iconClass){case"toast-success":case"toast-info":t="polite";break;default:t="assertive"}R.attr("aria-live",t)}function o(){F.closeOnHover&&R.hover(k,x),!F.onclick&&F.tapToDismiss&&R.click(T),F.closeButton&&S&&S.click(function(t){t.stopPropagation?t.stopPropagation():void 0!==t.cancelBubble&&t.cancelBubble!==!0&&(t.cancelBubble=!0),F.onCloseClick&&F.onCloseClick(t),T(!0)}),F.onclick&&R.click(function(t){F.onclick(t),T()})}function n(){R.hide(),R[F.showMethod]({duration:F.showDuration,easing:F.showEasing,complete:F.onShown}),F.timeOut>0&&(N=setTimeout(T,F.timeOut),O.maxHideTime=parseFloat(F.timeOut),O.hideEta=(new Date).getTime()+O.maxHideTime,F.progressBar&&(O.intervalId=setInterval(C,10)))}function c(){e.iconClass&&R.addClass(F.toastClass).addClass(P)}function l(){F.newestOnTop?v.prepend(R):v.append(R)}function h(){if(e.title){var t=e.title;F.escapeHtml&&(t=r(e.title)),A.append(t).addClass(F.titleClass),R.append(A)}}function p(){if(e.message){var t=e.message;F.escapeHtml&&(t=r(e.message)),I.append(t).addClass(F.messageClass),R.append(I)}}function d(){F.closeButton&&(S.addClass(F.closeClass).attr("role","button"),R.prepend(S))}function g(){F.progressBar&&(W.addClass(F.progressClass),R.prepend(W))}function y(){F.rtl&&R.addClass("rtl")}function w(t,e){if(t.preventDuplicates){if(e.message===D)return!0;D=e.message}return!1}function T(e){var a=e&&F.closeMethod!==!1?F.closeMethod:F.hideMethod,r=e&&F.closeDuration!==!1?F.closeDuration:F.hideDuration,s=e&&F.closeEasing!==!1?F.closeEasing:F.hideEasing;if(!t(":focus",R).length||e)return clearTimeout(O.intervalId),R[a]({duration:r,easing:s,complete:function(){f(R),clearTimeout(N),F.onHidden&&"hidden"!==E.state&&F.onHidden(),E.state="hidden",E.endTime=new Date,u(E)}})}function x(){(F.timeOut>0||F.extendedTimeOut>0)&&(N=setTimeout(T,F.extendedTimeOut),O.maxHideTime=parseFloat(F.extendedTimeOut),O.hideEta=(new Date).getTime()+O.maxHideTime)}function k(){clearTimeout(N),O.hideEta=0,R.stop(!0,!0)[F.showMethod]({duration:F.showDuration,easing:F.showEasing})}function C(){var t=(O.hideEta-(new Date).getTime())/O.maxHideTime*100;W.width(t+"%")}var F=m(),P=e.iconClass||F.iconClass;if("undefined"!=typeof e.optionsOverride&&(F=t.extend(F,e.optionsOverride),P=e.optionsOverride.iconClass||P),!w(F,e)){b++,v=a(F,!0);var N=null,R=t("<div/>"),A=t("<div/>"),I=t("<div/>"),W=t("<div/>"),S=t(F.closeHtml),O={intervalId:null,hideEta:null,maxHideTime:null},E={toastId:b,state:"visible",startTime:new Date,options:F,map:e};return s(),n(),o(),u(E),F.debug&&console&&console.log(E),R}}function m(){return t.extend({},d(),T.options)}function f(t){v||(v=a()),t.is(":visible")||(t.remove(),t=null,0===v.children().length&&(v.remove(),D=void 0))}var v,y,D,b=0,w={error:"error",info:"info",success:"success",warning:"warning"},T={clear:n,remove:c,error:e,getContainer:a,info:r,options:{},subscribe:s,success:i,version:"2.1.3",warning:o};return T}()})}("function"==typeof define&&define.amd?define:function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):window.toastr=e(window.jQuery)}),function(){angular.module("inspinia",["ui.router","oc.lazyLoad","ui.bootstrap","pascalprecht.translate","ngIdle","ngSanitize","ngAnimate","ui.bootstrap.tpls","gridster","xeditable"])}(),function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function a(t,e){var a=r(t,e)?i:s;a(t,e)}var r,s,i;"classList"in document.documentElement?(r=function(t,e){return t.classList.contains(e)},s=function(t,e){t.classList.add(e)},i=function(t,e){t.classList.remove(e)}):(r=function(t,a){return e(a).test(t.className)},s=function(t,e){r(t,e)||(t.className=t.className+" "+e)},i=function(t,a){t.className=t.className.replace(e(a)," ")});var o={hasClass:r,addClass:s,removeClass:i,toggleClass:a,has:r,add:s,remove:i,toggle:a};"function"==typeof define&&define.amd?define(o):t.classie=o}(window);var ModalEffects=function(){function t(){var t=document.querySelector(".md-overlay");[].slice.call(document.querySelectorAll(".md-trigger")).forEach(function(e,a){function r(t){classie.remove(i,"md-show"),t&&classie.remove(document.documentElement,"md-perspective")}function s(){r(classie.has(e,"md-setperspective"))}var i=document.querySelector("#"+e.getAttribute("data-modal")),o=i.querySelector(".md-close");e.addEventListener("click",function(a){classie.add(i,"md-show"),t.removeEventListener("click",s),t.addEventListener("click",s),classie.has(e,"md-setperspective")&&setTimeout(function(){classie.add(document.documentElement,"md-perspective")},25)}),o.addEventListener("click",function(t){t.stopPropagation(),s()})})}t()}();angular.module("inspinia").config(config),angular.module("inspinia").directive("pageTitle",pageTitle).directive("sideNavigation",sideNavigation).directive("iboxTools",iboxTools).directive("minimalizaSidebar",minimalizaSidebar).directive("vectorMap",vectorMap).directive("sparkline",sparkline).directive("icheck",icheck).directive("ionRangeSlider",ionRangeSlider).directive("dropZone",dropZone).directive("responsiveVideo",responsiveVideo).directive("chatSlimScroll",chatSlimScroll).directive("customValid",customValid).directive("fullScroll",fullScroll).directive("closeOffCanvas",closeOffCanvas).directive("clockPicker",clockPicker).directive("landingScrollspy",landingScrollspy).directive("fitHeight",fitHeight).directive("iboxToolsFullScreen",iboxToolsFullScreen).directive("slimScroll",slimScroll).directive("channelDiv",channelDiv).directive("chartHeight",chartHeight).directive("sizeWatcher",sizeWatcher).directive("expSizeWatcher",expSizeWatcher).directive("hcChart",hcChart).directive("fileModel",fileModel);var showMetricApp=angular.module("inspinia");showMetricApp.service("createWidgets",["$http","$q",function(t,e){this.widgetHandler=function(a,r,s){function i(a,r){function s(a,r){var s=e.defer();if(r)var i={method:"GET",url:"/api/v1/widget/"+a+"?isPublic="+r,timeout:f.promise,cancel:f};else var i={method:"GET",url:"/api/v1/widget/"+a,timeout:f.promise,cancel:f};return t(i).then(function(t){s.resolve(t.data[0])},function(t){s.reject(t)}),s.promise}var i=e.defer(),o=[];for(var n in a.widgets){var c=a.widgets[n].widgetType;"basic"!=c&&"adv"!=c&&"fusion"!=c&&"custom"!=c||o.push(s(a.widgets[n].widgetId,r))}return e.all(o).then(function(t){i.resolve(t)},function(t){i.reject(t)}),i.promise}function o(a,r){var s=e.defer(),i=[],o=0;return t({method:"POST",url:"/api/v1/customWidget/data/"+a._id,data:{startDate:r.startDate,endDate:r.endDate},timeout:f.promise,cancel:f}).then(function(t){o++;for(var e in t.data)t.data[e].widgetId==a._id&&i.push({_id:t.data[e]._id,chartName:"Custom Data "+o,chartType:t.data[e].chartType,widgetId:t.data[e].widgetId,chartData:t.data[e].data,intervalType:t.data[e].intervalType,metricsCount:t.data[e].metricsCount});a.charts=i,s.resolve(a)},function(t){s.reject(t)}),s.promise}function n(t){var a=e.defer(),r=[];for(var s in t.charts){var i=[];if("line"==t.charts[s].chartType||"bar"==t.charts[s].chartType||"column"==t.charts[s].chartType||"area"==t.charts[s].chartType)for(var o in t.charts[s].chartData){var n=0;for(var c in r)if(r[c].key==t.charts[s].chartData[o].name){i=r[c].values;var l={x:moment(t.charts[s].chartData[o].date),y:t.charts[s].chartData[o].values};i.push(l),i.sort(function(t,e){var a=new Date(t.x),r=new Date(e.x);return a-r}),r[c].values=i,n=1}if(1!=n){i=[];var l={x:moment(t.charts[s].chartData[o].date),y:t.charts[s].chartData[o].values};i.push(l),i.sort(function(t,e){var a=new Date(t.x),r=new Date(e.x);return a-r}),r.push({type:t.charts[s].chartType,values:i,key:t.charts[s].chartData[o].name,color:null})}}else if("pie"==t.charts[s].chartType)for(var o in t.charts[s].chartData){var n=0;for(c in r){var h=0;r[c].key==t.charts[s].chartData[o].name&&(h=parseInt(r[c].y),r[c].y=parseInt(h)+parseInt(t.charts[s].chartData[o].values),n=1)}1!=n&&r.push({type:t.charts[s].chartType,y:parseInt(t.charts[s].chartData[o].values),key:t.charts[s].chartData[o].name,color:null})}}return a.resolve(r),a.promise}function c(t,a){var r,i=e.defer();return r=l(t,a,s),r.then(function(e){t.charts=e,i.resolve(t)},function(t){i.reject(t)}),i.promise}function l(a,r,s){var i=e.defer(),o=[];if(s)var n={method:"POST",url:"/api/v1/widgets/data/"+a._id,data:{startDate:r.startDate,endDate:r.endDate,params:"public"}};else var n={method:"POST",url:"/api/v1/widgets/data/"+a._id,data:{startDate:r.startDate,endDate:r.endDate,widId:a._id},timeout:f.promise,cancel:f};return t(n).then(function(t){for(var e in a.charts)for(var r in t.data)String(a.charts[e].metrics[0].metricId)===String(t.data[r].metricId)&&o.push({channelId:a.charts[e].channelId,chartType:"undefined"!=typeof a.charts[e].metrics[0].chartType?a.charts[e].metrics[0].chartType:"",chartSubType:void 0!=a.charts[e].metrics[0].subChartType?a.charts[e].metrics[0].subChartType:"",chartName:a.charts[e].name,chartColour:a.charts[e].metrics[0].color,chartOptions:a.charts[e].metrics[0].chartOptions,chartMetricId:t.data[r].metricId,metricDetails:t.data[r].metricDetails,chartObjectId:t.data[r].objectId,chartObjectTypeId:a.charts[e].metrics[0].objectTypeId,chartObjectName:a.charts[e].objectName,chartData:t.data[r].data});i.resolve(o)},function(t){v.widgets.length>0?(k=v.widgets.map(function(t){return t._id}).indexOf(t._id),k!==-1&&(t.data.id=v._id),i.reject(t)):i.reject(t)}),i.promise}function h(t,a){function r(t,e){return e>t?e-t:t-e}function r(t,e){return e>t?e-t:t-e}function s(t){for(var e=0,a=0;a<t.length;a++)e+=parseFloat(t[a].value);return e}function i(t){for(var e=0,a=0;a<t.length;a++)e+=parseFloat(t[a].value);return e}function s(t){for(var e=0,a=0;a<t.length;a++)e+=parseFloat(t[a].value);return e}function i(t){for(var e=0,a=0;a<t.length;a++)e+=parseFloat(t[a].value);return e}function s(t){for(var e=0,a=0;a<t.length;a++)e+=parseFloat(t[a].value);return e}var o=e.defer(),n=[],c={Facebook:"FB",Twitter:"TW","Google Analytics":"GA",FacebookAds:"FBAds",GoogleAdwords:"GAds",Instagram:"In",Pinterest:"Pi",Mailchimp:"Mc",Vimeo:"Vi",Linkedin:"Lin",YouTube:"YT",Moz:"Moz","Google Sheets":"GSheet",Aweber:"AW"},l=-1,h=0;if(t.charts.length>0){for(var p in t.charts){var u=t.charts[p].chartType;switch(u){case"bounceRateArea":var g=[];if("object"==typeof t.charts[p].chartData[0].total)for(var m=0;m<t.charts[p].chartData.length;m++){var f=parseFloat(t.charts[p].chartData[m].total[0].bounces),v=parseFloat(t.charts[p].chartData[m].total[0].sessions);if(0===v)var y=f;else var y=(f/v*100).toFixed(2);g.push({x:moment(t.charts[p].chartData[m].date),y:y,bounces:f,sessions:Math.round(100*v)/100})}t.charts[p].chartData=g;break;case"costPerClick":case"costPerThosuandImpressions":case"clickThroughRate":case"ConversionRate":case"costPerConversion":var g=[];if("costPerClick"==u)var D="Cost",b="Clicks";else if("costPerThosuandImpressions"==u)var D="Cost",b="Impressions";else if("clickThroughRate"==u)var D="Clicks",b="Impressions";else if("ConversionRate"==u)var D="Conversions",b="Clicks";else if("costPerConversion"==u)var D="Cost",b="Conversions";for(var m=0;m<t.charts[p].chartData.length;m++){var w=0,T=0;if("object"==typeof t.charts[p].chartData[m].total[0]&&(w="Cost"===D?parseFloat(t.charts[p].chartData[m].total[0][D]/1e6).toFixed(2):parseFloat(t.charts[p].chartData[m].total[0][D]),T=parseFloat(t.charts[p].chartData[m].total[0][b])),0===w)var x=w;else if("costPerThosuandImpressions"==u)var x=(w/T*1e3).toFixed(2);else if("clickThroughRate"==u||"clickThroughRate"==u||"costPerConversion"==u)var x="Infinity"===(w/T*100).toFixed(2)?0:(w/T*100).toFixed(2);else var x=(w/T).toFixed(2);g.push({x:moment(t.charts[p].chartData[m].date),y:x,dividend:w,divisor:T})}t.charts[p].chartData=g;break;case"line":case"area":case"bar":case"column":case"stackcolumn":case"mozoverview":case"negativeBar":if("object"==typeof t.charts[p].chartData[0].total){var k,C=t.charts[p].chartCode;for(et in t.charts[p].metricDetails.objectTypes)t.charts[p].metricDetails.objectTypes[et].objectTypeId==t.charts[p].chartObjectTypeId&&(k=t.charts[p].metricDetails.objectTypes[et].meta.endpoint,t.charts[p].metricDetails.objectTypes[et].meta.endpoint=void 0!=t.charts[p].metricDetails.objectTypes[et].meta.endpointDisplay?t.charts[p].metricDetails.objectTypes[et].meta.endpointDisplay:t.charts[p].metricDetails.objectTypes[et].meta.endpoint);var F=[];if(0!=k.length)for(ar in k){var P=k[ar],N=[];for(q in t.charts[p].chartData){var R,A=0;if(null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length))for(var I in t.charts[p].chartData[q].total)if(I.search("/")>-1){R=I.split("/");for(var W in R)R[W]==P&&(A+=parseFloat(t.charts[p].chartData[q].total[I]))}else I==P&&(A=t.charts[p].chartData[q].total[P]);N.push({x:moment(t.charts[p].chartData[q].date),y:Math.round(100*A)/100})}F.push(N)}else{var N=[];if("fbTopReferringDomain"===t.charts[p].chartSubType){for(var S=[],O=0;O<t.charts[p].chartData.length;O++)if("object"==typeof t.charts[p].chartData[O].total)for(var E in t.charts[p].chartData[O].total)S.push({domain:E,value:t.charts[p].chartData[O].total[E]});var z=_.groupBy(S,"domain");for(var M in z){for(var L=M,j=0,m=0;m<z[M].length;m++)j+=parseFloat(z[M][m].value);N.push({x:L,y:isNaN(j)?0:j})}}else for(q in t.charts[p].chartData){var H,R,A=0,B=t.charts[p].chartData[q].total;if(null!=t.charts[p].chartData[q].total&&0!=Object.keys(t.charts[p].chartData[q].total).length){for(var I in t.charts[p].chartData[q].total){if(I.search("/")>-1){R=I.split("/");for(var W in R)A+=parseFloat(t.charts[p].chartData[q].total[I]),H=I}else A=t.charts[p].chartData[q].total[P];H=I}N.push({x:H,y:Math.round(100*A)/100})}}F.push(N)}var Y=[];if("userinteractions_clicks"==C&&"Facebook"==t.channelName){for(var m=0;m<F.length;m++)for(var V=0;V<F[m].length;V++)Y[V]||(Y[V]={x:0,y:0}),Y[V].x=F[0][V].x,Y[V].y+=F[m][V].y;F=Y}t.charts[p].chartData=F}else{var N=[];for(var q in t.charts[p].chartData)N.push({x:moment(t.charts[p].chartData[q].date),y:null!=t.charts[p].chartData[q].total?Math.round(100*t.charts[p].chartData[q].total)/100:0});t.charts[p].chartData=N}if("fbTopReferringDomain"===t.charts[p].chartSubType){var U=_.sortBy(N,"y").reverse(),G=[];if(N.length<10)var X=N.length-1;else var X=9;for(var O=0;O<=X;O++)G.push({x:U[O].x,y:U[O].y});t.charts[p].chartData=G}break;case"reachVsImpressions":case"engagedUsersReach":if("Total Impressions"==t.charts[p].chartName||"Engaged Users"==t.charts[p].chartName){for(var J=[],K=[],m=0;m<t.charts.length;m++)"Total Impressions"!=t.charts[m].chartName&&"Engaged Users"!=t.charts[m].chartName||(J=t.charts[m].chartData),"Total Reach"==t.charts[m].chartName&&(K=t.charts[m].chartData);var Z=[];for(var Q in J){var tt=J[Q].total/K[Q].total*100;!isNaN(tt)&&isFinite(tt)||(tt=0),Z.push({x:moment(J[Q].date),y:parseFloat(tt).toFixed(2),imp:J[Q].total,rea:K[Q].total})}t.charts[p].chartData=Z}else{var N=[];for(var q in t.charts[p].chartData)N.push({x:moment(t.charts[p].chartData[q].date),y:null!=t.charts[p].chartData[q].total?t.charts[p].chartData[q].total:0});t.charts[p].chartData=N}break;case"trafficSourcesBrkdwnLine":if("object"==typeof t.charts[p].chartData[0].total){var k;for(et in t.charts[p].metricDetails.objectTypes)t.charts[p].metricDetails.objectTypes[et].objectTypeId==t.charts[p].chartObjectTypeId&&(k=t.charts[p].metricDetails.objectTypes[et].meta.endpoint);var F=[];for(q in t.charts[p].chartData){var R,A=0;if(null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length))for(var I in t.charts[p].chartData[q].total)t.charts[p].chartData[q].total["social/Yes"]="undefined"!=typeof t.charts[p].chartData[q].total["social/Yes"]?Number(t.charts[p].chartData[q].total["social/Yes"]):0,I.search("/")>-1&&(R=I.split("/"),"Yes"==R[1]&&(t.charts[p].chartData[q].total["social/Yes"]+=Number(t.charts[p].chartData[q].total[I]),t.charts[p].chartData[q].total[I]=0))}for(ar in k){var P=k[ar],N=[];for(q in t.charts[p].chartData){var R,A=0;if(null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length))for(var I in t.charts[p].chartData[q].total)if(I.search("/")>-1){R=I.split("/");for(var W in R)R[W]==P&&(A+=parseFloat(t.charts[p].chartData[q].total[I]))}else I==P&&(A=t.charts[p].chartData[q].total[P]);N.push({x:moment(t.charts[p].chartData[q].date),y:Math.round(100*A)/100})}F.push(N)}t.charts[p].chartData=F}else{var N=[];for(var q in t.charts[p].chartData)N.push({x:moment(t.charts[p].chartData[q].date),y:null!=t.charts[p].chartData[q].total?Math.round(100*t.charts[p].chartData[q].total)/100:0});t.charts[p].chartData=N}break;case"pie":if("object"==typeof t.charts[p].chartData[0].total){var k=[];for(var et in t.charts[p].metricDetails.objectTypes)t.charts[p].metricDetails.objectTypes[et].objectTypeId==t.charts[p].chartObjectTypeId&&(k=t.charts[p].metricDetails.objectTypes[et].meta.endpoint);var F=[];for(ar in k){var P=k[ar];N=[];var A=0;for(q in t.charts[p].chartData)if(null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length))for(var I in t.charts[p].chartData[q].total)if(I.search("/")>-1){R=I.split("/");for(var W in R)R[W]==P&&(A+=parseFloat(t.charts[p].chartData[q].total[I]))}else I==P&&(A+=parseFloat(t.charts[p].chartData[q].total[P]));N.push({y:parseFloat(A).toFixed(2)%Math.floor(parseFloat(A).toFixed(2))>0?parseFloat(A).toFixed(2):parseFloat(A).toFixed(2)>1?parseInt(A):parseFloat(A)>0?parseFloat(A).toFixed(2):parseInt(A)}),F.push(N)}t.charts[p].chartData=F}else{var A=0;for(q in t.charts[p].chartData)A+=parseFloat(t.charts[p].chartData[q].total);N.push({y:parseFloat(A).toFixed(2)%Math.floor(parseFloat(A).toFixed(2))>0?parseFloat(A).toFixed(2):parseFloat(A).toFixed(2)>1?parseInt(A):parseFloat(A)>0?parseFloat(A).toFixed(2):parseInt(A)}),t.charts[p].chartData=N}break;case"trafficSourcesBrkdwnPie":if("object"==typeof t.charts[p].chartData[0].total){var k=[];for(et in t.charts[p].metricDetails.objectTypes)t.charts[p].metricDetails.objectTypes[et].objectTypeId==t.charts[p].chartObjectTypeId&&(k=t.charts[p].metricDetails.objectTypes[et].meta.endpoint);var F=[];for(q in t.charts[p].chartData){var R,A=0;if(null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length))for(var I in t.charts[p].chartData[q].total)t.charts[p].chartData[q].total["social/Yes"]="undefined"!=typeof t.charts[p].chartData[q].total["social/Yes"]?Number(t.charts[p].chartData[q].total["social/Yes"]):0,I.search("/")>-1&&(R=I.split("/"),"Yes"==R[1]&&(t.charts[p].chartData[q].total["social/Yes"]+=Number(t.charts[p].chartData[q].total[I]),t.charts[p].chartData[q].total[I]=0))}for(ar in k){var P=k[ar];N=[];var A=0;for(q in t.charts[p].chartData)if(null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length))for(var I in t.charts[p].chartData[q].total)if(I.search("/")>-1){R=I.split("/");for(var W in R)R[W]==P&&(A+=parseFloat(t.charts[p].chartData[q].total[I]))}else I==P&&(A+=t.charts[p].chartData[q].total[P]);N.push({y:Math.round(100*A)/100}),F.push(N)}t.charts[p].chartData=F}else{var A=0;for(q in t.charts[p].chartData)A+=parseInt(t.charts[p].chartData[q].total);N.push({y:Math.round(100*A)/100}),t.charts[p].chartData=N}break;case"instagramPosts":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){var at="images",rt="thumbnail",st="likes",it="comments",j="count",ot="caption",nt="text",ct="link",lt="url",F=[];for(q in t.charts[p].chartData){var N={date:moment(t.charts[p].chartData[q].date).format("DD-MMM-YYYY"),image:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[at]&&null!=t.charts[p].chartData[q].total[at][rt]&&"undefined"!=typeof t.charts[p].chartData[q].total[at][rt][lt]?t.charts[p].chartData[q].total[at][rt][lt]:"",postComment:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[ot]&&"undefined"!=typeof t.charts[p].chartData[q].total[ot][nt]?t.charts[p].chartData[q].total[ot][nt]:"",likes:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[st]&&"undefined"!=typeof t.charts[p].chartData[q].total[st][j]?t.charts[p].chartData[q].total[st][j]:0,comments:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[it]&&"undefined"!=typeof t.charts[p].chartData[q].total[it][j]?t.charts[p].chartData[q].total[it][j]:0,links:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&"undefined"!=typeof t.charts[p].chartData[q].total[ct]?t.charts[p].chartData[q].total[ct]:""};F.push(N)}t.charts[p].chartData=F}break;case"instagramEngagements":var ht=t.charts[p].chartSubType;if("instagramPostFrequency"===ht||"instagramPostTypes"===ht||"instagramPostEngagement"===ht){var pt=0,st="likes",it="comments",dt=[];if("undefined"!=typeof t.charts[p].chartData[0])for(var m=0;m<t.charts[p].chartData.length;m++){pt++;var ut=t.charts[p].chartData[m].total[st].count,gt=t.charts[p].chartData[m].total[it].count,mt=ut+gt,M=t.charts[p].chartData[m].total.type;dt.push({type:M,engagement:mt})}for(var ft={},vt={},O=0;O<dt.length;O++){if(ft.hasOwnProperty(dt[O].type)){var M=dt[O].type;ft[M]+=1}else{var M=dt[O].type;ft[M]=1}if(vt.hasOwnProperty(dt[O].type)){var E=dt[O].type;vt[E]+=dt[O].engagement}else{var E=dt[O].type;vt[E]=dt[O].engagement}}}"instagramPostFrequency"===ht?t.charts[p].chartData=pt:"instagramPostEngagement"===ht?t.charts[p].chartData=vt:"instagramPostTypes"===ht&&(t.charts[p].chartData=ft);break;case"highEngagementTweets":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){var st="favorite_count",yt="retweet_count",nt="text",ct="expanded_url",F=[];for(q in t.charts[p].chartData){var N={date:moment(new Date(t.charts[p].chartData[q].date)).format("DD-MMM-YYYY"),likes:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&"undefined"!=typeof t.charts[p].chartData[q].total[st]?t.charts[p].chartData[q].total[st]:0,reTweet:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&"undefined"!=typeof t.charts[p].chartData[q].total[yt]?t.charts[p].chartData[q].total[yt]:0,postComment:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&"undefined"!=typeof t.charts[p].chartData[q].total[nt]?t.charts[p].chartData[q].total[nt]:0,links:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&"undefined"!=typeof t.charts[p].chartData[q].total.entities?t.charts[p].chartData[q].total.entities:0};F.push(N)}t.charts[p].chartData=F}break;case"highestEngagementLinkedIn":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){var st="likes",Dt="clicks",bt="impressions",wt="shares",it="comments",nt="text",lt="url",F=[];for(q in t.charts[p].chartData){var N={date:moment(t.charts[p].chartData[q].date).format("DD-MMM-YYYY"),link:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[lt]&&"undefined"!=typeof t.charts[p].chartData[q].total[lt]?t.charts[p].chartData[q].total[lt]:"",postComment:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[nt]&&"undefined"!=typeof t.charts[p].chartData[q].total[nt]?t.charts[p].chartData[q].total[nt]:"",impressions:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[bt]&&"undefined"!=typeof t.charts[p].chartData[q].total[bt]?t.charts[p].chartData[q].total[bt]:0,shares:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[wt]&&"undefined"!=typeof t.charts[p].chartData[q].total[wt]?t.charts[p].chartData[q].total[wt]:0,likes:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[st]&&"undefined"!=typeof t.charts[p].chartData[q].total[st]?t.charts[p].chartData[q].total[st]:0,comments:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[it]&&"undefined"!=typeof t.charts[p].chartData[q].total[it]?t.charts[p].chartData[q].total[it]:0,clicks:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[Dt]&&"undefined"!=typeof t.charts[p].chartData[q].total[Dt]?t.charts[p].chartData[q].total[Dt]:0};F.push(N)}t.charts[p].chartData=F}break;case"gaTopPagesByVisit":;if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++){var xt=$.map(t.charts[p].chartData[O].total,function(t,e){return[t]});Tt=Tt.concat(xt)}var kt="pageTitle",F=[],z=_.groupBy(Tt,"pagePath");for(var M in z){for(var Ct=M,v=0,Ft=0,Pt=0,Nt=0,f=0,m=0;m<z[M].length;m++)v+=parseFloat(z[M][m].sessions),Ft+=parseFloat(z[M][m].pageviews),f+=parseFloat(z[M][m].bounces),Nt+=parseFloat(z[M][m].exits),Pt+=parseFloat(z[M][m].timeOnPage);var Rt=r(Ft,Nt);if(0===v)var y=f;else var y=(f/v*100).toFixed(2);if(0===Rt)var At=Pt;else var At=Pt/Rt;At=Math.ceil(At);var It=new Date(null);It.setSeconds(At),At=It.toISOString().substr(11,8);var Ct={bouncesRate:f,pagePath:Ct,sessions:v,pageTitle:z[M][0][kt],bouncesRate:y,avgTimeOnpage:At,pageviews:Ft};F.push(Ct)}F.sort(function(t,e){return parseFloat(t.pageviews)-parseFloat(e.pageviews)}),F.reverse(),t.charts[p].chartData=F}break;case"gaPageContentEfficiencyTable":;if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++){var xt=$.map(t.charts[p].chartData[O].total,function(t,e){return[t]});Tt=Tt.concat(xt)}var kt="pageTitle",F=[],z=_.groupBy(Tt,"pagePath");for(var M in z){for(var Ct=M,Wt=0,Ft=0,St=0,Ot=0,Pt=0,Nt=0,f=0,v=0,Et=0,zt=0,m=0;m<z[M].length;m++){Wt+=parseFloat(z[M][m].uniquePageviews),v+=parseFloat(z[M][m].sessions),Ft+=parseFloat(z[M][m].pageviews),f+=parseFloat(z[M][m].bounces),Nt+=parseFloat(z[M][m].exits),Pt+=parseFloat(z[M][m].timeOnPage),zt+=z[M][m].pageviews*z[M][m].entranceRate,St+=parseFloat(z[M][m].pageValue);var kt=z[M][m].pageTitle}var Rt=r(Ft,Nt);if(0===v)var y=f;else var y=(f/v*100).toFixed(2);if(0===Rt)var At=Pt;else var At=Pt/Rt;Et=zt/Ft;var Ct={uniquePageviews:Wt,sessions:v,pageviews:Ft,pagePath:Ct,avgTimeOnPage:At,pageTitle:kt,entranceRate:Et.toFixed(2),pageviews:Ft,pageValue:St,bounceRate:y},It=new Date(null);It.setSeconds(Ct.avgTimeOnPage),Ct.avgTimeOnPage=It.toISOString().substr(11,8),F.push(Ct)}F.sort(function(t,e){return parseFloat(t.pageviews)-parseFloat(e.pageviews)}),F.reverse(),t.charts[p].chartData=F}break;case"gaPageTechnicalEfficiencyTable":;if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++){var xt=$.map(t.charts[p].chartData[O].total,function(t,e){return[t]});Tt=Tt.concat(xt)}var kt="pageTitle",F=[],z=_.groupBy(Tt,"pagePath");for(var M in z){for(var Ct=M,Ft=0,Mt=0,Lt=0,Ot=0,v=0,f=0,jt=0,m=0;m<z[M].length;m++){jt+=parseFloat(z[M][m].pageLoadTime),v+=parseFloat(z[M][m].sessions),f+=parseFloat(z[M][m].bounces),Ft+=parseFloat(z[M][m].pageviews),Lt+=parseFloat(z[M][m].pageLoadSample),Ot+=parseFloat(z[M][m].bounceRate);var kt=z[M][m].pageTitle}var Mt=(jt/Lt/1e3).toFixed(2);if(isNaN(Mt)&&(Mt=0),0===v)var y=f;else var y=f/v*100;Mt=Math.ceil(Mt);var Ct={pageviews:Ft,sessions:v,pagePath:Ct,pageTitle:kt,avgPageLoadTime:Mt.toFixed(2),pageLoadSample:Lt,pageviews:Ft,bounceRate:y.toFixed(2)};F.push(Ct)}F.sort(function(t,e){return parseFloat(t.pageviews)-parseFloat(e.pageviews)}),F.reverse(),t.charts[p].chartData=F}break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":;if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++){var xt=$.map(t.charts[p].chartData[O].total,function(t,e){return[t]});Tt=Tt.concat(xt)}var F=[],z=_.groupBy(Tt,"sourceMedium");for(var M in z){for(var Ht=M,v=0,Bt=0,Yt=0,$t=0,Lt=0,_t=0,m=0;m<z[M].length;m++)v+=parseFloat(z[M][m].sessions),Bt+=parseFloat(z[M][m].users),Yt+=parseFloat(z[M][m].newUsers),$t+=parseFloat(z[M][m].goalConversionRateAll),Lt+=parseFloat(z[M][m].pageLoadSample),_t+=parseFloat(z[M][m].goalValuePerSession),Ot+=parseFloat(z[M][m].bounceRate);var Ct={sourceMedium:Ht,sessions:v,users:Bt,newUsers:Yt,goalValuePerSession:_t,goalConversionRateAll:$t.toFixed(2)};F.push(Ct)}F.sort(function(t,e){return parseFloat(t.sessions)-parseFloat(e.sessions)}),F.reverse(),t.charts[p].chartData=F}break;case"pageContentEfficiency":;if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++){var Vt=$.isEmptyObject(t.charts[p].chartData[O].total);if(1!=Vt){var xt=$.map(t.charts[p].chartData[O].total,function(t,e){return[t]});Tt=Tt.concat(xt)}}var kt="pageTitle",F=[],z=_.groupBy(Tt,"pagePath");for(var M in z){for(var y,Wt=0,Ft=0,f=0,v=0,Et=0,zt=0,m=0;m<z[M].length;m++)Wt+=parseFloat(z[M][m].uniquePageviews),v+=parseFloat(z[M][m].sessions),Ft+=parseFloat(z[M][m].pageviews),f+=parseFloat(z[M][m].bounces),zt+=z[M][m].pageviews*z[M][m].entranceRate,kt=z[M][m].pageTitle;y=0===v?f:(f/v*100).toFixed(2),Et=zt/Ft;var Ct={bounceRate:y,pageTitle:kt,uniquePageviews:Wt.toFixed(2),pageviews:Ft,entranceRate:Et.toFixed(2)};F.push(Ct)}F.sort(function(t,e){return parseFloat(t.uniquePageviews)-parseFloat(e.uniquePageviews)}),F.reverse();var qt=[];if(F.length>10)for(var m=0;m<10;m++)qt.push(F[m]);else for(var m=0;m<F.length;m++)qt.push(F[m]);t.charts[p].chartData=qt}break;case"gaSocialMediaOverview":;if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++){var xt=$.map(t.charts[p].chartData[O].total,function(t,e){return[t]});Tt=Tt.concat(xt)}var F=[];if("Time spent on site from various sources"==String(t.charts[p].chartName)){for(var O=0;O<Tt.length;O++)"Yes"===Tt[O].hasSocialSourceReferral&&(Tt[O].medium="social");var z=_.groupBy(Tt,"medium")}else var z=_.groupBy(Tt,"socialNetwork");for(var M in z){for(var Ut=M,Ft=0,v=0,Nt=0,Pt=0,m=0;m<z[M].length;m++)v+=parseFloat(z[M][m].sessions),Ft+=parseFloat(z[M][m].pageviews),Nt+=parseFloat(z[M][m].exits),Pt+=parseFloat(z[M][m].timeOnPage);var Gt=Ft/v,Xt=Pt/(Ft-Nt),Ct={sessions:Number(v),pageviewsPersession:isNaN(Gt)?0:Gt.toFixed(2),socialNetwork:Ut,avgtimeOnPage:isNaN(Xt)?0:Xt.toFixed(2)};"Time spent on site from various sources"==String(t.charts[p].chartName)?"(none)"!=String(Ct.socialNetwork)&&"organic"!=String(Ct.socialNetwork)&&"referral"!=String(Ct.socialNetwork)&&"ppc"!=String(Ct.socialNetwork)&&"social"!=String(Ct.socialNetwork)||F.push(Ct):F.push(Ct)}t.charts[p].chartData=F}break;case"pageTechnicalEfficiency":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++){var Vt=$.isEmptyObject(t.charts[p].chartData[O].total);if(1!=Vt){var xt=$.map(t.charts[p].chartData[O].total,function(t,e){return[t]});Tt=Tt.concat(xt)}}var kt="pageTitle",F=[],z=_.groupBy(Tt,"pagePath");
for(var M in z){for(var Ft=0,Mt=0,Lt=0,Ot=0,v=0,f=0,jt=0,m=0;m<z[M].length;m++){jt+=parseFloat(z[M][m].pageLoadTime),v+=parseFloat(z[M][m].sessions),f+=parseFloat(z[M][m].bounces),Ft+=parseFloat(z[M][m].pageviews),Lt+=parseFloat(z[M][m].pageLoadSample);var kt=z[M][m].pageTitle}var Mt=(jt/Lt/1e3).toFixed(2);if(isNaN(Mt)&&(Mt=0),0===v)var y=f;else var y=f/v*100;Mt=Math.ceil(Mt);var Ct={bounceRate:y.toFixed(2),pageTitle:kt,PageLoadTime:Mt.toFixed(2),pageviews:Ft};F.push(Ct)}F.sort(function(t,e){return parseFloat(t.pageviews)-parseFloat(e.pageviews)}),F.reverse();var qt=[];if(F.length>10)for(var m=0;m<10;m++)qt.push(F[m]);else for(var m=0;m<F.length;m++)qt.push(F[m]);t.charts[p].chartData=qt}break;case"visitorAcquisitionEfficiency":;if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++){var Vt=$.isEmptyObject(t.charts[p].chartData[O].total);if(1!=Vt){var xt=$.map(t.charts[p].chartData[O].total,function(t,e){return[t]});Tt=Tt.concat(xt)}}var F=[],z=_.groupBy(Tt,"sourceMedium");for(var M in z){for(var Ht=M,v=0,Bt=0,Yt=0,$t=0,Lt=0,_t=0,m=0;m<z[M].length;m++)v+=parseFloat(z[M][m].sessions),Yt+=parseFloat(z[M][m].newUsers),$t+=parseFloat(z[M][m].goalConversionRateAll),Lt+=parseFloat(z[M][m].pageLoadSample),_t+=parseFloat(z[M][m].goalValuePerSession);var Ct={newUsers:Yt.toFixed(2),sourceMedium:Ht,goalValuePerSession:_t.toFixed(2),goalConversionRateAll:$t.toFixed(2),sessions:v};F.push(Ct)}F.sort(function(t,e){return parseFloat(t.sessions)-parseFloat(e.sessions)}),F.reverse();var qt=[];if(F.length>10)for(var m=0;m<10;m++)qt.push(F[m]);else for(var m=0;m<F.length;m++)qt.push(F[m]);t.charts[p].chartData=qt}break;case"topReferringSites":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++){var Vt=$.isEmptyObject(t.charts[p].chartData[O].total);if(1!=Vt){var xt=$.map(t.charts[p].chartData[O].total,function(t,e){return[t]});Tt=Tt.concat(xt)}}var F=[],z=_.groupBy(Tt,"source");for(var M in z){for(var Jt=M,v=0,Kt=0,Zt=0,m=0;m<z[M].length;m++)v+=parseFloat(z[M][m].sessions),Zt+=parseFloat(z[M][m].goalCompletionsAll);Kt=v/Zt;var Ct={source:Jt,goalCompletions:Number(Zt.toFixed(2)),goalConversionRate:isNaN($t)?0:$t,sessions:v};F.push(Ct)}F.sort(function(t,e){return parseFloat(e.sessions)-parseFloat(t.sessions)});var qt=[];if("Top referring sites(Table)"==String(t.charts[p].chartName))qt=F;else if(F.length>10)for(var m=0;m<10;m++)qt.push(F[m]);else for(var m=0;m<F.length;m++)qt.push(F[m]);t.charts[p].chartData=qt}break;case"fbReachByAge":var Qt={"13-17":{Female:0,Male:0,Unspecified:0},"18-24":{Female:0,Male:0,Unspecified:0},"25-34":{Female:0,Male:0,Unspecified:0},"35-44":{Female:0,Male:0,Unspecified:0},"45-54":{Female:0,Male:0,Unspecified:0},"55-64":{Female:0,Male:0,Unspecified:0},"65+":{Female:0,Male:0,Unspecified:0}};if("undefined"!=typeof t.charts[p].chartData[0]){if("object"==typeof t.charts[p].chartData[0].total)for(var q in t.charts[p].chartData)for(var E in t.charts[p].chartData[q].total){var te=E.split("."),ee=String(te[0]),ae=String(te[1]);"F"==ee&&(ee="Female"),"M"==ee&&(ee="Male"),"U"==ee&&(ee="Unspecified"),void 0!=Qt[ae]&&(Qt[ae]=Qt[ae]||0,Qt[ae][ee]+=parseInt(t.charts[p].chartData[q].total[E]))}var re=[],se=[];for(var M in Qt){re.push(M);Qt[M].length}var ie=re[0];for(var oe in Qt[ie]){var ne={};ne.name=oe;var ce=0;ne.data=[];for(var tt in Qt)ne.data[ce]=Qt[tt][oe],ce++;se.push(ne)}var le=[Qt,re,se]}t.charts[p].chartData=le;break;case"fbStoreType":case"engagementDay":if("fbStoreType"==u&&"undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){var he=[];for(var q in t.charts[p].chartData){var It,B={"page post":0,Other:0};for(var E in t.charts[p].chartData[q].total)"page post"===E?B[E]=t.charts[p].chartData[q].total[E]:B.Other+=t.charts[p].chartData[q].total[E];he.push({date:moment(t.charts[p].chartData[q].date),total:B})}t.charts[p].chartData=he}if("engagementDay"==u){var pe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],de={},ue={},ge={},me={},fe={},ve={},ye={},De=[de,ue,ge,me,fe,ve,ye];if("undefined"!=typeof t.charts[p].chartData[0]){for(var m=0;m<t.charts[p].chartData.length;m++)if("undefined"!=typeof t.charts[p].chartData[m].date){var be=new Date(t.charts[p].chartData[m].date),we=be.getDay();if(we<7)for(var E in t.charts[p].chartData[m].total)"comment"!==E&&"like"!==E&&"link"!==E||(De[we].hasOwnProperty(E)?De[we][E]+=t.charts[p].chartData[m].total[E]:(De[we][E]=0,De[we][E]+=t.charts[p].chartData[m].total[E]))}for(var Te=[],O=0;O<pe.length;O++)Te.push({date:pe[O],total:De[O]})}t.charts[p].chartData=Te}if("object"==typeof t.charts[p].chartData[0].total){var k;for(et in t.charts[p].metricDetails.objectTypes)t.charts[p].metricDetails.objectTypes[et].objectTypeId==t.charts[p].chartObjectTypeId&&(k="fbStoreType"==u?["page post","Other"]:t.charts[p].metricDetails.objectTypes[et].meta.endpoint);t.charts[p].metricDetails.objectTypes[et].meta.endpoint=t.charts[p].metricDetails.objectTypes[et].meta.endpointDisplay;var F=[];for(ar in k){var P=k[ar],N=[];for(q in t.charts[p].chartData){var R,A=0;if(null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length))for(var I in t.charts[p].chartData[q].total)if(I.search("/")>-1){R=I.split("/");for(var W in R)R[W]==P&&(A+=parseFloat(t.charts[p].chartData[q].total[I]))}else I==P&&(A=t.charts[p].chartData[q].total[P]);(u="engagementDay")?N.push({x:t.charts[p].chartData[q].date,y:A}):N.push({x:moment(t.charts[p].chartData[q].date),y:A})}F.push(N)}t.charts[p].chartData=F}t.charts[p].chartType="line";break;case"fbReachByCountry":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++)Tt.push(t.charts[p].chartData[O].total);for(var xe={},m=0;m<Tt.length;m++)for(var M in Tt[m])xe.hasOwnProperty(M)?xe[M]+=Tt[m][M]:(xe[M]=0,xe[M]+=Tt[m][M]);var ke=[];for(var Ce in xe)ke.push([Ce,xe[Ce]]);ke.sort(function(t,e){return e[1]-t[1]}),xe={Others:0};for(var O=0;O<ke.length;O++)O<5?xe.hasOwnProperty(ke[O][0])?xe[ke[O][0]]=ke[O][1]:(xe[ke[O][0]]=0,xe[ke[O][0]]=ke[O][1]):xe.Others+=ke[O][1]}t.charts[p].chartData=xe;break;case"fbReachByCity":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++)Tt.push(t.charts[p].chartData[O].total);for(var xe={},m=0;m<Tt.length;m++)for(var M in Tt[m]){var Fe=M.split(","),Pe=Fe[0];xe.hasOwnProperty(M)?xe[Pe]+=Tt[m][M]:(xe[Pe]=0,xe[Pe]+=Tt[m][M])}var ke=[];for(var Ce in xe)ke.push([Ce,xe[Ce]]);ke.sort(function(t,e){return e[1]-t[1]}),xe={Others:0};for(var O=0;O<ke.length;O++)O<5?xe.hasOwnProperty(ke[O][0])?xe[ke[O][0]]=ke[O][1]:(xe[ke[O][0]]=0,xe[ke[O][0]]=ke[O][1]):xe.Others+=ke[O][1]}t.charts[p].chartData=xe;break;case"fanSource":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){var Ne={Others:0,page_profile:0,like_story:0,mobile:0,mobile_ads:0,external_connect:0,recommended_pages:0};for(var q in t.charts[p].chartData)for(var E in t.charts[p].chartData[q].total)"undefined"!=t.charts[p].chartData[q].total[E]&&("page_profile"===E||"like_story"===E||"mobile"===E||"mobile_ads"===E||"external_connect"===E||"recommended_pages"===E?Ne[E]+=t.charts[p].chartData[q].total[E]:Ne.Others+=t.charts[p].chartData[q].total[E]);var Re={"Page Profile":Ne.page_profile,"Like story ads":Ne.like_story,Mobile:Ne.mobile,"Mobile ads":Ne.mobile_ads,External:Ne.external_connect,"Recommended pages":Ne.recommended_pages," Others":Ne.Others};t.charts[p].chartData=Re}t.charts[p].chartType="fbReachByCity";break;case"pinterestEngagementRate":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){var st="likes",it="comments",Ae="repins",nt="name",lt="url",F=[];for(q in t.charts[p].chartData){var N={date:moment(t.charts[p].chartData[q].date).format("DD-MMM-YYYY"),postComment:null!=t.charts[p].chartData[q]&&Object.keys(0!=t.charts[p].chartData[q].length)&&null!=t.charts[p].chartData[q][nt]&&"undefined"!=typeof t.charts[p].chartData[q][nt]?t.charts[p].chartData[q][nt]:"",likes:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[st]&&"undefined"!=typeof t.charts[p].chartData[q].total[st]?t.charts[p].chartData[q].total[st]:0,repins:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[Ae]&&"undefined"!=typeof t.charts[p].chartData[q].total[Ae]?t.charts[p].chartData[q].total[Ae]:0,comments:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[it]&&"undefined"!=typeof t.charts[p].chartData[q].total[it]?t.charts[p].chartData[q].total[it]:0,links:null!=t.charts[p].chartData[q]&&Object.keys(0!=t.charts[p].chartData[q].length)&&"undefined"!=typeof t.charts[p].chartData[q][lt]?t.charts[p].chartData[q][lt]:""};F.push(N)}t.charts[p].chartData=F}break;case"pinterestLeaderboard":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){var Ie="collaborators",We="followers",Se="pins",nt="name",lt="url",F=[];for(q in t.charts[p].chartData){var N={date:moment(t.charts[p].chartData[q].date).format("DD-MMM-YYYY"),postComment:null!=t.charts[p].chartData[q]&&Object.keys(0!=t.charts[p].chartData[q].length)&&null!=t.charts[p].chartData[q][nt]&&"undefined"!=typeof t.charts[p].chartData[q][nt]?t.charts[p].chartData[q][nt]:"",collaborators:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[Ie]&&"undefined"!=typeof t.charts[p].chartData[q].total[Ie]?t.charts[p].chartData[q].total[Ie]:0,pins:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[Se]&&"undefined"!=typeof t.charts[p].chartData[q].total[Se]?t.charts[p].chartData[q].total[Se]:0,followers:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total[We]&&"undefined"!=typeof t.charts[p].chartData[q].total[We]?t.charts[p].chartData[q].total[We]:0,links:null!=t.charts[p].chartData[q]&&Object.keys(0!=t.charts[p].chartData[q].length)&&"undefined"!=typeof t.charts[p].chartData[q][lt]?t.charts[p].chartData[q][lt]:""};F.push(N)}t.charts[p].chartData=F}break;case"vimeoTopVideos":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){var st="likes",it="comments",F=[];for(q in t.charts[p].chartData){var N={date:moment(t.charts[p].chartData[q].date).format("DD-MMM-YYYY"),link:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total.link&&"undefined"!=typeof t.charts[p].chartData[q].total.link?t.charts[p].chartData[q].total.link:"",Comment:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total.metadata.connections.comments.total&&"undefined"!=typeof t.charts[p].chartData[q].total.metadata.connections.comments.total?t.charts[p].chartData[q].total.metadata.connections.comments.total:"",likes:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total.metadata.connections.likes.total&&"undefined"!=typeof t.charts[p].chartData[q].total.metadata.connections.likes.total?t.charts[p].chartData[q].total.metadata.connections.likes.total:0,views:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total.stats.plays&&"undefined"!=typeof t.charts[p].chartData[q].total.stats.plays?t.charts[p].chartData[q].total.stats.plays:0,picture:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total.pictures.sizes[0].link&&"undefined"!=typeof t.charts[p].chartData[q].total.pictures.sizes[0].link?t.charts[p].chartData[q].total.pictures.sizes[0].link:0,title:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&null!=t.charts[p].chartData[q].total.name&&"undefined"!=typeof t.charts[p].chartData[q].total.name?t.charts[p].chartData[q].total.name:0};F.push(N)}t.charts[p].chartData=F}break;case"costPerActionType":var Oe=!1,Ee=[];if(t.meta){var N=[];for(var q in t.charts[p].chartData){var m,j=0;for(m in t.charts[p].chartData[q].total)t.charts[p].chartData[q].total.hasOwnProperty(m)&&j++;if(j){var ze=0;for(var E in t.charts[p].chartData[q].total)t.meta==t.charts[p].chartData[q].total[E].action_type&&(ze=1,N.push({x:moment(t.charts[p].chartData[q].date),y:null!=t.charts[p].chartData[q].total[E]?t.charts[p].chartData[q].total[E].value:0}));ze||N.push({x:moment(t.charts[p].chartData[q].date),y:0})}else N.push({x:moment(t.charts[p].chartData[q].date),y:0})}t.charts[p].chartData=N}else{var N={};Oe=!0;for(var m=0;m<t.charts[p].chartData.length;m++)for(var E in t.charts[p].chartData[m].total)Ee.push(t.charts[p].chartData[m].total[E].action_type);var Me=_.uniqBy(Ee);N.flag=Oe,N.action=Me,t.charts[p].chartData=N}break;case"instagramHashtagLeaderBoard":if(null!=t.charts[p].chartData[0]){if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){var Le="tag",it="comments",st="likes",F=[];for(q in t.charts[p].chartData){var N={tagLink:null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length)&&"undefined"!=typeof t.charts[p].chartData[q].total[Le]?"https://www.instagram.com/explore/tags/"+t.charts[p].chartData[q].total[Le]:"",tag:null!=t.charts[p].chartData[q].total&&null!=t.charts[p].chartData[q].total[Le]&&"undefined"!=typeof t.charts[p].chartData[q].total[Le]?t.charts[p].chartData[q].total[Le]:0,likes:null!=t.charts[p].chartData[q].total&&null!=t.charts[p].chartData[q].total[st]&&"undefined"!=typeof t.charts[p].chartData[q].total[st]?t.charts[p].chartData[q].total[st]:0,comments:null!=t.charts[p].chartData[q].total&&null!=t.charts[p].chartData[q].total[it]&&"undefined"!=typeof t.charts[p].chartData[q].total[it]?t.charts[p].chartData[q].total[it]:0};F.push(N)}t.charts[p].chartData=F}}else t.charts[p].chartData=[];break;case"gaTopCountriesToSocialVisits":case"gaTopCitiesToSocialVisits":if("undefined"!=typeof t.charts[p].chartData[0]&&"object"==typeof t.charts[p].chartData[0].total){var Tt=[],F=[],je={},He=0;t.charts[p].chartData.forEach(function(e){for(var a in e.total)a.indexOf(t.charts[p].metricDetails.objectTypes[0].meta.endpoint[0]+"/")!=-1&&Tt.push({country:a.split(t.charts[p].metricDetails.objectTypes[0].meta.endpoint[0]+"/").join(""),value:e.total[a]})});var z=_.groupBy(Tt,"country");for(var M in z){for(var xe=M,v=0,m=0;m<z[M].length;m++)v+=parseFloat(z[M][m].value);var Ct={country:xe,sessions:v};F.push(Ct)}var Be=_.sortBy(F,"sessions").reverse();if(Be.length){for(var Ye=Be.length<5?Be.length:5,O=0;O<Ye;O++)je[Be[O].country]=Be[O].sessions;if(Be.length>5){for(var V=5;V<Be.length;V++)He+=Be[V].sessions;je.Others=He}else je.Others=0}}t.charts[p].chartData=je;break;case"audienceBehaviourbyDay":var pe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],de={},ue={},ge={},me={},fe={},ve={},ye={},De=[de,ue,ge,me,fe,ve,ye];if("undefined"!=typeof t.charts[p].chartData[0])for(var m=0;m<t.charts[p].chartData.length;m++)if("undefined"!=typeof t.charts[p].chartData[m].date){var be=new Date(t.charts[p].chartData[m].date),we=be.getDay();if(we<7){for(var E in t.charts[p].chartData[m].total[0])"date"!=E&&"dayOfWeek"!=E&&"total"!=E&&(De[we].hasOwnProperty(E)?De[we][E]+=parseFloat(t.charts[p].chartData[m].total[0][E]):(De[we][E]=0,De[we][E]+=parseFloat(t.charts[p].chartData[m].total[0][E])));De[we].bounceRate=0,0===De[we].sessions?De[we].bounceRate=De[we].bounces:De[we].bounceRate=De[we].sessions/De[we].bounces}}for(var Te=[],O=0;O<pe.length;O++)Te.push({date:pe[O],total:De[O]});t.charts[p].chartData=Te;break;case"audienceBehaviourByTimeofday":if("object"==typeof t.charts[p].chartData[0].total){for(var Tt=[],O=0;O<t.charts[p].chartData.length;O++){var xt=$.map(t.charts[p].chartData[O].total,function(t,e){return[t]});Tt=Tt.concat(xt)}var It=[],F=[],z=_.groupBy(Tt,"hour");for(var M in z){for(var $e=M,Ft=0,f=0,v=0,_e=0,Ve=0,m=0;m<z[M].length;m++)v+=parseFloat(z[M][m].sessions),Ft+=parseFloat(z[M][m].pageviews),f+=parseFloat(z[M][m].bounces),_e+=parseFloat(z[M][m].pageviewsPerSession),Ve+=parseFloat(z[M][m].percentNewSessions);if(0===v)var Ot=f;else var Ot=(f/v*100).toFixed(2);var $e={hour:$e,sessions:v,bounceRate:Ot,pageviews:Ft,pageviewsPerSession:_e,percentNewSessions:Ve};F.push($e)}var qe=[];F.sort(function(t,e){return parseFloat(t.hour)-parseFloat(e.hour)});for(var O=0;O<F.length;O++)qe.push({date:F[O].hour,total:F[O]});t.charts[p].chartType="audienceBehaviourbyDay",t.charts[p].chartData=qe}break;case"socialContributionToSiteTraffic":if("object"==typeof t.charts[p].chartData[0].total){var k;for(et in t.charts[p].metricDetails.objectTypes)t.charts[p].metricDetails.objectTypes[et].objectTypeId==t.charts[p].chartObjectTypeId&&(k=t.charts[p].metricDetails.objectTypes[et].meta.endpoint,t.charts[p].metricDetails.objectTypes[et].meta.endpoint=void 0!=t.charts[p].metricDetails.objectTypes[et].meta.endpointDisplay?t.charts[p].metricDetails.objectTypes[et].meta.endpointDisplay:t.charts[p].metricDetails.objectTypes[et].meta.endpoint);var F=[];if(0!=k.length)for(ar in k){var P=k[ar],N=[];for(q in t.charts[p].chartData){var R,A=0;if(null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length))for(var I in t.charts[p].chartData[q].total)if(I.search("/")>-1){R=I.split("/");for(var W in R)R[W]==P&&(A+=parseFloat(t.charts[p].chartData[q].total[I]))}else I==P&&(A=t.charts[p].chartData[q].total[P]);N.push({x:moment(t.charts[p].chartData[q].date),y:A})}F.push(N)}else{var N=[];for(q in t.charts[p].chartData){var H,R,A=0,B=t.charts[p].chartData[q].total;if(null!=t.charts[p].chartData[q].total&&0!=Object.keys(t.charts[p].chartData[q].total).length){for(var I in t.charts[p].chartData[q].total){if(I.search("/")>-1){R=I.split("/");for(var W in R)A+=parseFloat(t.charts[p].chartData[q].total[I]),H=I}else A=t.charts[p].chartData[q].total[P];H=I}N.push({x:H,y:A})}}F.push(N)}t.charts[p].chartData=N,t.charts[p].metricCode=t.charts[p].metricDetails.code,t.charts[p].metricName=t.charts[p].metricDetails.name}else{var N=[];for(var q in t.charts[p].chartData)N.push({x:moment(t.charts[p].chartData[q].date),y:null!=t.charts[p].chartData[q].total?t.charts[p].chartData[q].total:0});t.charts[p].chartData=N,t.charts[p].metricCode=t.charts[p].metricDetails.code,t.charts[p].metricName=t.charts[p].metricDetails.name}break;case"percentageArea":for(var m=0;m<t.charts[p].chartData.length;m++)if("object"==typeof t.charts[p].chartData[m].total){var k;for(et in t.charts[p].metricDetails.objectTypes)t.charts[p].metricDetails.objectTypes[et].objectTypeId==t.charts[p].chartObjectTypeId&&(k=t.charts[p].metricDetails.objectTypes[et].meta.endpoint,t.charts[p].metricDetails.objectTypes[et].meta.endpoint=void 0!=t.charts[p].metricDetails.objectTypes[et].meta.endpointDisplay?t.charts[p].metricDetails.objectTypes[et].meta.endpointDisplay:t.charts[p].metricDetails.objectTypes[et].meta.endpoint);var F=[];if(0!=k.length)for(ar in k){var P=k[ar],N=[];for(q in t.charts[p].chartData){var R,A=0;if(null!=t.charts[p].chartData[q].total&&Object.keys(0!=t.charts[p].chartData[q].total.length))for(var I in t.charts[p].chartData[q].total)if(I.search("/")>-1){R=I.split("/");for(var W in R)R[W]==P&&(A+=parseFloat(t.charts[p].chartData[q].total[I]))}else I==P&&(A=t.charts[p].chartData[q].total[I]);N.push({x:moment(t.charts[p].chartData[q].date),y:A})}F.push(N)}else{var N=[];for(q in t.charts[p].chartData){var H,R,A=[],B=t.charts[p].chartData[q].total;if(null!=t.charts[p].chartData[q].total&&0!=t.charts[p].chartData[q].total&&0!=Object.keys(t.charts[p].chartData[q].total).length){for(var I in t.charts[p].chartData[q].total){if(I.search("/")>-1){R=I.split("/");for(var W in R)A=t.charts[p].chartData[q].total[I],H=I}else A=t.charts[p].chartData[q].total[I];H=moment(t.charts[p].chartData[q].date)}N.push({x:H,y:A})}}F.push(N)}t.charts[p].chartData=N,t.charts[p].metricCode=t.charts[p].metricDetails.code,t.charts[p].metricName=t.charts[p].metricDetails.name}break;case"stackbar":if("object"==typeof t.charts[p].chartData[0].total){for(var Q=[{"(none)":0,organic:0,paid:0,others:0,social:0,ppc:0,referral:0}],O=0;O<t.charts[p].chartData.length;O++)for(E in t.charts[p].chartData[O].total){var Ue=E.split("/");"(none)"!=Ue[0]&&"organic"!=Ue[0]&&"ppc"!=Ue[0]&&"social"!=Ue[0]&&"referral"!=Ue[0]?Q[0].others+=parseFloat(t.charts[p].chartData[O].total[E]):"referral"===Ue[0]&&"undefined"!=Ue[1]&&"Yes"===Ue[1]?Q[0].social+=parseFloat(t.charts[p].chartData[O].total[E]):Q[0][Ue[0]]+=parseFloat(t.charts[p].chartData[O].total[E])}var se=[];se.push({date:t.charts[p].chartName,total:Q})}t.charts[p].chartData=se;break;case"gaUsers":if("undefined"!=typeof t.charts[p].chartData[0]){var Ge={};if("string"!=typeof t.charts[p].chartData)for(var m=0;m<t.charts[p].chartData.length;m++){var M=t.charts[p].chartData[m][0];Ge[M]=t.charts[p].chartData[m][1]}t.charts[p].chartData=Ge}break;case"youtubeVideosOverview":for(var Xe=[],M=0;M<t.charts[p].chartData.length;M++)if("undefined"!=typeof t.charts[p].chartData[M]&&"object"==typeof t.charts[p].chartData[M]){var ie=0,it=0,st=0,wt=0,Je={name:t.charts[p].chartData[M].title,views:t.charts[p].chartData[M].viewCount,comments:t.charts[p].chartData[M].commentCount,likes:t.charts[p].chartData[M].likeCount,dislikes:t.charts[p].chartData[M].dislikeCount,shares:t.charts[p].chartData[M].favoriteCount};Xe.push(Je)}t.charts[p].chartData=Xe;break;case"twitterEngagements":switch(String(t.charts[p].chartSubType)){case"activityByDayOfTheWeek":if("undefined"!=typeof t.charts[p].chartData[0]){for(var S=[],O=0;O<t.charts[p].chartData.length;O++)"object"==typeof t.charts[p].chartData[O].total&&(t.charts[p].chartData[O].total.created_at=new Date(t.charts[p].chartData[O].total.created_at).getDay(),S.push(t.charts[p].chartData[O].total));var z=_.groupBy(S,"created_at"),F=[];for(var M in z){for(var st=0,Ke=0,mt=0,Ze=M,m=0;m<z[M].length;m++)st+=parseFloat(z[M][m].favorite_count),Ke+=parseFloat(z[M][m].retweet_count);mt=st+Ke;var Qe=m,Ct={day:Ze,tweets:Qe,engagement:mt};F.push(Ct)}F.sort(function(t,e){return parseFloat(t.day)-parseFloat(e.day)});for(var M in F)"0"===F[M].day&&(F[M].day="Sunday"),"1"===F[M].day&&(F[M].day="Monday"),"2"===F[M].day&&(F[M].day="Tuesday"),"3"===F[M].day&&(F[M].day="Wednesday"),"4"===F[M].day&&(F[M].day="Thursday"),"5"===F[M].day&&(F[M].day="Friday"),"6"===F[M].day&&(F[M].day="Saturday");t.charts[p].chartData=F}break;case"activityByTimeOfTheDay":var ta=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if("undefined"!=typeof t.charts[p].chartData[0]){for(var S=[],O=0;O<t.charts[p].chartData.length;O++)if("object"==typeof t.charts[p].chartData[O].total){var It=t.charts[p].chartData[O].total.created_at;t.charts[p].chartData[O].total.day=ta[new Date(It).getDay()],S.push(t.charts[p].chartData[O].total)}var z=_.groupBy(S,"day"),F=[];for(var M in z){for(var Ze=M,ea=[],m=0;m<z[M].length;m++)ea.push({time:new Date(z[M][m].created_at).getHours(),likes:z[M][m].favorite_count,reTweets:z[M][m].retweet_count});var aa=_.groupBy(ea,"time");for(var Q in aa){for(var st=0,Ke=0,mt=0,ra=Q,V=0;V<aa[Q].length;V++)st+=parseFloat(aa[Q][V].likes),Ke+=parseFloat(aa[Q][V].reTweets);mt=st+Ke;var Ct={day:Ze,time:ra,engagement:mt};F.push(Ct)}}t.charts[p].chartData=F}break;case"engagementByUsersTalkedAbout":for(var F=[],sa=[],M=0;M<t.charts[p].chartData.length;M++)if("undefined"!=typeof t.charts[p].chartData[M]&&"object"==typeof t.charts[p].chartData[M].total){var st=0,Ke=0,mt=0,ia=[],Ze=M;st=parseFloat(t.charts[p].chartData[M].total.favorite_count),Ke=parseFloat(t.charts[p].chartData[M].total.retweet_count),mt=st+Ke;for(var oa=void 0!=t.charts[p].chartData[M].total.entities&&void 0!=t.charts[p].chartData[M].total.entities?t.charts[p].chartData[M].total.entities.user_mentions.length:0,na=void 0!=t.charts[p].chartData[M].total.entities&&void 0!=t.charts[p].chartData[M].total.entities?t.charts[p].chartData[M].total.entities.user_mentions:0,ca=0;ca<oa;ca++){var Je={tweet:t.charts[p].chartData[M].total.text,engagement:mt,userMentionedScreenName:na[ca].screen_name,userMentionedName:na[ca].name,url:void 0!=t.charts[p].chartData[M].total.media?t.charts[p].chartData[M].total.media[0].expanded_url:"https://twitter.com/"+na[ca].screen_name};ia.push(Je)}for(var O=0;O<ia.length;O++)sa.push(ia[O])}var Tt=[],qe=_.groupBy(sa,"userMentionedScreenName");for(var E in qe){for(var mt=0,la=0;la<qe[E].length;la++)mt+=qe[E][la].engagement;Tt.push({userMentionedScreenName:E,engagement:mt})}Tt.sort(function(t,e){return parseFloat(e.engagement)-parseFloat(t.engagement)}),t.charts[p].chartData=Tt;break;case"topLinks":if("undefined"!=typeof t.charts[p].chartData[0]){var st="favorite_count",yt="retweet_count",ha=[];if("object"==typeof t.charts[p].chartData[0].total)for(var m=0;m<t.charts[p].chartData.length;m++)if("undefined"!=typeof t.charts[p].chartData[m].total.entities)for(var O=0;O<t.charts[p].chartData[m].total.entities.urls.length;O++){var ut=t.charts[p].chartData[m].total[st],Ke=t.charts[p].chartData[m].total[yt],mt=ut+Ke,lt={url:t.charts[p].chartData[m].total.entities.urls[O].url,displayurl:t.charts[p].chartData[m].total.entities.urls[O].expanded_url,engagement:mt};ha.push(lt)}var z=_.groupBy(ha,"displayurl"),Tt=[];for(var E in z){for(var mt=0,la=0;la<z[E].length;la++)mt+=z[E][la].engagement;Tt.push({url:E,engagement:mt})}Tt.sort(function(t,e){return parseFloat(e.engagement)-parseFloat(t.engagement)}),t.charts[p].chartData=Tt}break;case"instagramActivityByDayOfTheWeek":if("undefined"!=typeof t.charts[p].chartData[0]){for(var S=[],O=0;O<t.charts[p].chartData.length;O++)"object"==typeof t.charts[p].chartData[O].total&&(t.charts[p].chartData[O].total.created_time=moment.unix(t.charts[p].chartData[O].total.created_time).format("YYYY/MMM/DD"),t.charts[p].chartData[O].total.created_time=new Date(t.charts[p].chartData[O].total.created_time).getDay(),S.push(t.charts[p].chartData[O].total));var z=_.groupBy(S,"created_time"),F=[];for(var M in z){for(var st=0,it=0,mt=0,Ze=M,m=0;m<z[M].length;m++)st+=parseFloat(z[M][m].likes.count),it+=parseFloat(z[M][m].comments.count);mt=st+it;var pa=m,Ct={day:Ze,tweets:pa,engagement:mt};F.push(Ct)}F.sort(function(t,e){return parseFloat(t.day)-parseFloat(e.day)});for(var M in F)"0"===F[M].day&&(F[M].day="Sunday"),"1"===F[M].day&&(F[M].day="Monday"),"2"===F[M].day&&(F[M].day="Tuesday"),"3"===F[M].day&&(F[M].day="Wednesday"),"4"===F[M].day&&(F[M].day="Thursday"),"5"===F[M].day&&(F[M].day="Friday"),"6"===F[M].day&&(F[M].day="Saturday");t.charts[p].chartData=F}break;case"instagramActivityByTimeOfTheDay":if("undefined"!=typeof t.charts[p].chartData[0]){for(var S=[],O=0;O<t.charts[p].chartData.length;O++)if("object"==typeof t.charts[p].chartData[O].total){var It=t.charts[p].chartData[O].total.created_time;t.charts[p].chartData[O].total.day=moment.unix(It).format("dddd"),S.push(t.charts[p].chartData[O].total)}var z=_.groupBy(S,"day"),F=[];for(var M in z){for(var Ze=M,ea=[],m=0;m<z[M].length;m++){var Y=moment.unix(z[M][m].created_time);ea.push({time:new Date(Y).getHours(),likes:z[M][m].likes.count,comments:z[M][m].comments.count})}var aa=_.groupBy(ea,"time");for(var Q in aa){for(var st=0,it=0,mt=0,ra=Q,V=0;V<aa[Q].length;V++)st+=parseFloat(aa[Q][V].likes),it+=parseFloat(aa[Q][V].comments);mt=st+it;var Ct={day:Ze,time:ra,engagement:mt};F.push(Ct)}}t.charts[p].chartData=F}break;case"commentsAndLikes":if("undefined"!=typeof t.charts[p].chartData[0]){for(var F=[],O=0;O<t.charts[p].chartData.length;O++)"object"==typeof t.charts[p].chartData[O].total&&F.push({x:moment(t.charts[p].chartData[O].date).format("DD-MMM-YYYY"),y:parseFloat(t.charts[p].chartData[O].total.likes.count)+parseFloat(t.charts[p].chartData[O].total.comments.count),link:t.charts[p].chartData[O].total.link});t.charts[p].chartData=F}break;case"hashTag":if("undefined"!=typeof t.charts[p].chartData[0]){var st="favorite_count",yt="retweet_count",ha=[];if("object"==typeof t.charts[p].chartData[0].total)for(var m=0;m<t.charts[p].chartData.length;m++)if("undefined"!=typeof t.charts[p].chartData[m].total.entities)for(var O=0;O<t.charts[p].chartData[m].total.entities.hashtags.length;O++){var ut=t.charts[p].chartData[m].total[st],Ke=t.charts[p].chartData[m].total[yt],mt=ut+Ke,lt={hashTag:t.charts[p].chartData[m].total.entities.hashtags[O].text,engagement:mt};ha.push(lt)}var z=_.groupBy(ha,"hashTag"),Tt=[];for(var E in z){for(var mt=0,la=0;la<z[E].length;la++)mt+=z[E][la].engagement;Tt.push({text:E,engagement:mt})}Tt.sort(function(t,e){return parseFloat(e.engagement)-parseFloat(t.engagement)}),t.charts[p].chartData=Tt}}break;case"campaignOverview":if("undefined"!=t.charts[p].chartData[0]){F=[];for(var da=[],O=0;O<t.charts[p].chartData.length;O++)for(var E in t.charts[p].chartData[O].total)da.push(t.charts[p].chartData[O].total[E]);var ua=_.groupBy(da,"Campaign ID");for(var M in ua){for(var ga,ma=M,fa="Campaign",va="Campaign state",ya=0,Da=0,ba=0,wa="Currency",Ta="Start date",xa="End date",ka=0,Ca="Budget",m=0;m<ua[M].length;m++)ba+=parseFloat(ua[M][m].Cost),wa=ua[M][m][wa],ka+=parseFloat(ua[M][m].Impressions),ga=ua[M][m]["Unique cookies"],ya+=parseFloat(ua[M][m].Clicks),Da+=parseFloat(ua[M][m].Conversions);if(0===ba)var ba=ba;else var ba=(ba/1e6).toFixed(2);if(0===ba)var Fa=ba;else var Fa=(ba/ka*1e3).toFixed(2);if(0===ya)var Pa=ya;else var Pa=(ya/ka*100).toFixed(2);if(0===ba)var Na=ba;else var Na=(ba/ya).toFixed(2);if(0===ba)var Ra=ba;else var Ra=(ba/Da*100).toFixed(2);var Aa={Id:ma,Name:ua[M][0][fa],status:ua[M][0][va],Currency:ua[M][0].Currency,startDate:ua[M][0][Ta],endDate:ua[M][0][xa],Budget:ua[M][0][Ca]/1e6,Impressions:ka,CPM:"Infinity"===Fa?0:Fa,CTR:"Infinity"===Pa?0:Pa,CPC:"Infinity"===Na?0:Na,CostPerConv:"Infinity"===Ra?0:Ra,Spent:ba,Conversions:Da,Clicks:ya,ImpressionReachValue:ga};F.push(Aa)}}t.charts[p].chartData=F;break;case"adgroupOverview":if("undefined"!=t.charts[p].chartData[0]){F=[];for(var Ia=[],O=0;O<t.charts[p].chartData.length;O++)for(var E in t.charts[p].chartData[O].total)Ia.push(t.charts[p].chartData[O].total[E]);var ua=_.groupBy(Ia,"Ad group ID");for(var M in ua){for(var Wa=M,Sa="Ad group",va="Ad group state",ya=0,Da=0,ba=0,wa="Currency",Oa=0,ka=0,m=0;m<ua[M].length;m++)ba+=parseFloat(ua[M][m].Cost),wa=ua[M][m][wa],ka+=parseFloat(ua[M][m].Impressions),Oa+=parseFloat(ua[M][m].Totalconvvalue),ya+=parseFloat(ua[M][m].Clicks),Da+=parseFloat(ua[M][m].Conversions);if(0===ba)var ba=ba;else var ba=(ba/1e6).toFixed(2);if(0===ba)var Fa=ba;else var Fa=(ba/ka*1e3).toFixed(2);if(0===ya)var Pa=ya;else var Pa=(ya/ka*100).toFixed(2);if(0===ba)var Na=ba;else var Na=(ba/ya).toFixed(2);if(0===ba)var Ra=ba;else var Ra=(ba/Da*100).toFixed(2);var Aa={Id:Wa,Name:ua[M][0][Sa],status:ua[M][0][va],Currency:ua[M][0].Currency,Impressions:ka,CPM:"Infinity"===Fa?0:Fa,CTR:"Infinity"===Pa?0:Pa,CPC:"Infinity"===Na?0:Na,CostPerConv:"Infinity"===Ra?0:Ra,Spent:ba,Conversions:Da,Totalconvvalue:Oa,Clicks:ya,CPMCBid:" --"===ua[M][0].MaxCPM?0:parseFloat(ua[M][0].MaxCPM)/1e6,CPCBid:" --"===ua[M][0].MaxCPC?0:parseFloat(ua[M][0].MaxCPC)/1e6,CPVBid:" --"===ua[M][0].MaxCPV?0:parseFloat(ua[M][0].MaxCPV)/1e6};F.push(Aa)}}t.charts[p].chartData=F;break;case"fbAdsAdgroupOverview":if("undefined"!=t.charts[p].chartData[0]){F=[];for(var Ia=[],O=0;O<t.charts[p].chartData.length;O++)for(var E in t.charts[p].chartData[O].total)Ia.push(t.charts[p].chartData[O].total[E]);var ua=_.groupBy(Ia,"adset_id");for(var M in ua){for(var Wa=M,Sa="adset_name",va="status",Ea="start_time",za="stop_time",ya=0,ba=0,Ma="objective",K=0,ka=0,Da=0,m=0;m<ua[M].length;m++)ba+=void 0!=ua[M][m].spend?parseFloat(ua[M][m].spend):0,
K+=void 0!=ua[M][m].reach?parseFloat(ua[M][m].reach):0,ka+=void 0!=ua[M][m].impressions?parseFloat(ua[M][m].impressions):0,ya+=void 0!=ua[M][m].clicks?parseFloat(ua[M][m].clicks):0,Da+=void 0!=ua[M][m].actions?s(ua[M][m].actions):0;if(0===ba)var Fa=ba;else var Fa=(ba/ka*1e3).toFixed(2);if(0===ya)var Pa=ya;else var Pa=(ya/ka*100).toFixed(2);if(0===ba)var Na=ba;else var Na=(ba/ya).toFixed(2);if(0===ba)var Ra=ba;else var Ra=(ba/Da*100).toFixed(2);var Aa={Id:Wa,Name:ua[M][0][Sa],Objective:ua[M][0][Ma],status:ua[M][0][va],reach:K,Impressions:ka,CPM:"Infinity"===Fa?0:Fa,CTR:"Infinity"===Pa?0:Pa,CPC:"Infinity"===Na?0:Na,CostPerConv:"Infinity"===Ra?0:Ra,Spent:ba.toFixed(2),Conversions:Da,Clicks:ya,StartDate:ua[M][0][Ea],EndDate:ua[M][0][za]};F.push(Aa)}}t.charts[p].chartData=F;break;case"adOverview":if("undefined"!=t.charts[p].chartData[0]){F=[];for(var Ia=[],O=0;O<t.charts[p].chartData.length;O++)for(var E in t.charts[p].chartData[O].total)Ia.push(t.charts[p].chartData[O].total[E]);var La=_.groupBy(Ia,"Ad ID");for(var M in La){for(var ja=M,Ha="Business Name",Ba="Ad type",ya=0,Da=0,ba=0,Oa=0,wa="Currency",ka=0,m=0;m<La[M].length;m++)ba+=parseFloat(La[M][m].Cost),wa=La[M][m][wa],ka+=parseFloat(La[M][m].Impressions),Oa+=parseFloat(La[M][m].Totalconvvalue),ya+=parseFloat(La[M][m].Clicks),Da+=parseFloat(La[M][m].Conversions);if(0===ba)var ba=ba;else var ba=(ba/1e6).toFixed(2);if(0===ba)var Fa=ba;else var Fa=(ba/ka*1e3).toFixed(2);if(0===ya)var Pa=ya;else var Pa=(ya/ka*100).toFixed(2);if(0===ba)var Na=ba;else var Na=(ba/ya).toFixed(2);if(0===Da)var Ya=Da;else var Ya=(Da/ya*100).toFixed(2);var Aa={Id:ja,Name:La[M][0][Ha],type:La[M][0][Ba],Currency:La[M][0].Currency,clickType:La[M][0]["Click type"],Impressions:ka,CPM:"Infinity"===Fa?0:Fa,CTR:"Infinity"===Pa?0:Pa,CPC:"Infinity"===Na?0:Na,Totalconvvalue:Oa,Spent:ba,Conversions:Da,ConversionRate:"Infinity"===Ya?0:Ya,Clicks:ya};F.push(Aa)}}t.charts[p].chartData=F;break;case"adwordsDemography":var ht=t.charts[p].chartSubType;if("undefined"!=t.charts[p].chartData[0]){F=[];for(var da=[],O=0;O<t.charts[p].chartData.length;O++)for(var E in t.charts[p].chartData[O].total)da.push(t.charts[p].chartData[O].total[E]);if("pieAge"===ht||"tableAge"===ht)var ua=_.groupBy(da,"Age Range");else if("pieGender"===ht||"tableGender"===ht)var ua=_.groupBy(da,"Gender");else if("pieDevice"===ht||"tableDevice"===ht)var ua=_.groupBy(da,"Device");for(var M in ua){for(var ae=M,ya=0,Da=0,ba=0,wa="Currency",ka=0,Oa=0,m=0;m<ua[M].length;m++)ba+=parseFloat(ua[M][m].Cost),ka+=parseFloat(ua[M][m].Impressions),ya+=parseFloat(ua[M][m].Clicks),Da+=parseFloat(ua[M][m].Conversions),Oa+=parseFloat(ua[M][m].Totalconvvalue);if(0===ba)var ba=ba;else var ba=(ba/1e6).toFixed(2);if(0===ba)var Fa=ba;else var Fa=(ba/ka*1e3).toFixed(2);if(0===ya)var Pa=ya;else var Pa=(ya/ka*100).toFixed(2);if(0===ba)var Na=ba;else var Na=(ba/ya).toFixed(2);if(0===Da)var $a=Da;else var $a=(Da/ya*100).toFixed(2);var Aa={Currency:ua[M][0].Currency,age:ae,Impressions:ka,CPM:"Infinity"===Fa?0:Fa,CTR:"Infinity"===Pa?0:Pa,CPC:"Infinity"===Na?0:Na,conversionRate:"Infinity"===$a?0:$a,Spent:ba,Conversions:Da,Clicks:ya,Totalconvvalue:Oa};F.push(Aa)}}if("pieAge"===ht||"pieGender"===ht||"pieDevice"===ht){for(var _a={},m=0;m<F.length;m++){var Va=F[m].age;_a[Va]=F[m].Impressions}F=_a}t.charts[p].chartData=F;break;case"fbAdsCampaignOverview":if("undefined"!=t.charts[p].chartData[0]){F=[];for(var da=[],O=0;O<t.charts[p].chartData.length;O++)for(var E in t.charts[p].chartData[O].total)da.push(t.charts[p].chartData[O].total[E]);var ua=_.groupBy(da,"campaign_id");for(var M in ua){for(var ga,ma=M,qa="campaign_name",va="status",Dt=0,Ua=0,Ga=0,Xa=0,Ja=0,Ka=0,K=0,Za=0,Ta="start_time",xa="stop_time",bt=0,m=0;m<ua[M].length;m++)bt+=void 0!=ua[M][m].impressions?parseFloat(ua[M][m].impressions):0,Dt+=void 0!=ua[M][m].clicks?parseFloat(ua[M][m].clicks):0,Ua+=void 0!=ua[M][m].actions?s(ua[M][m].actions):0,Ga+=void 0!=ua[M][m].cost_per_unique_action_type?i(ua[M][m].cost_per_unique_action_type):0,Xa+=void 0!=ua[M][m].spend?parseFloat(ua[M][m].spend):0,Ja+=void 0!=ua[M][m].app_store_clicks?parseFloat(ua[M][m].app_store_clicks):0,Ka+=void 0!=ua[M][m].frequency?parseFloat(ua[M][m].frequency):0,Za+=void 0!=ua[M][m].video_avg_percent_watched_actions?parseFloat(ua[M][m].video_avg_percent_watched_actions):0,K+=void 0!=ua[M][m].reach?parseFloat(ua[M][m].reach):0;if(0===Xa)var Fa=Xa;else var Fa=(Xa/bt*1e3).toFixed(2);if(0===Dt)var Pa=Dt;else var Pa=(Dt/bt*100).toFixed(2);if(0===Xa)var Na=Xa;else var Na=(Xa/Dt).toFixed(2);if(0===Xa);else{(Xa/Ua*100).toFixed(2)}var Jt={Id:ma,Name:ua[M][0][qa],Objective:ua[M][0].objective,status:ua[M][0][va],reach:K,Impressions:bt,cost:Xa.toFixed(2),CPM:"Infinity"===Fa?0:Fa,CTR:"Infinity"===Pa?0:Pa,CPC:"Infinity"===Na?0:Na,Actions:"Infinity"===Ua?0:Ua,Spent:Xa.toFixed(2),Conversions:Ua,Clicks:Dt,StartDate:ua[M][0][Ta],EndDate:ua[M][0][xa],AppStoreClicks:Ja,CostPerUniqueActionByType:Ga.toFixed(2),Frequency:Ka.toFixed(2),VideoAvgViewTime:isNaN(Za)?0:Za};F.push(Jt)}}t.charts[p].chartData=F;break;case"fbAdsAdOverview":if("undefined"!=t.charts[p].chartData[0]){F=[];for(var Qa=[],O=0;O<t.charts[p].chartData.length;O++)for(var E in t.charts[p].chartData[O].total)Qa.push(t.charts[p].chartData[O].total[E]);var tr=_.groupBy(Qa,"ad_id");for(var M in tr){for(var Dt=0,er=0,Ga=0,Xa=0,Ja=0,Ka=0,K=0,Za=0,bt=0,m=0;m<tr[M].length;m++)Dt+=void 0!=tr[M][m].clicks?parseFloat(tr[M][m].clicks):0,bt+=void 0!=tr[M][m].impressions?parseFloat(tr[M][m].impressions):0,er+=void 0!=tr[M][m].actions?s(tr[M][m].actions):0,Ga+=void 0!=tr[M][m].cost_per_unique_action_type?i(tr[M][m].cost_per_unique_action_type):0,Xa+=void 0!=tr[M][m].spend?parseFloat(tr[M][m].spend):0,Ja+=void 0!=tr[M][m].app_store_clicks?parseFloat(tr[M][m].app_store_clicks):0,Ka+=void 0!=tr[M][m].frequency?parseFloat(tr[M][m].frequency):0,K+=void 0!=tr[M][m].reach?parseFloat(tr[M][m].reach):0;if(0===Xa)var Fa=Xa;else var Fa=(Xa/bt*1e3).toFixed(2);if(0===Dt)var Pa=Dt;else var Pa=(Dt/bt*100).toFixed(2);if(0===Xa)var Na=Xa;else var Na=(Xa/Dt).toFixed(2);var Jt={Id:M,AdName:tr[M][0].ad_name,AdSetName:tr[M][0].adset_name,CampaignName:tr[M][0].campaign_name,Objective:tr[M][0].objective,Status:tr[M][0].status,Reach:K,Impressions:bt,CPM:"Infinity"===Fa?0:Fa,CTR:"Infinity"===Pa?0:Pa,Actions:"Infinity"===er?0:er,Spend:Xa,StartDate:tr[M][0].start_time,EndDate:tr[M][0].end_time,AppStoreClicks:Ja,CostPerUniqueActionByType:Ga.toFixed(2),Frequency:Ka.toFixed(2)};F.push(Jt)}}t.charts[p].chartData=F}}for(var p in t.charts)if("undefined"!=typeof t.charts[p].chartData[0])if(t.charts[p].chartData[0].x)for(var q in t.charts[p].chartData)h+=parseFloat(t.charts[p].chartData[q].y),parseFloat(h)>0&&0!=parseFloat(h)&&++l;else for(var ar in t.charts[p].chartData)for(var q in t.charts[p].chartData[ar])"undefined"!=typeof t.charts[p].chartData[ar][q]&&(h+=parseFloat(t.charts[p].chartData[ar][q].y),Number(h)>0&&0!=Number(h)&&++l);for(var p in t.charts){var u=t.charts[p].chartType,ht=t.charts[p].chartSubType;if("line"==u||"bar"==u||"column"==u||"stackcolumn"==u||"area"==u||"pie"==u||"reachVsImpressions"==u||"engagedUsersReach"==u||"mozoverview"==u||"trafficSourcesBrkdwnLine"==u||"bounceRateArea"==u||"negativeBar"==u||"trafficSourcesBrkdwnPie"==u||"costPerThosuandImpressions"==u||"clickThroughRate"==u||"costPerConversion"==u||"ConversionRate"==u||"costPerClick"==u||"costPerActionType"==u&&void 0!=t.meta){if("undefined"!=typeof t.charts[p].chartData[0])if(t.charts[p].chartData[0].x){var rr,sr=0,ir=!1,or=0,nr=0,cr=t.charts[p].chartData.length,lr=0,hr=0,pr=0,dr=0,ur=0,gr=0;if(t.charts[p].chartData.length>=14){for(var j=0,m=cr-1;m>=0;m--)0===j||j<7?("reachVsImpressions"==u||"engagedUsersReach"==u)&&t.charts[p].chartData[m].imp&&t.charts[p].chartData[m].rea?(pr+=parseFloat(t.charts[p].chartData[m].imp),dr+=parseFloat(t.charts[p].chartData[m].rea)):lr+=parseFloat(t.charts[p].chartData[m].y):j>=7&&j<14&&(("reachVsImpressions"==u||"engagedUsersReach"==u)&&t.charts[p].chartData[m].imp&&t.charts[p].chartData[m].rea?(ur+=parseFloat(t.charts[p].chartData[m].imp),gr+=parseFloat(t.charts[p].chartData[m].rea)):hr+=parseFloat(t.charts[p].chartData[m].y)),j++;"Total Impressions"!=t.charts[p].chartName&&"Engaged Users"!=t.charts[p].chartName||"reachVsImpressions"!=u&&"engagedUsersReach"!=u||(lr=isNaN(pr/dr)?0:pr/dr,hr=isNaN(ur/gr)?0:ur/gr),rr="WK"}else if("object"!=typeof t.charts[p].chartData[0].x){var mr=d(t.charts[p].chartData[0].x);if(mr){var fr=_.last(t.charts[p].chartData),vr=moment(fr.x).subtract(1,"days").format("YYYY-DD-MM");lr="Total Impressions"!=t.charts[p].chartName&&"Engaged Users"!=t.charts[p].chartName||"reachVsImpressions"!=u&&"engagedUsersReach"!=u?parseFloat(fr.y):isNaN(parseFloat(fr.imp)/parseFloat(fr.rea))?0:parseFloat(fr.imp)/parseFloat(fr.rea);for(var m=cr-1;m>=0;m--){var yr=moment(t.charts[p].chartData[m].x).format("YYYY-DD-MM");vr===yr&&(hr="Total Impressions"!=t.charts[p].chartName&&"Engaged Users"!=t.charts[p].chartName||"reachVsImpressions"!=u&&"engagedUsersReach"!=u?parseFloat(t.charts[p].chartData[m].y):isNaN(parseFloat(t.charts[p].chartData[m].imp)/parseFloat(t.charts[p].chartData[m].rea))?0:parseFloat(t.charts[p].chartData[m].imp)/parseFloat(t.charts[p].chartData[m].rea))}rr="Day"}}else{var fr=_.last(t.charts[p].chartData),vr=moment(fr.x).subtract(1,"days").format("YYYY-DD-MM");lr=parseFloat(fr.y);for(var m=cr-1;m>=0;m--){var yr=moment(t.charts[p].chartData[m].x).format("YYYY-DD-MM");vr===yr&&(hr=parseFloat(t.charts[p].chartData[m].y))}rr="Day"}var Dr,Z,br;lr>hr?(Dr="up",br=lr-hr,Z=hr>0?parseFloat(br/hr*100).toFixed(2):lr):lr<hr?(Dr="down",br=hr-lr,Z=hr>0?parseFloat(br/hr*100).toFixed(2):0):(br=hr-lr,Z=0);var wr=0,Tr=0;for(var q in t.charts[p].chartData)("reachVsImpressions"==u||"engagedUsersReach"==u)&&t.charts[p].chartData[q].imp&&t.charts[p].chartData[q].rea?(wr+=parseFloat(t.charts[p].chartData[q].imp),Tr+=parseFloat(t.charts[p].chartData[q].rea)):(isNaN(t.charts[p].chartData[q].y)&&(t.charts[p].chartData[q].y=0),sr+=parseFloat(t.charts[p].chartData[q].y)),parseFloat(t.charts[p].chartData[q].y)>0&&nr++;if("Total Impressions"!=t.charts[p].chartName&&"Engaged Users"!=t.charts[p].chartName||"reachVsImpressions"!=u&&"engagedUsersReach"!=u||(sr=isNaN(wr/Tr)?0:wr/Tr*100),"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.summaryType)if("avg"==t.charts[p].metricDetails.objectTypes[0].meta.summaryType)sr=0==nr&&0==sr?0:parseFloat(sr/nr).toFixed(2);else if("snapshot"==t.charts[p].metricDetails.objectTypes[0].meta.summaryType){var xr="";for(var Q in t.charts[p].chartData)xr<moment(t.charts[p].chartData[Q].x)&&(xr=moment(t.charts[p].chartData[Q].x),sr=t.charts[p].chartData[Q].y,0!=sr&&(or+=1));ir=or>=1}if("bounceRateArea"==u){var kr=0,v=0;for(var q in t.charts[p].chartData)kr+=parseFloat(t.charts[p].chartData[q].bounces),v+=parseFloat(t.charts[p].chartData[q].sessions);sr=kr/v*100}if("costPerClick"==u||"costPerThosuandImpressions"==u||"clickThroughRate"==u||"ConversionRate"==u||"costPerConversion"==u){var w=0,T=0;for(var q in t.charts[p].chartData)w+=parseFloat(t.charts[p].chartData[q].dividend),T+=parseFloat(t.charts[p].chartData[q].divisor);sr=0===w?w:"costPerThosuandImpressions"==u?w/T*1e3:"clickThroughRate"==u||"ConversionRate"==u||"costPerConversion"==u?"Infinity"===(w/T*100).toFixed(2)?0:(w/T*100).toFixed(2):w/T}if("line"==u||"bar"==u||"column"==u||"mozoverview"==u)"FacebookAds"==t.channelName&&"Cost Per Unique Action Type"==t.charts[p].metricDetails.name?n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,key:t.charts[p].chartName,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],summaryDisplay:parseFloat(sr).toFixed(2)%Math.floor(parseFloat(sr).toFixed(2))>0?parseFloat(sr).toFixed(2):parseFloat(sr).toFixed(2)>1?parseInt(sr):parseFloat(sr)>0?parseFloat(sr).toFixed(2):parseInt(sr),hasSnapshotData:ir}):("bar"==u||"column"==u)&&l<0&&0==sr?n.push({type:"line",channelName:c[t.channelName],values:t.charts[p].chartData,key:t.charts[p].metricDetails.name,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):n.push({subChartType:t.charts[p].subChartType,channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,key:"fbTopReferringDomain"===t.charts[p].chartSubType?void 0:t.charts[p].metricDetails.name,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,chartSubType:t.charts[p].chartSubType,hasSnapshotData:ir});else if("area"==u||"Reach Vs Impressions"==u||"EngagedUsersReach"==u||"negativeBar"==u)if("negativeBar"==u){var Cr=[];for(var Fr in t.charts[p].chartData)Cr.push({x:t.charts[p].chartData[Fr].x,y:-Math.abs(t.charts[p].chartData[Fr].y)});t.charts[p].chartType="area",n.push({channelName:c[t.channelName],type:"area",values:Cr,key:t.charts[p].metricDetails.name,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,area:!0,hasSnapshotData:ir})}else n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,key:t.charts[p].metricDetails.name,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir});else if("area"==u||"reachVsImpressions"==u||"engagedUsersReach"==u){var Pr=Math.round(100*sr)/100;n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,key:"Total Impressions"==t.charts[p].metricDetails.name?"Impressions/Reach (%)":t.charts[p].metricDetails.name,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:"Total Impressions"==t.charts[p].metricDetails.name||"Engaged users/Reach (%)"==t.charts[p].metricDetails.name?Pr+"%":Pr,area:!0,hasSnapshotData:ir})}else"bounceRateArea"==u?(t.charts[p].chartType="area",n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,key:t.charts[p].metricDetails.name,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir})):"costPerClick"==u||"costPerThosuandImpressions"==u||"clickThroughRate"==u||"ConversionRate"==u||"costPerConversion"==u?(t.charts[p].chartType="area",n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,key:t.charts[p].metricDetails.name,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir})):"costPerActionType"==u?n.push({channelName:c[t.channelName],type:"line",values:t.charts[p].chartData,key:t.meta.replace("_"," "),color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"trafficSourcesBrkdwnLine"==u?n.push({type:"line",channelName:c[t.channelName],values:t.charts[p].chartData,key:t.charts[p].metricDetails.name,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"trafficSourcesBrkdwnPie"==u?n.push({channelName:c[t.channelName],name:t.charts[p].chartName,type:"pie",values:t.charts[p].chartData,key:t.charts[p].metricDetails.name,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"percentageArea"==u?n.push({channelName:c[t.channelName],type:t.charts[p].chartType,metricCode:t.charts[p].metricCode,metricName:t.charts[p].metricName,key:t.charts[p].metricName,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",values:t.charts[p].chartData,color:t.charts[p].chartColour,arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):n.push({channelName:c[t.channelName],name:t.charts[p].chartName,type:t.charts[p].chartType,y:parseFloat(sr),key:t.charts[p].metricDetails.name,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,period:rr,variance:Z,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir})}else for(var ar in t.charts[p].chartData){var rr,sr=0,nr=0,cr=t.charts[p].chartData[ar].length,lr=0,hr=0;if(t.charts[p].chartData[ar].length>=14){for(var j=0,m=cr-1;m>=0;m--)0===j||j<7?lr+=parseFloat(t.charts[p].chartData[ar][m].y):j>=7&&j<14&&(hr+=parseFloat(t.charts[p].chartData[ar][m].y)),j++;rr="WK"}else if(t.charts[p].chartData[ar].length>0){var Nr=t.charts[p].chartData[ar].length,fr=_.last(t.charts[p].chartData[ar]);if("string"!=typeof fr.x){var vr=moment(fr.x).subtract(1,"days").format("YYYY-DD-MM");lr=parseFloat(fr.y)}else lr=parseFloat(t.charts[p].chartData[ar][Nr-1].y);for(var m=cr-1;m>=0;m--)if("string"!=typeof fr.x){var yr=moment(t.charts[p].chartData[ar][m].x).format("YYYY-DD-MM");vr===yr&&(hr=parseFloat(t.charts[p].chartData[ar][m].y))}else hr=parseFloat(t.charts[p].chartData[ar][Nr-2].y);rr="Day"}var Dr,br,Z;if(lr>hr)Dr="up",br=lr-hr,Z=hr>0?parseFloat(br/hr*100).toFixed(2):lr;else if(lr<hr)Dr="down",br=hr-lr,Z=hr>0?parseFloat(br/hr*100).toFixed(2):0;else var br=hr-lr,Z=0;for(var q in t.charts[p].chartData[ar])if(sr+=parseFloat(t.charts[p].chartData[ar][q].y),parseFloat(0!=t.charts[p].chartData[ar][q].y)&&nr++,"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.summaryType)if("avg"==t.charts[p].metricDetails.objectTypes[0].meta.summaryType)sr=0==nr&&0==sr?0:parseFloat(sr/nr).toFixed(2);else if("snapshot"==t.charts[p].metricDetails.objectTypes[0].meta.summaryType){var xr="";_.findIndex(t.charts[p].chartData[ar].y,function(t){return 0!==t.date});for(var Q in t.charts[p].chartData[ar])xr<moment(t.charts[p].chartData[ar][Q].x)&&(xr=moment(t.charts[p].chartData[ar][Q].x),sr=t.charts[p].chartData[ar][Q].y)}"line"==u||"bar"==u||"column"==u||"mozoverview"==u||"stackcolumn"==u?("bar"==u||"column"==u)&&l<0&&0==sr?n.push({channelName:c[t.channelName],type:"line",values:t.charts[p].chartData[ar],key:t.charts[p].metricDetails.objectTypes[0].meta.endpoint,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData[ar],key:"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:t.charts[p].metricDetails.objectTypes[0].meta.endpoint[ar],unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[ar]:"",color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[ar]?t.charts[p].chartColour[ar]:"",arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"trafficSourcesBrkdwnLine"==u?n.push({channelName:c[t.channelName],type:"line",values:t.charts[p].chartData[ar],key:"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:t.charts[p].metricDetails.objectTypes[0].meta.endpoint[ar],unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[ar]:"",color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[ar]?t.charts[p].chartColour[ar]:"",arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"trafficSourcesBrkdwnPie"==u?n.push({channelName:c[t.channelName],name:t.charts[p].chartName,type:"pie",y:parseFloat(sr),key:"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:t.charts[p].metricDetails.objectTypes[0].meta.endpoint[ar],unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[ar]:"",color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[ar]?t.charts[p].chartColour[ar]:"",arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"area"==u||"negativebar"==u?n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData[ar],key:"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:t.charts[p].metricDetails.objectTypes[0].meta.endpoint[ar],unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[ar]:"",color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[ar]?t.charts[p].chartColour[ar]:"",arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,area:!0,hasSnapshotData:ir}):"costPerActionType"==u?n.push({channelName:c[t.channelName],type:"line",values:t.charts[p].chartData,key:t.meta,color:t.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):n.push({channelName:c[t.channelName],name:t.charts[p].chartName,type:t.charts[p].chartType,y:parseFloat(sr),key:"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?t.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:t.charts[p].metricDetails.objectTypes[0].meta.endpoint[ar].replace(/\_/g," "),unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[ar]:"",color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[ar]?t.charts[p].chartColour[ar]:"",arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir})}}else if("tableAge"==ht||"tableGender"==ht||"tableDevice"==ht)n.push({type:"campaignOverViewbyAge",values:t.charts[p].chartData});else if("fbReachByCity"==u||"gaUsers"===u||"pieAge"==ht||"pieGender"==ht||"pieDevice"==ht){var Rr=0;for(var Ar in t.charts[p].chartData)n.push({channelName:c[t.channelName],name:t.charts[p].chartName,type:"fbReachByCity",y:parseFloat(t.charts[p].chartData[Ar]),key:Ar,unit:void 0!=t.charts[p].metricDetails.objectTypes[0].meta.unit?t.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[Rr]?t.charts[p].chartColour[Rr]:"",summaryDisplay:Math.round(100*t.charts[p].chartData[Ar])/100,hasSnapshotData:ir}),++Rr}else if("costPerActionType"==u&&void 0==t.meta)n.push({type:"costPerActionType",values:t.charts[p].chartData});else switch(u){case"instagramPosts":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"stackbar":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"highEngagementTweets":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"highestEngagementLinkedIn":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"vimeoTopVideos":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"gaTopPagesByVisit":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"campaignOverview":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"adgroupOverview":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"fbAdsAdgroupOverview":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"adOverview":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"gaPageContentEfficiencyTable":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"gaPageTechnicalEfficiencyTable":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"audienceBehaviourbyDay":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData,color:t.charts[p].chartColour});break;case"socialContributionToSiteTraffic":n.push({type:t.charts[p].chartType,metricCode:t.charts[p].metricCode,metricName:t.charts[p].metricName,values:t.charts[p].chartData,color:t.charts[p].chartColour});break;case"pageTechnicalEfficiency":for(var kr=0,Ir=0,m=0;m<t.charts[p].chartData.length;m++)kr+=Number(t.charts[p].chartData[m].bounceRate),Ir+=Number(t.charts[p].chartData[m].PageLoadTime);var Wr=[{key:"Page LoadTime",value:Ir,unit:"s"},{key:"Bounce Rate",value:kr,unit:"%"}];n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,summary:Wr,key:t.charts[p].chartName,color:t.charts[p].chartColour});break;case"pageContentEfficiency":for(var kr=0,Et=0,Wt=0,Ft=0,m=0;m<t.charts[p].chartData.length;m++)kr+=Number(t.charts[p].chartData[m].bounceRate),Et+=Number(t.charts[p].chartData[m].entranceRate),Wt+=Number(t.charts[p].chartData[m].uniquePageviews),Ft+=Number(t.charts[p].chartData[m].pageviews);var Wr=[{key:"Unique Page views",value:Wt},{key:"Page views",value:Ft,unit:""},{key:"Bounce Rate",value:kr,unit:"%"},{key:"Entrance rate",value:Et,unit:"%"}];n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,summary:Wr,key:t.charts[p].chartName,color:t.charts[p].chartColour});break;case"visitorAcquisitionEfficiency":for(var Yt=0,_t=0,$t=0,m=0;m<t.charts[p].chartData.length;m++)$t+=Number(t.charts[p].chartData[m].goalConversionRateAll),_t+=Number(t.charts[p].chartData[m].goalValuePerSession),Yt+=Number(t.charts[p].chartData[m].newUsers);var Wr=[{key:"New users",value:Yt},{key:"Per session goal value",value:_t,unit:""},{key:"Goal conversion rate",value:$t,unit:"%"}];n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,summary:Wr,key:t.charts[p].chartName,color:t.charts[p].chartColour});break;case"gaSocialMediaOverview":n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,key:t.charts[p].chartName,color:t.charts[p].chartColour});break;case"topReferringSites":if("Top referring sites(Table)"==String(t.charts[p].chartName))n.push({type:"topReferringSitesTable",values:t.charts[p].chartData});else{for(var Kt=0,Zt=0,m=0;m<t.charts[p].chartData.length;m++)Kt+=Number(t.charts[p].chartData[m].goalConversionRate),v+=Number(t.charts[p].chartData[m].sessions),Zt+=Number(t.charts[p].chartData[m].goalCompletions);var Wr=[{key:"Sessions",value:v},{key:"Goal Completions",value:Zt,unit:""},{key:"Goal conversion rate",value:Kt,unit:"%"}];n.push({channelName:c[t.channelName],type:t.charts[p].chartType,values:t.charts[p].chartData,summary:Wr,key:t.charts[p].chartName,color:t.charts[p].chartColour})}break;case"fbReachByAge":n.push({type:"fbReachByAge",values:t.charts[p].chartData,channelName:c[t.channelName]});break;case"instagramEngagements":if("instagramPostTypes"===t.charts[p].chartSubType){var Rr=0;for(var Ar in t.charts[p].chartData)n.push({channelName:c[t.channelName],name:t.charts[p].chartName,type:"pie",key:Ar,displaySummary:!1,y:parseFloat(t.charts[p].chartData[Ar]),color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[Rr]?t.charts[p].chartColour[Rr]:""}),++Rr}else if("instagramPostEngagement"===t.charts[p].chartSubType){var Rr=0;for(var Ar in t.charts[p].chartData)n.push({channelName:c[t.channelName],name:t.charts[p].chartName,type:"fbReachByCity",y:parseFloat(t.charts[p].chartData[Ar]),key:Ar,displaySummary:!1,color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[Rr]?t.charts[p].chartColour[Rr]:"",summaryDisplay:Math.round(100*t.charts[p].chartData[Ar])/100,hasSnapshotData:ir}),++Rr}else if("instagramPostFrequency"===t.charts[p].chartSubType){var Sr=new Date(a.startDate),Or=new Date(a.endDate),Er=Math.abs(Or.getTime()-Sr.getTime()),zr=Math.ceil(Er/864e5);n.push({channelName:c[t.channelName],key:"Post per day",type:"angularGauge",y:Math.round(t.charts[p].chartData/zr*100)/100,displaySummary:!1,color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[Rr]?t.charts[p].chartColour[Rr]:"",summaryDisplay:Math.round(t.charts[p].chartData/zr*100)/100,hasSnapshotData:ir})}break;case"fbReachByCountry":var Rr=0;for(var Ar in t.charts[p].chartData)n.push({channelName:c[t.channelName],name:t.charts[p].chartName,type:"pie",y:parseFloat(t.charts[p].chartData[Ar]),key:Ar,color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[Rr]?t.charts[p].chartColour[Rr]:"",summaryDisplay:Math.round(100*t.charts[p].chartData[Ar])/100,hasSnapshotData:ir}),++Rr;break;case"gaTopCountriesToSocialVisits":case"gaTopCitiesToSocialVisits":var Rr=0;for(var Ar in t.charts[p].chartData)n.push({channelName:c[t.channelName],name:t.charts[p].chartName,type:"pie",y:parseFloat(t.charts[p].chartData[Ar]),key:Ar,color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[Rr]?t.charts[p].chartColour[Rr]:"",summaryDisplay:parseFloat(t.charts[p].chartData[Ar]).toFixed(2)%Math.floor(t.charts[p].chartData[Ar])>0?parseFloat(t.charts[p].chartData[Ar]).toFixed(2):parseInt(t.charts[p].chartData[Ar]),hasSnapshotData:ir}),++Rr;break;case"pinterestEngagementRate":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"pinterestLeaderboard":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"instagramHashtagLeaderBoard":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"percentageArea":if("undefined"!=typeof t.charts[p].chartData[0].y){var Mr=_.groupBy(t.charts[p].chartData,"y.socialNetwork"),Lr=0;for(var M in Mr){var rr,sr=0,or=0,ir=!1,nr=0,cr=Mr[M].length,lr=0,hr=0;if(t.charts[p].chartData.length>=14){for(var j=0,m=cr-1;m>=0;m--)(0===j||j<7)&&"undefined"!=typeof Mr[M][m].y?lr+=parseFloat(Mr[M][m].y.total):j>=7&&j<14&&"undefined"!=typeof Mr[M][m].y&&(hr+=parseFloat(Mr[M][m].y.total)),j++;rr="WK"}else if(t.charts[p].chartData.length>0){var Nr=Mr[M].length,fr=_.last(Mr[M]);
if("string"!=typeof fr.x){var vr=moment(fr.x).subtract(1,"days").format("YYYY-DD-MM");lr=parseFloat(fr.y)}else lr=parseFloat(Mr[M][Nr-1].y.total);for(var m=cr-1;m>=0;m--)if("string"!=typeof fr.x){var yr=moment(Mr[M][m].x).format("YYYY-DD-MM");vr===yr&&(hr=parseFloat(Mr[M][m].y))}else hr=parseFloat(Mr[M][Nr-2].y.total);rr="Day"}var Dr,br,Z;if(lr>hr)Dr="up",br=lr-hr,Z=hr>0?parseFloat(br/hr*100).toFixed(2):lr;else if(lr<hr)Dr="down",br=hr-lr,Z=hr>0?parseFloat(br/hr*100).toFixed(2):0;else var br=hr-lr,Z=0;for(var q in Mr[M])if("undefined"!=typeof Mr[M][q].y&&(sr+=parseFloat(Mr[M][q].y.total)),"undefined"!=typeof Mr[M][q].y&&parseFloat(0!=Mr[M][q].y.total)&&nr++,"undefined"!=typeof t.charts[p].metricDetails.objectTypes[0].meta.summaryType)if("avg"==t.charts[p].metricDetails.objectTypes[0].meta.summaryType)sr=0==nr&&0==sr?0:parseFloat(sr/nr).toFixed(2);else if("snapshot"==t.charts[p].metricDetails.objectTypes[0].meta.summaryType){var xr="";for(var Q in Mr[ar])xr<moment(Mr[M][Q].x)&&(xr=moment(Mr[M][Q].x),sr=Mr[M][Q].y.total,0!=sr&&(or+=1));ir=or>=1}n.push({channelName:c[t.channelName],type:t.charts[p].chartType,metricCode:t.charts[p].metricCode,metricName:t.charts[p].metricName,key:M,values:Mr[M],color:"undefined"!=typeof t.charts[p].chartColour&&"undefined"!=typeof t.charts[p].chartColour[Lr]?t.charts[p].chartColour[Lr]:"",arrow:Dr,totalChartLength:t.charts[p].chartData,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}),Lr++}}break;case"youtubeVideosOverview":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"twitterEngagements":"engagementByUsersTalkedAbout"===t.charts[p].chartSubType||"topLinks"===t.charts[p].chartSubType||"hashTag"===t.charts[p].chartSubType?n.push({type:t.charts[p].chartType,chartSubType:t.charts[p].chartSubType,values:t.charts[p].chartData}):n.push({channelName:c[t.channelName],type:t.charts[p].chartType,chartSubType:t.charts[p].chartSubType,values:t.charts[p].chartData,key:t.charts[p].chartName,color:t.charts[p].chartColour});break;case"fbAdsCampaignOverview":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData});break;case"fbAdsAdOverview":n.push({type:t.charts[p].chartType,values:t.charts[p].chartData})}}}return o.resolve(n),o.promise}function p(t,a,r){function s(t,e){var a;for(var r in F){a=!1;for(var s in e)F[r]==e[s]&&(a=!0);if(0==a)return F[r]}}function i(t,e){return t+e}function i(t,e){return t+e}function i(t,e){return t+e}var o=e.defer(),n=[];n.twitterEngagements=[],n.youtubeVideosOverview=[],n.lineCharts=[],n.barCharts=[],n.pieCharts=[],n.percentageAreaOptions=[],n.instagramPosts=[],n.highEngagementTweets=[],n.highestEngagementLinkedIn=[],n.pinterestEngagementRate=[],n.pinterestLeaderboard=[],n.gaTopPagesByVisit=[],n.angularGauge=[],n.multicharts=[],n.campaignOverViewbyAge=[],n.campaignOverview=[],n.adOverview=[],n.adgroupOverview=[],n.fbAdsAdgroupOverview=[],n.fbReachByAge=[],n.mozoverview=[],n.fbReachByCity=[],n.vimeoTopVideos=[],n.costPerActionType=[],n.topReferringSites=[],n.instagramHashtagLeaderBoard=[],n.gaPageContentEfficiencyTable=[],n.gaPageTechnicalEfficiencyTable=[],n.gaVisitorAcquisitionEfficiencyAnalysisTable=[],n.pageTechnicalEfficiency=[],n.pageContentEfficiency=[],n.visitorAcquisitionEfficiency=[],n.percentageArea=[],n.topReferringSites=[],n.topReferringSitesTable=[],n.gaSocialMediaOverview=[],n.stackbar=[],n.fbAdsCampaignOverview=[],n.fbAdsAdOverview=[];var c,l,h,p,m,f={lineDataOptions:{chart:{type:"lineChart",noData:"No data for chosen date range",margin:{top:20,right:25,bottom:30,left:35},x:function(t){return t.x},y:function(t){return parseFloat(t.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(t){return d3.time.format("%d/%m/%y")(new Date(t))},showMaxMin:!1},yAxis:{tickFormat:function(t){return d3.format("r")(t)},showMaxMin:!1},interpolate:"monotone",axisLabelDistance:-10,showLegend:!1,clipEdge:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},barDataOptions:{chart:{type:"multiBarChart",noData:"No data for chosen date range",margin:{top:20,right:25,bottom:30,left:35},x:function(t){return t.x},y:function(t){return parseFloat(t.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(t){return d3.time.format("%d/%m/%y")(new Date(t))},showMaxMin:!1},yAxis:{tickFormat:function(t){return d3.format("r")(t)},showMaxMin:!1},tooltip:{enabled:!1,headerEnabled:!0,headerFormatter:function(t){return d3.time.format("%d/%m/%y")(new Date(t))}},axisLabelDistance:-10,showLegend:!1,stacked:!0,showControls:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},pieDataOptions:{chart:{type:"pieChart",noData:"No data for chosen date range",margin:{top:0,right:15,bottom:15,left:15},x:function(t){return t.key},y:function(t){return t.y},showLabels:!1,showLegend:!1,labelsOutside:!1,tooltips:!0,labelThreshold:.01,labelSunbeamLayout:!0,legend:{rightAlign:!1,margin:{bottom:25}}}},percentageAreaOptions:{chart:{type:"area",noData:"No data for chosen date range",margin:{top:20,right:25,bottom:30,left:35},x:function(t){return t.x},y:function(t){return parseFloat(t.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(t){return d3.time.format("%d/%m/%y")(new Date(t))},showMaxMin:!1},yAxis:{tickFormat:function(t){return d3.format("r")(t)},showMaxMin:!1},interpolate:"monotone",axisLabelDistance:-10,showLegend:!1,clipEdge:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},instagramPosts:{chart:{type:"instagramPosts"}},campaignOverview:{chart:{type:"campaignOverview"}},adOverview:{chart:{type:"adOverview"}},adgroupOverview:{chart:{type:"adgroupOverview"}},fbAdsAdgroupOverview:{chart:{type:"fbAdsAdgroupOverview"}},highEngagementTweets:{chart:{type:"highEngagementTweets"}},mozoverview:{chart:{type:"mozoverview"}},highestEngagementLinkedIn:{chart:{type:"highestEngagementLinkedIn"}},vimeoTopVideos:{chart:{type:"vimeoTopVideos"}},campaignOverViewbyAge:{chart:{type:"campaignOverViewbyAge"}},gaTopPagesByVisit:{chart:{type:"gaTopPagesByVisit"}},gaPageContentEfficiencyTable:{chart:{type:"gaPageContentEfficiencyTable"}},gaPageTechnicalEfficiencyTable:{chart:{type:"gaPageTechnicalEfficiencyTable"}},gaVisitorAcquisitionEfficiencyAnalysisTable:{chart:{type:"gaVisitorAcquisitionEfficiencyAnalysisTable"}},topReferringSitesTable:{chart:{type:"topReferringSitesTable"}},visitorAcquisitionEfficiency:{chart:{type:"visitorAcquisitionEfficiency",margin:{top:20,right:30,bottom:30,left:35}}},engagementByUsersTalkedAbout:{chart:{type:"engagementByUsersTalkedAbout"}},youtubeVideosOverview:{chart:{type:"youtubeVideosOverview"}},pinterestEngagementRate:{chart:{type:"pinterestEngagementRate"}},pinterestLeaderboard:{chart:{type:"pinterestLeaderboard"}},costPerActionType:{chart:{type:"costPerActionType"}},fbAdsCampaignOverview:{chart:{type:"fbAdsCampaignOverview"}},fbAdsAdOverview:{chart:{type:"fbAdsAdOverview"}},emptyCharts:{chart:{type:"emptyCharts"}},multiDataOptions:{chart:{type:"multiChart",noData:"No data for chosen date range",margin:{top:20,right:30,bottom:30,left:35},x:function(t){return t.x},y:function(t){return parseFloat(t.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(t){return d3.time.format("%d/%m/%y")(new Date(t))},showMaxMin:!1},yAxis1:{tickFormat:function(t){return d3.format("r")(t)},showMaxMin:!1},yAxis2:{tickFormat:function(t){return d3.format("r")(t)},showMaxMin:!1},interpolate:"monotone",axisLabelDistance:-10,showLegend:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},instagramHashtagLeaderBoard:{chart:{type:"instagramHashtagLeaderBoard"}}},v=0,y=[],D=[{W:1,H:1,N:0,r:1,c:1},{W:1,H:1,N:1,r:1,c:1},{W:1,H:1,N:2,r:2,c:1},{W:1,H:1,N:3,r:3,c:1},{W:1,H:1,N:4,r:4,c:1},{W:1,H:1,N:5,r:5,c:1},{W:1,H:1,N:6,r:6,c:1},{W:1,H:1,N:7,r:7,c:1},{W:1,H:1,N:8,r:8,c:1},{W:2,H:1,N:0,r:1,c:1},{W:2,H:1,N:1,r:1,c:1},{W:2,H:1,N:2,r:1,c:2},{W:2,H:1,N:3,r:2,c:1},{W:2,H:1,N:4,r:2,c:2},{W:2,H:1,N:5,r:2,c:3},{W:2,H:1,N:6,r:2,c:3},{W:2,H:1,N:7,r:3,c:3},{W:2,H:1,N:8,r:3,c:3},{W:3,H:1,N:0,r:1,c:1},{W:3,H:1,N:1,r:1,c:1},{W:3,H:1,N:2,r:1,c:2},{W:3,H:1,N:3,r:1,c:3},{W:3,H:1,N:4,r:2,c:2},{W:3,H:1,N:5,r:2,c:3},{W:3,H:1,N:6,r:2,c:3},{W:3,H:1,N:7,r:3,c:3},{W:3,H:1,N:8,r:3,c:3},{W:4,H:1,N:0,r:1,c:1},{W:4,H:1,N:1,r:1,c:1},{W:4,H:1,N:2,r:1,c:2},{W:4,H:1,N:3,r:1,c:3},{W:4,H:1,N:4,r:1,c:4},{W:4,H:1,N:5,r:2,c:3},{W:4,H:1,N:6,r:2,c:3},{W:4,H:1,N:7,r:3,c:3},{W:4,H:1,N:8,r:3,c:3},{W:5,H:1,N:0,r:1,c:1},{W:5,H:1,N:1,r:1,c:1},{W:5,H:1,N:2,r:1,c:2},{W:5,H:1,N:3,r:1,c:3},{W:5,H:1,N:4,r:1,c:4},{W:5,H:1,N:5,r:1,c:5},{W:5,H:1,N:6,r:2,c:3},{W:5,H:1,N:7,r:2,c:4},{W:5,H:1,N:8,r:2,c:4},{W:6,H:1,N:0,r:1,c:1},{W:6,H:1,N:1,r:1,c:1},{W:6,H:1,N:2,r:1,c:2},{W:6,H:1,N:3,r:1,c:3},{W:6,H:1,N:4,r:1,c:4},{W:6,H:1,N:5,r:1,c:5},{W:6,H:1,N:6,r:2,c:3},{W:6,H:1,N:7,r:2,c:4},{W:6,H:1,N:8,r:2,c:4},{W:1,H:2,N:0,r:1,c:1},{W:1,H:2,N:1,r:1,c:1},{W:1,H:2,N:2,r:2,c:1},{W:1,H:2,N:3,r:3,c:1},{W:1,H:2,N:4,r:4,c:1},{W:1,H:2,N:5,r:5,c:1},{W:1,H:2,N:6,r:6,c:1},{W:1,H:2,N:7,r:7,c:1},{W:1,H:2,N:8,r:8,c:1},{W:2,H:2,N:0,r:1,c:1},{W:2,H:2,N:1,r:1,c:1},{W:2,H:2,N:2,r:1,c:2},{W:2,H:2,N:3,r:2,c:2},{W:2,H:2,N:4,r:2,c:2},{W:2,H:2,N:5,r:3,c:2},{W:2,H:2,N:6,r:3,c:2},{W:2,H:2,N:7,r:4,c:2},{W:2,H:2,N:8,r:4,c:2},{W:3,H:2,N:0,r:1,c:1},{W:3,H:2,N:1,r:1,c:1},{W:3,H:2,N:2,r:1,c:2},{W:3,H:2,N:3,r:2,c:2},{W:3,H:2,N:4,r:2,c:2},{W:3,H:2,N:5,r:2,c:3},{W:3,H:2,N:6,r:2,c:3},{W:3,H:2,N:7,r:2,c:4},{W:3,H:2,N:8,r:2,c:4},{W:4,H:2,N:0,r:1,c:1},{W:4,H:2,N:1,r:1,c:1},{W:4,H:2,N:2,r:1,c:2},{W:4,H:2,N:3,r:1,c:3},{W:4,H:2,N:4,r:2,c:2},{W:4,H:2,N:5,r:2,c:3},{W:4,H:2,N:6,r:2,c:3},{W:4,H:2,N:7,r:2,c:4},{W:4,H:2,N:8,r:2,c:4},{W:5,H:2,N:0,r:1,c:1},{W:5,H:2,N:1,r:1,c:1},{W:5,H:2,N:2,r:1,c:2},{W:5,H:2,N:3,r:1,c:3},{W:5,H:2,N:4,r:2,c:2},{W:5,H:2,N:5,r:2,c:3},{W:5,H:2,N:6,r:2,c:3},{W:5,H:2,N:7,r:2,c:4},{W:5,H:2,N:8,r:2,c:4},{W:6,H:2,N:0,r:1,c:1},{W:6,H:2,N:1,r:1,c:1},{W:6,H:2,N:2,r:1,c:2},{W:6,H:2,N:3,r:1,c:3},{W:6,H:2,N:4,r:2,c:2},{W:6,H:2,N:5,r:2,c:3},{W:6,H:2,N:6,r:2,c:3},{W:6,H:2,N:7,r:2,c:4},{W:6,H:2,N:8,r:2,c:4},{W:1,H:3,N:0,r:1,c:1},{W:1,H:3,N:1,r:1,c:1},{W:1,H:3,N:2,r:2,c:1},{W:1,H:3,N:3,r:3,c:1},{W:1,H:3,N:4,r:4,c:1},{W:1,H:3,N:5,r:5,c:1},{W:1,H:3,N:6,r:6,c:1},{W:1,H:3,N:7,r:7,c:1},{W:1,H:3,N:8,r:8,c:1},{W:2,H:3,N:0,r:1,c:1},{W:2,H:3,N:1,r:1,c:1},{W:2,H:3,N:2,r:2,c:1},{W:2,H:3,N:3,r:3,c:1},{W:2,H:3,N:4,r:2,c:2},{W:2,H:3,N:5,r:3,c:2},{W:2,H:3,N:6,r:3,c:2},{W:2,H:3,N:7,r:4,c:2},{W:2,H:3,N:8,r:4,c:2},{W:3,H:3,N:0,r:1,c:1},{W:3,H:3,N:1,r:1,c:1},{W:3,H:3,N:2,r:1,c:2},{W:3,H:3,N:3,r:2,c:2},{W:3,H:3,N:4,r:2,c:2},{W:3,H:3,N:5,r:2,c:3},{W:3,H:3,N:6,r:2,c:3},{W:3,H:3,N:7,r:2,c:4},{W:3,H:3,N:8,r:2,c:4},{W:4,H:3,N:0,r:1,c:1},{W:4,H:3,N:1,r:1,c:1},{W:4,H:3,N:2,r:1,c:2},{W:4,H:3,N:3,r:1,c:3},{W:4,H:3,N:4,r:2,c:2},{W:4,H:3,N:5,r:2,c:3},{W:4,H:3,N:6,r:2,c:3},{W:4,H:3,N:7,r:2,c:4},{W:4,H:3,N:8,r:2,c:4},{W:5,H:3,N:0,r:1,c:1},{W:5,H:3,N:1,r:1,c:1},{W:5,H:3,N:2,r:1,c:2},{W:5,H:3,N:3,r:1,c:3},{W:5,H:3,N:4,r:2,c:2},{W:5,H:3,N:5,r:2,c:3},{W:5,H:3,N:6,r:2,c:3},{W:5,H:3,N:7,r:2,c:4},{W:5,H:3,N:8,r:2,c:4},{W:6,H:3,N:0,r:1,c:1},{W:6,H:3,N:1,r:1,c:1},{W:6,H:3,N:2,r:1,c:2},{W:6,H:3,N:3,r:1,c:3},{W:6,H:3,N:4,r:2,c:2},{W:6,H:3,N:5,r:2,c:3},{W:6,H:3,N:6,r:2,c:3},{W:6,H:3,N:7,r:2,c:4},{W:6,H:3,N:8,r:2,c:4}];if("customFusion"==t.widgetType)for(var b in a)if("costPerActionType"!=a[b].type||t.meta)switch(a[b].type){case"line":case"area":case"bar":case"column":case"reachVsImpressions":case"engagedUsersReach":n.lineCharts.push(a[b]);break;case"stackcolumn":n.barCharts.push(a[b]);break;case"pie":n.pieCharts.push(a[b]);break;case"instagramPosts":n.instagramPosts.push(a[b]);break;case"highEngagementTweets":n.highEngagementTweets.push(a[b]);break;case"highestEngagementLinkedIn":n.highestEngagementLinkedIn.push(a[b]);break;case"gaTopPagesByVisit":n.gaTopPagesByVisit.push(a[b]);break;case"campaignOverViewbyAge":n.campaignOverViewbyAge.push(a[b]);break;case"pageContentEfficiency":n.pageContentEfficiency.push(a[b]);break;case"pageTechnicalEfficiency":n.pageTechnicalEfficiency.push(a[b]);break;case"visitorAcquisitionEfficiency":n.visitorAcquisitionEfficiency.push(a[b]);break;case"gaPageContentEfficiencyTable":n.gaPageContentEfficiencyTable.push(a[b]);break;case"gaPageTechnicalEfficiencyTable":n.gaPageTechnicalEfficiencyTable.push(a[b]);break;case"topReferringSites":n.topReferringSites.push(a[b]);break;case"topReferringSitesTable":n.topReferringSitesTable.push(a[b]);break;case"gaSocialMediaOverview":n.gaSocialMediaOverview.push(a[b]);break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":n.gaVisitorAcquisitionEfficiencyAnalysisTable.push(a[b]);break;case"fbReachByCity":n.fbReachByCity.push(a[b]);break;case"fbReachByAge":n.fbReachByAge.push(a[b]);break;case"pinterestEngagementRate":n.pinterestEngagementRate.push(a[b]);break;case"pinterestLeaderboard":n.pinterestLeaderboard.push(a[b]);break;case"audienceBehaviourbyDay":case"socialContributionToSiteTraffic":n.multicharts.push(a[b]);break;case"vimeoTopVideos":n.vimeoTopVideos.push(a[b]);break;case"campaignOverview":n.campaignOverview.push(a[b]);break;case"adgroupOverview":n.adgroupOverview.push(a[b]);break;case"fbAdsAdgroupOverview":n.fbAdsAdgroupOverview.push(a[b]);break;case"adOverview":n.adOverview.push(a[b]);break;case"percentageArea":n.percentageArea.push(a[b]);break;case"mozoverview":for(var w=0;w<a[b].values.length;w++)a[b].values[w].x=moment(a[b].values[w].x).format("YYYY-DD-MM");n.mozoverview.push(a[b]);break;case"angularGauge":n.angularGauge.push(a[b]);break;case"stackbar":n.stackbar.push(a[b]);break;case"instagramHashtagLeaderBoard":n.instagramHashtagLeaderBoard.push(a[b]);break;case"twitterEngagements":n.twitterEngagements.push(a[b]);break;case"youtubeVideosOverview":n.youtubeVideosOverview.push(a[b]);break;case"fbAdsCampaignOverview":n.fbAdsCampaignOverview.push(a[b]);break;case"fbAdsAdOverview":n.fbAdsAdOverview.push(a[b])}else n.costPerActionType.push(a[b]);else for(var b in a)if("line"==a[b].type||"area"==a[b].type||"reachVsImpressions"==a[b].type||"engagedUsersReach"==a[b].type||"costPerActionType"==a[b].type&&void 0!=t.meta)n.lineCharts.push(a[b]);else if("costPerActionType"!=a[b].type||t.meta)switch(a[b].type){case"bar":case"column":case"stackcolumn":n.barCharts.push(a[b]);break;case"pie":n.pieCharts.push(a[b]);break;case"instagramPosts":n.instagramPosts.push(a[b]);break;case"highEngagementTweets":n.highEngagementTweets.push(a[b]);break;case"highestEngagementLinkedIn":n.highestEngagementLinkedIn.push(a[b]);break;case"gaTopPagesByVisit":n.gaTopPagesByVisit.push(a[b]);break;case"campaignOverViewbyAge":n.campaignOverViewbyAge.push(a[b]);break;case"pageContentEfficiency":n.pageContentEfficiency.push(a[b]);break;case"pageTechnicalEfficiency":n.pageTechnicalEfficiency.push(a[b]);break;case"visitorAcquisitionEfficiency":n.visitorAcquisitionEfficiency.push(a[b]);break;case"gaPageContentEfficiencyTable":n.gaPageContentEfficiencyTable.push(a[b]);break;case"gaPageTechnicalEfficiencyTable":n.gaPageTechnicalEfficiencyTable.push(a[b]);break;case"topReferringSites":n.topReferringSites.push(a[b]);break;case"topReferringSitesTable":n.topReferringSitesTable.push(a[b]);break;case"gaSocialMediaOverview":n.gaSocialMediaOverview.push(a[b]);break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":n.gaVisitorAcquisitionEfficiencyAnalysisTable.push(a[b]);break;case"fbReachByCity":n.fbReachByCity.push(a[b]);break;case"fbReachByAge":n.fbReachByAge.push(a[b]);break;case"pinterestEngagementRate":n.pinterestEngagementRate.push(a[b]);break;case"pinterestLeaderboard":n.pinterestLeaderboard.push(a[b]);break;case"audienceBehaviourbyDay":case"socialContributionToSiteTraffic":n.multicharts.push(a[b]);break;case"vimeoTopVideos":n.vimeoTopVideos.push(a[b]);break;case"campaignOverview":n.campaignOverview.push(a[b]);break;case"adgroupOverview":n.adgroupOverview.push(a[b]);break;case"fbAdsAdgroupOverview":n.fbAdsAdgroupOverview.push(a[b]);break;case"adOverview":n.adOverview.push(a[b]);break;case"percentageArea":n.percentageArea.push(a[b]);break;case"mozoverview":for(var w=0;w<a[b].values.length;w++)a[b].values[w].x=moment(a[b].values[w].x).format("YYYY-DD-MM");n.mozoverview.push(a[b]);break;case"angularGauge":n.angularGauge.push(a[b]);break;case"stackbar":n.stackbar.push(a[b]);break;case"instagramHashtagLeaderBoard":n.instagramHashtagLeaderBoard.push(a[b]);break;case"twitterEngagements":n.twitterEngagements.push(a[b]);break;case"youtubeVideosOverview":n.youtubeVideosOverview.push(a[b]);break;case"fbAdsCampaignOverview":n.fbAdsCampaignOverview.push(a[b]);break;case"fbAdsAdOverview":n.fbAdsAdOverview.push(a[b])}else n.costPerActionType.push(a[b]);var T=[],x={},k={},C={},F=["#EF5350","#EC407A","#9C27B0","#42A5F5","#26A69A","#FFCA28","#FF7043","#8D6E63"];if(1==n.lineCharts.length){for(var P=[],N=[],w=0;w<n.lineCharts.length;w++){for(var R=[],A=[],I=0;I<n.lineCharts[w].values.length;I++){R.push("string"==typeof n.lineCharts[w].values[I].x?n.lineCharts[w].values[I].x:n.lineCharts[w].values[I].x.format("DD-MMM-YYYY"));var W=String(n.lineCharts[w].values[I].y).indexOf(".")?parseFloat(n.lineCharts[w].values[I].y):parseInt(n.lineCharts[w].values[I].y);A.push(W)}N.push({name:"(none)"===n.lineCharts[w].key?"Direct":"fbTopReferringDomain"===n.lineCharts[0].chartSubType?"Top Referring Domain":n.lineCharts[w].key,data:A,tooltip:{valueSuffix:n.lineCharts[w].unit},color:n.lineCharts[w].color})}x={chart:{type:n.lineCharts[0].type,reflow:!0,zoomType:"x"},exporting:{enabled:!1},tooltip:{shared:!0},credits:{enabled:!1},xAxis:{type:"datetime",categories:R,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}if("string"!=typeof this.value||d(this.value)){var t=this.value.split("-");return t[1]+" "+t[0]}return this.value}},tickInterval:"fbTopReferringDomain"===n.lineCharts[0].chartSubType?0:7,min:0},yAxis:[{title:{text:null}}],title:{text:"",style:{display:"none"}},series:N},P.push(x),v++,y.push({options:f.lineDataOptions,data:n.lineCharts,api:{},chartOptions:x});var S=0;for(var b in n.lineCharts)for(Y in n.lineCharts[b].values)S+=parseFloat(n.lineCharts[b].values[Y].y);0==S&&(y[y.length-1].options.chart.yDomain=[0,10])}if(n.lineCharts.length>1){var O,P=[],N=[];for(var b in n.lineCharts){var R=[],A=[];O=n.lineCharts[b].type;for(var E in T)if(n.lineCharts[b].color==T[E]){var z=s(n.lineCharts[b].color,T);n.lineCharts[b].color=z}for(var I=0;I<n.lineCharts[b].values.length;I++)if("object"!=typeof n.lineCharts[b].values[I].x){var M=d(n.lineCharts[b].values[I].x);if(M){R.push(n.lineCharts[b].values[I].x.format("DD-MMM-YYYY"));var W=String(n.lineCharts[b].values[I].y).indexOf(".")?parseFloat(n.lineCharts[b].values[I].y):parseInt(n.lineCharts[b].values[I].y);A.push(W)}else{R.push(n.lineCharts[b].values[I].x);var W=String(n.lineCharts[b].values[I].y).indexOf(".")?parseFloat(n.lineCharts[b].values[I].y):parseInt(n.lineCharts[b].values[I].y);A.push(W)}}else{R.push(n.lineCharts[b].values[I].x.format("DD-MMM-YYYY"));var W=String(n.lineCharts[b].values[I].y).indexOf(".")?parseFloat(n.lineCharts[b].values[I].y):parseInt(n.lineCharts[b].values[I].y);A.push(W)}if("string"==typeof n.lineCharts[b].values[0].x){var L=_.findIndex(g,function(t){return t==n.lineCharts[b].values[0].x});if(L==-1)var j="string";else var j="dayOfWeek"}else if("number"==typeof n.lineCharts[b].values[0].x)var j="number";else var j="date";"reachVsImpressions"==O||"engagedUsersReach"==O?N.push({name:n.lineCharts[b].key,yAxis:"string"==typeof b?parseInt(b):b,tooltip:{valueSuffix:"Impressions/Reach (%)"===n.lineCharts[b].key||"Engaged users/Reach (%)"===n.lineCharts[b].key?"%":n.lineCharts[b].unit},xAxisData:R,xAxisType:j,data:A,type:"area",color:n.lineCharts[b].color}):N.push({name:"(none)"===n.lineCharts[b].key?"Direct":"fbTopReferringDomain"===n.lineCharts[b].chartSubType?"Top Referring Domain":n.lineCharts[b].key,tooltip:{valueSuffix:n.lineCharts[b].unit},xAxisData:R,xAxisType:j,data:A,type:n.lineCharts[b].type,color:n.lineCharts[b].color}),T.push(n.lineCharts[b].color)}if("object"!=typeof n.lineCharts[b].values[0].x){var M=d(n.lineCharts[b].values[0].x);x=M?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:R,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:N}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:R},title:{text:"",style:{display:"none"}},series:N}}else x="reachVsImpressions"==O||"engagedUsersReach"==O?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:R,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0},yAxis:[{title:{text:"reachVsImpressions"==O?"Impressions/Reach (%)":"Engaged users/Reach (%)"}},{title:{text:"Total Reach"},opposite:!0}],title:{text:"",style:{display:"none"}},series:N}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:R,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:"fbTopReferringDomain"===n.lineCharts[0].chartSubType?0:7,min:0},title:{text:"",style:{display:"none"}},series:N};T=[];var H=[];for(var b in n.lineCharts){var B=0;for(var Y in n.lineCharts[b].values)B+=parseFloat(n.lineCharts[b].values[Y].y);H[b]={summaryTotal:B}}var $=0,V=0;for(E in H)$=parseInt(H[E].summaryTotal),0==$&&(V=1);var q=$/H.length;for(var b in n.lineCharts){var B=0;for(Y in n.lineCharts[b].values)B+=parseFloat(n.lineCharts[b].values[Y].y);B>q?n.lineCharts[b].yAxis=2:n.lineCharts[b].yAxis=1}var U=_.groupBy(N,"xAxisType");for(var G in U){v++;var X=[];if(U[G].length>1){for(var J=U[G][0].xAxisData,K=[],w=0;w<U[G].length;w++){var L=_.findIndex(n.lineCharts,function(t){return t.key==U[G][w].name&&void 0!=t.key});L!=-1&&K.push(n.lineCharts[L]),X.push({name:U[G][w].name,tooltip:U[G][w].tooltip,data:U[G][w].data,type:U[G][w].type,color:U[G][w].color})}if("object"!=typeof U[G][0].data[0]){var M=d(U[G][0].xAxisData[0]);x=M?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:J,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:X}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:J},title:{text:"",style:{display:"none"}},series:X}}else x="reachVsImpressions"==O||"engagedUsersReach"==O?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:J,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0},yAxis:[{title:{text:"reachVsImpressions"==O?"Impressions/Reach (%)":"Engaged users/Reach (%)"}},{title:{text:"Total Reach"},opposite:!0}],title:{text:"",style:{display:"none"}},series:X}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:J,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:X};y.push({options:f.multiDataOptions,data:K,api:{},chartOptions:x})}else{var J=U[G][0].xAxisData,K=[],L=_.findIndex(n.lineCharts,function(t){return t.key==U[G][0].name&&void 0!=t.key});if(L!=-1&&K.push(n.lineCharts[L]),X.push({name:U[G][0].name,tooltip:U[G][0].tooltip,data:U[G][0].data,type:U[G][0].type,color:U[G][0].color}),"object"!=typeof U[G][0].data[0]){var M=d(U[G][0].xAxisData[0]);x=M?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:J,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:X}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:J},title:{text:"",style:{display:"none"}},series:X}}else x={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:J,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:X};y.push({options:f.multiDataOptions,data:K,api:{},chartOptions:x})}}1==V&&(y[y.length-1].options.chart.yDomain1=[0,10])}if(n.barCharts.length>0){var P=[],N=[];v++;for(var b in n.barCharts){var R=[],A=[];for(var E in T)if(n.barCharts[b].color==T[E]){var z=s(n.barCharts[b].color,T);n.barCharts[b].color=z}for(var I=0;I<n.barCharts[b].values.length;I++){var Z;"string"==typeof n.barCharts[b].values[I].x?(Z="string",R.push(n.barCharts[b].values[I].x)):(Z="date",R.push(n.barCharts[b].values[I].x.format("DD-MMM-YYYY")));var W=String(n.barCharts[b].values[I].y).indexOf(".")?parseFloat(n.barCharts[b].values[I].y):parseInt(n.barCharts[b].values[I].y);A.push(W)}N.push({name:"(none)"===n.barCharts[b].key?"Direct":n.barCharts[b].key,data:A,tooltip:{valueSuffix:n.barCharts[b].unit},color:n.barCharts[b].color}),T.push(n.barCharts[b].color)}"string"===Z?x={chart:{type:n.barCharts[b].type,reflow:!0,zoomType:"x"},credits:{enabled:!1},legend:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:R},tooltip:{formatter:function(){return this.x+":</br>"+this.y}},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],series:N}:"stackcolumn"===n.barCharts[b].type?(n.barCharts[b].type="column",x={chart:{type:"column",reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:R,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0},plotOptions:{column:{stacking:"normal"}},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],series:N}):x={chart:{type:n.barCharts[b].type,reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0,valueSuffix:"Session Duration"==n.barCharts[b].key?"sec":""},xAxis:{type:"datetime",categories:R,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],series:N},T=[];var H=[];for(var b in n.barCharts){var B=0;for(var Y in n.barCharts[b].values)B+=parseFloat(n.barCharts[b].values[Y].y);H[b]={summaryTotal:B}}var $=0;for(E in H)$+=parseInt(H[E].summaryTotal);y.push({options:f.pieDataOptions,data:n.barCharts,api:{},chartOptions:x}),0==$&&(y[y.length-1].options.chart.yDomain=[0,10])}if(n.stackbar.length>0){var P=[],N=[];v++;for(keys in n.stackbar[b].values[0].total[0]){var A=[],R=[];for(var b in n.stackbar)if(R.push(n.stackbar[b].values[0].date),"organic"==keys){var Q=-Math.abs(n.stackbar[b].values[0].total[0][keys]);A.push(Q)}else A.push(n.stackbar[b].values[0].total[0][keys]);N.push({name:"(none)"===keys?"Direct":keys,data:A})}x={chart:{type:"bar",reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:[{categories:R,reversed:!1,labels:{step:1}},{opposite:!0,reversed:!1,categories:R,linkedTo:0,labels:{step:1}}],title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null},labels:{formatter:function(){return""}}}],plotOptions:{series:{stacking:"normal",pointPadding:0,groupPadding:0}},tooltip:{formatter:function(){return"<b>"+this.series.name+this.point.category+"</b><br/>visit: "+Highcharts.numberFormat(Math.abs(this.point.y),0)}},series:N},y.push({options:f.barDataOptions,data:n.stackbar,api:{},chartOptions:x})}if(n.multicharts.length>0){var P=[],R=[],N=[],tt=[];for(var b in n.multicharts){var et=b;if("socialContributionToSiteTraffic"===n.multicharts[et].type){for(var I=0;I<n.multicharts[et].values.length;I++)R.push(n.multicharts[et].values[I].x);for(var at=[],rt=0;rt<n.multicharts[et].values.length;rt++)at.push(String(n.multicharts[et].values[rt].y).indexOf(".")?parseFloat(n.multicharts[et].values[rt].y):parseInt(multicharts[et].values[rt].y));N.push({type:"sessions"==n.multicharts[et].metricCode?"column":"line",name:n.multicharts[et].metricName,data:at,yAxis:("sessions"==n.multicharts[et].metricCode,0),color:n.multicharts[et].color[et]});var st=at.reduce(i),it={summaryDisplay:Math.round(100*st)/100,key:void 0,showComparision:!1,variance:0,color:n.multicharts[et].color[et]};tt.push(it);var ot=[{title:{text:"Total sessions"}},{title:{text:"Sessions from social sources"},opposite:!0}],nt={type:"datetime",categories:R,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0}}else{for(var ot=[{title:{text:null}},{title:{text:null},opposite:!0}],nt={type:"datetime",categories:R},I=0;I<n.multicharts[b].values.length;I++)R.push(n.multicharts[b].values[I].date);var w=0;for(var G in n.multicharts[b].values[0].total){for(var ct=[],I=0;I<n.multicharts[b].values.length;I++){var Q=Math.round(100*n.multicharts[b].values[I].total[G])/100;ct.push(Q)}if("pageviews"==G){N.push({type:"column",name:"Page views",data:ct,yAxis:0,tooltip:{valueSuffix:""},color:n.multicharts[b].color[w]});var st=ct.reduce(i),it={summaryDisplay:Math.round(100*st)/100,key:void 0,showComparision:!1,variance:0,color:n.multicharts[b].color[w]};tt.push(it)}else if("total"!=G&&"sessions"!=G&&"hour"!=G&&"bounces"!=G){var lt,ht;"pageviewsPerSession"==G?(lt="Pages / Session",ht="pages"):"bounceRate"==G?(lt="Bounce rate",ht="%"):"percentNewSessions"==G&&(lt="% New sessions",ht="%"),N.push({type:"line",data:ct,name:lt,tooltip:{valueSuffix:ht},yAxis:1,color:n.multicharts[b].color[w]});var st=ct.reduce(i),it={summaryDisplay:Math.round(100*st)/100,key:void 0,showComparision:!1,variance:0,color:n.multicharts[b].color[w]};tt.push(it)}w++}}}x={chart:{zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:nt,title:{text:"",style:{display:"none"}},yAxis:ot,series:N},v++,y.push({options:f.multiDataOptions,data:tt,api:{},chartOptions:x}),0==$&&(y[y.length-1].options.chart.yDomain=[0,10])}if(n.percentageArea.length>0){v++;for(var P=[],R=[],N=[],tt=[],I=0;I<n.percentageArea[0].totalChartLength.length;I++)R.push(moment(n.percentageArea[0].totalChartLength[I].x).format("DD-MMM-YYYY"));var pt=0;for(var et in n.percentageArea){var dt=_.groupBy(n.percentageArea[et].values,"y.socialNetwork");for(var G in dt){for(var ut=[],I=0;I<n.percentageArea[et].totalChartLength.length;I++)ut.push({
y:0});for(var gt=0;gt<dt[G].length;gt++)for(var w=0;w<n.percentageArea[et].totalChartLength.length;w++){var mt=moment(dt[G][gt].x).format("YYYY-DD-MM")==moment(n.percentageArea[et].totalChartLength[w].x).format("YYYY-DD-MM");mt===!0&&"undefined"!=typeof dt[G][gt].y&&(ut[w].y=parseInt(dt[G][gt].y.total))}N.push({type:"area",color:n.percentageArea[et].color,name:G,data:ut}),pt++}var it={summaryDisplay:Math.round(100*st)/100,key:n.percentageArea[et].metricName,showComparision:!1,variance:0,color:n.percentageArea[et].color[et]};tt.push(it)}var nt={type:"datetime",categories:R,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}var t=this.value.split("-");return t[1]+" "+t[0]}},tickInterval:7,min:0};x={chart:{zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:nt,title:{text:"",style:{display:"none"}},yAxis:{title:{text:"value"}},plotOptions:{area:{stacking:"normal",lineColor:"#ffffff",lineWidth:1,marker:{lineWidth:1,lineColor:"#ffffff"}}},series:N},y.push({options:f.percentageAreaOptions,data:n.percentageArea,api:{},chartOptions:x}),0==$&&(y[y.length-1].options.chart.yDomain=[0,10])}if(n.pieCharts.length>0){var P=[],N=[];v++;var R=[],A=[];for(var b in n.pieCharts){for(var E in T)if(n.pieCharts[b].color==T[E]){var z=s(n.pieCharts[b].color,T);n.pieCharts[b].color=z}T.push(n.pieCharts[b].color);var ft=String(n.pieCharts[b].y).indexOf(".")?parseFloat(n.pieCharts[b].y):parseInt(n.pieCharts[b].y),lt=n.pieCharts[b].key;A.push({y:ft,name:"(none)"===lt?"Direct":lt,color:n.pieCharts[b].color})}N.push({data:A,name:n.pieCharts[b].name}),x={chart:{type:n.pieCharts[0].type,reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],tooltip:{formatter:function(){return this.key+":"+this.y+"</b>"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer"}},series:N},T=[],y.push({options:f.pieDataOptions,data:n.pieCharts,api:{},chartOptions:x})}if(n.fbReachByCity.length>0){var P=[],N=[];v++;var R=[],A=[];for(var b in n.fbReachByCity){for(var E in T)if(n.fbReachByCity[b].color==T[E]){var z=s(n.fbReachByCity[b].color,T);n.fbReachByCity[b].color=z}T.push(n.fbReachByCity[b].color);var ft=String(n.fbReachByCity[b].y).indexOf(".")?parseFloat(n.fbReachByCity[b].y):parseInt(n.fbReachByCity[b].y),lt=n.fbReachByCity[b].key;A.push({y:ft,name:lt,color:n.fbReachByCity[b].color})}var lt=n.fbReachByCity[b].name;N.push({data:A,name:lt}),x={chart:{type:"pie",reflow:!0,zoomType:"x"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0}}},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{formatter:function(){return this.key+":"+this.y+"</b>"}},title:{text:"",style:{display:"none"}},series:N},T=[],y.push({options:f.pieDataOptions,data:n.fbReachByCity,api:{},chartOptions:x})}if(n.fbReachByAge.length>0){var P=[],N=[];v++,x={chart:{type:"column",reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:n.fbReachByAge[0].values[1]},yAxis:[{title:{text:null},min:0}],title:{text:"",style:{display:"none"}},plotOptions:{column:{stacking:"normal"}},series:n.fbReachByAge[0].values[2]},colorarray=["#b2aee8","#aee8b2","#e8b2ae","#98DF8A","#756BB1","#FFBB78","#0F9D58","#20bfaf","#bb24d1","#dcdf41"];for(var vt=[],st=0,w=0;w<n.fbReachByAge[0].values[1].length;w++){for(var et=0;et<n.fbReachByAge[0].values[2].length;et++)st+=n.fbReachByAge[0].values[2][et].data[w];var it={channelName:n.fbReachByAge[0].channelName,summaryDisplay:st,type:"pie",key:n.fbReachByAge[0].values[1][w],showComparision:"false",variance:0,color:colorarray[w]};vt.push(it)}T=[];var H=[];for(var b in vt){var B=0;B+=parseFloat(vt.summaryDisplay),H[b]={summaryTotal:B}}var $=0;for(E in H)$+=parseInt(H[E].summaryTotal);y.push({options:f.pieDataOptions,data:vt,api:{},chartOptions:x})}if(n.instagramPosts.length>0&&n.instagramPosts[0].values.length>0&&(v++,y.push({options:f.instagramPosts,data:n.instagramPosts[0].values})),n.vimeoTopVideos.length>0&&n.vimeoTopVideos[0].values.length>0&&(v++,y.push({options:f.vimeoTopVideos,data:n.vimeoTopVideos[0].values})),n.highEngagementTweets.length>0&&n.highEngagementTweets[0].values.length>0&&(v++,y.push({options:f.highEngagementTweets,data:n.highEngagementTweets[0].values})),n.highestEngagementLinkedIn.length>0&&n.highestEngagementLinkedIn[0].values.length>0&&(v++,y.push({options:f.highestEngagementLinkedIn,data:n.highestEngagementLinkedIn[0].values})),n.gaTopPagesByVisit.length>0&&n.gaTopPagesByVisit[0].values.length>0&&(v++,y.push({options:f.gaTopPagesByVisit,data:n.gaTopPagesByVisit[0].values})),n.campaignOverViewbyAge.length>0&&n.campaignOverViewbyAge[0].values.length>0&&(v++,y.push({options:f.campaignOverViewbyAge,data:n.campaignOverViewbyAge[0].values})),n.campaignOverview.length>0&&n.campaignOverview[0].values.length>0&&(v++,y.push({options:f.campaignOverview,data:n.campaignOverview[0].values})),n.adgroupOverview.length>0&&n.adgroupOverview[0].values.length>0&&(v++,y.push({options:f.adgroupOverview,data:n.adgroupOverview[0].values})),n.fbAdsAdgroupOverview.length>0&&n.fbAdsAdgroupOverview[0].values.length>0&&(v++,y.push({options:f.fbAdsAdgroupOverview,data:n.fbAdsAdgroupOverview[0].values})),n.adOverview.length>0&&n.adOverview[0].values.length>0&&(v++,y.push({options:f.adOverview,data:n.adOverview[0].values})),n.gaPageContentEfficiencyTable.length>0&&n.gaPageContentEfficiencyTable[0].values.length>0&&(v++,y.push({options:f.gaPageContentEfficiencyTable,data:n.gaPageContentEfficiencyTable[0].values})),n.topReferringSitesTable.length>0&&n.topReferringSitesTable[0].values.length>0&&(v++,y.push({options:f.topReferringSitesTable,data:n.topReferringSitesTable[0].values})),n.gaPageTechnicalEfficiencyTable.length>0&&n.gaPageTechnicalEfficiencyTable[0].values.length>0&&(v++,y.push({options:f.gaPageTechnicalEfficiencyTable,data:n.gaPageTechnicalEfficiencyTable[0].values})),n.gaVisitorAcquisitionEfficiencyAnalysisTable.length>0&&n.gaVisitorAcquisitionEfficiencyAnalysisTable[0].values.length>0&&(v++,y.push({options:f.gaVisitorAcquisitionEfficiencyAnalysisTable,data:n.gaVisitorAcquisitionEfficiencyAnalysisTable[0].values})),n.pageTechnicalEfficiency.length>0){var P=[],N=[];v++;for(var b in n.pageTechnicalEfficiency){var yt=[],A=[];A[0]=[],A[1]=[];for(var I=0;I<n.pageTechnicalEfficiency[b].values.length;I++)yt.push(String(n.pageTechnicalEfficiency[b].values[I].pageTitle)),A[0].push(Number(n.pageTechnicalEfficiency[b].values[I].PageLoadTime)),A[1].push(Number(n.pageTechnicalEfficiency[b].values[I].bounceRate));for(var w=0;w<n.pageTechnicalEfficiency[b].summary.length;w++)N.push({name:n.pageTechnicalEfficiency[b].summary[w].key,yAxis:w,tooltip:{valueSuffix:n.pageTechnicalEfficiency[b].summary[w].unit},data:A[w],type:0==w?"column":"line",color:n.pageTechnicalEfficiency[b].color[w]})}x={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:yt,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:yt.length-1},yAxis:[{title:{text:"Page LoadTime"}},{title:{text:"Bounce Rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:N},y.push({options:f.visitorAcquisitionEfficiency,data:n.pageTechnicalEfficiency,api:{},chartOptions:x})}if(n.visitorAcquisitionEfficiency.length>0){var P=[],N=[];v++;for(var b in n.visitorAcquisitionEfficiency){var yt=[],A=[];A[0]=[],A[1]=[],A[2]=[];for(var I=0;I<n.visitorAcquisitionEfficiency[b].values.length;I++)yt.push(String(n.visitorAcquisitionEfficiency[b].values[I].sourceMedium)),A[0].push(Number(n.visitorAcquisitionEfficiency[b].values[I].newUsers)),A[1].push(Number(n.visitorAcquisitionEfficiency[b].values[I].goalValuePerSession)),A[2].push(Number(n.visitorAcquisitionEfficiency[b].values[I].goalConversionRateAll));for(var w=0;w<n.visitorAcquisitionEfficiency[b].summary.length;w++)N.push({name:n.visitorAcquisitionEfficiency[b].summary[w].key,yAxis:w<1?0:1,tooltip:{valueSuffix:n.visitorAcquisitionEfficiency[b].summary[w].unit},data:A[w],type:w<1?"column":"line",color:n.visitorAcquisitionEfficiency[b].color[w]})}x={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:yt,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:yt.length-1},yAxis:[{title:{text:"New users"}},{title:{text:"Goal value & Goal conversion rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:N},y.push({options:f.visitorAcquisitionEfficiency,data:n.visitorAcquisitionEfficiency,api:{},chartOptions:x})}if(n.gaSocialMediaOverview.length>0){var P=[],N=[];v++;for(var b in n.gaSocialMediaOverview)for(var I=0;I<n.gaSocialMediaOverview[b].values.length;I++)N.push({x:Number(n.gaSocialMediaOverview[b].values[I].pageviewsPersession),y:Number(n.gaSocialMediaOverview[b].values[I].sessions),z:Number(n.gaSocialMediaOverview[b].values[I].avgtimeOnPage),name:"(none)"===String(n.gaSocialMediaOverview[b].values[I].socialNetwork)?"Direct":String(n.gaSocialMediaOverview[b].values[I].socialNetwork)});x={chart:{reflow:!0,type:"bubble",zoomType:"xy"},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{useHTML:!0,headerFormat:"<table>",pointFormat:'<tr><th colspan="2"><h3>{point.name}</h3></th></tr><tr><th>Page Views Per Session:</th><td>{point.x}pages</td></tr><tr><th>Sessions:</th><td>{point.y}</td></tr><tr><th>Time on Page:</th><td>{point.z}s</td></tr>',footerFormat:"</table>",enabled:!0,shared:!0},xAxis:{labels:{formatter:function(){return this.value}},title:{text:"Page Views Per Session"}},yAxis:{title:{text:"Sessions"}},title:{text:"",style:{display:"none"}},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}"}}},series:[{data:N}]},y.push({options:f.visitorAcquisitionEfficiency,data:n.gaSocialMediaOverview,api:{},chartOptions:x})}if(n.topReferringSites.length>0){var P=[],N=[];v++;for(var b in n.topReferringSites){var yt=[],A=[];A[0]=[],A[1]=[],A[2]=[];for(var I=0;I<n.topReferringSites[b].values.length;I++)yt.push(String(n.topReferringSites[b].values[I].source)),A[0].push(Number(n.topReferringSites[b].values[I].sessions)),A[1].push(Number(n.topReferringSites[b].values[I].goalCompletions)),A[2].push(Number(n.topReferringSites[b].values[I].goalConversionRate));for(var w=0;w<n.topReferringSites[b].summary.length;w++)N.push({name:n.topReferringSites[b].summary[w].key,yAxis:w<=1?0:1,tooltip:{valueSuffix:n.topReferringSites[b].summary[w].unit},data:A[w],type:w<1?"column":"line",color:n.topReferringSites[b].color[w]})}x={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:yt,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:yt.length-1},yAxis:[{title:{text:"Sessions & Goal completions"}},{title:{text:"Goal conversion rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:N},y.push({options:f.visitorAcquisitionEfficiency,data:n.topReferringSites,api:{},chartOptions:x})}if(n.pageContentEfficiency.length>0){var N=[];v++;for(var b in n.pageContentEfficiency){var yt=[],A=[];A[0]=[],A[1]=[],A[2]=[],A[3]=[];for(var I=0;I<n.pageContentEfficiency[b].values.length;I++)yt.push(String(n.pageContentEfficiency[b].values[I].pageTitle)),A[0].push(Number(n.pageContentEfficiency[b].values[I].uniquePageviews)),A[1].push(Number(n.pageContentEfficiency[b].values[I].pageviews)),A[2].push(Number(n.pageContentEfficiency[b].values[I].bounceRate)),A[3].push(Number(n.pageContentEfficiency[b].values[I].entranceRate));for(var w=0;w<n.pageContentEfficiency[b].summary.length;w++)N.push({name:n.pageContentEfficiency[b].summary[w].key,yAxis:w<2?0:1,tooltip:{valueSuffix:n.pageContentEfficiency[b].summary[w].unit},data:A[w],type:w<2?"column":"line",color:n.pageContentEfficiency[b].color[w]})}x={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:yt,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:yt.length-1},yAxis:[{title:{text:"Unique Page views & Page views"}},{title:{text:"Entrance Rate & Bounce Rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:N},y.push({options:f.visitorAcquisitionEfficiency,data:n.pageContentEfficiency,api:{},chartOptions:x})}if(n.pinterestEngagementRate.length>0&&n.pinterestEngagementRate[0].values.length>0&&(v++,y.push({options:f.pinterestEngagementRate,data:n.pinterestEngagementRate[0].values})),n.pinterestLeaderboard.length>0&&n.pinterestLeaderboard[0].values.length>0&&(v++,y.push({options:f.pinterestLeaderboard,data:n.pinterestLeaderboard[0].values})),n.costPerActionType.length>0&&y.push({options:f.costPerActionType,data:n.costPerActionType}),n.mozoverview.length>0){for(var at=[],w=0;w<n.mozoverview.length;w++){var Dt=n.mozoverview[w].values.length-1;switch(n.mozoverview[w].key){case"Links":var bt=parseInt(n.mozoverview[w].values[Dt].y);break;case"External equity links":var wt=parseInt(n.mozoverview[w].values[Dt].y);break;case"Domain Authority (/100)":var Tt=n.mozoverview[w].values[Dt].y;break;case"Page Authority (/100)":var xt=n.mozoverview[w].values[Dt].y;break;case"Moz Rank (/10)":var kt=n.mozoverview[w].values[Dt].y}}var Ct={mozRankURL:kt,externalEquityLinks:wt,domainageAuthority:Tt,links:bt,pageAuthority:xt};y.push({options:f.mozoverview,data:n.mozoverview,displayData:Ct})}if(n.angularGauge.length>0&&(0!=n.angularGauge[0].y&&(v++,x={chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1},credits:{enabled:!1},exporting:{enabled:!1},yAxis:{min:0,max:100,minorTickInterval:"auto",minorTickWidth:1,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",tickPixelInterval:30,tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#666",title:{text:"Post/day"},plotBands:[{from:0,to:20,color:"#55BF3B"},{from:20,to:60,color:"#DDDF0D"},{from:60,to:100,color:"#DF5353"}]},title:{text:"",style:{display:"none"}},series:[{name:"Post Per Day",data:[n.angularGauge[0].y],tooltip:{valueSuffix:" post/day"}}]}),y.push({options:f.pieDataOptions,data:n.angularGauge,chartOptions:x})),n.instagramHashtagLeaderBoard.length>0&&n.instagramHashtagLeaderBoard[0].values.length>0&&(v++,y.push({options:f.instagramHashtagLeaderBoard,data:n.instagramHashtagLeaderBoard[0].values})),n.twitterEngagements.length>0){var Ft=[],Pt=[],Nt=0,Rt=0,At=[];for(var b in n.twitterEngagements)if("activityByDayOfTheWeek"==n.twitterEngagements[b].chartSubType||"instagramActivityByDayOfTheWeek"==n.twitterEngagements[b].chartSubType)Nt=1,Ft.push(n.twitterEngagements[b]);else if("activityByTimeOfTheDay"==n.twitterEngagements[b].chartSubType||"instagramActivityByTimeOfTheDay"==n.twitterEngagements[b].chartSubType){Rt=1;var N=[];Pt.push(n.twitterEngagements[b])}else if(n.twitterEngagements[b].values.length>0&&"commentsAndLikes"==n.twitterEngagements[b].chartSubType){v++;for(var N=[],It=[],Wt=[],I=0;I<n.twitterEngagements[b].values.length;I++)Wt.push(n.twitterEngagements[b].values[I].x);It=_.uniqBy(Wt);for(var I=0;I<n.twitterEngagements[b].values.length;I++){var St=_.indexOf(It,n.twitterEngagements[b].values[I].x);N.push({x:St,y:Number(n.twitterEngagements[b].values[I].y),z:Number(n.twitterEngagements[b].values[I].y),color:n.twitterEngagements[b].color[St],link:n.twitterEngagements[b].values[I].link,date:It[St]})}if(It.length>7)var Ot=7;else var Ot=1;x={chart:{reflow:!0,type:"bubble",zoomType:"xy"},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{useHTML:!0,headerFormat:"<table>",pointFormat:"<tr><th>Date:</th><td>{point.date}</td></tr><tr><th>Engagement:</th><td>{point.y}</td></tr><tr><th>Link:</th><td>{point.link}</td></tr>",footerFormat:"</table>",enabled:!0,shared:!0},xAxis:{labels:{},categories:It,title:{text:null},labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var t=new Date(this.value);return u[t.getMonth()]+" "+t.getDate()}if("string"!=typeof this.value||d(this.value)){var t=this.value.split("-");return t[1]+" "+t[0]}return this.value}},tickInterval:Ot},yAxis:{title:{text:"Engagements"}},title:{text:"",style:{display:"none"}},plotOptions:{series:{dataLabels:{enabled:!1}}},series:[{data:N}]},y.push({options:f.visitorAcquisitionEfficiency,data:n.twitterEngagements[b],api:{},chartOptions:x})}else if(n.twitterEngagements[b].values.length>0&&("topLinks"===n.twitterEngagements[b].chartSubType||"hashTag"===n.twitterEngagements[b].chartSubType)){v++;var Et={chart:{type:n.twitterEngagements[b].chartSubType}};y.push({options:Et,data:n.twitterEngagements[b].values})}else if(n.twitterEngagements[b].values.length>0&&("engagementByUsersTalkedAbout"===n.twitterEngagements[b].chartSubType||"hashTag"===n.twitterEngagements[b].chartSubType)){v++;var Et={chart:{type:n.twitterEngagements[b].chartSubType}};y.push({options:Et,data:n.twitterEngagements[b].values})}if(Rt>0){var N=[];v++;for(var b in Pt)for(var I=0;I<Pt[b].values.length;I++){if("Sunday"==String(Pt[b].values[I].day))var St=0;else if("Monday"==String(Pt[b].values[I].day))var St=1;else if("Tuesday"==String(Pt[b].values[I].day))var St=2;else if("Wednesday"==String(Pt[b].values[I].day))var St=3;else if("Thursday"==String(Pt[b].values[I].day))var St=4;else if("Friday"==String(Pt[b].values[I].day))var St=5;else if("Saturday"==String(Pt[b].values[I].day))var St=6;N.push({x:St,y:Number(Pt[b].values[I].time),z:Number(Pt[b].values[I].engagement),color:Pt[b].color[St]})}k={chart:{reflow:!0,type:"bubble",zoomType:"xy"},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{useHTML:!0,headerFormat:"<table>",pointFormat:"<tr><th>Time:</th><td>{point.y}</td></tr><tr><th>Engagement:</th><td>{point.z}</td></tr>",footerFormat:"</table>",enabled:!0,shared:!0},xAxis:{labels:{},categories:g,title:{text:null},max:g.length-1},yAxis:{title:{text:"Time"},min:0,max:28,tickInterval:7},title:{text:"",style:{display:"none"}},plotOptions:{series:{dataLabels:{enabled:!1}}},series:[{data:N}]},y.push({options:f.visitorAcquisitionEfficiency,data:Pt,api:{},chartOptions:k})}if(Nt>0){var N=[],yt=[];At[0]=[],At[1]=[];var zt=[];v++;for(var Et=0;Et<Ft.length;Et++){yt.length<Ft[Et].values.length&&(yt.length=0);for(var I=0;I<Ft[Et].values.length;I++)if(yt.length<Ft[Et].values.length&&yt.push(String(Ft[Et].values[I].day)),"activityByDayOfTheWeek"==Ft[Et].chartSubType){var Mt="Tweets count";At[0].push({tweet:Number(Ft[Et].values[I].tweets)}),At[1].push({tweetEngage:Number(Ft[Et].values[I].engagement)})}else{var Mt="Posts count";At[0].push({instaTweet:Number(Ft[Et].values[I].tweets)}),At[1].push({instaEngage:Number(Ft[Et].values[I].engagement)})}}for(var w=0;w<At.length;w++)for(var G=0;G<At[w].length;G++)for(var Lt in At[w][G])zt.push(At[w][G]);for(var jt=[],gt=0;gt<zt.length;gt++)jt.push(zt[gt]);var Ht=[],Bt=[],Yt=[],$t=[];for(var gt in jt)for(var Lt in jt[gt])switch(Lt){case"tweet":Ht.push(jt[gt][Lt]);break;case"tweetEngage":$t.push(jt[gt][Lt]);break;case"instaTweet":Bt.push(jt[gt][Lt]);break;case"instaEngage":Yt.push(jt[gt][Lt]);break;default:console.log("err")}Ht.length&&N.push({name:"Tweet",yAxis:0,tooltip:{valueSuffix:""},data:Ht,type:"column",color:n.twitterEngagements[b].color[0]}),Bt.length&&N.push({name:"Post",yAxis:0,tooltip:{valueSuffix:""},data:Bt,type:"column",color:n.twitterEngagements[b].color[1]}),Yt.length&&N.push({name:"Engagement",yAxis:1,tooltip:{valueSuffix:""},data:Yt,type:"line",color:n.twitterEngagements[b].color[2]}),$t.length&&N.push({name:"Engagement",yAxis:1,tooltip:{valueSuffix:""},data:$t,type:"line",color:n.twitterEngagements[b].color[3]}),C={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:yt,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:yt.length-1},yAxis:[{title:{text:Mt}},{title:{text:"Engagement count"},opposite:!0}],title:{text:"",style:{display:"none"}},series:N},y.push({options:f.visitorAcquisitionEfficiency,data:Ft,api:{},chartOptions:C})}}if(n.youtubeVideosOverview.length>0){v++;for(var b in n.youtubeVideosOverview){var Et={chart:{type:n.youtubeVideosOverview[b].type}};n.youtubeVideosOverview[0].values.length>0&&y.push({options:Et,data:n.youtubeVideosOverview[0].values})}}if(n.fbAdsCampaignOverview.length>0&&n.fbAdsCampaignOverview[0].values.length>0&&(v++,y.push({options:f.fbAdsCampaignOverview,data:n.fbAdsCampaignOverview[0].values})),n.fbAdsAdOverview.length>0&&n.fbAdsAdOverview[0].values.length>0&&(v++,y.push({options:f.fbAdsAdOverview,data:n.fbAdsAdOverview[0].values})),0==y.length)if("custom"==t.widgetType){var _t="";_t="localhost"==window.location.hostname?"http://localhost:8080/api/v1/create/customdata/"+t._id:window.location.hostname+"/api/v1/create/customdata/"+t._id,y.push({options:f.emptyCharts,data:[{message:"No data for chosen date range. Please send your data to: "+_t}]})}else y.push({options:f.emptyCharts,data:[{message:"No data for chosen date range"}]});var Vt=function(){c="undefined"!=typeof t.size?t.size.h:3,l="undefined"!=typeof t.size?t.size.w:3;for(var e=0;e<D.length;e++)D[e].W==l&&D[e].H==c&&D[e].N==v&&(h=D[e].c,p=D[e].r)};if(Vt(),m="custom"==t.widgetType?"Custom Data":"undefined"!=typeof t.name?t.name:"","undefined"!=typeof y[0].data[0]&&"undefined"!=y[0].data[0].displaySummary&&y[0].data[0].displaySummary===!1)var qt={showSummary:!1,name:m,visibility:!0,id:t._id,color:t.color,chart:y,layoutOptionsX:h,layoutOptionsY:p};else if("undefined"!=typeof y[0].data[0]&&"undefined"!=typeof y[0].data[0].key)var qt={name:m,visibility:!0,id:t._id,color:t.color,chart:y,layoutOptionsX:h,layoutOptionsY:p};else var qt={showSummary:!1,name:m,visibility:!0,id:t._id,color:t.color,chart:y,layoutOptionsX:h,layoutOptionsY:p};return o.resolve(qt),o.promise}function d(t){var e=new Date(t);return!isNaN(e.getDate())}var u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=e.defer(),f=e.defer(),v=JSON.parse(JSON.stringify(a));switch(a.widgetType){case"customFusion":var y=[],D=[],b=[];y.push(i(a,s)),e.all(y).then(function(t){var a=t[0];for(var i in a)"basic"==a[i].widgetType||"adv"==a[i].widgetType||"fusion"==a[i].widgetType?D.push(c(a[i],r,s)):"custom"==a[i].widgetType&&D.push(o(a[i],r));e.all(D).then(function(t){for(var a in t)"basic"==t[a].widgetType||"adv"==t[a].widgetType||"fusion"==t[a].widgetType?b.push(h(t[a])):"custom"==t[a].widgetType&&b.push(n(t[a]));e.all(b).then(function(t){var e=[];for(var a in t)for(var r in t[a])e.push(t[a][r]);var s=p(v,e);s.then(function(t){m.resolve(t)},function(t){m.reject(t)})},function(t){m.reject(t)})},function(t){m.reject(t)})},function(t){m.reject(t)});break;case"basic":case"adv":case"fusion":var w=c(v,r,s);w.then(function(t){var e=h(t,r);e.then(function(t){var e=p(a,t);e.then(function(t){m.resolve(t)},function(t){m.reject(t)})},function(t){m.reject(t)})},function(t){m.reject(t)});break;case"custom":var w=o(v,r);w.then(function(t){var e=n(t);e.then(function(t){var e=p(a,t,r);e.then(function(t){m.resolve(t)},function(t){m.reject(t)})},function(t){m.reject(t)})},function(t){m.reject(t)})}return m.promise}}]),showMetricApp.service("generateChartColours",function(){this.fetchRandomColors=function(t){for(var e,a=["#EF5350","#EC407A","#9C27B0","#42A5F5","#26A69A","#FFCA28","#FF7043","#8D6E63"],r=[];r.length<t;)e=a[Math.floor(Math.random()*(a.length-1))+1],r.indexOf(e)==-1?r.push(e):r.length>a.length&&r.indexOf(e,a.length-1)==-1&&r.push(e);return r},this.fetchWidgetColor=function(t){var e;switch(t){case"Facebook":e="#3B5998";break;case"Google Analytics":e="#F26630";break;case"Twitter":e="#5EA9DD";break;case"FacebookAds":e="#4E5664";break;case"GoogleAdwords":e="#1A925A";break;case"Instagram":e="#895A4D";break;case"YouTube":e="#CC181E";break;default:e="#04509B"}return e}}),showMetricApp.controller("MainCtrl",MainCtrl),showMetricApp.controller("CustomWidgetController",CustomWidgetController),showMetricApp.controller("customReportController",customReportController),showMetricApp.controller("NavigationController",NavigationController);