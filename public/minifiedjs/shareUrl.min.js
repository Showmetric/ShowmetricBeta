function config(a){a.translations("en",{DASHBOARD:"Dashboard",GRAPHS:"Graphs",MAILBOX:"Mailbox",WIDGETS:"Widgets",METRICS:"Metrics",FORMS:"Forms",APPVIEWS:"App views",OTHERPAGES:"Other pages",UIELEMENTS:"UI elements",MISCELLANEOUS:"Miscellaneous",GRIDOPTIONS:"Grid options",TABLES:"Tables",COMMERCE:"E-commerce",GALLERY:"Gallery",MENULEVELS:"Menu levels",ANIMATIONS:"Animations",LANDING:"Landing page",LAYOUTS:"Layouts",WELCOME:"Welcome Amelia",MESSAGEINFO:"You have 42 messages and 6 notifications.",SEARCH:"Search for something..."}).translations("es",{DASHBOARD:"Salpicadero",GRAPHS:"Gráficos",MAILBOX:"El correo",WIDGETS:"Widgets",METRICS:"Métrica",FORMS:"Formas",APPVIEWS:"Vistas app",OTHERPAGES:"Otras páginas",UIELEMENTS:"UI elements",MISCELLANEOUS:"Misceláneo",GRIDOPTIONS:"Cuadrícula",TABLES:"Tablas",COMMERCE:"E-comercio",GALLERY:"Galería",MENULEVELS:"Niveles de menú",ANIMATIONS:"Animaciones",LANDING:"Página de destino",LAYOUTS:"Esquemas",WELCOME:"Bienvenido Amelia",MESSAGEINFO:"Usted tiene 42 mensajes y 6 notificaciones.",SEARCH:"Busca algo ..."}),a.preferredLanguage("en")}function pageTitle(a,t){return{link:function(e,r){var s=function(a,e,s,i,o){var n="Datapoolt";e.data&&e.data.pageTitle&&(n="Datapoolt | "+e.data.pageTitle),t(function(){r.text(n)})};a.$on("$stateChangeStart",s)}}}function sideNavigation(a){return{restrict:"A",link:function(t,e){a(function(){e.metisMenu()})}}}function hcChart(a){return{restrict:"E",template:"<div></div>",scope:{options:"="},link:function(t,e){function r(){Highcharts.chart(e[0],t.options)}a(r,200)}}}function responsiveVideo(){return{restrict:"A",link:function(a,t){var e=t,r=t.children();r.attr("data-aspectRatio",r.height()/r.width()).removeAttr("height").removeAttr("width"),$(window).resize(function(){var a=e.width();r.width(a).height(a*r.attr("data-aspectRatio"))}).resize()}}}function iboxTools(a){return{restrict:"A",scope:!0,templateUrl:"common/ibox_tools.ejs",controller:["$scope","$element",function(t,e){t.showhide=function(){var t=e.closest("div.ibox"),r=e.find("i:first"),s=t.find("div.ibox-content");s.slideToggle(200),r.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),t.toggleClass("").toggleClass("border-bottom"),a(function(){t.resize(),t.find("[id^=map-]").resize()},50)},t.closebox=function(){var a=e.closest("div.ibox");a.remove()}}]}}function iboxToolsFullScreen(a){return{restrict:"A",scope:!0,templateUrl:"common/ibox_tools_full_screen.ejs",controller:["$scope","$element",function(t,e){t.showhide=function(){var t=e.closest("div.ibox"),r=e.find("i:first"),s=t.find("div.ibox-content");s.slideToggle(200),r.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),t.toggleClass("").toggleClass("border-bottom"),a(function(){t.resize(),t.find("[id^=map-]").resize()},50)},t.closebox=function(){var a=e.closest("div.ibox");a.remove()},t.fullscreen=function(){var a=e.closest("div.ibox"),t=e.find("i.fa-expand");$("body").toggleClass("fullscreen-ibox-mode"),t.toggleClass("fa-expand").toggleClass("fa-compress"),a.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}}]}}function minimalizaSidebar(a){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()" style="margin-top: 10px;"><i class="fa fa-bars"></i></a>',controller:["$scope","$element",function(a,t){a.minimalize=function(){$("body").toggleClass("mini-navbar");var a=$(window).width();if(768==a&&($("body").hasClass("mini-navbar")?$("#side-menu").css("display","block"):$("#side-menu").css("display","none")),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")){$(".tooltip").hide();document.getElementById("CustomTemplate").offsetWidth;$("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500),!$("body").hasClass("body-small")},100)}else $("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},300)):($(".tooltip").hide(),$("#side-menu").removeAttr("style"),$("body").hasClass("mini-navbar")&&($(".tooltip").show(),$("#dashboardTitleIcons").show()))}}]}}function closeOffCanvas(){return{restrict:"A",template:'<a class="close-canvas-menu" ng-click="closeOffCanvas()"><i class="fa fa-times"></i></a>',controller:["$scope","$element",function(a,t){a.closeOffCanvas=function(){$("body").toggleClass("mini-navbar")}}]}}function vectorMap(){return{restrict:"A",scope:{myMapData:"="},link:function(a,t,e){t.vectorMap({map:"world_mill_en",backgroundColor:"transparent",regionStyle:{initial:{fill:"#e4e4e4","fill-opacity":.9,stroke:"none","stroke-width":0,"stroke-opacity":0}},series:{regions:[{values:a.myMapData,scale:["#1ab394","#22d6b1"],normalizeFunction:"polynomial"}]}})}}}function sparkline(){return{restrict:"A",scope:{sparkData:"=",sparkOptions:"="},link:function(a,t,e){a.$watch(a.sparkData,function(){r()}),a.$watch(a.sparkOptions,function(){r()});var r=function(){$(t).sparkline(a.sparkData,a.sparkOptions)}}}}function icheck(a){return{restrict:"A",require:"ngModel",link:function(t,e,r,s){return a(function(){var a;return a=r.value,t.$watch(r.ngModel,function(a){$(e).iCheck("update")}),$(e).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}).on("ifChanged",function(i){if("checkbox"===$(e).attr("type")&&r.ngModel&&t.$apply(function(){return s.$setViewValue(i.target.checked)}),"radio"===$(e).attr("type")&&r.ngModel)return t.$apply(function(){return s.$setViewValue(a)})})})}}}function ionRangeSlider(){return{restrict:"A",scope:{rangeOptions:"="},link:function(a,t,e){t.ionRangeSlider(a.rangeOptions)}}}function dropZone(){return function(a,t,e){t.dropzone({url:"/upload",maxFilesize:100,paramName:"uploadfile",maxThumbnailFilesize:5,init:function(){a.files.push({file:"added"}),this.on("success",function(a,t){}),this.on("addedfile",function(t){a.$apply(function(){alert(t),a.files.push({file:"added"})})}),this.on("drop",function(a){alert("file")})}})}}function chatSlimScroll(a){return{restrict:"A",link:function(t,e){a(function(){e.slimscroll({height:"234px",railOpacity:.4})})}}}function customValid(){return{require:"ngModel",link:function(a,t,e,r){a.$watch(e.ngModel,function(){var t="Inspinia";a.extras==t?r.$setValidity("cvalid",!0):r.$setValidity("cvalid",!1)})}}}function fullScroll(a){return{restrict:"A",link:function(t,e){a(function(){e.slimscroll({height:"100%",railOpacity:.9})})}}}function slimScroll(a){return{restrict:"A",scope:{boxHeight:"@"},link:function(t,e){a(function(){e.slimscroll({height:t.boxHeight,railOpacity:.9})})}}}function clockPicker(){return{restrict:"A",link:function(a,t){t.clockpicker()}}}function landingScrollspy(){return{restrict:"A",link:function(a,t,e){t.scrollspy({target:".navbar-fixed-top",offset:80})}}}function fitHeight(){return{restrict:"A",link:function(a,t){t.css("height",$(window).height()+"px"),t.css("min-height",$(window).height()+"px")}}}function channelDiv(){return{restrict:"E",scope:{channel:"= "},template:'<div class="col-lg-4"></div>'}}function chartHeight(){return{controller:["$scope","$element",function(a,t){this.chartHeight=t[0].offsetHeight}]}}function sizeWatcher(){return{require:"^chartHeight",scope:{sizeWatcherHeight:"=",sizeWatcherWidth:"="},link:function(a,t,e,r){var s,i=a.sizeWatcherWidth.length;s=i<=2?1:i>2&&i<=4?2:3;var o=Math.ceil(i/s);if(void 0!=r.chartHeight&&0!=r.chartHeight){if(void 0==a.sizeWatcherHeight||0==a.sizeWatcherHeight){var n=r.chartHeight;a.sizeWatcherHeight=Math.ceil(.2*n/o)}}else void 0==a.sizeWatcherHeight&&0==a.sizeWatcherHeight&&(a.sizeWatcherHeight=t.prop("offsetHeight"))}}}function expSizeWatcher(){return{scope:{expSizeWatcherHeight:"="},link:function(a,t,e,r){void 0==a.expSizeWatcherHeight&&0==a.expSizeWatcherHeight&&(a.expSizeWatcherHeight=t.prop("offsetHeight"))}}}function fileModel(a){return{restrict:"A",link:function(t,e,r){var s=a(r.fileModel),i=s.assign;e.bind("change",function(){t.$apply(function(){i(t,e[0].files[0])})})}}}function MainCtrl(a,t,e,r){a.navbarHeight=window.innerHeight,a.IntroOptions={steps:[{element:"#step8",intro:"Blank Dashboard - Click here to create a new blank dashboard. Create dashboards to organize your widgets and monitor them.",position:"right"},{element:"#step9",intro:"Dashboard Templates - Ready made pre-built dashboards comprising of specific curated widgets to address an unique theme or purpose. They provide a great way to quickly get your dashboard created rather than building it one widget at a time.",position:"right"},{element:"#step10",intro:"Reports - Take complete control of your reporting. Easily build reports with custom logos, custom text and export them as professional looking PDFs. White label your reports and use your own logo to send reports.",position:"right"},{element:"#step11",intro:"Get it, use it.",position:"bottom"},{element:"#step12",intro:"Get it, use it.",position:"left"},{element:"#step13",intro:"Get it, use it.",position:"left"},{element:"#step14",intro:"Get it, use it.",position:"left"},{element:"#soonModel",intro:"Get it, use it.",position:"left"},{element:"#step15",intro:"Get it, use it.",position:"left"},{element:"#step17",intro:"Get it, use it.",position:"left"}],showStepNumbers:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"<strong>Previous</strong>",skipLabel:'<span style="color:red">Exit</span>',doneLabel:'<span style="color:green">Thanks</span>'},window.addEventListener("resize",function(t){a.navbarHeight=window.innerHeight}),t.dropDownActive=!1,a.ShouldAutoStart=!1,t.$on("$stateChangeSuccess",function(e,r,s,i,o){t.currentStateForIntro=r.name,"app.reporting.dashboard"==t.currentStateForIntro?a.IntroOptions={steps:[{element:"#step1",intro:"Name all your dashboards here the way you see fit for easy organization",position:"bottom"},{element:"#step2",intro:"Choose the date range for which you want to analyze the data of your dashboard widgets",position:"bottom"},{element:"#step3",intro:"Add new widgets to your dashboards from all our integrated channels. Choose your channels followed by the metrics. Choose the profiles for which your want to see the data for your chosen metrics.",position:"left"},{element:"#step4",intro:"Take relevant metrics from two different channels and fuse them together to spot interesting correlations and trends.",position:"left"},{element:"#step5",intro:"Arrange all the widgets in your dashboard in a presentable manner with a single click.",position:"left"},{element:"#step6",intro:"Export the current dashboard in different available formats. Also share the url of this dashboard to people who require view access for analysis.",position:"left"},{element:"#step7",intro:"Click here to delete your current dashboard.",position:"left"},{element:"#step8",intro:"Blank Dashboard - Click here to create a new blank dashboard. Create dashboards to organize your widgets and monitor them.",position:"right"},{element:"#step9",intro:"Dashboard Templates - Ready made pre-built dashboards comprising of specific curated widgets to address an unique theme or purpose. They provide a great way to quickly get your dashboard created rather than building it one widget at a time.",position:"right"},{element:"#step10",intro:"Reports - Take complete control of your reporting. Easily build reports with custom logos, custom text and export them as professional looking PDFs. White label your reports and use your own logo to send reports.",position:"right"},{element:"#step11",intro:"Quickly navigate back and forth between your recent dashboards in a single click. Get a complete view of all your dashboards by clicking on All dashboards",position:"bottom"},{element:"#step12",intro:"Navigate to handle all your account related features and settings through this menu.",position:"left"},{element:"#step13",intro:"View and manage (create/edit/delete) all the social/digital profiles whose health you want to monitor in your dashboards.",position:"left"},{element:"#step14",intro:"View your account plan and status, invoice history and manage/upgrade your account.",position:"left"},{element:"#soonModel",intro:"View and manage all the users from your team whom you would like to use and benefit from Datapoolt",position:"left"},{element:"#step15",intro:"Have a quick tour and understand the features available in Datapoolt",position:"left"},{element:"#step17",intro:"Click here to logout of Datapoolt till you visit again soon",position:"left"}],showStepNumbers:!0,exitOnOverlayClick:!1,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"<strong>Previous</strong>",skipLabel:'<span style="color:red">Exit</span>',doneLabel:'<span style="color:green">Thanks</span>'}:a.IntroOptions={steps:[{element:"#step8",intro:"Blank Dashboard - Click here to create a new blank dashboard. Create dashboards to organize your widgets and monitor them.",position:"right"},{element:"#step9",intro:"Dashboard Templates - Ready made pre-built dashboards comprising of specific curated widgets to address an unique theme or purpose. They provide a great way to quickly get your dashboard created rather than building it one widget at a time.",position:"right"},{element:"#step10",intro:"Reports - Take complete control of your reporting. Easily build reports with custom logos, custom text and export them as professional looking PDFs. White label your reports and use your own logo to send reports.",position:"right"},{element:"#step11",intro:"Quickly navigate back and forth between your recent dashboards in a single click. Get a complete view of all your dashboards by clicking on All dashboards",position:"bottom"},{element:"#step12",intro:"Navigate to handle all your account related features and settings through this menu.",position:"left"},{element:"#step13",intro:"View and manage (create/edit/delete) all the social/digital profiles whose health you want to monitor in your dashboards.",position:"left"},{element:"#step14",intro:"View your account plan and status, invoice history and manage/upgrade your account.",position:"left"},{element:"#soonModel",intro:"View and manage all the users from your team whom you would like to use and benefit from Datapoolt",position:"left"},{element:"#step15",intro:"Have a quick tour and understand the features available in Datapoolt",position:"left"},{element:"#step17",intro:"Click here to logout of Datapoolt till you visit again soon",position:"left"}],showStepNumbers:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"<strong>Previous</strong>",skipLabel:'<span style="color:red">Exit</span>',doneLabel:'<span style="color:green">Thanks</span>'}}),a.CompletedEvent=function(a){t.dropDownActive=!1,document.getElementById("myDropdown").classList.remove("show")},a.ExitEvent=function(a){t.dropDownActive=!1,document.getElementById("myDropdown").classList.remove("show")},a.ChangeEvent=function(a,t){},a.BeforeChangeEvent=function(a,e){"step13"==a.id||"step14"==a.id||"step15"==a.id||"step16"==a.id||"step17"==a.id||"soonModel"==a.id?(t.dropDownActive=!0,document.getElementById("myDropdown").classList.contains("show")||document.getElementById("myDropdown").classList.add("show")):t.dropDownActive=!1},a.AfterChangeEvent=function(a,t){},this.daterange={startDate:null,endDate:null},this.slideInterval=5e3,this.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],this.persons=[{id:"1",firstName:"Monica",lastName:"Smith"},{id:"2",firstName:"Sandra",lastName:"Jackson"},{id:"3",firstName:"John",lastName:"Underwood"},{id:"4",firstName:"Chris",lastName:"Johnatan"},{id:"5",firstName:"Kim",lastName:"Rosowski"}],this.checkOne=!0,this.checkTwo=!0,this.checkThree=!0,this.checkFour=!0,this.knobOne=75,this.knobTwo=25,this.knobThree=50,this.bigTotalItems=175,this.bigCurrentPage=1,this.maxSize=5,this.singleModel=1,this.radioModel="Middle",this.checkModel={left:!1,middle:!0,right:!1},this.groups=[{title:"Dynamic Group Header - 1",content:"Dynamic Group Body - 1"},{title:"Dynamic Group Header - 2",content:"Dynamic Group Body - 2"}],this.alerts=[{type:"danger",msg:"Oh snap! Change a few things up and try submitting again."},{type:"success",msg:"Well done! You successfully read this important alert message."},{type:"info",msg:"OK, You are done a great job man."}],this.addAlert=function(){this.alerts.push({msg:"Another alert!"})},this.closeAlert=function(a){this.alerts.splice(a,1)},this.randomStacked=function(){this.stacked=[];for(var a=["success","info","warning","danger"],t=0,e=Math.floor(4*Math.random()+1);t<e;t++){var r=Math.floor(4*Math.random());this.stacked.push({value:Math.floor(30*Math.random()+1),type:a[r]})}},this.randomStacked(),this.summernoteText=["<h3>Hello Jonathan! </h3>","<p>dummy text of the printing and typesetting industry. <strong>Lorem Ipsum has been the dustrys</strong> standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more","recently with</p>"].join(""),this.BarChart={data:[5,3,9,6,5,9,7,3,5,2,4,7,3,2,7,9,6,4,5,7,3,2,1,0,9,5,6,8,3,2,1],options:{fill:["#1ab394","#d7d7d7"],width:100}},this.BarChart2={data:[5,3,9,6,5,9,7,3,5,2],options:{fill:["#1ab394","#d7d7d7"]}},this.BarChart3={data:[5,3,2,-1,-3,-2,2,3,5,2],options:{fill:["#1ab394","#d7d7d7"]}},this.LineChart={data:[5,9,7,3,5,2,5,3,9,6,5,9,4,7,3,2,9,8,7,4,5,1,2,9,5,4,7],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.LineChart2={data:[3,2,9,8,47,4,5,1,2,9,5,4,7],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.LineChart3={data:[5,3,2,-1,-3,-2,2,3,5,2],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.LineChart4={data:[5,3,9,6,5,9,7,3,5,2],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.PieChart={data:[1,5],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart2={data:[226,360],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart3={data:[.52,1.561],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart4={data:[1,4],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart5={data:[226,134],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart6={data:[.52,1.041],options:{fill:["#1ab394","#d7d7d7"]}}}function CustomWidgetController(a,t){a.remove=function(t){a.dashboard.widgets.splice(a.dashboard.widgets.indexOf(t),1)},a.openSettings=function(e){t.open({scope:a,backdrop:!0,templateUrl:"fusion_settings.ejs",controller:"FusionSettingsController",resolve:{widget:function(){return e}}})}}function SharedDashboardController(a,t,e,r,s,i,o,n,c){var h;a.loading=!1,a.$window=s,a.autoArrangeGrid=!1,a.currentDate=moment(new Date).format("YYYY-DD-MM"),a.summaryAlignLessThanThree=[],a.toDisplayAllSummary=[],a.checkAllGraphsZero=function(t,e,r){void 0==a.summaryAlignLessThanThree[e]&&(a.summaryAlignLessThanThree[e]=[]),void 0==a.toDisplayAllSummary[e]&&(a.toDisplayAllSummary[e]=[]);for(var s=0,i=0;i<t.data.length;i++)0===t.data[i].summaryDisplay&&(s+=1);a.summaryAlignLessThanThree[e][r]=t.data.length-s,s===t.data.length?a.toDisplayAllSummary[e][r]=!0:a.toDisplayAllSummary[e][r]=!1},a.dashboardConfiguration=function(){a.docHeight=window.innerHeight,a.docHeight=a.docHeight-60,a.dashboard={widgets:[],widgetData:[]},a.dashboard.dashboardName="",a.widgetsPresent=!0,a.spinerEnable=!0,a.loadedWidgetCount=0,a.widgetErrorCode=0,a.startDate,a.endDate,a.fetchDateForDashboard=function(){var t,e="undefined";r({method:"GET",url:"/api/v1/getSubscriptionFromDashboard/"+e,params:{dashboardId:i.params.id}}).then(function(e){200==e.status?(t=e.data.response.limits.dateRange,a.userModifyDate(t)):a.userModifyDate(365)})},a.fetchDateForDashboard(),a.userModifyDate=function(t){a.dashboardCalendar=new Calendar({element:$(".daterange--double"),earliest_date:moment(new Date).subtract(t,"days"),latest_date:new Date,start_date:moment(new Date).subtract(30,"days"),end_date:new Date,callback:function(){moment(this.start_date).format("ll"),moment(this.end_date).format("ll");a.populateDashboardWidgets()}}),a.populateDashboardWidgets()},a.setChartSize=function(a,e){function r(){if(null!=document.getElementById("chartOptions"+a)){var t=document.getElementById("chartOptions"+a).offsetWidth,r=document.getElementById("chartOptions"+a).offsetHeight;document.getElementById("chartRepeat"+a+"-"+e).style.height=r+"px",document.getElementById("chartRepeat"+a+"-"+e).style.width=t+"px"}}t(r,100)},a.gridsterOptions={sparse:!0,margins:[20,20],maxRows:500,columns:6,defaultSizeX:2,defaultSizeY:2,minSizeX:1,minSizeY:1,swapping:!0,float:!0,pushing:!0,width:"auto",colWidth:"auto",draggable:{enabled:!1},outerMargin:!0,mobileBreakPoint:700,mobileModeEnabled:!0,resizable:{enabled:!1}},a.$on("gridster-resized",function(e,r){function s(a){return function(){if(null!=document.getElementById("chartOptions"+a))for(var t=document.getElementById("chartOptions"+a).offsetWidth,e=document.getElementById("chartOptions"+a).offsetHeight,r=0;r<Highcharts.charts.length;r++)Highcharts.charts[r].container.parentElement.id.includes("chartRepeat"+a)&&(Highcharts.charts[r].setSize(t,e),Highcharts.charts[r].reflow())}}for(var i=0;i<a.dashboard.widgets.length;i++)t(s(i),10)}),a.$on("gridster-mobile-changed",function(t,e){a.isMobile=e.isMobile}),angular.element(s).on("resize",function(t){a.docHeight=window.innerHeight,a.docHeight=a.docHeight-60,a.$broadcast("resize")}),a.$on("resize",function(e){function r(a){return function(){if(null!=document.getElementById("chartOptions"+a))for(var t=document.getElementById("chartOptions"+a).offsetWidth,e=document.getElementById("chartOptions"+a).offsetHeight,r=0;r<Highcharts.charts.length;r++)Highcharts.charts[r].container.parentElement.id.includes("chartRepeat"+a)&&(Highcharts.charts[r].setSize(t,e),Highcharts.charts[r].reflow())}}for(var s=0;s<a.dashboard.widgets.length;s++)t(r(s),100)}),a.calculateColumnWidth=function(a,t,e){return t=Math.floor(t/e),t<1&&(t=1),1==t?"col-sm-12 col-md-12 col-lg-12":2==t?a<=2?"col-sm-12 col-md-12 col-lg-12":"col-sm-6 col-md-6 col-lg-6":a<=2?"col-sm-12 col-md-12 col-lg-12":a>2&&a<=4?"col-sm-6 col-md-6 col-lg-6":"col-sm-4 col-md-4 col-lg-4"},a.calculateColumnWidthMoz=function(a,t,e){return 1==t?"col-sm-12 col-md-12 col-lg-12":t>=2&&t<=4?"col-sm-4 col-md-4 col-lg-4":t>=5?"col-sm-2 col-md-2 col-lg-2":void 0},a.calculateRowHeight=function(a,t,e,r,s){a.showComparision=!0},a.calculateSummaryHeight=function(a,t){var e;return e=1==t&&1==a?20:100/a,{height:e+"%"}},a.calculateSummaryHeightMoz=function(a,t){var e;return e=1==t&&1==a?20:100/a,{height:e+"%"}},a.calculateChartHeight=function(e,r,s){t(function(){var t;t=1==r&&1==e?80:100-100/e,a.chartOptions=t+"%";var i=document.getElementById("updateHeight"+s);i.style.margin="0px",i.style.height=t+"%"},1e3)}},e.populateDashboardWidgets=function(){a.dashboard.widgets=[],a.dashboard.widgetData=[],r({method:"GET",url:"/api/v1/dashboards/widgets/null",params:{reportId:i.params.id}}).then(function(t){if($(".dr-dates").attr("contenteditable","false"),t.data)if(t.data.error)isExportOptionSet=0,swal({title:"",text:'<span style = "sweetAlertFont">The requested dashboard has no widgets</span>',html:!0});else{h=t.data.widgetsList._id,a.dashboard.dashboardName=t.data.dashboardDetails.name;var e=[],r=t.data.widgetsList;for(i in r)1==r[i].visibility&&e.push(r[i]);e.length>0?(a.loadedWidgetCount=0,a.widgetsPresent=!0,a.spinerEnable=!1):(a.widgetsPresent=!1,a.spinerEnable=!1);var s=[];for(var i in e)s.push(n.widgetHandler(e[i],{startDate:moment(a.dashboardCalendar.start_date).format("YYYY-MM-DD"),endDate:moment(a.dashboardCalendar.end_date).format("YYYY-MM-DD")},"public")),a.dashboard.widgets.push({row:"undefined"!=typeof e[i].row?e[i].row:0,col:"undefined"!=typeof e[i].col?e[i].col:0,sizeY:"undefined"!=typeof e[i].size?e[i].size.h:2,sizeX:"undefined"!=typeof e[i].size?e[i].size.w:2,minSizeY:"undefined"!=typeof e[i].minSize?e[i].minSize.h:1,minSizeX:"undefined"!=typeof e[i].minSize?e[i].minSize.w:1,maxSizeY:"undefined"!=typeof e[i].maxSize?e[i].maxSize.h:3,maxSizeX:"undefined"!=typeof e[i].maxSize?e[i].maxSize.w:3,name:"undefined"!=typeof e[i].name?e[i].name:"",widgetType:"undefined"!=typeof e[i].widgetType?e[i].widgetType:"",isAlert:"undefined"!=typeof e[i].isAlert&&e[i].isAlert,id:e[i]._id,visibility:!1,channelName:"undefined"!=typeof e[i].channelName?e[i].channelName:""}),a.dashboard.widgetData.push({id:e[i]._id,chart:[],visibility:!1,dataerror:!1,name:"undefined"!=typeof e[i].name?e[i].name:"",color:"undefined"!=typeof e[i].color?e[i].color:""}),s[i].then(function(t){var e=a.dashboard.widgets.map(function(a){return a.id}).indexOf(t.id);a.dashboard.widgetData[e]=t,isExportOptionSet=1,a.loadedWidgetCount++},function(t){401===t.status?($("#widgetData-"+t.data.id).hide(),1003===t.data.errorstatusCode&&($("#widgetData-"+t.data.id).hide(),$("#errorWidgetData-"+t.data.id).hide(),$("#errorWidgetTokenexpire-"+t.data.id).show(),a.widgetErrorCode=1,a.loadedWidgetCount++,isExportOptionSet=0)):(a.loadedWidgetCount++,"undefined"!=typeof t.data.id&&($("#widgetData-"+t.data.id).hide(),$("#errorWidgetData-"+t.data.id).show(),$("#errorWidgetTokenexpire-"+t.data.id).hide(),isExportOptionSet=0))})}else isExportOptionSet=0,swal({title:"",text:'<span style = "sweetAlertFont">The requested dashboard has been deleted</span>',html:!0})},function(a){swal({title:"",text:'<span style = "sweetAlertFont">Error in populating widgets! Please refresh the dashboard again</span>',html:!0}),isExportOptionSet=0})},a.toggleLegends=function(t){for(var e in a.dashboard.widgetData)if(a.dashboard.widgetData[e].id==t)for(var r in a.dashboard.widgetData[e].chart)"undefined"!=typeof a.dashboard.widgetData[e].chart[r].options.chart.showLegend&&(1==a.dashboard.widgetData[e].chart[r].options.chart.showLegend?a.dashboard.widgetData[e].chart[r].options.chart.showLegend=!1:a.dashboard.widgetData[e].chart[r].options.chart.showLegend=!0)}}function NavigationController(a,t,e,r,s){s.getReportBuilder=function(){e({method:"POST",url:"/api/v1/updateUserSubscription?buster="+new Date}).then(function(t){a.canAccessReportBuilder=t.data.response.reportBuilder},function(t){a.dashboard.dashboardName=null,swal({title:"",text:'<span style="sweetAlertFont">Something went wrong! Please reload the dashboard</span>',html:!0})})},s.getReportBuilder(),t.includes("app.reporting.dashboard"),a.stateValidation=function(r){switch(r){case"recommendedDashboard":e({method:"GET",url:"/api/v1/subscriptionLimits?requestType=dashboards"}).then(function(a){a.data.isExpired===!1?a.data.availableDashboards>0?t.go("app.reporting."+r):toastr.info("You have reached your Dashboards limit. Please upgrade to create more Dashboards"):toastr.info("Please renew!")},function(a){swal({title:"",text:"<span style='sweetAlertFont'>Something went wrong! Please try again!</span> .",html:!0})});break;case"chooseDashboardType":e({method:"GET",url:"/api/v1/subscriptionLimits?requestType=dashboards"}).then(function(a){a.data.isExpired===!1?a.data.availableDashboards>0?t.go("app.reporting."+r):toastr.info("You have reached your Dashboards limit. Please upgrade to create more Dashboards"):toastr.info("Please renew !")},function(a){swal({title:"",text:"<span style='sweetAlertFont'>Something went wrong! Please try again!</span> .",html:!0})});break;case"buildReports":a.canAccessReportBuilder?t.go("app.reporting."+r):swal({title:"",text:"Sorry! The Report builder feature is only available on the Agency Plan.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Upgrade",closeOnConfirm:!0},function(){t.go("app.reporting.upgrade")});break;case"insights":toastr.info("Coming Soon")}},a.addRecommendedDashboard=function(){e({method:"GET",url:"/api/v1/subscriptionLimits?requestType=dashboards"}).then(function(a){a.data.isExpired===!1?a.data.availableDashboards>0?t.go("app.reporting.dashboard.recommendedDashboard"):toastr.info("You have reached your Dashboards limit. Please upgrade to create more Dashboards"):toastr.info("Please renew!")},function(a){swal({title:"",text:"<span style='sweetAlertFont'>Something went wrong! Please try again!</span> .",html:!0})})},$(".insightsModalContent").on("click",function(a){$(".navbar").css("z-index","1"),$(".md-overlay").css("background","rgba(0,0,0,0.5)"),$("#insightsModalContent").addClass("md-show")}),$(".addRemoveModalContent").on("click",function(a){$(".navbar").css("z-index","1"),$(".md-overlay").css("background","rgba(0,0,0,0.5)"),$("#addRemoveModalContent").addClass("md-show")})}config.$inject=["$translateProvider"],pageTitle.$inject=["$rootScope","$timeout"],sideNavigation.$inject=["$timeout"],iboxTools.$inject=["$timeout"],minimalizaSidebar.$inject=["$timeout"],icheck.$inject=["$timeout"],chatSlimScroll.$inject=["$timeout"],fullScroll.$inject=["$timeout"],iboxToolsFullScreen.$inject=["$timeout"],slimScroll.$inject=["$timeout"],hcChart.$inject=["$timeout"],fileModel.$inject=["$parse"],MainCtrl.$inject=["$scope","$rootScope","$http","$timeout"],CustomWidgetController.$inject=["$scope","$uibModal"],SharedDashboardController.$inject=["$scope","$timeout","$rootScope","$http","$window","$state","$stateParams","createWidgets","$q"],NavigationController.$inject=["$scope","$state","$http","$stateParams","$rootScope"],function(){angular.module("inspinia",["ui.router","oc.lazyLoad","ui.bootstrap","pascalprecht.translate","ngIdle","ngSanitize","ngAnimate","ui.bootstrap.tpls","gridster","xeditable","smart-table","angular-intro"])}(),angular.module("inspinia").config(config),angular.module("inspinia").directive("pageTitle",pageTitle).directive("sideNavigation",sideNavigation).directive("iboxTools",iboxTools).directive("minimalizaSidebar",minimalizaSidebar).directive("vectorMap",vectorMap).directive("sparkline",sparkline).directive("icheck",icheck).directive("ionRangeSlider",ionRangeSlider).directive("dropZone",dropZone).directive("responsiveVideo",responsiveVideo).directive("chatSlimScroll",chatSlimScroll).directive("customValid",customValid).directive("fullScroll",fullScroll).directive("closeOffCanvas",closeOffCanvas).directive("clockPicker",clockPicker).directive("landingScrollspy",landingScrollspy).directive("fitHeight",fitHeight).directive("iboxToolsFullScreen",iboxToolsFullScreen).directive("slimScroll",slimScroll).directive("channelDiv",channelDiv).directive("chartHeight",chartHeight).directive("sizeWatcher",sizeWatcher).directive("expSizeWatcher",expSizeWatcher).directive("hcChart",hcChart).directive("fileModel",fileModel);var showMetricApp=angular.module("inspinia");showMetricApp.service("createWidgets",["$http","$q",function(a,t){this.widgetHandler=function(e,r,s){function i(e,r){function s(e,r){var s=t.defer();if(r)var i={method:"GET",url:"/api/v1/widget/"+e+"?isPublic="+r,timeout:y.promise,cancel:y};else var i={method:"GET",url:"/api/v1/widget/"+e,timeout:y.promise,cancel:y};return a(i).then(function(a){s.resolve(a.data[0])},function(a){s.reject(a)}),s.promise}var i=t.defer(),o=[];for(var n in e.widgets){var c=e.widgets[n].widgetType;"basic"!=c&&"adv"!=c&&"fusion"!=c&&"custom"!=c||o.push(s(e.widgets[n].widgetId,r))}return t.all(o).then(function(a){i.resolve(a)},function(a){i.reject(a)}),i.promise}function o(e,r){var s=t.defer(),i=[],o=0;return a({method:"POST",url:"/api/v1/customWidget/data/"+e._id,data:{startDate:r.startDate,endDate:r.endDate},timeout:y.promise,cancel:y}).then(function(a){o++;for(var t in a.data)a.data[t].widgetId==e._id&&i.push({_id:a.data[t]._id,chartName:"Custom Data "+o,
chartType:a.data[t].chartType,widgetId:a.data[t].widgetId,chartData:a.data[t].data,intervalType:a.data[t].intervalType,metricsCount:a.data[t].metricsCount});e.charts=i,s.resolve(e)},function(a){s.reject(a)}),s.promise}function n(a){var e=t.defer(),r=[];for(var s in a.charts){var i=[];if("line"==a.charts[s].chartType||"bar"==a.charts[s].chartType||"column"==a.charts[s].chartType||"area"==a.charts[s].chartType)for(var o in a.charts[s].chartData){var n=0;for(var c in r)if(r[c].key==a.charts[s].chartData[o].name){i=r[c].values;var h={x:moment(a.charts[s].chartData[o].date),y:a.charts[s].chartData[o].values};i.push(h),i.sort(function(a,t){var e=new Date(a.x),r=new Date(t.x);return e-r}),r[c].values=i,n=1}if(1!=n){i=[];var h={x:moment(a.charts[s].chartData[o].date),y:a.charts[s].chartData[o].values};i.push(h),i.sort(function(a,t){var e=new Date(a.x),r=new Date(t.x);return e-r}),r.push({type:a.charts[s].chartType,values:i,key:a.charts[s].chartData[o].name,color:null})}}else if("pie"==a.charts[s].chartType)for(var o in a.charts[s].chartData){var n=0;for(c in r){var l=0;r[c].key==a.charts[s].chartData[o].name&&(l=parseInt(r[c].y),r[c].y=parseInt(l)+parseInt(a.charts[s].chartData[o].values),n=1)}1!=n&&r.push({type:a.charts[s].chartType,y:parseInt(a.charts[s].chartData[o].values),key:a.charts[s].chartData[o].name,color:null})}}return e.resolve(r),e.promise}function c(a,e){var r,i=t.defer();return r=h(a,e,s),r.then(function(t){a.charts=t,i.resolve(a)},function(a){i.reject(a)}),i.promise}function h(e,r,s){var i=t.defer(),o=[];if(s)var n={method:"POST",url:"/api/v1/widgets/data/"+e._id,data:{startDate:r.startDate,endDate:r.endDate,params:"public"}};else var n={method:"POST",url:"/api/v1/widgets/data/"+e._id,data:{startDate:r.startDate,endDate:r.endDate,widId:e._id},timeout:y.promise,cancel:y};return a(n).then(function(a){for(var t in e.charts)for(var r in a.data)String(e.charts[t].metrics[0].metricId)===String(a.data[r].metricId)&&o.push({channelId:e.charts[t].channelId,chartType:"undefined"!=typeof e.charts[t].metrics[0].chartType?e.charts[t].metrics[0].chartType:"",chartSubType:void 0!=e.charts[t].metrics[0].subChartType?e.charts[t].metrics[0].subChartType:"",chartName:e.charts[t].name,chartColour:e.charts[t].metrics[0].color,chartOptions:e.charts[t].metrics[0].chartOptions,chartMetricId:a.data[r].metricId,metricDetails:a.data[r].metricDetails,chartObjectId:a.data[r].objectId,chartObjectTypeId:e.charts[t].metrics[0].objectTypeId,chartObjectName:e.charts[t].objectName,chartData:a.data[r].data});i.resolve(o)},function(a){g.widgets.length>0?(k=g.widgets.map(function(a){return a._id}).indexOf(a._id),k!==-1&&(a.data.id=g._id),i.reject(a)):i.reject(a)}),i.promise}function l(a,e){function r(a,t){return t>a?t-a:a-t}function r(a,t){return t>a?t-a:a-t}function s(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}function i(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}function o(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}function s(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}function i(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}function o(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}function s(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}var n=t.defer(),c=[],h={Facebook:"FB",Twitter:"TW","Google Analytics":"GA","Facebook Ads":"FBAds","Google Adwords":"GAds",Instagram:"In",Pinterest:"Pi",Mailchimp:"Mc",Vimeo:"Vi",Linkedin:"Lin",Youtube:"YT",Moz:"Moz","Google Sheets":"GSheet",Aweber:"AW"},l=-1,p=0;if(a.charts.length>0){for(var d in a.charts){var f=a.charts[d].chartType;switch(f){case"bounceRateArea":var m=[];if("object"==typeof a.charts[d].chartData[0].total)for(var y=0;y<a.charts[d].chartData.length;y++){var g=parseFloat(a.charts[d].chartData[y].total[0].bounces),v=parseFloat(a.charts[d].chartData[y].total[0].sessions);if(0===v)var D=g;else var D=(g/v*100).toFixed(2);m.push({x:moment(a.charts[d].chartData[y].date),y:D,bounces:g,sessions:Math.round(100*v)/100})}a.charts[d].chartData=m;break;case"costPerClick":case"costPerThosuandImpressions":case"clickThroughRate":case"ConversionRate":case"costPerConversion":var m=[];if("costPerClick"==f)var b="Cost",w="Clicks";else if("costPerThosuandImpressions"==f)var b="Cost",w="Impressions";else if("clickThroughRate"==f)var b="Clicks",w="Impressions";else if("ConversionRate"==f)var b="Conversions",w="Clicks";else if("costPerConversion"==f)var b="Cost",w="Conversions";for(var y=0;y<a.charts[d].chartData.length;y++){var T=0,k=0;if("object"==typeof a.charts[d].chartData[y].total[0]&&(T="Cost"===b?parseFloat(a.charts[d].chartData[y].total[0][b]/1e6).toFixed(2):parseFloat(a.charts[d].chartData[y].total[0][b]),k=parseFloat(a.charts[d].chartData[y].total[0][w])),0===T)var x=T;else if("costPerThosuandImpressions"==f)var x=(T/k*1e3).toFixed(2);else if("clickThroughRate"==f||"clickThroughRate"==f||"costPerConversion"==f)var x="Infinity"===(T/k*100).toFixed(2)?0:(T/k*100).toFixed(2);else var x=(T/k).toFixed(2);m.push({x:moment(a.charts[d].chartData[y].date),y:x,dividend:T,divisor:k})}a.charts[d].chartData=m;break;case"line":case"area":case"bar":case"column":case"stackcolumn":case"mozoverview":case"negativeBar":if("object"==typeof a.charts[d].chartData[0].total){var C,N=a.charts[d].chartCode;for(ea in a.charts[d].metricDetails.objectTypes)a.charts[d].metricDetails.objectTypes[ea].objectTypeId==a.charts[d].chartObjectTypeId&&(C=a.charts[d].metricDetails.objectTypes[ea].meta.endpoint,a.charts[d].metricDetails.objectTypes[ea].meta.endpoint=void 0!=a.charts[d].metricDetails.objectTypes[ea].meta.endpointDisplay?a.charts[d].metricDetails.objectTypes[ea].meta.endpointDisplay:a.charts[d].metricDetails.objectTypes[ea].meta.endpoint);var F=[];if(0!=C.length)for(sr in C){var A=C[sr],S=[];for(G in a.charts[d].chartData){var O,E=0;if(null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length))for(var M in a.charts[d].chartData[G].total)if(M.search("/")>-1){O=M.split("/");for(var j in O)O[j]==A&&(E+=parseFloat(a.charts[d].chartData[G].total[M]))}else M==A&&(E=a.charts[d].chartData[G].total[A]);S.push({x:moment(a.charts[d].chartData[G].date),y:Math.round(100*E)/100})}F.push(S)}else{var S=[];if("fbTopReferringDomain"===a.charts[d].chartSubType){for(var I=[],P=0;P<a.charts[d].chartData.length;P++)if("object"==typeof a.charts[d].chartData[P].total)for(var H in a.charts[d].chartData[P].total)I.push({domain:H,value:a.charts[d].chartData[P].total[H]});var W=_.groupBy(I,"domain");for(var R in W){for(var B=R,L=0,y=0;y<W[R].length;y++)L+=parseFloat(W[R][y].value);S.push({x:B,y:isNaN(L)?0:L})}}else for(G in a.charts[d].chartData){var z,O,E=0,Y=a.charts[d].chartData[G].total;if(null!=a.charts[d].chartData[G].total&&0!=Object.keys(a.charts[d].chartData[G].total).length){for(var M in a.charts[d].chartData[G].total){if(M.search("/")>-1){O=M.split("/");for(var j in O)E+=parseFloat(a.charts[d].chartData[G].total[M]),z=M}else E=a.charts[d].chartData[G].total[A];z=M}S.push({x:z,y:Math.round(100*E)/100})}}F.push(S)}var V=[];if("userinteractions_clicks"==N&&"Facebook"==a.channelName){for(var y=0;y<F.length;y++)for(var q=0;q<F[y].length;q++)V[q]||(V[q]={x:0,y:0}),V[q].x=F[0][q].x,V[q].y+=F[y][q].y;F=V}a.charts[d].chartData=F}else{var S=[];for(var G in a.charts[d].chartData)S.push({x:moment(a.charts[d].chartData[G].date),y:null!=a.charts[d].chartData[G].total?Math.round(100*a.charts[d].chartData[G].total)/100:0});a.charts[d].chartData=S}if("fbTopReferringDomain"===a.charts[d].chartSubType){var U=_.sortBy(S,"y").reverse(),J=[];if(S.length<10)var X=S.length-1;else var X=9;for(var P=0;P<=X;P++)J.push({x:U[P].x,y:U[P].y});a.charts[d].chartData=J}break;case"reachVsImpressions":case"engagedUsersReach":if("Total Impressions"==a.charts[d].chartName||"Engaged Users"==a.charts[d].chartName){for(var K=[],Z=[],y=0;y<a.charts.length;y++)"Total Impressions"!=a.charts[y].chartName&&"Engaged Users"!=a.charts[y].chartName||(K=a.charts[y].chartData),"Total Reach"==a.charts[y].chartName&&(Z=a.charts[y].chartData);var Q=[];for(var aa in K){var ta=K[aa].total/Z[aa].total*100;!isNaN(ta)&&isFinite(ta)||(ta=0),Q.push({x:moment(K[aa].date),y:parseFloat(ta).toFixed(2),imp:K[aa].total,rea:Z[aa].total})}a.charts[d].chartData=Q}else{var S=[];for(var G in a.charts[d].chartData)S.push({x:moment(a.charts[d].chartData[G].date),y:null!=a.charts[d].chartData[G].total?a.charts[d].chartData[G].total:0});a.charts[d].chartData=S}break;case"trafficSourcesBrkdwnLine":if("object"==typeof a.charts[d].chartData[0].total){var C;for(ea in a.charts[d].metricDetails.objectTypes)a.charts[d].metricDetails.objectTypes[ea].objectTypeId==a.charts[d].chartObjectTypeId&&(C=a.charts[d].metricDetails.objectTypes[ea].meta.endpoint);var F=[];for(G in a.charts[d].chartData){var O,E=0;if(null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length))for(var M in a.charts[d].chartData[G].total)a.charts[d].chartData[G].total["social/Yes"]="undefined"!=typeof a.charts[d].chartData[G].total["social/Yes"]?Number(a.charts[d].chartData[G].total["social/Yes"]):0,M.search("/")>-1&&(O=M.split("/"),"Yes"==O[1]&&(a.charts[d].chartData[G].total["social/Yes"]+=Number(a.charts[d].chartData[G].total[M]),a.charts[d].chartData[G].total[M]=0))}for(sr in C){var A=C[sr],S=[];for(G in a.charts[d].chartData){var O,E=0;if(null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length))for(var M in a.charts[d].chartData[G].total)if(M.search("/")>-1){O=M.split("/");for(var j in O)O[j]==A&&(E+=parseFloat(a.charts[d].chartData[G].total[M]))}else M==A&&(E=a.charts[d].chartData[G].total[A]);S.push({x:moment(a.charts[d].chartData[G].date),y:Math.round(100*E)/100})}F.push(S)}a.charts[d].chartData=F}else{var S=[];for(var G in a.charts[d].chartData)S.push({x:moment(a.charts[d].chartData[G].date),y:null!=a.charts[d].chartData[G].total?Math.round(100*a.charts[d].chartData[G].total)/100:0});a.charts[d].chartData=S}break;case"pie":if("object"==typeof a.charts[d].chartData[0].total){var C=[];for(var ea in a.charts[d].metricDetails.objectTypes)a.charts[d].metricDetails.objectTypes[ea].objectTypeId==a.charts[d].chartObjectTypeId&&(C=a.charts[d].metricDetails.objectTypes[ea].meta.endpoint);var F=[];for(sr in C){var A=C[sr];S=[];var E=0;for(G in a.charts[d].chartData)if(null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length))for(var M in a.charts[d].chartData[G].total)if(M.search("/")>-1){O=M.split("/");for(var j in O)O[j]==A&&(E+=parseFloat(a.charts[d].chartData[G].total[M]))}else M==A&&(E+=parseFloat(a.charts[d].chartData[G].total[A]));S.push({y:parseFloat(E).toFixed(2)%Math.floor(parseFloat(E).toFixed(2))>0?parseFloat(E).toFixed(2):parseFloat(E).toFixed(2)>1?parseInt(E):parseFloat(E)>0?parseFloat(E).toFixed(2):parseInt(E)}),F.push(S)}a.charts[d].chartData=F}else{var E=0;for(G in a.charts[d].chartData)E+=parseFloat(a.charts[d].chartData[G].total);S.push({y:parseFloat(E).toFixed(2)%Math.floor(parseFloat(E).toFixed(2))>0?parseFloat(E).toFixed(2):parseFloat(E).toFixed(2)>1?parseInt(E):parseFloat(E)>0?parseFloat(E).toFixed(2):parseInt(E)}),a.charts[d].chartData=S}break;case"trafficSourcesBrkdwnPie":if("object"==typeof a.charts[d].chartData[0].total){var C=[];for(ea in a.charts[d].metricDetails.objectTypes)a.charts[d].metricDetails.objectTypes[ea].objectTypeId==a.charts[d].chartObjectTypeId&&(C=a.charts[d].metricDetails.objectTypes[ea].meta.endpoint);var F=[];for(G in a.charts[d].chartData){var O,E=0;if(null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length))for(var M in a.charts[d].chartData[G].total)a.charts[d].chartData[G].total["social/Yes"]="undefined"!=typeof a.charts[d].chartData[G].total["social/Yes"]?Number(a.charts[d].chartData[G].total["social/Yes"]):0,M.search("/")>-1&&(O=M.split("/"),"Yes"==O[1]&&(a.charts[d].chartData[G].total["social/Yes"]+=Number(a.charts[d].chartData[G].total[M]),a.charts[d].chartData[G].total[M]=0))}for(sr in C){var A=C[sr];S=[];var E=0;for(G in a.charts[d].chartData)if(null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length))for(var M in a.charts[d].chartData[G].total)if(M.search("/")>-1){O=M.split("/");for(var j in O)O[j]==A&&(E+=parseFloat(a.charts[d].chartData[G].total[M]))}else M==A&&(E+=a.charts[d].chartData[G].total[A]);S.push({y:Math.round(100*E)/100}),F.push(S)}a.charts[d].chartData=F}else{var E=0;for(G in a.charts[d].chartData)E+=parseInt(a.charts[d].chartData[G].total);S.push({y:Math.round(100*E)/100}),a.charts[d].chartData=S}break;case"instagramPosts":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){var ra="images",sa="thumbnail",ia="likes",oa="comments",L="count",na="caption",ca="text",ha="link",la="url",F=[];for(G in a.charts[d].chartData){var S={date:moment(a.charts[d].chartData[G].date).format("DD-MMM-YYYY"),image:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[ra]&&null!=a.charts[d].chartData[G].total[ra][sa]&&"undefined"!=typeof a.charts[d].chartData[G].total[ra][sa][la]?a.charts[d].chartData[G].total[ra][sa][la]:"",postComment:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[na]&&"undefined"!=typeof a.charts[d].chartData[G].total[na][ca]?a.charts[d].chartData[G].total[na][ca]:"",likes:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[ia]&&"undefined"!=typeof a.charts[d].chartData[G].total[ia][L]?a.charts[d].chartData[G].total[ia][L]:0,comments:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[oa]&&"undefined"!=typeof a.charts[d].chartData[G].total[oa][L]?a.charts[d].chartData[G].total[oa][L]:0,links:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&"undefined"!=typeof a.charts[d].chartData[G].total[ha]?a.charts[d].chartData[G].total[ha]:""};F.push(S)}a.charts[d].chartData=F}break;case"instagramEngagements":var pa=a.charts[d].chartSubType;if("instagramPostFrequency"===pa||"instagramPostTypes"===pa||"instagramPostEngagement"===pa){var ua=0,ia="likes",oa="comments",da=[];if("undefined"!=typeof a.charts[d].chartData[0])for(var y=0;y<a.charts[d].chartData.length;y++){ua++;var fa=a.charts[d].chartData[y].total[ia].count,ma=a.charts[d].chartData[y].total[oa].count,ya=fa+ma,R=a.charts[d].chartData[y].total.type;da.push({type:R,engagement:ya})}for(var ga={},va={},P=0;P<da.length;P++){if(ga.hasOwnProperty(da[P].type)){var R=da[P].type;ga[R]+=1}else{var R=da[P].type;ga[R]=1}if(va.hasOwnProperty(da[P].type)){var H=da[P].type;va[H]+=da[P].engagement}else{var H=da[P].type;va[H]=da[P].engagement}}}"instagramPostFrequency"===pa?a.charts[d].chartData=ua:"instagramPostEngagement"===pa?a.charts[d].chartData=va:"instagramPostTypes"===pa&&(a.charts[d].chartData=ga);break;case"highEngagementTweets":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){var ia="favorite_count",Da="retweet_count",ca="text",ha="expanded_url",F=[];for(G in a.charts[d].chartData){var S={date:moment(new Date(a.charts[d].chartData[G].date)).format("DD-MMM-YYYY"),likes:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&"undefined"!=typeof a.charts[d].chartData[G].total[ia]?a.charts[d].chartData[G].total[ia]:0,reTweet:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&"undefined"!=typeof a.charts[d].chartData[G].total[Da]?a.charts[d].chartData[G].total[Da]:0,postComment:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&"undefined"!=typeof a.charts[d].chartData[G].total[ca]?a.charts[d].chartData[G].total[ca]:0,links:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&"undefined"!=typeof a.charts[d].chartData[G].total.entities?a.charts[d].chartData[G].total.entities:0};F.push(S)}a.charts[d].chartData=F}break;case"highestEngagementLinkedIn":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){var ia="likes",ba="clicks",wa="impressions",Ta="shares",oa="comments",ca="text",la="url",F=[];for(G in a.charts[d].chartData){var S={date:moment(a.charts[d].chartData[G].date).format("DD-MMM-YYYY"),link:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[la]&&"undefined"!=typeof a.charts[d].chartData[G].total[la]?a.charts[d].chartData[G].total[la]:"",postComment:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[ca]&&"undefined"!=typeof a.charts[d].chartData[G].total[ca]?a.charts[d].chartData[G].total[ca]:"",impressions:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[wa]&&"undefined"!=typeof a.charts[d].chartData[G].total[wa]?a.charts[d].chartData[G].total[wa]:0,shares:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[Ta]&&"undefined"!=typeof a.charts[d].chartData[G].total[Ta]?a.charts[d].chartData[G].total[Ta]:0,likes:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[ia]&&"undefined"!=typeof a.charts[d].chartData[G].total[ia]?a.charts[d].chartData[G].total[ia]:0,comments:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[oa]&&"undefined"!=typeof a.charts[d].chartData[G].total[oa]?a.charts[d].chartData[G].total[oa]:0,clicks:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[ba]&&"undefined"!=typeof a.charts[d].chartData[G].total[ba]?a.charts[d].chartData[G].total[ba]:0};F.push(S)}a.charts[d].chartData=F}break;case"gaTopPagesByVisit":;if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++){var xa=$.map(a.charts[d].chartData[P].total,function(a,t){return[a]});ka=ka.concat(xa)}var Ca="pageTitle",F=[],W=_.groupBy(ka,"pagePath");for(var R in W){for(var Na=R,v=0,Fa=0,Aa=0,Sa=0,g=0,y=0;y<W[R].length;y++)v+=parseFloat(W[R][y].sessions),Fa+=parseFloat(W[R][y].pageviews),g+=parseFloat(W[R][y].bounces),Sa+=parseFloat(W[R][y].exits),Aa+=parseFloat(W[R][y].timeOnPage);var Oa=r(Fa,Sa);if(0===v)var D=g;else var D=(g/v*100).toFixed(2);if(0===Oa)var Ea=Aa;else var Ea=Aa/Oa;Ea=Math.ceil(Ea);var Ma=new Date(null);Ma.setSeconds(Ea),Ea=Ma.toISOString().substr(11,8);var Na={bouncesRate:g,pagePath:Na,sessions:v,pageTitle:W[R][0][Ca],bouncesRate:D,avgTimeOnpage:Ea,pageviews:Fa};F.push(Na)}F.sort(function(a,t){return parseFloat(a.pageviews)-parseFloat(t.pageviews)}),F.reverse(),a.charts[d].chartData=F}break;case"gaPageContentEfficiencyTable":;if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++){var xa=$.map(a.charts[d].chartData[P].total,function(a,t){return[a]});ka=ka.concat(xa)}var Ca="pageTitle",F=[],W=_.groupBy(ka,"pagePath");for(var R in W){for(var Na=R,ja=0,Fa=0,Ia=0,Pa=0,Aa=0,Sa=0,g=0,v=0,Ha=0,Wa=0,y=0;y<W[R].length;y++){ja+=parseFloat(W[R][y].uniquePageviews),v+=parseFloat(W[R][y].sessions),Fa+=parseFloat(W[R][y].pageviews),g+=parseFloat(W[R][y].bounces),Sa+=parseFloat(W[R][y].exits),Aa+=parseFloat(W[R][y].timeOnPage),Wa+=W[R][y].pageviews*W[R][y].entranceRate,Ia+=parseFloat(W[R][y].pageValue);var Ca=W[R][y].pageTitle}var Oa=r(Fa,Sa);if(0===v)var D=g;else var D=(g/v*100).toFixed(2);if(0===Oa)var Ea=Aa;else var Ea=Aa/Oa;Ha=Wa/Fa;var Na={uniquePageviews:ja,sessions:v,pageviews:Fa,pagePath:Na,avgTimeOnPage:Ea,pageTitle:Ca,entranceRate:Ha.toFixed(2),pageviews:Fa,pageValue:Ia,bounceRate:D},Ma=new Date(null);Ma.setSeconds(Na.avgTimeOnPage),Na.avgTimeOnPage=Ma.toISOString().substr(11,8),F.push(Na)}F.sort(function(a,t){return parseFloat(a.pageviews)-parseFloat(t.pageviews)}),F.reverse(),a.charts[d].chartData=F}break;case"gaPageTechnicalEfficiencyTable":;if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++){var xa=$.map(a.charts[d].chartData[P].total,function(a,t){return[a]});ka=ka.concat(xa)}var Ca="pageTitle",F=[],W=_.groupBy(ka,"pagePath");for(var R in W){for(var Na=R,Fa=0,Ra=0,Ba=0,Pa=0,v=0,g=0,_a=0,y=0;y<W[R].length;y++){_a+=parseFloat(W[R][y].pageLoadTime),v+=parseFloat(W[R][y].sessions),g+=parseFloat(W[R][y].bounces),Fa+=parseFloat(W[R][y].pageviews),Ba+=parseFloat(W[R][y].pageLoadSample),Pa+=parseFloat(W[R][y].bounceRate);var Ca=W[R][y].pageTitle}var Ra=(_a/Ba/1e3).toFixed(2);if(isNaN(Ra)&&(Ra=0),0===v)var D=g;else var D=g/v*100;Ra=Math.ceil(Ra);var Na={pageviews:Fa,sessions:v,pagePath:Na,pageTitle:Ca,avgPageLoadTime:Ra.toFixed(2),pageLoadSample:Ba,pageviews:Fa,bounceRate:D.toFixed(2)};F.push(Na)}F.sort(function(a,t){return parseFloat(a.pageviews)-parseFloat(t.pageviews)}),F.reverse(),a.charts[d].chartData=F}break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":;if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++){var xa=$.map(a.charts[d].chartData[P].total,function(a,t){return[a]});ka=ka.concat(xa)}var F=[],W=_.groupBy(ka,"sourceMedium");for(var R in W){for(var La=R,v=0,za=0,Ya=0,$a=0,Ba=0,Va=0,y=0;y<W[R].length;y++)v+=parseFloat(W[R][y].sessions),za+=parseFloat(W[R][y].users),Ya+=parseFloat(W[R][y].newUsers),$a+=parseFloat(W[R][y].goalConversionRateAll),Ba+=parseFloat(W[R][y].pageLoadSample),Va+=parseFloat(W[R][y].goalValuePerSession),Pa+=parseFloat(W[R][y].bounceRate);var Na={sourceMedium:La,sessions:v,users:za,newUsers:Ya,goalValuePerSession:Va,goalConversionRateAll:$a.toFixed(2)};F.push(Na)}F.sort(function(a,t){return parseFloat(a.sessions)-parseFloat(t.sessions)}),F.reverse(),a.charts[d].chartData=F}break;case"pageContentEfficiency":;if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++){var qa=$.isEmptyObject(a.charts[d].chartData[P].total);if(1!=qa){var xa=$.map(a.charts[d].chartData[P].total,function(a,t){return[a]});ka=ka.concat(xa)}}var Ca="pageTitle",F=[],W=_.groupBy(ka,"pagePath");for(var R in W){for(var D,ja=0,Fa=0,g=0,v=0,Ha=0,Wa=0,y=0;y<W[R].length;y++)ja+=parseFloat(W[R][y].uniquePageviews),v+=parseFloat(W[R][y].sessions),Fa+=parseFloat(W[R][y].pageviews),g+=parseFloat(W[R][y].bounces),Wa+=W[R][y].pageviews*W[R][y].entranceRate,Ca=W[R][y].pageTitle;D=0===v?g:(g/v*100).toFixed(2),Ha=Wa/Fa;var Na={bounceRate:D,pageTitle:Ca,uniquePageviews:ja.toFixed(2),pageviews:Fa,entranceRate:Ha.toFixed(2)};F.push(Na)}F.sort(function(a,t){return parseFloat(a.uniquePageviews)-parseFloat(t.uniquePageviews)}),F.reverse();var Ga=[];if(F.length>10)for(var y=0;y<10;y++)Ga.push(F[y]);else for(var y=0;y<F.length;y++)Ga.push(F[y]);a.charts[d].chartData=Ga}break;case"gaSocialMediaOverview":;if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++){var xa=$.map(a.charts[d].chartData[P].total,function(a,t){return[a]});ka=ka.concat(xa)}var F=[];if("Time spent on site from various sources"==String(a.charts[d].chartName)){for(var P=0;P<ka.length;P++)"Yes"===ka[P].hasSocialSourceReferral&&(ka[P].medium="social");var W=_.groupBy(ka,"medium")}else var W=_.groupBy(ka,"socialNetwork");for(var R in W){for(var Ua=R,Fa=0,v=0,Sa=0,Aa=0,y=0;y<W[R].length;y++)v+=parseFloat(W[R][y].sessions),Fa+=parseFloat(W[R][y].pageviews),Sa+=parseFloat(W[R][y].exits),Aa+=parseFloat(W[R][y].timeOnPage);var Ja=Fa/v,Xa=Aa/(Fa-Sa),Na={sessions:Number(v),pageviewsPersession:isNaN(Ja)?0:Ja.toFixed(2),socialNetwork:Ua,avgtimeOnPage:isNaN(Xa)?0:Xa.toFixed(2)};"Time spent on site from various sources"==String(a.charts[d].chartName)?"(none)"!=String(Na.socialNetwork)&&"organic"!=String(Na.socialNetwork)&&"referral"!=String(Na.socialNetwork)&&"ppc"!=String(Na.socialNetwork)&&"social"!=String(Na.socialNetwork)||F.push(Na):F.push(Na)}a.charts[d].chartData=F}break;case"pageTechnicalEfficiency":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++){var qa=$.isEmptyObject(a.charts[d].chartData[P].total);if(1!=qa){var xa=$.map(a.charts[d].chartData[P].total,function(a,t){return[a]});ka=ka.concat(xa)}}var Ca="pageTitle",F=[],W=_.groupBy(ka,"pagePath");for(var R in W){for(var Fa=0,Ra=0,Ba=0,Pa=0,v=0,g=0,_a=0,y=0;y<W[R].length;y++){_a+=parseFloat(W[R][y].pageLoadTime),v+=parseFloat(W[R][y].sessions),g+=parseFloat(W[R][y].bounces),Fa+=parseFloat(W[R][y].pageviews),Ba+=parseFloat(W[R][y].pageLoadSample);var Ca=W[R][y].pageTitle}var Ra=(_a/Ba/1e3).toFixed(2);if(isNaN(Ra)&&(Ra=0),0===v)var D=g;else var D=g/v*100;Ra=Math.ceil(Ra);var Na={bounceRate:D.toFixed(2),pageTitle:Ca,PageLoadTime:Ra.toFixed(2),pageviews:Fa};F.push(Na)}F.sort(function(a,t){return parseFloat(a.pageviews)-parseFloat(t.pageviews)}),F.reverse();var Ga=[];if(F.length>10)for(var y=0;y<10;y++)Ga.push(F[y]);else for(var y=0;y<F.length;y++)Ga.push(F[y]);a.charts[d].chartData=Ga}break;case"visitorAcquisitionEfficiency":;if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++){var qa=$.isEmptyObject(a.charts[d].chartData[P].total);if(1!=qa){var xa=$.map(a.charts[d].chartData[P].total,function(a,t){return[a]});ka=ka.concat(xa)}}var F=[],W=_.groupBy(ka,"sourceMedium");for(var R in W){for(var La=R,v=0,za=0,Ya=0,$a=0,Ba=0,Va=0,y=0;y<W[R].length;y++)v+=parseFloat(W[R][y].sessions),Ya+=parseFloat(W[R][y].newUsers),$a+=parseFloat(W[R][y].goalConversionRateAll),Ba+=parseFloat(W[R][y].pageLoadSample),Va+=parseFloat(W[R][y].goalValuePerSession);var Na={newUsers:Ya.toFixed(2),sourceMedium:La,goalValuePerSession:Va.toFixed(2),goalConversionRateAll:$a.toFixed(2),sessions:v};F.push(Na)}F.sort(function(a,t){return parseFloat(a.sessions)-parseFloat(t.sessions)}),F.reverse();var Ga=[];if(F.length>10)for(var y=0;y<10;y++)Ga.push(F[y]);else for(var y=0;y<F.length;y++)Ga.push(F[y]);a.charts[d].chartData=Ga}break;case"topReferringSites":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++){var qa=$.isEmptyObject(a.charts[d].chartData[P].total);if(1!=qa){var xa=$.map(a.charts[d].chartData[P].total,function(a,t){return[a]});ka=ka.concat(xa)}}var F=[],W=_.groupBy(ka,"source");for(var R in W){for(var Ka=R,v=0,Za=0,Qa=0,y=0;y<W[R].length;y++)v+=parseFloat(W[R][y].sessions),Qa+=parseFloat(W[R][y].goalCompletionsAll);Za=v/Qa;var Na={source:Ka,goalCompletions:Number(Qa.toFixed(2)),goalConversionRate:isNaN($a)?0:$a,sessions:v};F.push(Na)}F.sort(function(a,t){return parseFloat(t.sessions)-parseFloat(a.sessions)});var Ga=[];if("Top referring sites(Table)"==String(a.charts[d].chartName))Ga=F;else if(F.length>10)for(var y=0;y<10;y++)Ga.push(F[y]);else for(var y=0;y<F.length;y++)Ga.push(F[y]);a.charts[d].chartData=Ga}break;case"fbReachByAge":var at={"13-17":{Female:0,Male:0,Unspecified:0},"18-24":{Female:0,Male:0,Unspecified:0},"25-34":{Female:0,Male:0,Unspecified:0},"35-44":{Female:0,Male:0,Unspecified:0},"45-54":{Female:0,Male:0,Unspecified:0},"55-64":{Female:0,Male:0,Unspecified:0},"65+":{Female:0,Male:0,Unspecified:0}};if("undefined"!=typeof a.charts[d].chartData[0]){if("object"==typeof a.charts[d].chartData[0].total)for(var G in a.charts[d].chartData)for(var H in a.charts[d].chartData[G].total){var tt=H.split("."),et=String(tt[0]),rt=String(tt[1]);"F"==et&&(et="Female"),"M"==et&&(et="Male"),"U"==et&&(et="Unspecified"),void 0!=at[rt]&&(at[rt]=at[rt]||0,at[rt][et]+=parseInt(a.charts[d].chartData[G].total[H]))}var st=[],it=[];for(var R in at){st.push(R);at[R].length}var ot=st[0];for(var nt in at[ot]){var ct={};ct.name=nt;var ht=0;ct.data=[];for(var ta in at)ct.data[ht]=at[ta][nt],ht++;it.push(ct)}var lt=[at,st,it]}a.charts[d].chartData=lt;break;case"fbStoreType":case"engagementDay":if("fbStoreType"==f&&"undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){var pt=[];for(var G in a.charts[d].chartData){var Ma,Y={"page post":0,Other:0};for(var H in a.charts[d].chartData[G].total)"page post"===H?Y[H]=a.charts[d].chartData[G].total[H]:Y.Other+=a.charts[d].chartData[G].total[H];pt.push({date:moment(a.charts[d].chartData[G].date),total:Y})}a.charts[d].chartData=pt}if("engagementDay"==f){var ut=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dt={},ft={},mt={},yt={},gt={},vt={},Dt={},bt=[dt,ft,mt,yt,gt,vt,Dt];if("undefined"!=typeof a.charts[d].chartData[0]){for(var y=0;y<a.charts[d].chartData.length;y++)if("undefined"!=typeof a.charts[d].chartData[y].date){var wt=new Date(a.charts[d].chartData[y].date),Tt=wt.getDay();if(Tt<7)for(var H in a.charts[d].chartData[y].total)"comment"!==H&&"like"!==H&&"link"!==H||(bt[Tt].hasOwnProperty(H)?bt[Tt][H]+=a.charts[d].chartData[y].total[H]:(bt[Tt][H]=0,bt[Tt][H]+=a.charts[d].chartData[y].total[H]))}for(var kt=[],P=0;P<ut.length;P++)kt.push({date:ut[P],total:bt[P]})}a.charts[d].chartData=kt}if("object"==typeof a.charts[d].chartData[0].total){var C;for(ea in a.charts[d].metricDetails.objectTypes)a.charts[d].metricDetails.objectTypes[ea].objectTypeId==a.charts[d].chartObjectTypeId&&(C="fbStoreType"==f?["page post","Other"]:a.charts[d].metricDetails.objectTypes[ea].meta.endpoint);a.charts[d].metricDetails.objectTypes[ea].meta.endpoint=a.charts[d].metricDetails.objectTypes[ea].meta.endpointDisplay;var F=[];for(sr in C){var A=C[sr],S=[];for(G in a.charts[d].chartData){var O,E=0;if(null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length))for(var M in a.charts[d].chartData[G].total)if(M.search("/")>-1){O=M.split("/");for(var j in O)O[j]==A&&(E+=parseFloat(a.charts[d].chartData[G].total[M]))}else M==A&&(E=a.charts[d].chartData[G].total[A]);(f="engagementDay")?S.push({x:a.charts[d].chartData[G].date,y:E}):S.push({x:moment(a.charts[d].chartData[G].date),y:E})}F.push(S)}a.charts[d].chartData=F}a.charts[d].chartType="line";break;case"fbReachByCountry":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++)ka.push(a.charts[d].chartData[P].total);for(var xt={},y=0;y<ka.length;y++)for(var R in ka[y])xt.hasOwnProperty(R)?xt[R]+=ka[y][R]:(xt[R]=0,xt[R]+=ka[y][R]);var Ct=[];for(var Nt in xt)Ct.push([Nt,xt[Nt]]);Ct.sort(function(a,t){return t[1]-a[1]}),xt={Others:0};for(var P=0;P<Ct.length;P++)P<5?xt.hasOwnProperty(Ct[P][0])?xt[Ct[P][0]]=Ct[P][1]:(xt[Ct[P][0]]=0,xt[Ct[P][0]]=Ct[P][1]):xt.Others+=Ct[P][1]}a.charts[d].chartData=xt;break;case"fbReachByCity":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++)ka.push(a.charts[d].chartData[P].total);for(var xt={},y=0;y<ka.length;y++)for(var R in ka[y]){var Ft=R.split(","),At=Ft[0];xt.hasOwnProperty(R)?xt[At]+=ka[y][R]:(xt[At]=0,xt[At]+=ka[y][R])}var Ct=[];for(var Nt in xt)Ct.push([Nt,xt[Nt]]);Ct.sort(function(a,t){return t[1]-a[1]}),xt={Others:0};for(var P=0;P<Ct.length;P++)P<5?xt.hasOwnProperty(Ct[P][0])?xt[Ct[P][0]]=Ct[P][1]:(xt[Ct[P][0]]=0,xt[Ct[P][0]]=Ct[P][1]):xt.Others+=Ct[P][1]}a.charts[d].chartData=xt;break;case"fanSource":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){
var St={Others:0,page_profile:0,like_story:0,mobile:0,mobile_ads:0,external_connect:0,recommended_pages:0};for(var G in a.charts[d].chartData)for(var H in a.charts[d].chartData[G].total)"undefined"!=a.charts[d].chartData[G].total[H]&&("page_profile"===H||"like_story"===H||"mobile"===H||"mobile_ads"===H||"external_connect"===H||"recommended_pages"===H?St[H]+=a.charts[d].chartData[G].total[H]:St.Others+=a.charts[d].chartData[G].total[H]);var Ot={"Page Profile":St.page_profile,"Like story ads":St.like_story,Mobile:St.mobile,"Mobile ads":St.mobile_ads,External:St.external_connect,"Recommended pages":St.recommended_pages," Others":St.Others};a.charts[d].chartData=Ot}a.charts[d].chartType="fbReachByCity";break;case"pinterestEngagementRate":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){var ia="likes",oa="comments",Et="repins",ca="name",la="url",F=[];for(G in a.charts[d].chartData){var S={date:moment(a.charts[d].chartData[G].date).format("DD-MMM-YYYY"),postComment:null!=a.charts[d].chartData[G]&&Object.keys(0!=a.charts[d].chartData[G].length)&&null!=a.charts[d].chartData[G][ca]&&"undefined"!=typeof a.charts[d].chartData[G][ca]?a.charts[d].chartData[G][ca]:"",likes:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[ia]&&"undefined"!=typeof a.charts[d].chartData[G].total[ia]?a.charts[d].chartData[G].total[ia]:0,repins:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[Et]&&"undefined"!=typeof a.charts[d].chartData[G].total[Et]?a.charts[d].chartData[G].total[Et]:0,comments:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[oa]&&"undefined"!=typeof a.charts[d].chartData[G].total[oa]?a.charts[d].chartData[G].total[oa]:0,links:null!=a.charts[d].chartData[G]&&Object.keys(0!=a.charts[d].chartData[G].length)&&"undefined"!=typeof a.charts[d].chartData[G][la]?a.charts[d].chartData[G][la]:""};F.push(S)}a.charts[d].chartData=F}break;case"pinterestLeaderboard":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){var Mt="collaborators",jt="followers",It="pins",ca="name",la="url",F=[];for(G in a.charts[d].chartData){var S={date:moment(a.charts[d].chartData[G].date).format("DD-MMM-YYYY"),postComment:null!=a.charts[d].chartData[G]&&Object.keys(0!=a.charts[d].chartData[G].length)&&null!=a.charts[d].chartData[G][ca]&&"undefined"!=typeof a.charts[d].chartData[G][ca]?a.charts[d].chartData[G][ca]:"",collaborators:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[Mt]&&"undefined"!=typeof a.charts[d].chartData[G].total[Mt]?a.charts[d].chartData[G].total[Mt]:0,pins:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[It]&&"undefined"!=typeof a.charts[d].chartData[G].total[It]?a.charts[d].chartData[G].total[It]:0,followers:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total[jt]&&"undefined"!=typeof a.charts[d].chartData[G].total[jt]?a.charts[d].chartData[G].total[jt]:0,links:null!=a.charts[d].chartData[G]&&Object.keys(0!=a.charts[d].chartData[G].length)&&"undefined"!=typeof a.charts[d].chartData[G][la]?a.charts[d].chartData[G][la]:""};F.push(S)}a.charts[d].chartData=F}break;case"vimeoTopVideos":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){var ia="likes",oa="comments",F=[];for(G in a.charts[d].chartData){var S={date:moment(a.charts[d].chartData[G].date).format("DD-MMM-YYYY"),link:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total.link&&"undefined"!=typeof a.charts[d].chartData[G].total.link?a.charts[d].chartData[G].total.link:"",Comment:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total.metadata.connections.comments.total&&"undefined"!=typeof a.charts[d].chartData[G].total.metadata.connections.comments.total?a.charts[d].chartData[G].total.metadata.connections.comments.total:"",likes:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total.metadata.connections.likes.total&&"undefined"!=typeof a.charts[d].chartData[G].total.metadata.connections.likes.total?a.charts[d].chartData[G].total.metadata.connections.likes.total:0,views:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total.stats.plays&&"undefined"!=typeof a.charts[d].chartData[G].total.stats.plays?a.charts[d].chartData[G].total.stats.plays:0,picture:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total.pictures.sizes[0].link&&"undefined"!=typeof a.charts[d].chartData[G].total.pictures.sizes[0].link?a.charts[d].chartData[G].total.pictures.sizes[0].link:0,title:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&null!=a.charts[d].chartData[G].total.name&&"undefined"!=typeof a.charts[d].chartData[G].total.name?a.charts[d].chartData[G].total.name:0};F.push(S)}a.charts[d].chartData=F}break;case"costPerActionType":var Pt=!1,Ht=[];if(a.meta){var S=[];for(var G in a.charts[d].chartData){var y,L=0;for(y in a.charts[d].chartData[G].total)a.charts[d].chartData[G].total.hasOwnProperty(y)&&L++;if(L){var Wt=0;for(var H in a.charts[d].chartData[G].total)a.meta==a.charts[d].chartData[G].total[H].action_type&&(Wt=1,S.push({x:moment(a.charts[d].chartData[G].date),y:null!=a.charts[d].chartData[G].total[H]?a.charts[d].chartData[G].total[H].value:0}));Wt||S.push({x:moment(a.charts[d].chartData[G].date),y:0})}else S.push({x:moment(a.charts[d].chartData[G].date),y:0})}a.charts[d].chartData=S}else{var S={};Pt=!0;for(var y=0;y<a.charts[d].chartData.length;y++)for(var H in a.charts[d].chartData[y].total)Ht.push(a.charts[d].chartData[y].total[H].action_type);var Rt=_.uniqBy(Ht);S.flag=Pt,S.action=Rt,a.charts[d].chartData=S}break;case"instagramHashtagLeaderBoard":if(null!=a.charts[d].chartData[0]){if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){var Bt="tag",oa="comments",ia="likes",F=[];for(G in a.charts[d].chartData){var S={tagLink:null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length)&&"undefined"!=typeof a.charts[d].chartData[G].total[Bt]?"https://www.instagram.com/explore/tags/"+a.charts[d].chartData[G].total[Bt]:"",tag:null!=a.charts[d].chartData[G].total&&null!=a.charts[d].chartData[G].total[Bt]&&"undefined"!=typeof a.charts[d].chartData[G].total[Bt]?a.charts[d].chartData[G].total[Bt]:0,likes:null!=a.charts[d].chartData[G].total&&null!=a.charts[d].chartData[G].total[ia]&&"undefined"!=typeof a.charts[d].chartData[G].total[ia]?a.charts[d].chartData[G].total[ia]:0,comments:null!=a.charts[d].chartData[G].total&&null!=a.charts[d].chartData[G].total[oa]&&"undefined"!=typeof a.charts[d].chartData[G].total[oa]?a.charts[d].chartData[G].total[oa]:0};F.push(S)}a.charts[d].chartData=F}}else a.charts[d].chartData=[];break;case"gaTopCountriesToSocialVisits":case"gaTopCitiesToSocialVisits":if("undefined"!=typeof a.charts[d].chartData[0]&&"object"==typeof a.charts[d].chartData[0].total){var ka=[],F=[],_t={},Lt=0;a.charts[d].chartData.forEach(function(t){for(var e in t.total)e.indexOf(a.charts[d].metricDetails.objectTypes[0].meta.endpoint[0]+"/")!=-1&&ka.push({country:e.split(a.charts[d].metricDetails.objectTypes[0].meta.endpoint[0]+"/").join(""),value:t.total[e]})});var W=_.groupBy(ka,"country");for(var R in W){for(var xt=R,v=0,y=0;y<W[R].length;y++)v+=parseFloat(W[R][y].value);var Na={country:xt,sessions:v};F.push(Na)}var zt=_.sortBy(F,"sessions").reverse();if(zt.length){for(var Yt=zt.length<5?zt.length:5,P=0;P<Yt;P++)_t[zt[P].country]=zt[P].sessions;if(zt.length>5){for(var q=5;q<zt.length;q++)Lt+=zt[q].sessions;_t.Others=Lt}else _t.Others=0}}a.charts[d].chartData=_t;break;case"audienceBehaviourbyDay":var ut=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dt={},ft={},mt={},yt={},gt={},vt={},Dt={},bt=[dt,ft,mt,yt,gt,vt,Dt];if("undefined"!=typeof a.charts[d].chartData[0])for(var y=0;y<a.charts[d].chartData.length;y++)if("undefined"!=typeof a.charts[d].chartData[y].date){var wt=new Date(a.charts[d].chartData[y].date),Tt=wt.getDay();if(Tt<7){for(var H in a.charts[d].chartData[y].total[0])"date"!=H&&"dayOfWeek"!=H&&"total"!=H&&(bt[Tt].hasOwnProperty(H)?bt[Tt][H]+=parseFloat(a.charts[d].chartData[y].total[0][H]):(bt[Tt][H]=0,bt[Tt][H]+=parseFloat(a.charts[d].chartData[y].total[0][H])));bt[Tt].bounceRate=0,0===bt[Tt].sessions?bt[Tt].bounceRate=bt[Tt].bounces:bt[Tt].bounceRate=bt[Tt].sessions/bt[Tt].bounces}}for(var kt=[],P=0;P<ut.length;P++)kt.push({date:ut[P],total:bt[P]});a.charts[d].chartData=kt;break;case"audienceBehaviourByTimeofday":if("object"==typeof a.charts[d].chartData[0].total){for(var ka=[],P=0;P<a.charts[d].chartData.length;P++){var xa=$.map(a.charts[d].chartData[P].total,function(a,t){return[a]});ka=ka.concat(xa)}var Ma=[],F=[],W=_.groupBy(ka,"hour");for(var R in W){for(var $t=R,Fa=0,g=0,v=0,Vt=0,qt=0,y=0;y<W[R].length;y++)v+=parseFloat(W[R][y].sessions),Fa+=parseFloat(W[R][y].pageviews),g+=parseFloat(W[R][y].bounces),Vt+=parseFloat(W[R][y].pageviewsPerSession),qt+=parseFloat(W[R][y].percentNewSessions);if(0===v)var Pa=g;else var Pa=(g/v*100).toFixed(2);var $t={hour:$t,sessions:v,bounceRate:Pa,pageviews:Fa,pageviewsPerSession:Vt,percentNewSessions:qt};F.push($t)}var Gt=[];F.sort(function(a,t){return parseFloat(a.hour)-parseFloat(t.hour)});for(var P=0;P<F.length;P++)Gt.push({date:F[P].hour,total:F[P]});a.charts[d].chartType="audienceBehaviourbyDay",a.charts[d].chartData=Gt}break;case"socialContributionToSiteTraffic":if("object"==typeof a.charts[d].chartData[0].total){var C;for(ea in a.charts[d].metricDetails.objectTypes)a.charts[d].metricDetails.objectTypes[ea].objectTypeId==a.charts[d].chartObjectTypeId&&(C=a.charts[d].metricDetails.objectTypes[ea].meta.endpoint,a.charts[d].metricDetails.objectTypes[ea].meta.endpoint=void 0!=a.charts[d].metricDetails.objectTypes[ea].meta.endpointDisplay?a.charts[d].metricDetails.objectTypes[ea].meta.endpointDisplay:a.charts[d].metricDetails.objectTypes[ea].meta.endpoint);var F=[];if(0!=C.length)for(sr in C){var A=C[sr],S=[];for(G in a.charts[d].chartData){var O,E=0;if(null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length))for(var M in a.charts[d].chartData[G].total)if(M.search("/")>-1){O=M.split("/");for(var j in O)O[j]==A&&(E+=parseFloat(a.charts[d].chartData[G].total[M]))}else M==A&&(E=a.charts[d].chartData[G].total[A]);S.push({x:moment(a.charts[d].chartData[G].date),y:E})}F.push(S)}else{var S=[];for(G in a.charts[d].chartData){var z,O,E=0,Y=a.charts[d].chartData[G].total;if(null!=a.charts[d].chartData[G].total&&0!=Object.keys(a.charts[d].chartData[G].total).length){for(var M in a.charts[d].chartData[G].total){if(M.search("/")>-1){O=M.split("/");for(var j in O)E+=parseFloat(a.charts[d].chartData[G].total[M]),z=M}else E=a.charts[d].chartData[G].total[A];z=M}S.push({x:z,y:E})}}F.push(S)}a.charts[d].chartData=S,a.charts[d].metricCode=a.charts[d].metricDetails.code,a.charts[d].metricName=a.charts[d].metricDetails.name}else{var S=[];for(var G in a.charts[d].chartData)S.push({x:moment(a.charts[d].chartData[G].date),y:null!=a.charts[d].chartData[G].total?a.charts[d].chartData[G].total:0});a.charts[d].chartData=S,a.charts[d].metricCode=a.charts[d].metricDetails.code,a.charts[d].metricName=a.charts[d].metricDetails.name}break;case"percentageArea":for(var y=0;y<a.charts[d].chartData.length;y++)if("object"==typeof a.charts[d].chartData[y].total){var C;for(ea in a.charts[d].metricDetails.objectTypes)a.charts[d].metricDetails.objectTypes[ea].objectTypeId==a.charts[d].chartObjectTypeId&&(C=a.charts[d].metricDetails.objectTypes[ea].meta.endpoint,a.charts[d].metricDetails.objectTypes[ea].meta.endpoint=void 0!=a.charts[d].metricDetails.objectTypes[ea].meta.endpointDisplay?a.charts[d].metricDetails.objectTypes[ea].meta.endpointDisplay:a.charts[d].metricDetails.objectTypes[ea].meta.endpoint);var F=[];if(0!=C.length)for(sr in C){var A=C[sr],S=[];for(G in a.charts[d].chartData){var O,E=0;if(null!=a.charts[d].chartData[G].total&&Object.keys(0!=a.charts[d].chartData[G].total.length))for(var M in a.charts[d].chartData[G].total)if(M.search("/")>-1){O=M.split("/");for(var j in O)O[j]==A&&(E+=parseFloat(a.charts[d].chartData[G].total[M]))}else M==A&&(E=a.charts[d].chartData[G].total[M]);S.push({x:moment(a.charts[d].chartData[G].date),y:E})}F.push(S)}else{var S=[];for(G in a.charts[d].chartData){var z,O,E=[],Y=a.charts[d].chartData[G].total;if(null!=a.charts[d].chartData[G].total&&0!=a.charts[d].chartData[G].total&&0!=Object.keys(a.charts[d].chartData[G].total).length){for(var M in a.charts[d].chartData[G].total){if(M.search("/")>-1){O=M.split("/");for(var j in O)E=a.charts[d].chartData[G].total[M],z=M}else E=a.charts[d].chartData[G].total[M];z=moment(a.charts[d].chartData[G].date)}S.push({x:z,y:E})}}F.push(S)}a.charts[d].chartData=S,a.charts[d].metricCode=a.charts[d].metricDetails.code,a.charts[d].metricName=a.charts[d].metricDetails.name}break;case"stackbar":if("object"==typeof a.charts[d].chartData[0].total){for(var aa=[{"(none)":0,organic:0,paid:0,others:0,social:0,ppc:0,referral:0}],P=0;P<a.charts[d].chartData.length;P++)for(H in a.charts[d].chartData[P].total){var Ut=H.split("/");"(none)"!=Ut[0]&&"organic"!=Ut[0]&&"ppc"!=Ut[0]&&"social"!=Ut[0]&&"referral"!=Ut[0]?aa[0].others+=parseFloat(a.charts[d].chartData[P].total[H]):"referral"===Ut[0]&&"undefined"!=Ut[1]&&"Yes"===Ut[1]?aa[0].social+=parseFloat(a.charts[d].chartData[P].total[H]):aa[0][Ut[0]]+=parseFloat(a.charts[d].chartData[P].total[H])}var it=[];it.push({date:a.charts[d].chartName,total:aa})}a.charts[d].chartData=it;break;case"gaUsers":if("undefined"!=typeof a.charts[d].chartData[0]){var Jt={};if("string"!=typeof a.charts[d].chartData)for(var y=0;y<a.charts[d].chartData.length;y++){var R=a.charts[d].chartData[y][0];Jt[R]=a.charts[d].chartData[y][1]}a.charts[d].chartData=Jt}break;case"youtubeVideosOverview":for(var Xt=[],R=0;R<a.charts[d].chartData.length;R++)if("undefined"!=typeof a.charts[d].chartData[R]&&"object"==typeof a.charts[d].chartData[R]){var ot=0,oa=0,ia=0,Ta=0,Kt={name:a.charts[d].chartData[R].title,views:a.charts[d].chartData[R].viewCount,comments:a.charts[d].chartData[R].commentCount,likes:a.charts[d].chartData[R].likeCount,dislikes:a.charts[d].chartData[R].dislikeCount,shares:a.charts[d].chartData[R].favoriteCount};Xt.push(Kt)}a.charts[d].chartData=Xt;break;case"twitterEngagements":switch(String(a.charts[d].chartSubType)){case"activityByDayOfTheWeek":if("undefined"!=typeof a.charts[d].chartData[0]){for(var I=[],P=0;P<a.charts[d].chartData.length;P++)"object"==typeof a.charts[d].chartData[P].total&&(a.charts[d].chartData[P].total.created_at=new Date(a.charts[d].chartData[P].total.created_at).getDay(),I.push(a.charts[d].chartData[P].total));var W=_.groupBy(I,"created_at"),F=[];for(var R in W){for(var ia=0,Zt=0,ya=0,Qt=R,y=0;y<W[R].length;y++)ia+=parseFloat(W[R][y].favorite_count),Zt+=parseFloat(W[R][y].retweet_count);ya=ia+Zt;var ae=y,Na={day:Qt,tweets:ae,engagement:ya};F.push(Na)}F.sort(function(a,t){return parseFloat(a.day)-parseFloat(t.day)});for(var R in F)"0"===F[R].day&&(F[R].day="Sunday"),"1"===F[R].day&&(F[R].day="Monday"),"2"===F[R].day&&(F[R].day="Tuesday"),"3"===F[R].day&&(F[R].day="Wednesday"),"4"===F[R].day&&(F[R].day="Thursday"),"5"===F[R].day&&(F[R].day="Friday"),"6"===F[R].day&&(F[R].day="Saturday");a.charts[d].chartData=F}break;case"activityByTimeOfTheDay":var te=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if("undefined"!=typeof a.charts[d].chartData[0]){for(var I=[],P=0;P<a.charts[d].chartData.length;P++)if("object"==typeof a.charts[d].chartData[P].total){var Ma=a.charts[d].chartData[P].total.created_at;a.charts[d].chartData[P].total.day=te[new Date(Ma).getDay()],I.push(a.charts[d].chartData[P].total)}var W=_.groupBy(I,"day"),F=[];for(var R in W){for(var Qt=R,ee=[],y=0;y<W[R].length;y++)ee.push({time:new Date(W[R][y].created_at).getHours(),likes:W[R][y].favorite_count,reTweets:W[R][y].retweet_count});var re=_.groupBy(ee,"time");for(var aa in re){for(var ia=0,Zt=0,ya=0,se=aa,q=0;q<re[aa].length;q++)ia+=parseFloat(re[aa][q].likes),Zt+=parseFloat(re[aa][q].reTweets);ya=ia+Zt;var Na={day:Qt,time:se,engagement:ya};F.push(Na)}}a.charts[d].chartData=F}break;case"engagementByUsersTalkedAbout":for(var F=[],ie=[],R=0;R<a.charts[d].chartData.length;R++)if("undefined"!=typeof a.charts[d].chartData[R]&&"object"==typeof a.charts[d].chartData[R].total){var ia=0,Zt=0,ya=0,oe=[],Qt=R;ia=parseFloat(a.charts[d].chartData[R].total.favorite_count),Zt=parseFloat(a.charts[d].chartData[R].total.retweet_count),ya=ia+Zt;for(var ne=void 0!=a.charts[d].chartData[R].total.entities&&void 0!=a.charts[d].chartData[R].total.entities?a.charts[d].chartData[R].total.entities.user_mentions.length:0,ce=void 0!=a.charts[d].chartData[R].total.entities&&void 0!=a.charts[d].chartData[R].total.entities?a.charts[d].chartData[R].total.entities.user_mentions:0,he=0;he<ne;he++){var Kt={tweet:a.charts[d].chartData[R].total.text,engagement:ya,userMentionedScreenName:ce[he].screen_name,userMentionedName:ce[he].name,url:void 0!=a.charts[d].chartData[R].total.media?a.charts[d].chartData[R].total.media[0].expanded_url:"https://twitter.com/"+ce[he].screen_name};oe.push(Kt)}for(var P=0;P<oe.length;P++)ie.push(oe[P])}var ka=[],Gt=_.groupBy(ie,"userMentionedScreenName");for(var H in Gt){for(var ya=0,le=0;le<Gt[H].length;le++)ya+=Gt[H][le].engagement;ka.push({userMentionedScreenName:H,engagement:ya})}ka.sort(function(a,t){return parseFloat(t.engagement)-parseFloat(a.engagement)}),a.charts[d].chartData=ka;break;case"topLinks":if("undefined"!=typeof a.charts[d].chartData[0]){var ia="favorite_count",Da="retweet_count",pe=[];if("object"==typeof a.charts[d].chartData[0].total)for(var y=0;y<a.charts[d].chartData.length;y++)if("undefined"!=typeof a.charts[d].chartData[y].total.entities)for(var P=0;P<a.charts[d].chartData[y].total.entities.urls.length;P++){var fa=a.charts[d].chartData[y].total[ia],Zt=a.charts[d].chartData[y].total[Da],ya=fa+Zt,la={url:a.charts[d].chartData[y].total.entities.urls[P].url,displayurl:a.charts[d].chartData[y].total.entities.urls[P].expanded_url,engagement:ya};pe.push(la)}var W=_.groupBy(pe,"displayurl"),ka=[];for(var H in W){for(var ya=0,le=0;le<W[H].length;le++)ya+=W[H][le].engagement;ka.push({url:H,engagement:ya})}ka.sort(function(a,t){return parseFloat(t.engagement)-parseFloat(a.engagement)}),a.charts[d].chartData=ka}break;case"instagramActivityByDayOfTheWeek":if("undefined"!=typeof a.charts[d].chartData[0]){for(var I=[],P=0;P<a.charts[d].chartData.length;P++)"object"==typeof a.charts[d].chartData[P].total&&(a.charts[d].chartData[P].total.created_time=moment.unix(a.charts[d].chartData[P].total.created_time).format("YYYY/MMM/DD"),a.charts[d].chartData[P].total.created_time=new Date(a.charts[d].chartData[P].total.created_time).getDay(),I.push(a.charts[d].chartData[P].total));var W=_.groupBy(I,"created_time"),F=[];for(var R in W){for(var ia=0,oa=0,ya=0,Qt=R,y=0;y<W[R].length;y++)ia+=parseFloat(W[R][y].likes.count),oa+=parseFloat(W[R][y].comments.count);ya=ia+oa;var ue=y,Na={day:Qt,tweets:ue,engagement:ya};F.push(Na)}F.sort(function(a,t){return parseFloat(a.day)-parseFloat(t.day)});for(var R in F)"0"===F[R].day&&(F[R].day="Sunday"),"1"===F[R].day&&(F[R].day="Monday"),"2"===F[R].day&&(F[R].day="Tuesday"),"3"===F[R].day&&(F[R].day="Wednesday"),"4"===F[R].day&&(F[R].day="Thursday"),"5"===F[R].day&&(F[R].day="Friday"),"6"===F[R].day&&(F[R].day="Saturday");a.charts[d].chartData=F}break;case"instagramActivityByTimeOfTheDay":if("undefined"!=typeof a.charts[d].chartData[0]){for(var I=[],P=0;P<a.charts[d].chartData.length;P++)if("object"==typeof a.charts[d].chartData[P].total){var Ma=a.charts[d].chartData[P].total.created_time;a.charts[d].chartData[P].total.day=moment.unix(Ma).format("dddd"),I.push(a.charts[d].chartData[P].total)}var W=_.groupBy(I,"day"),F=[];for(var R in W){for(var Qt=R,ee=[],y=0;y<W[R].length;y++){var V=moment.unix(W[R][y].created_time);ee.push({time:new Date(V).getHours(),likes:W[R][y].likes.count,comments:W[R][y].comments.count})}var re=_.groupBy(ee,"time");for(var aa in re){for(var ia=0,oa=0,ya=0,se=aa,q=0;q<re[aa].length;q++)ia+=parseFloat(re[aa][q].likes),oa+=parseFloat(re[aa][q].comments);ya=ia+oa;var Na={day:Qt,time:se,engagement:ya};F.push(Na)}}a.charts[d].chartData=F}break;case"commentsAndLikes":if("undefined"!=typeof a.charts[d].chartData[0]){for(var F=[],P=0;P<a.charts[d].chartData.length;P++)"object"==typeof a.charts[d].chartData[P].total&&F.push({x:moment(a.charts[d].chartData[P].date).format("DD-MMM-YYYY"),y:parseFloat(a.charts[d].chartData[P].total.likes.count)+parseFloat(a.charts[d].chartData[P].total.comments.count),link:a.charts[d].chartData[P].total.link});a.charts[d].chartData=F}break;case"hashTag":if("undefined"!=typeof a.charts[d].chartData[0]){var ia="favorite_count",Da="retweet_count",pe=[];if("object"==typeof a.charts[d].chartData[0].total)for(var y=0;y<a.charts[d].chartData.length;y++)if("undefined"!=typeof a.charts[d].chartData[y].total.entities)for(var P=0;P<a.charts[d].chartData[y].total.entities.hashtags.length;P++){var fa=a.charts[d].chartData[y].total[ia],Zt=a.charts[d].chartData[y].total[Da],ya=fa+Zt,la={hashTag:a.charts[d].chartData[y].total.entities.hashtags[P].text,engagement:ya};pe.push(la)}var W=_.groupBy(pe,"hashTag"),ka=[];for(var H in W){for(var ya=0,le=0;le<W[H].length;le++)ya+=W[H][le].engagement;ka.push({text:H,engagement:ya})}ka.sort(function(a,t){return parseFloat(t.engagement)-parseFloat(a.engagement)}),a.charts[d].chartData=ka}}break;case"campaignOverview":if("undefined"!=a.charts[d].chartData[0]){F=[];for(var de=[],P=0;P<a.charts[d].chartData.length;P++)for(var H in a.charts[d].chartData[P].total)de.push(a.charts[d].chartData[P].total[H]);var fe=_.groupBy(de,"Campaign ID");for(var R in fe){for(var me,ye=R,ge="Campaign",ve="Campaign state",De=0,be=0,we=0,Te="Currency",ke="Start date",xe="End date",Ce=0,Ne="Budget",y=0;y<fe[R].length;y++)we+=parseFloat(fe[R][y].Cost),Te=fe[R][y][Te],Ce+=parseFloat(fe[R][y].Impressions),me=fe[R][y]["Unique cookies"],De+=parseFloat(fe[R][y].Clicks),be+=parseFloat(fe[R][y].Conversions);if(0===we)var we=we;else var we=(we/1e6).toFixed(2);if(0===we)var Fe=we;else var Fe=(we/Ce*1e3).toFixed(2);if(0===De)var Ae=De;else var Ae=(De/Ce*100).toFixed(2);if(0===we)var Se=we;else var Se=(we/De).toFixed(2);if(0===we)var Oe=we;else var Oe=(we/be*100).toFixed(2);var Ee={Id:ye,Name:fe[R][0][ge],status:fe[R][0][ve],Currency:fe[R][0].Currency,startDate:fe[R][0][ke],endDate:fe[R][0][xe],Budget:fe[R][0][Ne]/1e6,Impressions:Ce,CPM:"Infinity"===Fe?0:Fe,CTR:"Infinity"===Ae?0:Ae,CPC:"Infinity"===Se?0:Se,CostPerConv:"Infinity"===Oe?0:Oe,Spent:we,Conversions:be,Clicks:De,ImpressionReachValue:me};F.push(Ee)}}a.charts[d].chartData=F;break;case"adgroupOverview":if("undefined"!=a.charts[d].chartData[0]){F=[];for(var Me=[],P=0;P<a.charts[d].chartData.length;P++)for(var H in a.charts[d].chartData[P].total)Me.push(a.charts[d].chartData[P].total[H]);var fe=_.groupBy(Me,"Ad group ID");for(var R in fe){for(var je=R,Ie="Ad group",ve="Ad group state",De=0,be=0,we=0,Te="Currency",Pe=0,Ce=0,y=0;y<fe[R].length;y++)we+=parseFloat(fe[R][y].Cost),Te=fe[R][y][Te],Ce+=parseFloat(fe[R][y].Impressions),Pe+=parseFloat(fe[R][y].Totalconvvalue),De+=parseFloat(fe[R][y].Clicks),be+=parseFloat(fe[R][y].Conversions);if(0===we)var we=we;else var we=(we/1e6).toFixed(2);if(0===we)var Fe=we;else var Fe=(we/Ce*1e3).toFixed(2);if(0===De)var Ae=De;else var Ae=(De/Ce*100).toFixed(2);if(0===we)var Se=we;else var Se=(we/De).toFixed(2);if(0===we)var Oe=we;else var Oe=(we/be*100).toFixed(2);var Ee={Id:je,Name:fe[R][0][Ie],status:fe[R][0][ve],Currency:fe[R][0].Currency,Impressions:Ce,CPM:"Infinity"===Fe?0:Fe,CTR:"Infinity"===Ae?0:Ae,CPC:"Infinity"===Se?0:Se,CostPerConv:"Infinity"===Oe?0:Oe,Spent:we,Conversions:be,Totalconvvalue:Pe,Clicks:De,CPMCBid:" --"===fe[R][0].MaxCPM?0:parseFloat(fe[R][0].MaxCPM)/1e6,CPCBid:" --"===fe[R][0].MaxCPC?0:parseFloat(fe[R][0].MaxCPC)/1e6,CPVBid:" --"===fe[R][0].MaxCPV?0:parseFloat(fe[R][0].MaxCPV)/1e6};F.push(Ee)}}a.charts[d].chartData=F;break;case"fbAdsAdgroupOverview":if("undefined"!=a.charts[d].chartData[0]){F=[];for(var Me=[],P=0;P<a.charts[d].chartData.length;P++)for(var H in a.charts[d].chartData[P].total)Me.push(a.charts[d].chartData[P].total[H]);var fe=_.groupBy(Me,"adset_id");for(var R in fe){for(var je=R,Ie="adset_name",ve="status",He="start_time",We="stop_time",De=0,we=0,Re="objective",Z=0,Ce=0,be=0,y=0;y<fe[R].length;y++)we+=parseFloat(fe[R][y].spend),Z+=parseFloat(fe[R][y].reach),Ce+=parseFloat(fe[R][y].impressions),De+=parseFloat(fe[R][y].clicks),be+=s(fe[R][y].actions);if(0===we)var Fe=we;else var Fe=(we/Ce*1e3).toFixed(2);if(0===De)var Ae=De;else var Ae=(De/Ce*100).toFixed(2);if(0===we)var Se=we;else var Se=(we/De).toFixed(2);if(0===we)var Oe=we;else var Oe=(we/be*100).toFixed(2);var Ee={Id:je,Name:fe[R][0][Ie],Objective:fe[R][0][Re],status:fe[R][0][ve],reach:Z,Impressions:Ce,CPM:"Infinity"===Fe?0:Fe,CTR:"Infinity"===Ae?0:Ae,CPC:"Infinity"===Se?0:Se,CostPerConv:"Infinity"===Oe?0:Oe,Spent:we,Conversions:be,Clicks:De,StartDate:fe[R][0][He],EndDate:fe[R][0][We]};F.push(Ee)}}a.charts[d].chartData=F;break;case"adOverview":if("undefined"!=a.charts[d].chartData[0]){F=[];for(var Me=[],P=0;P<a.charts[d].chartData.length;P++)for(var H in a.charts[d].chartData[P].total)Me.push(a.charts[d].chartData[P].total[H]);var Be=_.groupBy(Me,"Ad ID");for(var R in Be){for(var _e=R,Le="Business Name",ze="Ad type",De=0,be=0,we=0,Pe=0,Te="Currency",Ce=0,y=0;y<Be[R].length;y++)we+=parseFloat(Be[R][y].Cost),Te=Be[R][y][Te],Ce+=parseFloat(Be[R][y].Impressions),Pe+=parseFloat(Be[R][y].Totalconvvalue),De+=parseFloat(Be[R][y].Clicks),be+=parseFloat(Be[R][y].Conversions);if(0===we)var we=we;else var we=(we/1e6).toFixed(2);if(0===we)var Fe=we;else var Fe=(we/Ce*1e3).toFixed(2);if(0===De)var Ae=De;else var Ae=(De/Ce*100).toFixed(2);if(0===we)var Se=we;else var Se=(we/De).toFixed(2);if(0===be)var Ye=be;else var Ye=(be/De*100).toFixed(2);var Ee={Id:_e,Name:Be[R][0][Le],type:Be[R][0][ze],Currency:Be[R][0].Currency,clickType:Be[R][0]["Click type"],Impressions:Ce,CPM:"Infinity"===Fe?0:Fe,CTR:"Infinity"===Ae?0:Ae,CPC:"Infinity"===Se?0:Se,Totalconvvalue:Pe,Spent:we,Conversions:be,ConversionRate:"Infinity"===Ye?0:Ye,Clicks:De};F.push(Ee)}}a.charts[d].chartData=F;break;case"adwordsDemography":var pa=a.charts[d].chartSubType;if("undefined"!=a.charts[d].chartData[0]){F=[];for(var de=[],P=0;P<a.charts[d].chartData.length;P++)for(var H in a.charts[d].chartData[P].total)de.push(a.charts[d].chartData[P].total[H]);if("pieAge"===pa||"tableAge"===pa)var fe=_.groupBy(de,"Age Range");else if("pieGender"===pa||"tableGender"===pa)var fe=_.groupBy(de,"Gender");else if("pieDevice"===pa||"tableDevice"===pa)var fe=_.groupBy(de,"Device");for(var R in fe){for(var rt=R,De=0,be=0,we=0,Te="Currency",Ce=0,Pe=0,y=0;y<fe[R].length;y++)we+=parseFloat(fe[R][y].Cost),Ce+=parseFloat(fe[R][y].Impressions),De+=parseFloat(fe[R][y].Clicks),be+=parseFloat(fe[R][y].Conversions),Pe+=parseFloat(fe[R][y].Totalconvvalue);if(0===we)var we=we;else var we=(we/1e6).toFixed(2);if(0===we)var Fe=we;else var Fe=(we/Ce*1e3).toFixed(2);if(0===De)var Ae=De;else var Ae=(De/Ce*100).toFixed(2);if(0===we)var Se=we;else var Se=(we/De).toFixed(2);if(0===be)var $e=be;else var $e=(be/De*100).toFixed(2);var Ee={Currency:fe[R][0].Currency,age:rt,Impressions:Ce,CPM:"Infinity"===Fe?0:Fe,CTR:"Infinity"===Ae?0:Ae,CPC:"Infinity"===Se?0:Se,conversionRate:"Infinity"===$e?0:$e,Spent:we,Conversions:be,Clicks:De,Totalconvvalue:Pe};F.push(Ee)}}if("pieAge"===pa||"pieGender"===pa||"pieDevice"===pa){for(var Ve={},y=0;y<F.length;y++){var qe=F[y].age;Ve[qe]=F[y].Impressions}F=Ve}a.charts[d].chartData=F;break;case"fbAdsCampaignOverview":if("undefined"!=a.charts[d].chartData[0]){F=[];for(var de=[],P=0;P<a.charts[d].chartData.length;P++)for(var H in a.charts[d].chartData[P].total)de.push(a.charts[d].chartData[P].total[H]);var fe=_.groupBy(de,"campaign_id");for(var R in fe){for(var me,ye=R,Ge="campaign_name",ve="status",ba=0,Ue=0,Je=0,Xe=0,Ke=0,Ze=0,Qe=0,Z=0,ar=0,ke="start_time",xe="stop_time",wa=0,y=0;y<fe[R].length;y++)wa+=parseFloat(fe[R][y].impressions),ba+=parseFloat(fe[R][y].clicks),Ue+=s(fe[R][y].actions),Xe+=o(fe[R][y].cost_per_action_type),Je+=i(fe[R][y].cost_per_unique_action_type),Ke+=parseFloat(fe[R][y].spend),Ze+=parseFloat(fe[R][0].app_store_clicks),Qe+=parseFloat(fe[R][0].frequency),ar+=parseFloat(fe[R][0].video_avg_percent_watched_actions),Z+=parseFloat(fe[R][0].reach);if(0===Xe)var Fe=Xe;else var Fe=(Xe/wa*1e3).toFixed(2);if(0===ba)var Ae=ba;else var Ae=(ba/wa*100).toFixed(2);if(0===Xe)var Se=Xe;else var Se=(Xe/ba).toFixed(2);if(0===Xe);else{(Xe/Ue*100).toFixed(2)}var Ka={Id:ye,Name:fe[R][0][Ge],Objective:fe[R][0].objective,status:fe[R][0][ve],reach:Z,Impressions:wa,cost:Xe.toFixed(2),CPM:"Infinity"===Fe?0:Fe,CTR:"Infinity"===Ae?0:Ae,CPC:"Infinity"===Se?0:Se,Actions:"Infinity"===Ue?0:Ue,Spent:Ke,Conversions:Ue,Clicks:ba,StartDate:fe[R][0][ke],EndDate:fe[R][0][xe],AppStoreClicks:Ze,CostPerUniqueActionByType:Je.toFixed(2),Frequency:Qe.toFixed(2),VideoAvgViewTime:isNaN(ar)?0:ar};F.push(Ka)}}a.charts[d].chartData=F;break;case"fbAdsAdOverview":if("undefined"!=a.charts[d].chartData[0]){F=[];for(var tr=[],P=0;P<a.charts[d].chartData.length;P++)for(var H in a.charts[d].chartData[P].total)tr.push(a.charts[d].chartData[P].total[H]);var er=_.groupBy(tr,"ad_id");for(var R in er){for(var ba=0,rr=0,Je=0,Xe=0,Ke=0,Ze=0,Qe=0,Z=0,ar=0,wa=0,y=0;y<er[R].length;y++)ba+=parseFloat(er[R][y].clicks),wa+=parseFloat(er[R][y].impressions),rr+=s(er[R][y].actions),Je+=i(er[R][y].cost_per_unique_action_type),Ke+=parseFloat(er[R][y].spend),Ze+=parseFloat(er[R][0].app_store_clicks),Qe+=parseFloat(er[R][0].frequency),Z+=parseFloat(er[R][0].reach);if(0===Xe)var Xe=Xe;else var Xe=(Xe/1e6).toFixed(2);if(0===Xe)var Fe=Xe;else var Fe=(Xe/wa*1e3).toFixed(2);if(0===ba)var Ae=ba;else var Ae=(ba/wa*100).toFixed(2);if(0===Xe)var Se=Xe;else var Se=(Xe/ba).toFixed(2);var Ka={Id:R,AdName:er[R][0].ad_name,AdSetName:er[R][0].adset_name,CampaignName:er[R][0].campaign_name,Objective:er[R][0].objective,Status:er[R][0].status,Reach:Z,Impressions:wa,CPM:"Infinity"===Fe?0:Fe,CTR:"Infinity"===Ae?0:Ae,Actions:"Infinity"===rr?0:rr,Spend:Xe,StartDate:er[R][0].start_time,EndDate:er[R][0].end_time,AppStoreClicks:Ze,CostPerUniqueActionByType:Je.toFixed(2),Frequency:Qe.toFixed(2)};F.push(Ka)}}a.charts[d].chartData=F}}for(var d in a.charts)if("undefined"!=typeof a.charts[d].chartData[0])if(a.charts[d].chartData[0].x)for(var G in a.charts[d].chartData)p+=parseFloat(a.charts[d].chartData[G].y),parseFloat(p)>0&&0!=parseFloat(p)&&++l;else for(var sr in a.charts[d].chartData)for(var G in a.charts[d].chartData[sr])"undefined"!=typeof a.charts[d].chartData[sr][G]&&(p+=parseFloat(a.charts[d].chartData[sr][G].y),Number(p)>0&&0!=Number(p)&&++l);for(var d in a.charts){var f=a.charts[d].chartType,pa=a.charts[d].chartSubType;if("line"==f||"bar"==f||"column"==f||"stackcolumn"==f||"area"==f||"pie"==f||"reachVsImpressions"==f||"engagedUsersReach"==f||"mozoverview"==f||"trafficSourcesBrkdwnLine"==f||"bounceRateArea"==f||"negativeBar"==f||"trafficSourcesBrkdwnPie"==f||"costPerThosuandImpressions"==f||"clickThroughRate"==f||"costPerConversion"==f||"ConversionRate"==f||"costPerClick"==f||"costPerActionType"==f&&void 0!=a.meta){if("undefined"!=typeof a.charts[d].chartData[0])if(a.charts[d].chartData[0].x){
var ir,or=0,nr=!1,cr=0,hr=0,lr=a.charts[d].chartData.length,pr=0,ur=0,dr=0,fr=0,mr=0,yr=0;if(a.charts[d].chartData.length>=14){for(var L=0,y=lr-1;y>=0;y--)0===L||L<7?("reachVsImpressions"==f||"engagedUsersReach"==f)&&a.charts[d].chartData[y].imp&&a.charts[d].chartData[y].rea?(dr+=parseFloat(a.charts[d].chartData[y].imp),fr+=parseFloat(a.charts[d].chartData[y].rea)):pr+=parseFloat(a.charts[d].chartData[y].y):L>=7&&L<14&&(("reachVsImpressions"==f||"engagedUsersReach"==f)&&a.charts[d].chartData[y].imp&&a.charts[d].chartData[y].rea?(mr+=parseFloat(a.charts[d].chartData[y].imp),yr+=parseFloat(a.charts[d].chartData[y].rea)):ur+=parseFloat(a.charts[d].chartData[y].y)),L++;"Total Impressions"!=a.charts[d].chartName&&"Engaged Users"!=a.charts[d].chartName||"reachVsImpressions"!=f&&"engagedUsersReach"!=f||(pr=isNaN(dr/fr)?0:dr/fr,ur=isNaN(mr/yr)?0:mr/yr),ir="WK"}else if("object"!=typeof a.charts[d].chartData[0].x){var gr=u(a.charts[d].chartData[0].x);if(gr){var vr=_.last(a.charts[d].chartData),Dr=moment(vr.x).subtract(1,"days").format("YYYY-DD-MM");pr="Total Impressions"!=a.charts[d].chartName&&"Engaged Users"!=a.charts[d].chartName||"reachVsImpressions"!=f&&"engagedUsersReach"!=f?parseFloat(vr.y):isNaN(parseFloat(vr.imp)/parseFloat(vr.rea))?0:parseFloat(vr.imp)/parseFloat(vr.rea);for(var y=lr-1;y>=0;y--){var br=moment(a.charts[d].chartData[y].x).format("YYYY-DD-MM");Dr===br&&(ur="Total Impressions"!=a.charts[d].chartName&&"Engaged Users"!=a.charts[d].chartName||"reachVsImpressions"!=f&&"engagedUsersReach"!=f?parseFloat(a.charts[d].chartData[y].y):isNaN(parseFloat(a.charts[d].chartData[y].imp)/parseFloat(a.charts[d].chartData[y].rea))?0:parseFloat(a.charts[d].chartData[y].imp)/parseFloat(a.charts[d].chartData[y].rea))}ir="Day"}}else{var vr=_.last(a.charts[d].chartData),Dr=moment(vr.x).subtract(1,"days").format("YYYY-DD-MM");pr=parseFloat(vr.y);for(var y=lr-1;y>=0;y--){var br=moment(a.charts[d].chartData[y].x).format("YYYY-DD-MM");Dr===br&&(ur=parseFloat(a.charts[d].chartData[y].y))}ir="Day"}var wr,Q,Tr;pr>ur?(wr="up",Tr=pr-ur,Q=ur>0?parseFloat(Tr/ur*100).toFixed(2):pr):pr<ur?(wr="down",Tr=ur-pr,Q=ur>0?parseFloat(Tr/ur*100).toFixed(2):0):(Tr=ur-pr,Q=0);var kr=0,xr=0;for(var G in a.charts[d].chartData)("reachVsImpressions"==f||"engagedUsersReach"==f)&&a.charts[d].chartData[G].imp&&a.charts[d].chartData[G].rea?(kr+=parseFloat(a.charts[d].chartData[G].imp),xr+=parseFloat(a.charts[d].chartData[G].rea)):(isNaN(a.charts[d].chartData[G].y)&&(a.charts[d].chartData[G].y=0),or+=parseFloat(a.charts[d].chartData[G].y)),parseFloat(a.charts[d].chartData[G].y)>0&&hr++;if("Total Impressions"!=a.charts[d].chartName&&"Engaged Users"!=a.charts[d].chartName||"reachVsImpressions"!=f&&"engagedUsersReach"!=f||(or=isNaN(kr/xr)?0:kr/xr*100),"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.summaryType)if("avg"==a.charts[d].metricDetails.objectTypes[0].meta.summaryType)or=0==hr&&0==or?0:parseFloat(or/hr).toFixed(2);else if("snapshot"==a.charts[d].metricDetails.objectTypes[0].meta.summaryType){var Cr="";for(var aa in a.charts[d].chartData)Cr<moment(a.charts[d].chartData[aa].x)&&(Cr=moment(a.charts[d].chartData[aa].x),or=a.charts[d].chartData[aa].y,0!=or&&(cr+=1));nr=cr>=1}if("bounceRateArea"==f){var Nr=0,v=0;for(var G in a.charts[d].chartData)Nr+=parseFloat(a.charts[d].chartData[G].bounces),v+=parseFloat(a.charts[d].chartData[G].sessions);or=Nr/v*100}if("costPerClick"==f||"costPerThosuandImpressions"==f||"clickThroughRate"==f||"ConversionRate"==f||"costPerConversion"==f){var T=0,k=0;for(var G in a.charts[d].chartData)T+=parseFloat(a.charts[d].chartData[G].dividend),k+=parseFloat(a.charts[d].chartData[G].divisor);or=0===T?T:"costPerThosuandImpressions"==f?T/k*1e3:"clickThroughRate"==f||"ConversionRate"==f||"costPerConversion"==f?"Infinity"===(T/k*100).toFixed(2)?0:(T/k*100).toFixed(2):T/k}if("line"==f||"bar"==f||"column"==f||"mozoverview"==f)"FacebookAds"==a.channelName&&"Cost Per Unique Action Type"==a.charts[d].metricDetails.name?c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,key:a.charts[d].chartName,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],summaryDisplay:parseFloat(or).toFixed(2)%Math.floor(parseFloat(or).toFixed(2))>0?parseFloat(or).toFixed(2):parseFloat(or).toFixed(2)>1?parseInt(or):parseFloat(or)>0?parseFloat(or).toFixed(2):parseInt(or),hasSnapshotData:nr}):("bar"==f||"column"==f)&&l<0&&0==or?c.push({type:"line",channelName:h[a.channelName],values:a.charts[d].chartData,key:a.charts[d].metricDetails.name,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}):c.push({subChartType:a.charts[d].subChartType,channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,key:"fbTopReferringDomain"===a.charts[d].chartSubType?void 0:a.charts[d].metricDetails.name,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,chartSubType:a.charts[d].chartSubType,hasSnapshotData:nr});else if("area"==f||"Reach Vs Impressions"==f||"EngagedUsersReach"==f||"negativeBar"==f)if("negativeBar"==f){var Fr=[];for(var Ar in a.charts[d].chartData)Fr.push({x:a.charts[d].chartData[Ar].x,y:-Math.abs(a.charts[d].chartData[Ar].y)});a.charts[d].chartType="area",c.push({channelName:h[a.channelName],type:"area",values:Fr,key:a.charts[d].metricDetails.name,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,area:!0,hasSnapshotData:nr})}else c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,key:a.charts[d].metricDetails.name,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr});else if("area"==f||"reachVsImpressions"==f||"engagedUsersReach"==f){var Sr=Math.round(100*or)/100;c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,key:"Total Impressions"==a.charts[d].metricDetails.name?"Impressions/Reach (%)":a.charts[d].metricDetails.name,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:"Total Impressions"==a.charts[d].metricDetails.name||"Engaged users/Reach (%)"==a.charts[d].metricDetails.name?Sr+"%":Sr,area:!0,hasSnapshotData:nr})}else"bounceRateArea"==f?(a.charts[d].chartType="area",c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,key:a.charts[d].metricDetails.name,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr})):"costPerClick"==f||"costPerThosuandImpressions"==f||"clickThroughRate"==f||"ConversionRate"==f||"costPerConversion"==f?(a.charts[d].chartType="area",c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,key:a.charts[d].metricDetails.name,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr})):"costPerActionType"==f?c.push({channelName:h[a.channelName],type:"line",values:a.charts[d].chartData,key:a.meta.replace("_"," "),color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}):"trafficSourcesBrkdwnLine"==f?c.push({type:"line",channelName:h[a.channelName],values:a.charts[d].chartData,key:a.charts[d].metricDetails.name,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}):"trafficSourcesBrkdwnPie"==f?c.push({channelName:h[a.channelName],name:a.charts[d].chartName,type:"pie",values:a.charts[d].chartData,key:a.charts[d].metricDetails.name,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}):"percentageArea"==f?c.push({channelName:h[a.channelName],type:a.charts[d].chartType,metricCode:a.charts[d].metricCode,metricName:a.charts[d].metricName,key:a.charts[d].metricName,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",values:a.charts[d].chartData,color:a.charts[d].chartColour,arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}):c.push({channelName:h[a.channelName],name:a.charts[d].chartName,type:a.charts[d].chartType,y:parseFloat(or),key:a.charts[d].metricDetails.name,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,period:ir,variance:Q,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr})}else for(var sr in a.charts[d].chartData){var ir,or=0,hr=0,lr=a.charts[d].chartData[sr].length,pr=0,ur=0;if(a.charts[d].chartData[sr].length>=14){for(var L=0,y=lr-1;y>=0;y--)0===L||L<7?pr+=parseFloat(a.charts[d].chartData[sr][y].y):L>=7&&L<14&&(ur+=parseFloat(a.charts[d].chartData[sr][y].y)),L++;ir="WK"}else if(a.charts[d].chartData[sr].length>0){var Or=a.charts[d].chartData[sr].length,vr=_.last(a.charts[d].chartData[sr]);if("string"!=typeof vr.x){var Dr=moment(vr.x).subtract(1,"days").format("YYYY-DD-MM");pr=parseFloat(vr.y)}else pr=parseFloat(a.charts[d].chartData[sr][Or-1].y);for(var y=lr-1;y>=0;y--)if("string"!=typeof vr.x){var br=moment(a.charts[d].chartData[sr][y].x).format("YYYY-DD-MM");Dr===br&&(ur=parseFloat(a.charts[d].chartData[sr][y].y))}else ur=parseFloat(a.charts[d].chartData[sr][Or-2].y);ir="Day"}var wr,Tr,Q;if(pr>ur)wr="up",Tr=pr-ur,Q=ur>0?parseFloat(Tr/ur*100).toFixed(2):pr;else if(pr<ur)wr="down",Tr=ur-pr,Q=ur>0?parseFloat(Tr/ur*100).toFixed(2):0;else var Tr=ur-pr,Q=0;for(var G in a.charts[d].chartData[sr])if(or+=parseFloat(a.charts[d].chartData[sr][G].y),parseFloat(0!=a.charts[d].chartData[sr][G].y)&&hr++,"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.summaryType)if("avg"==a.charts[d].metricDetails.objectTypes[0].meta.summaryType)or=0==hr&&0==or?0:parseFloat(or/hr).toFixed(2);else if("snapshot"==a.charts[d].metricDetails.objectTypes[0].meta.summaryType){var Cr="";_.findIndex(a.charts[d].chartData[sr].y,function(a){return 0!==a.date});for(var aa in a.charts[d].chartData[sr])Cr<moment(a.charts[d].chartData[sr][aa].x)&&(Cr=moment(a.charts[d].chartData[sr][aa].x),or=a.charts[d].chartData[sr][aa].y)}"line"==f||"bar"==f||"column"==f||"mozoverview"==f||"stackcolumn"==f?("bar"==f||"column"==f)&&l<0&&0==or?c.push({channelName:h[a.channelName],type:"line",values:a.charts[d].chartData[sr],key:a.charts[d].metricDetails.objectTypes[0].meta.endpoint,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}):c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData[sr],key:"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:a.charts[d].metricDetails.objectTypes[0].meta.endpoint[sr],unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[sr]:"",color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[sr]?a.charts[d].chartColour[sr]:"",arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}):"trafficSourcesBrkdwnLine"==f?c.push({channelName:h[a.channelName],type:"line",values:a.charts[d].chartData[sr],key:"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:a.charts[d].metricDetails.objectTypes[0].meta.endpoint[sr],unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[sr]:"",color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[sr]?a.charts[d].chartColour[sr]:"",arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}):"trafficSourcesBrkdwnPie"==f?c.push({channelName:h[a.channelName],name:a.charts[d].chartName,type:"pie",y:parseFloat(or),key:"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:a.charts[d].metricDetails.objectTypes[0].meta.endpoint[sr],unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[sr]:"",color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[sr]?a.charts[d].chartColour[sr]:"",arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}):"area"==f||"negativebar"==f?c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData[sr],key:"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:a.charts[d].metricDetails.objectTypes[0].meta.endpoint[sr],unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[sr]:"",color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[sr]?a.charts[d].chartColour[sr]:"",arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,area:!0,hasSnapshotData:nr}):"costPerActionType"==f?c.push({channelName:h[a.channelName],type:"line",values:a.charts[d].chartData,key:a.meta,color:a.charts[d].chartColour[0],arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}):c.push({channelName:h[a.channelName],name:a.charts[d].chartName,type:a.charts[d].chartType,y:parseFloat(or),key:"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?a.charts[d].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:a.charts[d].metricDetails.objectTypes[0].meta.endpoint[sr].replace(/\_/g," "),unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[sr]:"",color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[sr]?a.charts[d].chartColour[sr]:"",arrow:wr,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr})}}else if("tableAge"==pa||"tableGender"==pa||"tableDevice"==pa)c.push({type:"campaignOverViewbyAge",values:a.charts[d].chartData});else if("fbReachByCity"==f||"gaUsers"===f||"pieAge"==pa||"pieGender"==pa||"pieDevice"==pa){var Er=0;for(var Mr in a.charts[d].chartData)c.push({channelName:h[a.channelName],name:a.charts[d].chartName,type:"fbReachByCity",y:parseFloat(a.charts[d].chartData[Mr]),key:Mr,unit:void 0!=a.charts[d].metricDetails.objectTypes[0].meta.unit?a.charts[d].metricDetails.objectTypes[0].meta.unit[0]:"",color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[Er]?a.charts[d].chartColour[Er]:"",summaryDisplay:Math.round(100*a.charts[d].chartData[Mr])/100,hasSnapshotData:nr}),++Er}else if("costPerActionType"==f&&void 0==a.meta)c.push({type:"costPerActionType",values:a.charts[d].chartData});else switch(f){case"instagramPosts":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"stackbar":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"highEngagementTweets":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"highestEngagementLinkedIn":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"vimeoTopVideos":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"gaTopPagesByVisit":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"campaignOverview":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"adgroupOverview":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"fbAdsAdgroupOverview":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"adOverview":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"gaPageContentEfficiencyTable":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"gaPageTechnicalEfficiencyTable":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"audienceBehaviourbyDay":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData,color:a.charts[d].chartColour});break;case"socialContributionToSiteTraffic":c.push({type:a.charts[d].chartType,metricCode:a.charts[d].metricCode,metricName:a.charts[d].metricName,values:a.charts[d].chartData,color:a.charts[d].chartColour});break;case"pageTechnicalEfficiency":for(var Nr=0,jr=0,y=0;y<a.charts[d].chartData.length;y++)Nr+=Number(a.charts[d].chartData[y].bounceRate),jr+=Number(a.charts[d].chartData[y].PageLoadTime);var Ir=[{key:"Page LoadTime",value:jr,unit:"s"},{key:"Bounce Rate",value:Nr,unit:"%"}];c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,summary:Ir,key:a.charts[d].chartName,color:a.charts[d].chartColour});break;case"pageContentEfficiency":for(var Nr=0,Ha=0,ja=0,Fa=0,y=0;y<a.charts[d].chartData.length;y++)Nr+=Number(a.charts[d].chartData[y].bounceRate),Ha+=Number(a.charts[d].chartData[y].entranceRate),ja+=Number(a.charts[d].chartData[y].uniquePageviews),Fa+=Number(a.charts[d].chartData[y].pageviews);var Ir=[{key:"Unique Page views",value:ja},{key:"Page views",value:Fa,unit:""},{key:"Bounce Rate",value:Nr,unit:"%"},{key:"Entrance rate",value:Ha,unit:"%"}];c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,summary:Ir,key:a.charts[d].chartName,color:a.charts[d].chartColour});break;case"visitorAcquisitionEfficiency":for(var Ya=0,Va=0,$a=0,y=0;y<a.charts[d].chartData.length;y++)$a+=Number(a.charts[d].chartData[y].goalConversionRateAll),Va+=Number(a.charts[d].chartData[y].goalValuePerSession),Ya+=Number(a.charts[d].chartData[y].newUsers);var Ir=[{key:"New users",value:Ya},{key:"Per session goal value",value:Va,unit:""},{key:"Goal conversion rate",value:$a,unit:"%"}];c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,summary:Ir,key:a.charts[d].chartName,color:a.charts[d].chartColour});break;case"gaSocialMediaOverview":c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,key:a.charts[d].chartName,color:a.charts[d].chartColour});break;case"topReferringSites":if("Top referring sites(Table)"==String(a.charts[d].chartName))c.push({type:"topReferringSitesTable",values:a.charts[d].chartData});else{for(var Za=0,Qa=0,y=0;y<a.charts[d].chartData.length;y++)Za+=Number(a.charts[d].chartData[y].goalConversionRate),v+=Number(a.charts[d].chartData[y].sessions),Qa+=Number(a.charts[d].chartData[y].goalCompletions);var Ir=[{key:"Sessions",value:v},{key:"Goal Completions",value:Qa,unit:""},{key:"Goal conversion rate",value:Za,unit:"%"}];c.push({channelName:h[a.channelName],type:a.charts[d].chartType,values:a.charts[d].chartData,summary:Ir,key:a.charts[d].chartName,color:a.charts[d].chartColour})}break;case"fbReachByAge":c.push({type:"fbReachByAge",values:a.charts[d].chartData,channelName:h[a.channelName]});break;case"instagramEngagements":if("instagramPostTypes"===a.charts[d].chartSubType){var Er=0;for(var Mr in a.charts[d].chartData)c.push({channelName:h[a.channelName],name:a.charts[d].chartName,type:"pie",key:Mr,displaySummary:!1,y:parseFloat(a.charts[d].chartData[Mr]),color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[Er]?a.charts[d].chartColour[Er]:""}),++Er}else if("instagramPostEngagement"===a.charts[d].chartSubType){var Er=0;for(var Mr in a.charts[d].chartData)c.push({channelName:h[a.channelName],name:a.charts[d].chartName,type:"fbReachByCity",y:parseFloat(a.charts[d].chartData[Mr]),key:Mr,displaySummary:!1,color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[Er]?a.charts[d].chartColour[Er]:"",summaryDisplay:Math.round(100*a.charts[d].chartData[Mr])/100,hasSnapshotData:nr}),++Er}else if("instagramPostFrequency"===a.charts[d].chartSubType){var Pr=new Date(e.startDate),Hr=new Date(e.endDate),Wr=Math.abs(Hr.getTime()-Pr.getTime()),Rr=Math.ceil(Wr/864e5);c.push({channelName:h[a.channelName],key:"Post per day",type:"angularGauge",y:Math.round(a.charts[d].chartData/Rr*100)/100,displaySummary:!1,color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[Er]?a.charts[d].chartColour[Er]:"",summaryDisplay:Math.round(a.charts[d].chartData/Rr*100)/100,hasSnapshotData:nr})}break;case"fbReachByCountry":var Er=0;for(var Mr in a.charts[d].chartData)c.push({channelName:h[a.channelName],name:a.charts[d].chartName,type:"pie",y:parseFloat(a.charts[d].chartData[Mr]),key:Mr,color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[Er]?a.charts[d].chartColour[Er]:"",summaryDisplay:Math.round(100*a.charts[d].chartData[Mr])/100,hasSnapshotData:nr}),++Er;break;case"gaTopCountriesToSocialVisits":case"gaTopCitiesToSocialVisits":var Er=0;for(var Mr in a.charts[d].chartData)c.push({channelName:h[a.channelName],name:a.charts[d].chartName,type:"pie",y:parseFloat(a.charts[d].chartData[Mr]),key:Mr,color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[Er]?a.charts[d].chartColour[Er]:"",summaryDisplay:parseFloat(a.charts[d].chartData[Mr]).toFixed(2)%Math.floor(a.charts[d].chartData[Mr])>0?parseFloat(a.charts[d].chartData[Mr]).toFixed(2):parseInt(a.charts[d].chartData[Mr]),hasSnapshotData:nr}),++Er;break;case"pinterestEngagementRate":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"pinterestLeaderboard":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"instagramHashtagLeaderBoard":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"percentageArea":if("undefined"!=typeof a.charts[d].chartData[0].y){var Br=_.groupBy(a.charts[d].chartData,"y.socialNetwork"),_r=0;for(var R in Br){var ir,or=0,cr=0,nr=!1,hr=0,lr=Br[R].length,pr=0,ur=0;if(a.charts[d].chartData.length>=14){for(var L=0,y=lr-1;y>=0;y--)(0===L||L<7)&&"undefined"!=typeof Br[R][y].y?pr+=parseFloat(Br[R][y].y.total):L>=7&&L<14&&"undefined"!=typeof Br[R][y].y&&(ur+=parseFloat(Br[R][y].y.total)),L++;ir="WK"}else if(a.charts[d].chartData.length>0){var Or=Br[R].length,vr=_.last(Br[R]);if("string"!=typeof vr.x){var Dr=moment(vr.x).subtract(1,"days").format("YYYY-DD-MM");pr=parseFloat(vr.y)}else pr=parseFloat(Br[R][Or-1].y.total);for(var y=lr-1;y>=0;y--)if("string"!=typeof vr.x){var br=moment(Br[R][y].x).format("YYYY-DD-MM");Dr===br&&(ur=parseFloat(Br[R][y].y))}else ur=parseFloat(Br[R][Or-2].y.total);ir="Day"}var wr,Tr,Q;if(pr>ur)wr="up",Tr=pr-ur,Q=ur>0?parseFloat(Tr/ur*100).toFixed(2):pr;else if(pr<ur)wr="down",Tr=ur-pr,Q=ur>0?parseFloat(Tr/ur*100).toFixed(2):0;else var Tr=ur-pr,Q=0;for(var G in Br[R])if("undefined"!=typeof Br[R][G].y&&(or+=parseFloat(Br[R][G].y.total)),"undefined"!=typeof Br[R][G].y&&parseFloat(0!=Br[R][G].y.total)&&hr++,"undefined"!=typeof a.charts[d].metricDetails.objectTypes[0].meta.summaryType)if("avg"==a.charts[d].metricDetails.objectTypes[0].meta.summaryType)or=0==hr&&0==or?0:parseFloat(or/hr).toFixed(2);else if("snapshot"==a.charts[d].metricDetails.objectTypes[0].meta.summaryType){var Cr="";for(var aa in Br[sr])Cr<moment(Br[R][aa].x)&&(Cr=moment(Br[R][aa].x),or=Br[R][aa].y.total,0!=or&&(cr+=1));nr=cr>=1}c.push({channelName:h[a.channelName],type:a.charts[d].chartType,metricCode:a.charts[d].metricCode,metricName:a.charts[d].metricName,key:R,values:Br[R],color:"undefined"!=typeof a.charts[d].chartColour&&"undefined"!=typeof a.charts[d].chartColour[_r]?a.charts[d].chartColour[_r]:"",arrow:wr,totalChartLength:a.charts[d].chartData,variance:Q,period:ir,summaryDisplay:Math.round(100*or)/100,hasSnapshotData:nr}),_r++}}break;case"youtubeVideosOverview":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"twitterEngagements":"engagementByUsersTalkedAbout"===a.charts[d].chartSubType||"topLinks"===a.charts[d].chartSubType||"hashTag"===a.charts[d].chartSubType?c.push({type:a.charts[d].chartType,chartSubType:a.charts[d].chartSubType,values:a.charts[d].chartData}):c.push({channelName:h[a.channelName],type:a.charts[d].chartType,chartSubType:a.charts[d].chartSubType,values:a.charts[d].chartData,key:a.charts[d].chartName,color:a.charts[d].chartColour});break;case"fbAdsCampaignOverview":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData});break;case"fbAdsAdOverview":c.push({type:a.charts[d].chartType,values:a.charts[d].chartData})}}}return n.resolve(c),n.promise}function p(a,e,r){function s(a,t){var e;for(var r in N){e=!1;for(var s in t)N[r]==t[s]&&(e=!0);if(0==e)return N[r]}}function i(a,t){return a+t}function i(a,t){return a+t}function i(a,t){return a+t}var o=t.defer(),n=[];n.twitterEngagements=[],n.youtubeVideosOverview=[],n.lineCharts=[],n.barCharts=[],n.pieCharts=[],n.percentageAreaOptions=[],n.instagramPosts=[],n.highEngagementTweets=[],n.highestEngagementLinkedIn=[],n.pinterestEngagementRate=[],n.pinterestLeaderboard=[],n.gaTopPagesByVisit=[],n.angularGauge=[],n.multicharts=[],n.campaignOverViewbyAge=[],n.campaignOverview=[],n.adOverview=[],n.adgroupOverview=[],n.fbAdsAdgroupOverview=[],n.fbReachByAge=[],n.mozoverview=[],n.fbReachByCity=[],n.vimeoTopVideos=[],n.costPerActionType=[],n.topReferringSites=[],n.instagramHashtagLeaderBoard=[],n.gaPageContentEfficiencyTable=[],n.gaPageTechnicalEfficiencyTable=[],n.gaVisitorAcquisitionEfficiencyAnalysisTable=[],n.pageTechnicalEfficiency=[],n.pageContentEfficiency=[],n.visitorAcquisitionEfficiency=[],n.percentageArea=[],n.topReferringSites=[],n.topReferringSitesTable=[],n.gaSocialMediaOverview=[],n.stackbar=[],n.fbAdsCampaignOverview=[],n.fbAdsAdOverview=[];var c,h,l,p,m,y={lineDataOptions:{chart:{type:"lineChart",noData:"No data for chosen date range",margin:{top:20,right:25,bottom:30,left:35},x:function(a){return a.x},y:function(a){return parseFloat(a.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(a){return d3.time.format("%d/%m/%y")(new Date(a))},showMaxMin:!1},yAxis:{tickFormat:function(a){return d3.format("r")(a)},showMaxMin:!1},interpolate:"monotone",axisLabelDistance:-10,showLegend:!1,clipEdge:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},barDataOptions:{chart:{type:"multiBarChart",noData:"No data for chosen date range",margin:{top:20,right:25,bottom:30,left:35},x:function(a){return a.x},y:function(a){return parseFloat(a.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(a){return d3.time.format("%d/%m/%y")(new Date(a))},showMaxMin:!1},yAxis:{tickFormat:function(a){return d3.format("r")(a)},showMaxMin:!1},tooltip:{enabled:!1,headerEnabled:!0,headerFormatter:function(a){return d3.time.format("%d/%m/%y")(new Date(a))}},axisLabelDistance:-10,showLegend:!1,stacked:!0,showControls:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},pieDataOptions:{chart:{type:"pieChart",noData:"No data for chosen date range",margin:{top:0,right:15,bottom:15,left:15},x:function(a){return a.key},y:function(a){return a.y},showLabels:!1,showLegend:!1,labelsOutside:!1,tooltips:!0,labelThreshold:.01,labelSunbeamLayout:!0,legend:{rightAlign:!1,margin:{bottom:25}}}},percentageAreaOptions:{chart:{type:"area",noData:"No data for chosen date range",margin:{top:20,right:25,bottom:30,left:35},x:function(a){return a.x},y:function(a){return parseFloat(a.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(a){return d3.time.format("%d/%m/%y")(new Date(a))},showMaxMin:!1},yAxis:{tickFormat:function(a){return d3.format("r")(a)},showMaxMin:!1},interpolate:"monotone",axisLabelDistance:-10,showLegend:!1,clipEdge:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},instagramPosts:{chart:{type:"instagramPosts"}},campaignOverview:{chart:{type:"campaignOverview"}},adOverview:{chart:{type:"adOverview"}},adgroupOverview:{chart:{type:"adgroupOverview"}},fbAdsAdgroupOverview:{chart:{type:"fbAdsAdgroupOverview"}},highEngagementTweets:{chart:{type:"highEngagementTweets"}},mozoverview:{chart:{type:"mozoverview"}},highestEngagementLinkedIn:{chart:{type:"highestEngagementLinkedIn"}},vimeoTopVideos:{chart:{type:"vimeoTopVideos"}},campaignOverViewbyAge:{chart:{type:"campaignOverViewbyAge"}},gaTopPagesByVisit:{chart:{type:"gaTopPagesByVisit"}},gaPageContentEfficiencyTable:{chart:{type:"gaPageContentEfficiencyTable"}},gaPageTechnicalEfficiencyTable:{chart:{type:"gaPageTechnicalEfficiencyTable"}},gaVisitorAcquisitionEfficiencyAnalysisTable:{chart:{type:"gaVisitorAcquisitionEfficiencyAnalysisTable"}},topReferringSitesTable:{chart:{type:"topReferringSitesTable"}},visitorAcquisitionEfficiency:{chart:{type:"visitorAcquisitionEfficiency",margin:{top:20,right:30,bottom:30,left:35}}},engagementByUsersTalkedAbout:{chart:{type:"engagementByUsersTalkedAbout"}},youtubeVideosOverview:{chart:{type:"youtubeVideosOverview"}},pinterestEngagementRate:{chart:{type:"pinterestEngagementRate"}},pinterestLeaderboard:{chart:{type:"pinterestLeaderboard"}},costPerActionType:{chart:{type:"costPerActionType"}},fbAdsCampaignOverview:{chart:{type:"fbAdsCampaignOverview"}},fbAdsAdOverview:{chart:{type:"fbAdsAdOverview"}},emptyCharts:{chart:{type:"emptyCharts"}},multiDataOptions:{chart:{type:"multiChart",noData:"No data for chosen date range",margin:{top:20,right:30,bottom:30,left:35},x:function(a){return a.x},y:function(a){return parseFloat(a.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(a){return d3.time.format("%d/%m/%y")(new Date(a))},showMaxMin:!1},yAxis1:{tickFormat:function(a){return d3.format("r")(a)},showMaxMin:!1},yAxis2:{tickFormat:function(a){return d3.format("r")(a)},showMaxMin:!1},interpolate:"monotone",axisLabelDistance:-10,showLegend:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},instagramHashtagLeaderBoard:{chart:{type:"instagramHashtagLeaderBoard"}}},g=0,v=[],D=[{
W:1,H:1,N:0,r:1,c:1},{W:1,H:1,N:1,r:1,c:1},{W:1,H:1,N:2,r:2,c:1},{W:1,H:1,N:3,r:3,c:1},{W:1,H:1,N:4,r:4,c:1},{W:1,H:1,N:5,r:5,c:1},{W:1,H:1,N:6,r:6,c:1},{W:1,H:1,N:7,r:7,c:1},{W:1,H:1,N:8,r:8,c:1},{W:2,H:1,N:0,r:1,c:1},{W:2,H:1,N:1,r:1,c:1},{W:2,H:1,N:2,r:1,c:2},{W:2,H:1,N:3,r:2,c:1},{W:2,H:1,N:4,r:2,c:2},{W:2,H:1,N:5,r:2,c:3},{W:2,H:1,N:6,r:2,c:3},{W:2,H:1,N:7,r:3,c:3},{W:2,H:1,N:8,r:3,c:3},{W:3,H:1,N:0,r:1,c:1},{W:3,H:1,N:1,r:1,c:1},{W:3,H:1,N:2,r:1,c:2},{W:3,H:1,N:3,r:1,c:3},{W:3,H:1,N:4,r:2,c:2},{W:3,H:1,N:5,r:2,c:3},{W:3,H:1,N:6,r:2,c:3},{W:3,H:1,N:7,r:3,c:3},{W:3,H:1,N:8,r:3,c:3},{W:4,H:1,N:0,r:1,c:1},{W:4,H:1,N:1,r:1,c:1},{W:4,H:1,N:2,r:1,c:2},{W:4,H:1,N:3,r:1,c:3},{W:4,H:1,N:4,r:1,c:4},{W:4,H:1,N:5,r:2,c:3},{W:4,H:1,N:6,r:2,c:3},{W:4,H:1,N:7,r:3,c:3},{W:4,H:1,N:8,r:3,c:3},{W:5,H:1,N:0,r:1,c:1},{W:5,H:1,N:1,r:1,c:1},{W:5,H:1,N:2,r:1,c:2},{W:5,H:1,N:3,r:1,c:3},{W:5,H:1,N:4,r:1,c:4},{W:5,H:1,N:5,r:1,c:5},{W:5,H:1,N:6,r:2,c:3},{W:5,H:1,N:7,r:2,c:4},{W:5,H:1,N:8,r:2,c:4},{W:6,H:1,N:0,r:1,c:1},{W:6,H:1,N:1,r:1,c:1},{W:6,H:1,N:2,r:1,c:2},{W:6,H:1,N:3,r:1,c:3},{W:6,H:1,N:4,r:1,c:4},{W:6,H:1,N:5,r:1,c:5},{W:6,H:1,N:6,r:2,c:3},{W:6,H:1,N:7,r:2,c:4},{W:6,H:1,N:8,r:2,c:4},{W:1,H:2,N:0,r:1,c:1},{W:1,H:2,N:1,r:1,c:1},{W:1,H:2,N:2,r:2,c:1},{W:1,H:2,N:3,r:3,c:1},{W:1,H:2,N:4,r:4,c:1},{W:1,H:2,N:5,r:5,c:1},{W:1,H:2,N:6,r:6,c:1},{W:1,H:2,N:7,r:7,c:1},{W:1,H:2,N:8,r:8,c:1},{W:2,H:2,N:0,r:1,c:1},{W:2,H:2,N:1,r:1,c:1},{W:2,H:2,N:2,r:1,c:2},{W:2,H:2,N:3,r:2,c:2},{W:2,H:2,N:4,r:2,c:2},{W:2,H:2,N:5,r:3,c:2},{W:2,H:2,N:6,r:3,c:2},{W:2,H:2,N:7,r:4,c:2},{W:2,H:2,N:8,r:4,c:2},{W:3,H:2,N:0,r:1,c:1},{W:3,H:2,N:1,r:1,c:1},{W:3,H:2,N:2,r:1,c:2},{W:3,H:2,N:3,r:2,c:2},{W:3,H:2,N:4,r:2,c:2},{W:3,H:2,N:5,r:2,c:3},{W:3,H:2,N:6,r:2,c:3},{W:3,H:2,N:7,r:2,c:4},{W:3,H:2,N:8,r:2,c:4},{W:4,H:2,N:0,r:1,c:1},{W:4,H:2,N:1,r:1,c:1},{W:4,H:2,N:2,r:1,c:2},{W:4,H:2,N:3,r:1,c:3},{W:4,H:2,N:4,r:2,c:2},{W:4,H:2,N:5,r:2,c:3},{W:4,H:2,N:6,r:2,c:3},{W:4,H:2,N:7,r:2,c:4},{W:4,H:2,N:8,r:2,c:4},{W:5,H:2,N:0,r:1,c:1},{W:5,H:2,N:1,r:1,c:1},{W:5,H:2,N:2,r:1,c:2},{W:5,H:2,N:3,r:1,c:3},{W:5,H:2,N:4,r:2,c:2},{W:5,H:2,N:5,r:2,c:3},{W:5,H:2,N:6,r:2,c:3},{W:5,H:2,N:7,r:2,c:4},{W:5,H:2,N:8,r:2,c:4},{W:6,H:2,N:0,r:1,c:1},{W:6,H:2,N:1,r:1,c:1},{W:6,H:2,N:2,r:1,c:2},{W:6,H:2,N:3,r:1,c:3},{W:6,H:2,N:4,r:2,c:2},{W:6,H:2,N:5,r:2,c:3},{W:6,H:2,N:6,r:2,c:3},{W:6,H:2,N:7,r:2,c:4},{W:6,H:2,N:8,r:2,c:4},{W:1,H:3,N:0,r:1,c:1},{W:1,H:3,N:1,r:1,c:1},{W:1,H:3,N:2,r:2,c:1},{W:1,H:3,N:3,r:3,c:1},{W:1,H:3,N:4,r:4,c:1},{W:1,H:3,N:5,r:5,c:1},{W:1,H:3,N:6,r:6,c:1},{W:1,H:3,N:7,r:7,c:1},{W:1,H:3,N:8,r:8,c:1},{W:2,H:3,N:0,r:1,c:1},{W:2,H:3,N:1,r:1,c:1},{W:2,H:3,N:2,r:2,c:1},{W:2,H:3,N:3,r:3,c:1},{W:2,H:3,N:4,r:2,c:2},{W:2,H:3,N:5,r:3,c:2},{W:2,H:3,N:6,r:3,c:2},{W:2,H:3,N:7,r:4,c:2},{W:2,H:3,N:8,r:4,c:2},{W:3,H:3,N:0,r:1,c:1},{W:3,H:3,N:1,r:1,c:1},{W:3,H:3,N:2,r:1,c:2},{W:3,H:3,N:3,r:2,c:2},{W:3,H:3,N:4,r:2,c:2},{W:3,H:3,N:5,r:2,c:3},{W:3,H:3,N:6,r:2,c:3},{W:3,H:3,N:7,r:2,c:4},{W:3,H:3,N:8,r:2,c:4},{W:4,H:3,N:0,r:1,c:1},{W:4,H:3,N:1,r:1,c:1},{W:4,H:3,N:2,r:1,c:2},{W:4,H:3,N:3,r:1,c:3},{W:4,H:3,N:4,r:2,c:2},{W:4,H:3,N:5,r:2,c:3},{W:4,H:3,N:6,r:2,c:3},{W:4,H:3,N:7,r:2,c:4},{W:4,H:3,N:8,r:2,c:4},{W:5,H:3,N:0,r:1,c:1},{W:5,H:3,N:1,r:1,c:1},{W:5,H:3,N:2,r:1,c:2},{W:5,H:3,N:3,r:1,c:3},{W:5,H:3,N:4,r:2,c:2},{W:5,H:3,N:5,r:2,c:3},{W:5,H:3,N:6,r:2,c:3},{W:5,H:3,N:7,r:2,c:4},{W:5,H:3,N:8,r:2,c:4},{W:6,H:3,N:0,r:1,c:1},{W:6,H:3,N:1,r:1,c:1},{W:6,H:3,N:2,r:1,c:2},{W:6,H:3,N:3,r:1,c:3},{W:6,H:3,N:4,r:2,c:2},{W:6,H:3,N:5,r:2,c:3},{W:6,H:3,N:6,r:2,c:3},{W:6,H:3,N:7,r:2,c:4},{W:6,H:3,N:8,r:2,c:4}];if("customFusion"==a.widgetType)for(var b in e)if("costPerActionType"!=e[b].type||a.meta)switch(e[b].type){case"line":case"area":case"bar":case"column":case"reachVsImpressions":case"engagedUsersReach":n.lineCharts.push(e[b]);break;case"stackcolumn":n.barCharts.push(e[b]);break;case"pie":n.pieCharts.push(e[b]);break;case"instagramPosts":n.instagramPosts.push(e[b]);break;case"highEngagementTweets":n.highEngagementTweets.push(e[b]);break;case"highestEngagementLinkedIn":n.highestEngagementLinkedIn.push(e[b]);break;case"gaTopPagesByVisit":n.gaTopPagesByVisit.push(e[b]);break;case"campaignOverViewbyAge":n.campaignOverViewbyAge.push(e[b]);break;case"pageContentEfficiency":n.pageContentEfficiency.push(e[b]);break;case"pageTechnicalEfficiency":n.pageTechnicalEfficiency.push(e[b]);break;case"visitorAcquisitionEfficiency":n.visitorAcquisitionEfficiency.push(e[b]);break;case"gaPageContentEfficiencyTable":n.gaPageContentEfficiencyTable.push(e[b]);break;case"gaPageTechnicalEfficiencyTable":n.gaPageTechnicalEfficiencyTable.push(e[b]);break;case"topReferringSites":n.topReferringSites.push(e[b]);break;case"topReferringSitesTable":n.topReferringSitesTable.push(e[b]);break;case"gaSocialMediaOverview":n.gaSocialMediaOverview.push(e[b]);break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":n.gaVisitorAcquisitionEfficiencyAnalysisTable.push(e[b]);break;case"fbReachByCity":n.fbReachByCity.push(e[b]);break;case"fbReachByAge":n.fbReachByAge.push(e[b]);break;case"pinterestEngagementRate":n.pinterestEngagementRate.push(e[b]);break;case"pinterestLeaderboard":n.pinterestLeaderboard.push(e[b]);break;case"audienceBehaviourbyDay":case"socialContributionToSiteTraffic":n.multicharts.push(e[b]);break;case"vimeoTopVideos":n.vimeoTopVideos.push(e[b]);break;case"campaignOverview":n.campaignOverview.push(e[b]);break;case"adgroupOverview":n.adgroupOverview.push(e[b]);break;case"fbAdsAdgroupOverview":n.fbAdsAdgroupOverview.push(e[b]);break;case"adOverview":n.adOverview.push(e[b]);break;case"percentageArea":n.percentageArea.push(e[b]);break;case"mozoverview":for(var w=0;w<e[b].values.length;w++)e[b].values[w].x=moment(e[b].values[w].x).format("YYYY-DD-MM");n.mozoverview.push(e[b]);break;case"angularGauge":n.angularGauge.push(e[b]);break;case"stackbar":n.stackbar.push(e[b]);break;case"instagramHashtagLeaderBoard":n.instagramHashtagLeaderBoard.push(e[b]);break;case"twitterEngagements":n.twitterEngagements.push(e[b]);break;case"youtubeVideosOverview":n.youtubeVideosOverview.push(e[b]);break;case"fbAdsCampaignOverview":n.fbAdsCampaignOverview.push(e[b]);break;case"fbAdsAdOverview":n.fbAdsAdOverview.push(e[b])}else n.costPerActionType.push(e[b]);else for(var b in e)if("line"==e[b].type||"area"==e[b].type||"reachVsImpressions"==e[b].type||"engagedUsersReach"==e[b].type||"costPerActionType"==e[b].type&&void 0!=a.meta)n.lineCharts.push(e[b]);else if("costPerActionType"!=e[b].type||a.meta)switch(e[b].type){case"bar":case"column":case"stackcolumn":n.barCharts.push(e[b]);break;case"pie":n.pieCharts.push(e[b]);break;case"instagramPosts":n.instagramPosts.push(e[b]);break;case"highEngagementTweets":n.highEngagementTweets.push(e[b]);break;case"highestEngagementLinkedIn":n.highestEngagementLinkedIn.push(e[b]);break;case"gaTopPagesByVisit":n.gaTopPagesByVisit.push(e[b]);break;case"campaignOverViewbyAge":n.campaignOverViewbyAge.push(e[b]);break;case"pageContentEfficiency":n.pageContentEfficiency.push(e[b]);break;case"pageTechnicalEfficiency":n.pageTechnicalEfficiency.push(e[b]);break;case"visitorAcquisitionEfficiency":n.visitorAcquisitionEfficiency.push(e[b]);break;case"gaPageContentEfficiencyTable":n.gaPageContentEfficiencyTable.push(e[b]);break;case"gaPageTechnicalEfficiencyTable":n.gaPageTechnicalEfficiencyTable.push(e[b]);break;case"topReferringSites":n.topReferringSites.push(e[b]);break;case"topReferringSitesTable":n.topReferringSitesTable.push(e[b]);break;case"gaSocialMediaOverview":n.gaSocialMediaOverview.push(e[b]);break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":n.gaVisitorAcquisitionEfficiencyAnalysisTable.push(e[b]);break;case"fbReachByCity":n.fbReachByCity.push(e[b]);break;case"fbReachByAge":n.fbReachByAge.push(e[b]);break;case"pinterestEngagementRate":n.pinterestEngagementRate.push(e[b]);break;case"pinterestLeaderboard":n.pinterestLeaderboard.push(e[b]);break;case"audienceBehaviourbyDay":case"socialContributionToSiteTraffic":n.multicharts.push(e[b]);break;case"vimeoTopVideos":n.vimeoTopVideos.push(e[b]);break;case"campaignOverview":n.campaignOverview.push(e[b]);break;case"adgroupOverview":n.adgroupOverview.push(e[b]);break;case"fbAdsAdgroupOverview":n.fbAdsAdgroupOverview.push(e[b]);break;case"adOverview":n.adOverview.push(e[b]);break;case"percentageArea":n.percentageArea.push(e[b]);break;case"mozoverview":for(var w=0;w<e[b].values.length;w++)e[b].values[w].x=moment(e[b].values[w].x).format("YYYY-DD-MM");n.mozoverview.push(e[b]);break;case"angularGauge":n.angularGauge.push(e[b]);break;case"stackbar":n.stackbar.push(e[b]);break;case"instagramHashtagLeaderBoard":n.instagramHashtagLeaderBoard.push(e[b]);break;case"twitterEngagements":n.twitterEngagements.push(e[b]);break;case"youtubeVideosOverview":n.youtubeVideosOverview.push(e[b]);break;case"fbAdsCampaignOverview":n.fbAdsCampaignOverview.push(e[b]);break;case"fbAdsAdOverview":n.fbAdsAdOverview.push(e[b])}else n.costPerActionType.push(e[b]);var T=[],k={},x={},C={},N=["#EF5350","#EC407A","#9C27B0","#42A5F5","#26A69A","#FFCA28","#FF7043","#8D6E63"];if(1==n.lineCharts.length){for(var F=[],A=[],w=0;w<n.lineCharts.length;w++){for(var S=[],O=[],E=0;E<n.lineCharts[w].values.length;E++){S.push("string"==typeof n.lineCharts[w].values[E].x?n.lineCharts[w].values[E].x:n.lineCharts[w].values[E].x.format("DD-MMM-YYYY"));var M=String(n.lineCharts[w].values[E].y).indexOf(".")?parseFloat(n.lineCharts[w].values[E].y):parseInt(n.lineCharts[w].values[E].y);O.push(M)}A.push({name:"(none)"===n.lineCharts[w].key?"Direct":"fbTopReferringDomain"===n.lineCharts[0].chartSubType?"Top Referring Domain":n.lineCharts[w].key,data:O,tooltip:{valueSuffix:n.lineCharts[w].unit},color:n.lineCharts[w].color})}k={chart:{type:n.lineCharts[0].type,reflow:!0,zoomType:"x"},exporting:{enabled:!1},tooltip:{shared:!0},credits:{enabled:!1},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}if("string"!=typeof this.value||u(this.value)){var a=this.value.split("-");return a[1]+" "+a[0]}return this.value}},tickInterval:"fbTopReferringDomain"===n.lineCharts[0].chartSubType?0:7,min:0},yAxis:[{title:{text:null}}],title:{text:"",style:{display:"none"}},series:A},F.push(k),g++,v.push({options:y.lineDataOptions,data:n.lineCharts,api:{},chartOptions:k});var j=0;for(var b in n.lineCharts)for(Y in n.lineCharts[b].values)j+=parseFloat(n.lineCharts[b].values[Y].y);0==j&&(v[v.length-1].options.chart.yDomain=[0,10])}if(n.lineCharts.length>1){var I,F=[],A=[];for(var b in n.lineCharts){var S=[],O=[];I=n.lineCharts[b].type;for(var P in T)if(n.lineCharts[b].color==T[P]){var H=s(n.lineCharts[b].color,T);n.lineCharts[b].color=H}for(var E=0;E<n.lineCharts[b].values.length;E++)if("object"!=typeof n.lineCharts[b].values[E].x){var W=u(n.lineCharts[b].values[E].x);if(W){S.push(n.lineCharts[b].values[E].x.format("DD-MMM-YYYY"));var M=String(n.lineCharts[b].values[E].y).indexOf(".")?parseFloat(n.lineCharts[b].values[E].y):parseInt(n.lineCharts[b].values[E].y);O.push(M)}else{S.push(n.lineCharts[b].values[E].x);var M=String(n.lineCharts[b].values[E].y).indexOf(".")?parseFloat(n.lineCharts[b].values[E].y):parseInt(n.lineCharts[b].values[E].y);O.push(M)}}else{S.push(n.lineCharts[b].values[E].x.format("DD-MMM-YYYY"));var M=String(n.lineCharts[b].values[E].y).indexOf(".")?parseFloat(n.lineCharts[b].values[E].y):parseInt(n.lineCharts[b].values[E].y);O.push(M)}if("string"==typeof n.lineCharts[b].values[0].x){var R=_.findIndex(f,function(a){return a==n.lineCharts[b].values[0].x});if(R==-1)var B="string";else var B="dayOfWeek"}else if("number"==typeof n.lineCharts[b].values[0].x)var B="number";else var B="date";"reachVsImpressions"==I||"engagedUsersReach"==I?A.push({name:n.lineCharts[b].key,yAxis:"string"==typeof b?parseInt(b):b,tooltip:{valueSuffix:"Impressions/Reach (%)"===n.lineCharts[b].key||"Engaged users/Reach (%)"===n.lineCharts[b].key?"%":n.lineCharts[b].unit},xAxisData:S,xAxisType:B,data:O,type:"area",color:n.lineCharts[b].color}):A.push({name:"(none)"===n.lineCharts[b].key?"Direct":"fbTopReferringDomain"===n.lineCharts[b].chartSubType?"Top Referring Domain":n.lineCharts[b].key,tooltip:{valueSuffix:n.lineCharts[b].unit},xAxisData:S,xAxisType:B,data:O,type:n.lineCharts[b].type,color:n.lineCharts[b].color}),T.push(n.lineCharts[b].color)}if("object"!=typeof n.lineCharts[b].values[0].x){var W=u(n.lineCharts[b].values[0].x);k=W?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:A}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:S},title:{text:"",style:{display:"none"}},series:A}}else k="reachVsImpressions"==I||"engagedUsersReach"==I?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},yAxis:[{title:{text:"reachVsImpressions"==I?"Impressions/Reach (%)":"Engaged users/Reach (%)"}},{title:{text:"Total Reach"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:"fbTopReferringDomain"===n.lineCharts[0].chartSubType?0:7,min:0},title:{text:"",style:{display:"none"}},series:A};T=[];var L=[];for(var b in n.lineCharts){var z=0;for(var Y in n.lineCharts[b].values)z+=parseFloat(n.lineCharts[b].values[Y].y);L[b]={summaryTotal:z}}var $=0,V=0;for(P in L)$=parseInt(L[P].summaryTotal),0==$&&(V=1);var q=$/L.length;for(var b in n.lineCharts){var z=0;for(Y in n.lineCharts[b].values)z+=parseFloat(n.lineCharts[b].values[Y].y);z>q?n.lineCharts[b].yAxis=2:n.lineCharts[b].yAxis=1}var G=_.groupBy(A,"xAxisType");for(var U in G){g++;var J=[];if(G[U].length>1){for(var X=G[U][0].xAxisData,K=[],w=0;w<G[U].length;w++){var R=_.findIndex(n.lineCharts,function(a){return a.key==G[U][w].name&&void 0!=a.key});R!=-1&&K.push(n.lineCharts[R]),J.push({name:G[U][w].name,tooltip:G[U][w].tooltip,data:G[U][w].data,type:G[U][w].type,color:G[U][w].color})}if("object"!=typeof G[U][0].data[0]){var W=u(G[U][0].xAxisData[0]);k=W?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:X,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:J}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:X},title:{text:"",style:{display:"none"}},series:J}}else k="reachVsImpressions"==I||"engagedUsersReach"==I?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:X,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},yAxis:[{title:{text:"reachVsImpressions"==I?"Impressions/Reach (%)":"Engaged users/Reach (%)"}},{title:{text:"Total Reach"},opposite:!0}],title:{text:"",style:{display:"none"}},series:J}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:X,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:J};v.push({options:y.multiDataOptions,data:K,api:{},chartOptions:k})}else{var X=G[U][0].xAxisData,K=[],R=_.findIndex(n.lineCharts,function(a){return a.key==G[U][0].name&&void 0!=a.key});if(R!=-1&&K.push(n.lineCharts[R]),J.push({name:G[U][0].name,tooltip:G[U][0].tooltip,data:G[U][0].data,type:G[U][0].type,color:G[U][0].color}),"object"!=typeof G[U][0].data[0]){var W=u(G[U][0].xAxisData[0]);k=W?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:X,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:J}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:X},title:{text:"",style:{display:"none"}},series:J}}else k={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:X,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:J};v.push({options:y.multiDataOptions,data:K,api:{},chartOptions:k})}}1==V&&(v[v.length-1].options.chart.yDomain1=[0,10])}if(n.barCharts.length>0){var F=[],A=[];g++;for(var b in n.barCharts){var S=[],O=[];for(var P in T)if(n.barCharts[b].color==T[P]){var H=s(n.barCharts[b].color,T);n.barCharts[b].color=H}for(var E=0;E<n.barCharts[b].values.length;E++){var Z;"string"==typeof n.barCharts[b].values[E].x?(Z="string",S.push(n.barCharts[b].values[E].x)):(Z="date",S.push(n.barCharts[b].values[E].x.format("DD-MMM-YYYY")));var M=String(n.barCharts[b].values[E].y).indexOf(".")?parseFloat(n.barCharts[b].values[E].y):parseInt(n.barCharts[b].values[E].y);O.push(M)}A.push({name:"(none)"===n.barCharts[b].key?"Direct":n.barCharts[b].key,data:O,tooltip:{valueSuffix:n.barCharts[b].unit},color:n.barCharts[b].color}),T.push(n.barCharts[b].color)}"string"===Z?k={chart:{type:n.barCharts[b].type,reflow:!0,zoomType:"x"},credits:{enabled:!1},legend:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:S},tooltip:{formatter:function(){return this.x+":</br>"+this.y}},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],series:A}:"stackcolumn"===n.barCharts[b].type?(n.barCharts[b].type="column",k={chart:{type:"column",reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},plotOptions:{column:{stacking:"normal"}},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],series:A}):k={chart:{type:n.barCharts[b].type,reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0,valueSuffix:"Session Duration"==n.barCharts[b].key?"sec":""},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],series:A},T=[];var L=[];for(var b in n.barCharts){var z=0;for(var Y in n.barCharts[b].values)z+=parseFloat(n.barCharts[b].values[Y].y);L[b]={summaryTotal:z}}var $=0;for(P in L)$+=parseInt(L[P].summaryTotal);v.push({options:y.pieDataOptions,data:n.barCharts,api:{},chartOptions:k}),0==$&&(v[v.length-1].options.chart.yDomain=[0,10])}if(n.stackbar.length>0){var F=[],A=[];g++;for(keys in n.stackbar[b].values[0].total[0]){var O=[],S=[];for(var b in n.stackbar)if(S.push(n.stackbar[b].values[0].date),"organic"==keys){var Q=-Math.abs(n.stackbar[b].values[0].total[0][keys]);O.push(Q)}else O.push(n.stackbar[b].values[0].total[0][keys]);A.push({name:"(none)"===keys?"Direct":keys,data:O})}k={chart:{type:"bar",reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:[{categories:S,reversed:!1,labels:{step:1}},{opposite:!0,reversed:!1,categories:S,linkedTo:0,labels:{step:1}}],title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null},labels:{formatter:function(){return""}}}],plotOptions:{series:{stacking:"normal",pointPadding:0,groupPadding:0}},tooltip:{formatter:function(){return"<b>"+this.series.name+this.point.category+"</b><br/>visit: "+Highcharts.numberFormat(Math.abs(this.point.y),0)}},series:A},v.push({options:y.barDataOptions,data:n.stackbar,api:{},chartOptions:k})}if(n.multicharts.length>0){var F=[],S=[],A=[],aa=[];for(var b in n.multicharts){var ta=b;if("socialContributionToSiteTraffic"===n.multicharts[ta].type){for(var E=0;E<n.multicharts[ta].values.length;E++)S.push(n.multicharts[ta].values[E].x);for(var ea=[],ra=0;ra<n.multicharts[ta].values.length;ra++)ea.push(String(n.multicharts[ta].values[ra].y).indexOf(".")?parseFloat(n.multicharts[ta].values[ra].y):parseInt(multicharts[ta].values[ra].y));A.push({type:"sessions"==n.multicharts[ta].metricCode?"column":"line",name:n.multicharts[ta].metricName,data:ea,yAxis:("sessions"==n.multicharts[ta].metricCode,0),color:n.multicharts[ta].color[ta]});var sa=ea.reduce(i),ia={summaryDisplay:Math.round(100*sa)/100,key:void 0,showComparision:!1,variance:0,color:n.multicharts[ta].color[ta]};aa.push(ia);var oa=[{title:{text:"Total sessions"}},{title:{text:"Sessions from social sources"},opposite:!0}],na={type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0}}else{for(var oa=[{title:{text:null}},{title:{text:null},opposite:!0}],na={type:"datetime",categories:S},E=0;E<n.multicharts[b].values.length;E++)S.push(n.multicharts[b].values[E].date);var w=0;for(var U in n.multicharts[b].values[0].total){for(var ca=[],E=0;E<n.multicharts[b].values.length;E++){var Q=Math.round(100*n.multicharts[b].values[E].total[U])/100;ca.push(Q)}if("pageviews"==U){A.push({type:"column",name:"Page views",data:ca,yAxis:0,tooltip:{valueSuffix:""},color:n.multicharts[b].color[w]});var sa=ca.reduce(i),ia={summaryDisplay:Math.round(100*sa)/100,key:void 0,showComparision:!1,variance:0,color:n.multicharts[b].color[w]};aa.push(ia)}else if("total"!=U&&"sessions"!=U&&"hour"!=U&&"bounces"!=U){var ha,la;"pageviewsPerSession"==U?(ha="Pages / Session",la="pages"):"bounceRate"==U?(ha="Bounce rate",la="%"):"percentNewSessions"==U&&(ha="% New sessions",la="%"),A.push({type:"line",data:ca,name:ha,tooltip:{valueSuffix:la},yAxis:1,color:n.multicharts[b].color[w]});var sa=ca.reduce(i),ia={summaryDisplay:Math.round(100*sa)/100,key:void 0,showComparision:!1,variance:0,color:n.multicharts[b].color[w]};aa.push(ia)}w++}}}k={chart:{zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:na,title:{text:"",style:{display:"none"}},yAxis:oa,series:A},g++,v.push({options:y.multiDataOptions,data:aa,api:{},chartOptions:k}),0==$&&(v[v.length-1].options.chart.yDomain=[0,10])}if(n.percentageArea.length>0){g++;for(var F=[],S=[],A=[],aa=[],E=0;E<n.percentageArea[0].totalChartLength.length;E++)S.push(moment(n.percentageArea[0].totalChartLength[E].x).format("DD-MMM-YYYY"));var pa=0;for(var ta in n.percentageArea){var ua=_.groupBy(n.percentageArea[ta].values,"y.socialNetwork");for(var U in ua){for(var da=[],E=0;E<n.percentageArea[ta].totalChartLength.length;E++)da.push({y:0});for(var fa=0;fa<ua[U].length;fa++)for(var w=0;w<n.percentageArea[ta].totalChartLength.length;w++){var ma=moment(ua[U][fa].x).format("YYYY-DD-MM")==moment(n.percentageArea[ta].totalChartLength[w].x).format("YYYY-DD-MM");ma===!0&&"undefined"!=typeof ua[U][fa].y&&(da[w].y=parseInt(ua[U][fa].y.total))}A.push({type:"area",color:n.percentageArea[ta].color,name:U,data:da}),pa++}var ia={summaryDisplay:Math.round(100*sa)/100,key:n.percentageArea[ta].metricName,showComparision:!1,variance:0,color:n.percentageArea[ta].color[ta]};aa.push(ia)}var na={type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0};k={chart:{zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:na,title:{text:"",style:{display:"none"}},yAxis:{title:{text:"value"}},plotOptions:{area:{stacking:"normal",lineColor:"#ffffff",lineWidth:1,marker:{lineWidth:1,lineColor:"#ffffff"}}},series:A},v.push({options:y.percentageAreaOptions,data:n.percentageArea,api:{},chartOptions:k}),0==$&&(v[v.length-1].options.chart.yDomain=[0,10])}if(n.pieCharts.length>0){var F=[],A=[];g++;var S=[],O=[];for(var b in n.pieCharts){for(var P in T)if(n.pieCharts[b].color==T[P]){var H=s(n.pieCharts[b].color,T);n.pieCharts[b].color=H}T.push(n.pieCharts[b].color);var ya=String(n.pieCharts[b].y).indexOf(".")?parseFloat(n.pieCharts[b].y):parseInt(n.pieCharts[b].y),ha=n.pieCharts[b].key;O.push({y:ya,name:"(none)"===ha?"Direct":ha,color:n.pieCharts[b].color})}A.push({data:O,name:n.pieCharts[b].name}),k={chart:{type:n.pieCharts[0].type,reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],tooltip:{formatter:function(){return this.key+":"+this.y+"</b>"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer"}},series:A},T=[],v.push({options:y.pieDataOptions,data:n.pieCharts,api:{},chartOptions:k})}if(n.fbReachByCity.length>0){var F=[],A=[];g++;var S=[],O=[];for(var b in n.fbReachByCity){for(var P in T)if(n.fbReachByCity[b].color==T[P]){var H=s(n.fbReachByCity[b].color,T);n.fbReachByCity[b].color=H}T.push(n.fbReachByCity[b].color);var ya=String(n.fbReachByCity[b].y).indexOf(".")?parseFloat(n.fbReachByCity[b].y):parseInt(n.fbReachByCity[b].y),ha=n.fbReachByCity[b].key;O.push({y:ya,name:ha,color:n.fbReachByCity[b].color})}var ha=n.fbReachByCity[b].name;A.push({data:O,name:ha}),k={chart:{type:"pie",reflow:!0,zoomType:"x"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0}}},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{formatter:function(){return this.key+":"+this.y+"</b>"}},title:{text:"",style:{display:"none"}},series:A},T=[],v.push({options:y.pieDataOptions,data:n.fbReachByCity,api:{},chartOptions:k})}if(n.fbReachByAge.length>0){var F=[],A=[];g++,k={chart:{type:"column",reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:n.fbReachByAge[0].values[1]},yAxis:[{title:{text:null},min:0}],title:{text:"",style:{display:"none"}},plotOptions:{column:{stacking:"normal"}},series:n.fbReachByAge[0].values[2]},colorarray=["#b2aee8","#aee8b2","#e8b2ae","#98DF8A","#756BB1","#FFBB78","#0F9D58","#20bfaf","#bb24d1","#dcdf41"];for(var ga=[],sa=0,w=0;w<n.fbReachByAge[0].values[1].length;w++){for(var ta=0;ta<n.fbReachByAge[0].values[2].length;ta++)sa+=n.fbReachByAge[0].values[2][ta].data[w];var ia={channelName:n.fbReachByAge[0].channelName,summaryDisplay:sa,type:"pie",key:n.fbReachByAge[0].values[1][w],showComparision:"false",variance:0,color:colorarray[w]};ga.push(ia)}T=[];var L=[];for(var b in ga){var z=0;z+=parseFloat(ga.summaryDisplay),L[b]={summaryTotal:z}}var $=0;for(P in L)$+=parseInt(L[P].summaryTotal);v.push({options:y.pieDataOptions,data:ga,api:{},chartOptions:k})}if(n.instagramPosts.length>0&&n.instagramPosts[0].values.length>0&&(g++,v.push({options:y.instagramPosts,data:n.instagramPosts[0].values})),n.vimeoTopVideos.length>0&&n.vimeoTopVideos[0].values.length>0&&(g++,v.push({options:y.vimeoTopVideos,data:n.vimeoTopVideos[0].values})),n.highEngagementTweets.length>0&&n.highEngagementTweets[0].values.length>0&&(g++,v.push({options:y.highEngagementTweets,data:n.highEngagementTweets[0].values})),n.highestEngagementLinkedIn.length>0&&n.highestEngagementLinkedIn[0].values.length>0&&(g++,v.push({options:y.highestEngagementLinkedIn,data:n.highestEngagementLinkedIn[0].values})),n.gaTopPagesByVisit.length>0&&n.gaTopPagesByVisit[0].values.length>0&&(g++,v.push({options:y.gaTopPagesByVisit,data:n.gaTopPagesByVisit[0].values})),n.campaignOverViewbyAge.length>0&&n.campaignOverViewbyAge[0].values.length>0&&(g++,v.push({options:y.campaignOverViewbyAge,data:n.campaignOverViewbyAge[0].values})),n.campaignOverview.length>0&&n.campaignOverview[0].values.length>0&&(g++,v.push({options:y.campaignOverview,data:n.campaignOverview[0].values})),n.adgroupOverview.length>0&&n.adgroupOverview[0].values.length>0&&(g++,v.push({options:y.adgroupOverview,data:n.adgroupOverview[0].values})),n.fbAdsAdgroupOverview.length>0&&n.fbAdsAdgroupOverview[0].values.length>0&&(g++,v.push({options:y.fbAdsAdgroupOverview,data:n.fbAdsAdgroupOverview[0].values})),n.adOverview.length>0&&n.adOverview[0].values.length>0&&(g++,v.push({options:y.adOverview,data:n.adOverview[0].values})),n.gaPageContentEfficiencyTable.length>0&&n.gaPageContentEfficiencyTable[0].values.length>0&&(g++,v.push({options:y.gaPageContentEfficiencyTable,data:n.gaPageContentEfficiencyTable[0].values})),n.topReferringSitesTable.length>0&&n.topReferringSitesTable[0].values.length>0&&(g++,v.push({options:y.topReferringSitesTable,data:n.topReferringSitesTable[0].values})),n.gaPageTechnicalEfficiencyTable.length>0&&n.gaPageTechnicalEfficiencyTable[0].values.length>0&&(g++,v.push({options:y.gaPageTechnicalEfficiencyTable,data:n.gaPageTechnicalEfficiencyTable[0].values})),n.gaVisitorAcquisitionEfficiencyAnalysisTable.length>0&&n.gaVisitorAcquisitionEfficiencyAnalysisTable[0].values.length>0&&(g++,v.push({options:y.gaVisitorAcquisitionEfficiencyAnalysisTable,data:n.gaVisitorAcquisitionEfficiencyAnalysisTable[0].values})),n.pageTechnicalEfficiency.length>0){var F=[],A=[];g++;for(var b in n.pageTechnicalEfficiency){var va=[],O=[];O[0]=[],O[1]=[];for(var E=0;E<n.pageTechnicalEfficiency[b].values.length;E++)va.push(String(n.pageTechnicalEfficiency[b].values[E].pageTitle)),O[0].push(Number(n.pageTechnicalEfficiency[b].values[E].PageLoadTime)),O[1].push(Number(n.pageTechnicalEfficiency[b].values[E].bounceRate));for(var w=0;w<n.pageTechnicalEfficiency[b].summary.length;w++)A.push({name:n.pageTechnicalEfficiency[b].summary[w].key,yAxis:w,tooltip:{valueSuffix:n.pageTechnicalEfficiency[b].summary[w].unit},data:O[w],type:0==w?"column":"line",color:n.pageTechnicalEfficiency[b].color[w]})}k={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:va,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:va.length-1},yAxis:[{title:{text:"Page LoadTime"}},{title:{text:"Bounce Rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A},v.push({options:y.visitorAcquisitionEfficiency,data:n.pageTechnicalEfficiency,api:{},chartOptions:k})}if(n.visitorAcquisitionEfficiency.length>0){
var F=[],A=[];g++;for(var b in n.visitorAcquisitionEfficiency){var va=[],O=[];O[0]=[],O[1]=[],O[2]=[];for(var E=0;E<n.visitorAcquisitionEfficiency[b].values.length;E++)va.push(String(n.visitorAcquisitionEfficiency[b].values[E].sourceMedium)),O[0].push(Number(n.visitorAcquisitionEfficiency[b].values[E].newUsers)),O[1].push(Number(n.visitorAcquisitionEfficiency[b].values[E].goalValuePerSession)),O[2].push(Number(n.visitorAcquisitionEfficiency[b].values[E].goalConversionRateAll));for(var w=0;w<n.visitorAcquisitionEfficiency[b].summary.length;w++)A.push({name:n.visitorAcquisitionEfficiency[b].summary[w].key,yAxis:w<1?0:1,tooltip:{valueSuffix:n.visitorAcquisitionEfficiency[b].summary[w].unit},data:O[w],type:w<1?"column":"line",color:n.visitorAcquisitionEfficiency[b].color[w]})}k={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:va,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:va.length-1},yAxis:[{title:{text:"New users"}},{title:{text:"Goal value & Goal conversion rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A},v.push({options:y.visitorAcquisitionEfficiency,data:n.visitorAcquisitionEfficiency,api:{},chartOptions:k})}if(n.gaSocialMediaOverview.length>0){var F=[],A=[];g++;for(var b in n.gaSocialMediaOverview)for(var E=0;E<n.gaSocialMediaOverview[b].values.length;E++)A.push({x:Number(n.gaSocialMediaOverview[b].values[E].pageviewsPersession),y:Number(n.gaSocialMediaOverview[b].values[E].sessions),z:Number(n.gaSocialMediaOverview[b].values[E].avgtimeOnPage),name:"(none)"===String(n.gaSocialMediaOverview[b].values[E].socialNetwork)?"Direct":String(n.gaSocialMediaOverview[b].values[E].socialNetwork)});k={chart:{reflow:!0,type:"bubble",zoomType:"xy"},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{useHTML:!0,headerFormat:"<table>",pointFormat:'<tr><th colspan="2"><h3>{point.name}</h3></th></tr><tr><th>Page Views Per Session:</th><td>{point.x}pages</td></tr><tr><th>Sessions:</th><td>{point.y}</td></tr><tr><th>Time on Page:</th><td>{point.z}s</td></tr>',footerFormat:"</table>",enabled:!0,shared:!0},xAxis:{labels:{formatter:function(){return this.value}},title:{text:"Page Views Per Session"}},yAxis:{title:{text:"Sessions"}},title:{text:"",style:{display:"none"}},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}"}}},series:[{data:A}]},v.push({options:y.visitorAcquisitionEfficiency,data:n.gaSocialMediaOverview,api:{},chartOptions:k})}if(n.topReferringSites.length>0){var F=[],A=[];g++;for(var b in n.topReferringSites){var va=[],O=[];O[0]=[],O[1]=[],O[2]=[];for(var E=0;E<n.topReferringSites[b].values.length;E++)va.push(String(n.topReferringSites[b].values[E].source)),O[0].push(Number(n.topReferringSites[b].values[E].sessions)),O[1].push(Number(n.topReferringSites[b].values[E].goalCompletions)),O[2].push(Number(n.topReferringSites[b].values[E].goalConversionRate));for(var w=0;w<n.topReferringSites[b].summary.length;w++)A.push({name:n.topReferringSites[b].summary[w].key,yAxis:w<=1?0:1,tooltip:{valueSuffix:n.topReferringSites[b].summary[w].unit},data:O[w],type:w<1?"column":"line",color:n.topReferringSites[b].color[w]})}k={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:va,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:va.length-1},yAxis:[{title:{text:"Sessions & Goal completions"}},{title:{text:"Goal conversion rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A},v.push({options:y.visitorAcquisitionEfficiency,data:n.topReferringSites,api:{},chartOptions:k})}if(n.pageContentEfficiency.length>0){var A=[];g++;for(var b in n.pageContentEfficiency){var va=[],O=[];O[0]=[],O[1]=[],O[2]=[],O[3]=[];for(var E=0;E<n.pageContentEfficiency[b].values.length;E++)va.push(String(n.pageContentEfficiency[b].values[E].pageTitle)),O[0].push(Number(n.pageContentEfficiency[b].values[E].uniquePageviews)),O[1].push(Number(n.pageContentEfficiency[b].values[E].pageviews)),O[2].push(Number(n.pageContentEfficiency[b].values[E].bounceRate)),O[3].push(Number(n.pageContentEfficiency[b].values[E].entranceRate));for(var w=0;w<n.pageContentEfficiency[b].summary.length;w++)A.push({name:n.pageContentEfficiency[b].summary[w].key,yAxis:w<2?0:1,tooltip:{valueSuffix:n.pageContentEfficiency[b].summary[w].unit},data:O[w],type:w<2?"column":"line",color:n.pageContentEfficiency[b].color[w]})}k={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:va,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:va.length-1},yAxis:[{title:{text:"Unique Page views & Page views"}},{title:{text:"Entrance Rate & Bounce Rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A},v.push({options:y.visitorAcquisitionEfficiency,data:n.pageContentEfficiency,api:{},chartOptions:k})}if(n.pinterestEngagementRate.length>0&&n.pinterestEngagementRate[0].values.length>0&&(g++,v.push({options:y.pinterestEngagementRate,data:n.pinterestEngagementRate[0].values})),n.pinterestLeaderboard.length>0&&n.pinterestLeaderboard[0].values.length>0&&(g++,v.push({options:y.pinterestLeaderboard,data:n.pinterestLeaderboard[0].values})),n.costPerActionType.length>0&&v.push({options:y.costPerActionType,data:n.costPerActionType}),n.mozoverview.length>0){for(var ea=[],w=0;w<n.mozoverview.length;w++){var Da=n.mozoverview[w].values.length-1;switch(n.mozoverview[w].key){case"Links":var ba=parseInt(n.mozoverview[w].values[Da].y);break;case"External equity links":var wa=parseInt(n.mozoverview[w].values[Da].y);break;case"Domain Authority (/100)":var Ta=n.mozoverview[w].values[Da].y;break;case"Page Authority (/100)":var ka=n.mozoverview[w].values[Da].y;break;case"Moz Rank (/10)":var xa=n.mozoverview[w].values[Da].y}}var Ca={mozRankURL:xa,externalEquityLinks:wa,domainageAuthority:Ta,links:ba,pageAuthority:ka};v.push({options:y.mozoverview,data:n.mozoverview,displayData:Ca})}if(n.angularGauge.length>0&&(0!=n.angularGauge[0].y&&(g++,k={chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1},credits:{enabled:!1},exporting:{enabled:!1},yAxis:{min:0,max:100,minorTickInterval:"auto",minorTickWidth:1,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",tickPixelInterval:30,tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#666",title:{text:"Post/day"},plotBands:[{from:0,to:20,color:"#55BF3B"},{from:20,to:60,color:"#DDDF0D"},{from:60,to:100,color:"#DF5353"}]},title:{text:"",style:{display:"none"}},series:[{name:"Post Per Day",data:[n.angularGauge[0].y],tooltip:{valueSuffix:" post/day"}}]}),v.push({options:y.pieDataOptions,data:n.angularGauge,chartOptions:k})),n.instagramHashtagLeaderBoard.length>0&&n.instagramHashtagLeaderBoard[0].values.length>0&&(g++,v.push({options:y.instagramHashtagLeaderBoard,data:n.instagramHashtagLeaderBoard[0].values})),n.twitterEngagements.length>0){var Na=[],Fa=[],Aa=0,Sa=0,Oa=[];for(var b in n.twitterEngagements)if("activityByDayOfTheWeek"==n.twitterEngagements[b].chartSubType||"instagramActivityByDayOfTheWeek"==n.twitterEngagements[b].chartSubType)Aa=1,Na.push(n.twitterEngagements[b]);else if("activityByTimeOfTheDay"==n.twitterEngagements[b].chartSubType||"instagramActivityByTimeOfTheDay"==n.twitterEngagements[b].chartSubType){Sa=1;var A=[];Fa.push(n.twitterEngagements[b])}else if(n.twitterEngagements[b].values.length>0&&"commentsAndLikes"==n.twitterEngagements[b].chartSubType){g++;for(var A=[],Ea=[],Ma=[],E=0;E<n.twitterEngagements[b].values.length;E++)Ma.push(n.twitterEngagements[b].values[E].x);Ea=_.uniqBy(Ma);for(var E=0;E<n.twitterEngagements[b].values.length;E++){var ja=_.indexOf(Ea,n.twitterEngagements[b].values[E].x);A.push({x:ja,y:Number(n.twitterEngagements[b].values[E].y),z:Number(n.twitterEngagements[b].values[E].y),color:n.twitterEngagements[b].color[ja],link:n.twitterEngagements[b].values[E].link,date:Ea[ja]})}k={chart:{reflow:!0,type:"bubble",zoomType:"xy"},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{useHTML:!0,headerFormat:"<table>",pointFormat:"<tr><th>Date:</th><td>{point.date}</td></tr><tr><th>Engagement:</th><td>{point.y}</td></tr><tr><th>Link:</th><td>{point.link}</td></tr>",footerFormat:"</table>",enabled:!0,shared:!0},xAxis:{labels:{},categories:Ea,title:{text:null},labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}if("string"!=typeof this.value||u(this.value)){var a=this.value.split("-");return a[1]+" "+a[0]}return this.value}},tickInterval:7,max:Ea.length-1},yAxis:{title:{text:"Engagements"}},title:{text:"",style:{display:"none"}},plotOptions:{series:{dataLabels:{enabled:!1}}},series:[{data:A}]},v.push({options:y.visitorAcquisitionEfficiency,data:n.twitterEngagements[b],api:{},chartOptions:k})}else if(n.twitterEngagements[b].values.length>0&&("topLinks"===n.twitterEngagements[b].chartSubType||"hashTag"===n.twitterEngagements[b].chartSubType)){g++;var Ia={chart:{type:n.twitterEngagements[b].chartSubType}};v.push({options:Ia,data:n.twitterEngagements[0].values})}else if(n.twitterEngagements[b].values.length>0&&("engagementByUsersTalkedAbout"===n.twitterEngagements[b].chartSubType||"hashTag"===n.twitterEngagements[b].chartSubType)){g++;var Ia={chart:{type:n.twitterEngagements[b].chartSubType}};v.push({options:Ia,data:n.twitterEngagements[b].values})}if(Sa>0){var A=[];g++;for(var b in Fa)for(var E=0;E<Fa[b].values.length;E++){if("Sunday"==String(Fa[b].values[E].day))var ja=0;else if("Monday"==String(Fa[b].values[E].day))var ja=1;else if("Tuesday"==String(Fa[b].values[E].day))var ja=2;else if("Wednesday"==String(Fa[b].values[E].day))var ja=3;else if("Thursday"==String(Fa[b].values[E].day))var ja=4;else if("Friday"==String(Fa[b].values[E].day))var ja=5;else if("Saturday"==String(Fa[b].values[E].day))var ja=6;A.push({x:ja,y:Number(Fa[b].values[E].time),z:Number(Fa[b].values[E].engagement),color:Fa[b].color[ja]})}x={chart:{reflow:!0,type:"bubble",zoomType:"xy"},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{useHTML:!0,headerFormat:"<table>",pointFormat:"<tr><th>Time:</th><td>{point.y}</td></tr><tr><th>Engagement:</th><td>{point.z}</td></tr>",footerFormat:"</table>",enabled:!0,shared:!0},xAxis:{labels:{},categories:f,title:{text:null},max:f.length-1},yAxis:{title:{text:"Time"},min:0,max:28,tickInterval:7},title:{text:"",style:{display:"none"}},plotOptions:{series:{dataLabels:{enabled:!1}}},series:[{data:A}]},v.push({options:y.visitorAcquisitionEfficiency,data:Fa,api:{},chartOptions:x})}if(Aa>0){var A=[],va=[];Oa[0]=[],Oa[1]=[];var Pa=[];g++;for(var Ia=0;Ia<Na.length;Ia++){va.length<Na[Ia].values.length&&(va.length=0);for(var E=0;E<Na[Ia].values.length;E++)if(va.length<Na[Ia].values.length&&va.push(String(Na[Ia].values[E].day)),"activityByDayOfTheWeek"==Na[Ia].chartSubType){var Ha="Tweets count";Oa[0].push({tweet:Number(Na[Ia].values[E].tweets)}),Oa[1].push({tweetEngage:Number(Na[Ia].values[E].engagement)})}else{var Ha="Posts count";Oa[0].push({instaTweet:Number(Na[Ia].values[E].tweets)}),Oa[1].push({instaEngage:Number(Na[Ia].values[E].engagement)})}}for(var w=0;w<Oa.length;w++)for(var U=0;U<Oa[w].length;U++)for(var Wa in Oa[w][U])Pa.push(Oa[w][U]);for(var Ra=[],fa=0;fa<Pa.length;fa++)Ra.push(Pa[fa]);var Ba=[],_a=[],La=[],za=[];for(var fa in Ra)for(var Wa in Ra[fa])switch(Wa){case"tweet":Ba.push(Ra[fa][Wa]);break;case"tweetEngage":za.push(Ra[fa][Wa]);break;case"instaTweet":_a.push(Ra[fa][Wa]);break;case"instaEngage":La.push(Ra[fa][Wa]);break;default:console.log("err")}Ba.length&&A.push({name:"Tweet",yAxis:0,tooltip:{valueSuffix:""},data:Ba,type:"column",color:n.twitterEngagements[b].color[0]}),_a.length&&A.push({name:"Post",yAxis:0,tooltip:{valueSuffix:""},data:_a,type:"column",color:n.twitterEngagements[b].color[1]}),La.length&&A.push({name:"Engagement",yAxis:1,tooltip:{valueSuffix:""},data:La,type:"line",color:n.twitterEngagements[b].color[2]}),za.length&&A.push({name:"Engagement",yAxis:1,tooltip:{valueSuffix:""},data:za,type:"line",color:n.twitterEngagements[b].color[3]}),C={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:va,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:va.length-1},yAxis:[{title:{text:Ha}},{title:{text:"Engagement count"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A},v.push({options:y.visitorAcquisitionEfficiency,data:Na,api:{},chartOptions:C})}}if(n.youtubeVideosOverview.length>0){g++;for(var b in n.youtubeVideosOverview){var Ia={chart:{type:n.youtubeVideosOverview[b].type}};n.youtubeVideosOverview[0].values.length>0&&v.push({options:Ia,data:n.youtubeVideosOverview[0].values})}}if(n.fbAdsCampaignOverview.length>0&&n.fbAdsCampaignOverview[0].values.length>0&&(g++,v.push({options:y.fbAdsCampaignOverview,data:n.fbAdsCampaignOverview[0].values})),n.fbAdsAdOverview.length>0&&n.fbAdsAdOverview[0].values.length>0&&(g++,v.push({options:y.fbAdsAdOverview,data:n.fbAdsAdOverview[0].values})),0==v.length)if("custom"==a.widgetType){var Ya="";Ya="localhost"==window.location.hostname?"http://localhost:8080/api/v1/create/customdata/"+a._id:window.location.hostname+"/api/v1/create/customdata/"+a._id,v.push({options:y.emptyCharts,data:[{message:"No data for chosen date range. Please send your data to: "+Ya}]})}else v.push({options:y.emptyCharts,data:[{message:"No data for chosen date range"}]});var $a=function(){c="undefined"!=typeof a.size?a.size.h:3,h="undefined"!=typeof a.size?a.size.w:3;for(var t=0;t<D.length;t++)D[t].W==h&&D[t].H==c&&D[t].N==g&&(l=D[t].c,p=D[t].r)};if($a(),m="custom"==a.widgetType?"Custom Data":"undefined"!=typeof a.name?a.name:"","undefined"!=typeof v[0].data[0]&&"undefined"!=v[0].data[0].displaySummary&&v[0].data[0].displaySummary===!1)var Va={showSummary:!1,name:m,visibility:!0,id:a._id,color:a.color,chart:v,layoutOptionsX:l,layoutOptionsY:p};else if("undefined"!=typeof v[0].data[0]&&"undefined"!=typeof v[0].data[0].key)var Va={name:m,visibility:!0,id:a._id,color:a.color,chart:v,layoutOptionsX:l,layoutOptionsY:p};else var Va={showSummary:!1,name:m,visibility:!0,id:a._id,color:a.color,chart:v,layoutOptionsX:l,layoutOptionsY:p};return o.resolve(Va),o.promise}function u(a){var t=new Date(a);return!isNaN(t.getDate())}var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=t.defer(),y=t.defer(),g=JSON.parse(JSON.stringify(e));switch(e.widgetType){case"customFusion":var v=[],D=[],b=[];v.push(i(e,s)),t.all(v).then(function(a){var e=a[0];for(var i in e)"basic"==e[i].widgetType||"adv"==e[i].widgetType||"fusion"==e[i].widgetType?D.push(c(e[i],r,s)):"custom"==e[i].widgetType&&D.push(o(e[i],r));t.all(D).then(function(a){for(var e in a)"basic"==a[e].widgetType||"adv"==a[e].widgetType||"fusion"==a[e].widgetType?b.push(l(a[e])):"custom"==a[e].widgetType&&b.push(n(a[e]));t.all(b).then(function(a){var t=[];for(var e in a)for(var r in a[e])t.push(a[e][r]);var s=p(g,t);s.then(function(a){m.resolve(a)},function(a){m.reject(a)})},function(a){m.reject(a)})},function(a){m.reject(a)})},function(a){m.reject(a)});break;case"basic":case"adv":case"fusion":var w=c(g,r,s);w.then(function(a){var t=l(a,r);t.then(function(a){var t=p(e,a);t.then(function(a){m.resolve(a)},function(a){m.reject(a)})},function(a){m.reject(a)})},function(a){m.reject(a)});break;case"custom":var w=o(g,r);w.then(function(a){var t=n(a);t.then(function(a){var t=p(e,a,r);t.then(function(a){m.resolve(a)},function(a){m.reject(a)})},function(a){m.reject(a)})},function(a){m.reject(a)})}return m.promise}}]),showMetricApp.service("generateChartColours",function(){this.fetchRandomColors=function(a){for(var t,e=["#EF5350","#EC407A","#9C27B0","#42A5F5","#26A69A","#FFCA28","#FF7043","#8D6E63"],r=[];r.length<a;)t=e[Math.floor(Math.random()*(e.length-1))+1],r.indexOf(t)==-1?r.push(t):r.length>e.length&&r.indexOf(t,e.length-1)==-1&&r.push(t);return r},this.fetchWidgetColor=function(a){var t;switch(a){case"Facebook":t="#3B5998";break;case"Google Analytics":t="#F26630";break;case"Twitter":t="#5EA9DD";break;case"FacebookAds":t="#4E5664";break;case"GoogleAdwords":t="#1A925A";break;case"Instagram":t="#895A4D";break;case"YouTube":t="#CC181E";break;default:t="#04509B"}return t}}),showMetricApp.controller("MainCtrl",MainCtrl),showMetricApp.controller("CustomWidgetController",CustomWidgetController),showMetricApp.controller("SharedDashboardController",SharedDashboardController),showMetricApp.controller("NavigationController",NavigationController);