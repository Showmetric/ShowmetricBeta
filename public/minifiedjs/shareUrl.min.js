function config(a){a.translations("en",{DASHBOARD:"Dashboard",GRAPHS:"Graphs",MAILBOX:"Mailbox",WIDGETS:"Widgets",METRICS:"Metrics",FORMS:"Forms",APPVIEWS:"App views",OTHERPAGES:"Other pages",UIELEMENTS:"UI elements",MISCELLANEOUS:"Miscellaneous",GRIDOPTIONS:"Grid options",TABLES:"Tables",COMMERCE:"E-commerce",GALLERY:"Gallery",MENULEVELS:"Menu levels",ANIMATIONS:"Animations",LANDING:"Landing page",LAYOUTS:"Layouts",WELCOME:"Welcome Amelia",MESSAGEINFO:"You have 42 messages and 6 notifications.",SEARCH:"Search for something..."}).translations("es",{DASHBOARD:"Salpicadero",GRAPHS:"Gráficos",MAILBOX:"El correo",WIDGETS:"Widgets",METRICS:"Métrica",FORMS:"Formas",APPVIEWS:"Vistas app",OTHERPAGES:"Otras páginas",UIELEMENTS:"UI elements",MISCELLANEOUS:"Misceláneo",GRIDOPTIONS:"Cuadrícula",TABLES:"Tablas",COMMERCE:"E-comercio",GALLERY:"Galería",MENULEVELS:"Niveles de menú",ANIMATIONS:"Animaciones",LANDING:"Página de destino",LAYOUTS:"Esquemas",WELCOME:"Bienvenido Amelia",MESSAGEINFO:"Usted tiene 42 mensajes y 6 notificaciones.",SEARCH:"Busca algo ..."}),a.preferredLanguage("en")}function pageTitle(a,t){return{link:function(e,r){var s=function(a,e,s,i,o){var n="Datapoolt";e.data&&e.data.pageTitle&&(n="Datapoolt | "+e.data.pageTitle),t(function(){r.text(n)})};a.$on("$stateChangeStart",s)}}}function sideNavigation(a){return{restrict:"A",link:function(t,e){a(function(){e.metisMenu()})}}}function hcChart(a){return{restrict:"E",template:"<div></div>",scope:{options:"="},link:function(t,e){function r(){Highcharts.chart(e[0],t.options)}a(r,200)}}}function responsiveVideo(){return{restrict:"A",link:function(a,t){var e=t,r=t.children();r.attr("data-aspectRatio",r.height()/r.width()).removeAttr("height").removeAttr("width"),$(window).resize(function(){var a=e.width();r.width(a).height(a*r.attr("data-aspectRatio"))}).resize()}}}function iboxTools(a){return{restrict:"A",scope:!0,templateUrl:"common/ibox_tools.ejs",controller:["$scope","$element",function(t,e){t.showhide=function(){var t=e.closest("div.ibox"),r=e.find("i:first"),s=t.find("div.ibox-content");s.slideToggle(200),r.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),t.toggleClass("").toggleClass("border-bottom"),a(function(){t.resize(),t.find("[id^=map-]").resize()},50)},t.closebox=function(){var a=e.closest("div.ibox");a.remove()}}]}}function iboxToolsFullScreen(a){return{restrict:"A",scope:!0,templateUrl:"common/ibox_tools_full_screen.ejs",controller:["$scope","$element",function(t,e){t.showhide=function(){var t=e.closest("div.ibox"),r=e.find("i:first"),s=t.find("div.ibox-content");s.slideToggle(200),r.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),t.toggleClass("").toggleClass("border-bottom"),a(function(){t.resize(),t.find("[id^=map-]").resize()},50)},t.closebox=function(){var a=e.closest("div.ibox");a.remove()},t.fullscreen=function(){var a=e.closest("div.ibox"),t=e.find("i.fa-expand");$("body").toggleClass("fullscreen-ibox-mode"),t.toggleClass("fa-expand").toggleClass("fa-compress"),a.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}}]}}function minimalizaSidebar(a){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()" style="margin-top: 10px;"><i class="fa fa-bars"></i></a>',controller:["$scope","$element",function(a,t){a.minimalize=function(){$("body").toggleClass("mini-navbar");var a=$(window).width();if(768==a&&($("body").hasClass("mini-navbar")?$("#side-menu").css("display","block"):$("#side-menu").css("display","none")),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")){$(".tooltip").hide();document.getElementById("CustomTemplate").offsetWidth;$("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500),!$("body").hasClass("body-small")},100)}else $("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},300)):($(".tooltip").hide(),$("#side-menu").removeAttr("style"),$("body").hasClass("mini-navbar")&&($(".tooltip").show(),$("#dashboardTitleIcons").show()))}}]}}function closeOffCanvas(){return{restrict:"A",template:'<a class="close-canvas-menu" ng-click="closeOffCanvas()"><i class="fa fa-times"></i></a>',controller:["$scope","$element",function(a,t){a.closeOffCanvas=function(){$("body").toggleClass("mini-navbar")}}]}}function vectorMap(){return{restrict:"A",scope:{myMapData:"="},link:function(a,t,e){t.vectorMap({map:"world_mill_en",backgroundColor:"transparent",regionStyle:{initial:{fill:"#e4e4e4","fill-opacity":.9,stroke:"none","stroke-width":0,"stroke-opacity":0}},series:{regions:[{values:a.myMapData,scale:["#1ab394","#22d6b1"],normalizeFunction:"polynomial"}]}})}}}function sparkline(){return{restrict:"A",scope:{sparkData:"=",sparkOptions:"="},link:function(a,t,e){a.$watch(a.sparkData,function(){r()}),a.$watch(a.sparkOptions,function(){r()});var r=function(){$(t).sparkline(a.sparkData,a.sparkOptions)}}}}function icheck(a){return{restrict:"A",require:"ngModel",link:function(t,e,r,s){return a(function(){var a;return a=r.value,t.$watch(r.ngModel,function(a){$(e).iCheck("update")}),$(e).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}).on("ifChanged",function(i){if("checkbox"===$(e).attr("type")&&r.ngModel&&t.$apply(function(){return s.$setViewValue(i.target.checked)}),"radio"===$(e).attr("type")&&r.ngModel)return t.$apply(function(){return s.$setViewValue(a)})})})}}}function ionRangeSlider(){return{restrict:"A",scope:{rangeOptions:"="},link:function(a,t,e){t.ionRangeSlider(a.rangeOptions)}}}function dropZone(){return function(a,t,e){t.dropzone({url:"/upload",maxFilesize:100,paramName:"uploadfile",maxThumbnailFilesize:5,init:function(){a.files.push({file:"added"}),this.on("success",function(a,t){}),this.on("addedfile",function(t){a.$apply(function(){alert(t),a.files.push({file:"added"})})}),this.on("drop",function(a){alert("file")})}})}}function chatSlimScroll(a){return{restrict:"A",link:function(t,e){a(function(){e.slimscroll({height:"234px",railOpacity:.4})})}}}function customValid(){return{require:"ngModel",link:function(a,t,e,r){a.$watch(e.ngModel,function(){var t="Inspinia";a.extras==t?r.$setValidity("cvalid",!0):r.$setValidity("cvalid",!1)})}}}function fullScroll(a){return{restrict:"A",link:function(t,e){a(function(){e.slimscroll({height:"100%",railOpacity:.9})})}}}function slimScroll(a){return{restrict:"A",scope:{boxHeight:"@"},link:function(t,e){a(function(){e.slimscroll({height:t.boxHeight,railOpacity:.9})})}}}function clockPicker(){return{restrict:"A",link:function(a,t){t.clockpicker()}}}function landingScrollspy(){return{restrict:"A",link:function(a,t,e){t.scrollspy({target:".navbar-fixed-top",offset:80})}}}function fitHeight(){return{restrict:"A",link:function(a,t){t.css("height",$(window).height()+"px"),t.css("min-height",$(window).height()+"px")}}}function channelDiv(){return{restrict:"E",scope:{channel:"= "},template:'<div class="col-lg-4"></div>'}}function chartHeight(){return{controller:["$scope","$element",function(a,t){this.chartHeight=t[0].offsetHeight}]}}function sizeWatcher(){return{require:"^chartHeight",scope:{sizeWatcherHeight:"=",sizeWatcherWidth:"="},link:function(a,t,e,r){var s,i=a.sizeWatcherWidth.length;s=i<=2?1:i>2&&i<=4?2:3;var o=Math.ceil(i/s);if(void 0!=r.chartHeight&&0!=r.chartHeight){if(void 0==a.sizeWatcherHeight||0==a.sizeWatcherHeight){var n=r.chartHeight;a.sizeWatcherHeight=Math.ceil(.2*n/o)}}else void 0==a.sizeWatcherHeight&&0==a.sizeWatcherHeight&&(a.sizeWatcherHeight=t.prop("offsetHeight"))}}}function expSizeWatcher(){return{scope:{expSizeWatcherHeight:"="},link:function(a,t,e,r){void 0==a.expSizeWatcherHeight&&0==a.expSizeWatcherHeight&&(a.expSizeWatcherHeight=t.prop("offsetHeight"))}}}function fileModel(a){return{restrict:"A",link:function(t,e,r){var s=a(r.fileModel),i=s.assign;e.bind("change",function(){t.$apply(function(){i(t,e[0].files[0])})})}}}function MainCtrl(a,t,e,r){a.navbarHeight=window.innerHeight,a.IntroOptions={steps:[{element:"#step8",intro:"Blank Dashboard - Click here to create a new blank dashboard. Create dashboards to organize your widgets and monitor them.",position:"right"},{element:"#step9",intro:"Dashboard Templates - Ready made pre-built dashboards comprising of specific curated widgets to address an unique theme or purpose. They provide a great way to quickly get your dashboard created rather than building it one widget at a time.",position:"right"},{element:"#step10",intro:"Reports - Take complete control of your reporting. Easily build reports with custom logos, custom text and export them as professional looking PDFs. White label your reports and use your own logo to send reports.",position:"right"},{element:"#step11",intro:"Get it, use it.",position:"bottom"},{element:"#step12",intro:"Get it, use it.",position:"left"},{element:"#step13",intro:"Get it, use it.",position:"left"},{element:"#step14",intro:"Get it, use it.",position:"left"},{element:"#soonModel",intro:"Get it, use it.",position:"left"},{element:"#step15",intro:"Get it, use it.",position:"left"},{element:"#step17",intro:"Get it, use it.",position:"left"}],showStepNumbers:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"<strong>Previous</strong>",skipLabel:'<span style="color:red">Exit</span>',doneLabel:'<span style="color:green">Thanks</span>'},window.addEventListener("resize",function(t){a.navbarHeight=window.innerHeight}),t.dropDownActive=!1,a.ShouldAutoStart=!1,t.$on("$stateChangeSuccess",function(e,r,s,i,o){t.currentStateForIntro=r.name,"app.reporting.dashboard"==t.currentStateForIntro?a.IntroOptions={steps:[{element:"#step1",intro:"Name all your dashboards here the way you see fit for easy organization",position:"bottom"},{element:"#step2",intro:"Choose the date range for which you want to analyze the data of your dashboard widgets",position:"bottom"},{element:"#step3",intro:"Add new widgets to your dashboards from all our integrated channels. Choose your channels followed by the metrics. Choose the profiles for which your want to see the data for your chosen metrics.",position:"left"},{element:"#step4",intro:"Take relevant metrics from two different channels and fuse them together to spot interesting correlations and trends.",position:"left"},{element:"#step5",intro:"Arrange all the widgets in your dashboard in a presentable manner with a single click.",position:"left"},{element:"#step6",intro:"Export the current dashboard in different available formats. Also share the url of this dashboard to people who require view access for analysis.",position:"left"},{element:"#step7",intro:"Click here to delete your current dashboard.",position:"left"},{element:"#step8",intro:"Blank Dashboard - Click here to create a new blank dashboard. Create dashboards to organize your widgets and monitor them.",position:"right"},{element:"#step9",intro:"Dashboard Templates - Ready made pre-built dashboards comprising of specific curated widgets to address an unique theme or purpose. They provide a great way to quickly get your dashboard created rather than building it one widget at a time.",position:"right"},{element:"#step10",intro:"Reports - Take complete control of your reporting. Easily build reports with custom logos, custom text and export them as professional looking PDFs. White label your reports and use your own logo to send reports.",position:"right"},{element:"#step11",intro:"Quickly navigate back and forth between your recent dashboards in a single click. Get a complete view of all your dashboards by clicking on All dashboards",position:"bottom"},{element:"#step12",intro:"Navigate to handle all your account related features and settings through this menu.",position:"left"},{element:"#step13",intro:"View and manage (create/edit/delete) all the social/digital profiles whose health you want to monitor in your dashboards.",position:"left"},{element:"#step14",intro:"View your account plan and status, invoice history and manage/upgrade your account.",position:"left"},{element:"#soonModel",intro:"View and manage all the users from your team whom you would like to use and benefit from Datapoolt",position:"left"},{element:"#step15",intro:"Have a quick tour and understand the features available in Datapoolt",position:"left"},{element:"#step17",intro:"Click here to logout of Datapoolt till you visit again soon",position:"left"}],showStepNumbers:!0,exitOnOverlayClick:!1,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"<strong>Previous</strong>",skipLabel:'<span style="color:red">Exit</span>',doneLabel:'<span style="color:green">Thanks</span>'}:a.IntroOptions={steps:[{element:"#step8",intro:"Blank Dashboard - Click here to create a new blank dashboard. Create dashboards to organize your widgets and monitor them.",position:"right"},{element:"#step9",intro:"Dashboard Templates - Ready made pre-built dashboards comprising of specific curated widgets to address an unique theme or purpose. They provide a great way to quickly get your dashboard created rather than building it one widget at a time.",position:"right"},{element:"#step10",intro:"Reports - Take complete control of your reporting. Easily build reports with custom logos, custom text and export them as professional looking PDFs. White label your reports and use your own logo to send reports.",position:"right"},{element:"#step11",intro:"Quickly navigate back and forth between your recent dashboards in a single click. Get a complete view of all your dashboards by clicking on All dashboards",position:"bottom"},{element:"#step12",intro:"Navigate to handle all your account related features and settings through this menu.",position:"left"},{element:"#step13",intro:"View and manage (create/edit/delete) all the social/digital profiles whose health you want to monitor in your dashboards.",position:"left"},{element:"#step14",intro:"View your account plan and status, invoice history and manage/upgrade your account.",position:"left"},{element:"#soonModel",intro:"View and manage all the users from your team whom you would like to use and benefit from Datapoolt",position:"left"},{element:"#step15",intro:"Have a quick tour and understand the features available in Datapoolt",position:"left"},{element:"#step17",intro:"Click here to logout of Datapoolt till you visit again soon",position:"left"}],showStepNumbers:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"<strong>Previous</strong>",skipLabel:'<span style="color:red">Exit</span>',doneLabel:'<span style="color:green">Thanks</span>'}}),a.CompletedEvent=function(a){t.dropDownActive=!1,document.getElementById("myDropdown").classList.remove("show")},a.ExitEvent=function(a){t.dropDownActive=!1,document.getElementById("myDropdown").classList.remove("show")},a.ChangeEvent=function(a,t){},a.BeforeChangeEvent=function(a,e){"step13"==a.id||"step14"==a.id||"step15"==a.id||"step16"==a.id||"step17"==a.id||"soonModel"==a.id?(t.dropDownActive=!0,document.getElementById("myDropdown").classList.contains("show")||document.getElementById("myDropdown").classList.add("show")):t.dropDownActive=!1},a.AfterChangeEvent=function(a,t){},this.daterange={startDate:null,endDate:null},this.slideInterval=5e3,this.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],this.persons=[{id:"1",firstName:"Monica",lastName:"Smith"},{id:"2",firstName:"Sandra",lastName:"Jackson"},{id:"3",firstName:"John",lastName:"Underwood"},{id:"4",firstName:"Chris",lastName:"Johnatan"},{id:"5",firstName:"Kim",lastName:"Rosowski"}],this.checkOne=!0,this.checkTwo=!0,this.checkThree=!0,this.checkFour=!0,this.knobOne=75,this.knobTwo=25,this.knobThree=50,this.bigTotalItems=175,this.bigCurrentPage=1,this.maxSize=5,this.singleModel=1,this.radioModel="Middle",this.checkModel={left:!1,middle:!0,right:!1},this.groups=[{title:"Dynamic Group Header - 1",content:"Dynamic Group Body - 1"},{title:"Dynamic Group Header - 2",content:"Dynamic Group Body - 2"}],this.alerts=[{type:"danger",msg:"Oh snap! Change a few things up and try submitting again."},{type:"success",msg:"Well done! You successfully read this important alert message."},{type:"info",msg:"OK, You are done a great job man."}],this.addAlert=function(){this.alerts.push({msg:"Another alert!"})},this.closeAlert=function(a){this.alerts.splice(a,1)},this.randomStacked=function(){this.stacked=[];for(var a=["success","info","warning","danger"],t=0,e=Math.floor(4*Math.random()+1);t<e;t++){var r=Math.floor(4*Math.random());this.stacked.push({value:Math.floor(30*Math.random()+1),type:a[r]})}},this.randomStacked(),this.summernoteText=["<h3>Hello Jonathan! </h3>","<p>dummy text of the printing and typesetting industry. <strong>Lorem Ipsum has been the dustrys</strong> standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more","recently with</p>"].join(""),this.BarChart={data:[5,3,9,6,5,9,7,3,5,2,4,7,3,2,7,9,6,4,5,7,3,2,1,0,9,5,6,8,3,2,1],options:{fill:["#1ab394","#d7d7d7"],width:100}},this.BarChart2={data:[5,3,9,6,5,9,7,3,5,2],options:{fill:["#1ab394","#d7d7d7"]}},this.BarChart3={data:[5,3,2,-1,-3,-2,2,3,5,2],options:{fill:["#1ab394","#d7d7d7"]}},this.LineChart={data:[5,9,7,3,5,2,5,3,9,6,5,9,4,7,3,2,9,8,7,4,5,1,2,9,5,4,7],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.LineChart2={data:[3,2,9,8,47,4,5,1,2,9,5,4,7],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.LineChart3={data:[5,3,2,-1,-3,-2,2,3,5,2],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.LineChart4={data:[5,3,9,6,5,9,7,3,5,2],options:{fill:"#1ab394",stroke:"#169c81",width:64}},this.PieChart={data:[1,5],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart2={data:[226,360],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart3={data:[.52,1.561],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart4={data:[1,4],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart5={data:[226,134],options:{fill:["#1ab394","#d7d7d7"]}},this.PieChart6={data:[.52,1.041],options:{fill:["#1ab394","#d7d7d7"]}}}function CustomWidgetController(a,t){a.remove=function(t){a.dashboard.widgets.splice(a.dashboard.widgets.indexOf(t),1)},a.openSettings=function(e){t.open({scope:a,backdrop:!0,templateUrl:"fusion_settings.ejs",controller:"FusionSettingsController",resolve:{widget:function(){return e}}})}}function SharedDashboardController(a,t,e,r,s,i,o,n,c){var h;a.loading=!1,a.$window=s,a.autoArrangeGrid=!1,a.currentDate=moment(new Date).format("YYYY-DD-MM"),a.summaryAlignLessThanThree=[],a.toDisplayAllSummary=[],a.checkAllGraphsZero=function(t,e,r){void 0==a.summaryAlignLessThanThree[e]&&(a.summaryAlignLessThanThree[e]=[]),void 0==a.toDisplayAllSummary[e]&&(a.toDisplayAllSummary[e]=[]);for(var s=0,i=0;i<t.data.length;i++)0===t.data[i].summaryDisplay&&(s+=1);a.summaryAlignLessThanThree[e][r]=t.data.length-s,s===t.data.length?a.toDisplayAllSummary[e][r]=!0:a.toDisplayAllSummary[e][r]=!1},a.dashboardConfiguration=function(){a.docHeight=window.innerHeight,a.docHeight=a.docHeight-60,a.dashboard={widgets:[],widgetData:[]},a.dashboard.dashboardName="",a.widgetsPresent=!0,a.spinerEnable=!0,a.loadedWidgetCount=0,a.widgetErrorCode=0,a.startDate,a.endDate,a.fetchDateForDashboard=function(){var t,e="undefined";r({method:"GET",url:"/api/v1/getSubscriptionFromDashboard/"+e,params:{dashboardId:i.params.id}}).then(function(e){200==e.status?(t=e.data.response.limits.dateRange,a.userModifyDate(t)):a.userModifyDate(365)})},a.fetchDateForDashboard(),a.userModifyDate=function(t){a.dashboardCalendar=new Calendar({element:$(".daterange--double"),earliest_date:moment(new Date).subtract(t,"days"),latest_date:new Date,start_date:moment(new Date).subtract(30,"days"),end_date:new Date,callback:function(){moment(this.start_date).format("ll"),moment(this.end_date).format("ll");a.populateDashboardWidgets()}}),a.populateDashboardWidgets()},a.setChartSize=function(a,e){function r(){if(null!=document.getElementById("chartOptions"+a)){var t=document.getElementById("chartOptions"+a).offsetWidth,r=document.getElementById("chartOptions"+a).offsetHeight;document.getElementById("chartRepeat"+a+"-"+e).style.height=r+"px",document.getElementById("chartRepeat"+a+"-"+e).style.width=t+"px"}}t(r,100)},a.gridsterOptions={sparse:!0,margins:[20,20],maxRows:500,columns:6,defaultSizeX:2,defaultSizeY:2,minSizeX:1,minSizeY:1,swapping:!0,float:!0,pushing:!0,width:"auto",colWidth:"auto",draggable:{enabled:!1},outerMargin:!0,mobileBreakPoint:700,mobileModeEnabled:!0,resizable:{enabled:!1}},a.$on("gridster-resized",function(e,r){function s(a){return function(){if(null!=document.getElementById("chartOptions"+a))for(var t=document.getElementById("chartOptions"+a).offsetWidth,e=document.getElementById("chartOptions"+a).offsetHeight,r=0;r<Highcharts.charts.length;r++)Highcharts.charts[r].container.parentElement.id.includes("chartRepeat"+a)&&(Highcharts.charts[r].setSize(t,e),Highcharts.charts[r].reflow())}}for(var i=0;i<a.dashboard.widgets.length;i++)t(s(i),10)}),a.$on("gridster-mobile-changed",function(t,e){a.isMobile=e.isMobile}),angular.element(s).on("resize",function(t){a.docHeight=window.innerHeight,a.docHeight=a.docHeight-60,a.$broadcast("resize")}),a.$on("resize",function(e){function r(a){return function(){if(null!=document.getElementById("chartOptions"+a))for(var t=document.getElementById("chartOptions"+a).offsetWidth,e=document.getElementById("chartOptions"+a).offsetHeight,r=0;r<Highcharts.charts.length;r++)Highcharts.charts[r].container.parentElement.id.includes("chartRepeat"+a)&&(Highcharts.charts[r].setSize(t,e),Highcharts.charts[r].reflow())}}for(var s=0;s<a.dashboard.widgets.length;s++)t(r(s),100)}),a.calculateColumnWidth=function(a,t,e){return t=Math.floor(t/e),t<1&&(t=1),1==t?"col-sm-12 col-md-12 col-lg-12":2==t?a<=2?"col-sm-12 col-md-12 col-lg-12":"col-sm-6 col-md-6 col-lg-6":a<=2?"col-sm-12 col-md-12 col-lg-12":a>2&&a<=4?"col-sm-6 col-md-6 col-lg-6":"col-sm-4 col-md-4 col-lg-4"},a.calculateColumnWidthMoz=function(a,t,e){return 1==t?"col-sm-12 col-md-12 col-lg-12":t>=2&&t<=4?"col-sm-4 col-md-4 col-lg-4":t>=5?"col-sm-2 col-md-2 col-lg-2":void 0},a.calculateRowHeight=function(a,t,e,r,s){a.showComparision=!0},a.calculateSummaryHeight=function(a,t){var e;return e=1==t&&1==a?20:100/a,{height:e+"%"}},a.calculateSummaryHeightMoz=function(a,t){var e;return e=1==t&&1==a?20:100/a,{height:e+"%"}},a.calculateChartHeight=function(e,r,s){t(function(){var t;t=1==r&&1==e?80:100-100/e,a.chartOptions=t+"%";var i=document.getElementById("updateHeight"+s);i.style.margin="0px",i.style.height=t+"%"},1e3)}},e.populateDashboardWidgets=function(){a.dashboard.widgets=[],a.dashboard.widgetData=[],r({method:"GET",url:"/api/v1/dashboards/widgets/null",params:{reportId:i.params.id}}).then(function(t){if($(".dr-dates").attr("contenteditable","false"),t.data)if(t.data.error)isExportOptionSet=0,swal({title:"",text:'<span style = "sweetAlertFont">The requested dashboard has no widgets</span>',html:!0});else{h=t.data.widgetsList._id,a.dashboard.dashboardName=t.data.dashboardDetails.name;var e=[],r=t.data.widgetsList;for(i in r)1==r[i].visibility&&e.push(r[i]);e.length>0?(a.loadedWidgetCount=0,a.widgetsPresent=!0,a.spinerEnable=!1):(a.widgetsPresent=!1,a.spinerEnable=!1);var s=[];for(var i in e)s.push(n.widgetHandler(e[i],{startDate:moment(a.dashboardCalendar.start_date).format("YYYY-MM-DD"),endDate:moment(a.dashboardCalendar.end_date).format("YYYY-MM-DD")},"public")),a.dashboard.widgets.push({row:"undefined"!=typeof e[i].row?e[i].row:0,col:"undefined"!=typeof e[i].col?e[i].col:0,sizeY:"undefined"!=typeof e[i].size?e[i].size.h:2,sizeX:"undefined"!=typeof e[i].size?e[i].size.w:2,minSizeY:"undefined"!=typeof e[i].minSize?e[i].minSize.h:1,minSizeX:"undefined"!=typeof e[i].minSize?e[i].minSize.w:1,maxSizeY:"undefined"!=typeof e[i].maxSize?e[i].maxSize.h:3,maxSizeX:"undefined"!=typeof e[i].maxSize?e[i].maxSize.w:3,name:"undefined"!=typeof e[i].name?e[i].name:"",widgetType:"undefined"!=typeof e[i].widgetType?e[i].widgetType:"",isAlert:"undefined"!=typeof e[i].isAlert&&e[i].isAlert,id:e[i]._id,visibility:!1,channelName:"undefined"!=typeof e[i].channelName?e[i].channelName:""}),a.dashboard.widgetData.push({id:e[i]._id,chart:[],visibility:!1,dataerror:!1,name:"undefined"!=typeof e[i].name?e[i].name:"",color:"undefined"!=typeof e[i].color?e[i].color:""}),s[i].then(function(t){var e=a.dashboard.widgets.map(function(a){return a.id}).indexOf(t.id);a.dashboard.widgetData[e]=t,isExportOptionSet=1,a.loadedWidgetCount++},function(t){401===t.status?($("#widgetData-"+t.data.id).hide(),1003===t.data.errorstatusCode&&($("#widgetData-"+t.data.id).hide(),$("#errorWidgetData-"+t.data.id).hide(),$("#errorWidgetTokenexpire-"+t.data.id).show(),a.widgetErrorCode=1,a.loadedWidgetCount++,isExportOptionSet=0)):(a.loadedWidgetCount++,"undefined"!=typeof t.data.id&&($("#widgetData-"+t.data.id).hide(),$("#errorWidgetData-"+t.data.id).show(),$("#errorWidgetTokenexpire-"+t.data.id).hide(),isExportOptionSet=0))})}else isExportOptionSet=0,swal({title:"",text:'<span style = "sweetAlertFont">The requested dashboard has been deleted</span>',html:!0})},function(a){swal({title:"",text:'<span style = "sweetAlertFont">Error in populating widgets! Please refresh the dashboard again</span>',html:!0}),isExportOptionSet=0})},a.toggleLegends=function(t){for(var e in a.dashboard.widgetData)if(a.dashboard.widgetData[e].id==t)for(var r in a.dashboard.widgetData[e].chart)"undefined"!=typeof a.dashboard.widgetData[e].chart[r].options.chart.showLegend&&(1==a.dashboard.widgetData[e].chart[r].options.chart.showLegend?a.dashboard.widgetData[e].chart[r].options.chart.showLegend=!1:a.dashboard.widgetData[e].chart[r].options.chart.showLegend=!0)}}function NavigationController(a,t,e,r,s){s.getReportBuilder=function(){e({method:"POST",url:"/api/v1/updateUserSubscription?buster="+new Date}).then(function(t){a.canAccessReportBuilder=t.data.response.reportBuilder},function(t){a.dashboard.dashboardName=null,swal({title:"",text:'<span style="sweetAlertFont">Something went wrong! Please reload the dashboard</span>',html:!0})})},s.getReportBuilder(),t.includes("app.reporting.dashboard"),a.stateValidation=function(r){switch(r){case"recommendedDashboard":e({method:"GET",url:"/api/v1/subscriptionLimits?requestType=dashboards"}).then(function(a){a.data.isExpired===!1?a.data.availableDashboards>0?t.go("app.reporting."+r):toastr.info("You have reached your Dashboards limit. Please upgrade to create more Dashboards"):toastr.info("Please renew!")},function(a){swal({title:"",text:"<span style='sweetAlertFont'>Something went wrong! Please try again!</span> .",html:!0})});break;case"chooseDashboardType":e({method:"GET",url:"/api/v1/subscriptionLimits?requestType=dashboards"}).then(function(a){a.data.isExpired===!1?a.data.availableDashboards>0?t.go("app.reporting."+r):toastr.info("You have reached your Dashboards limit. Please upgrade to create more Dashboards"):toastr.info("Please renew !")},function(a){swal({title:"",text:"<span style='sweetAlertFont'>Something went wrong! Please try again!</span> .",html:!0})});break;case"buildReports":a.canAccessReportBuilder?t.go("app.reporting."+r):swal({title:"",text:"Sorry! The Report builder feature is only available on the Agency Plan.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Upgrade",closeOnConfirm:!0},function(){t.go("app.reporting.upgrade")});break;case"insights":toastr.info("Coming Soon")}},a.addRecommendedDashboard=function(){e({method:"GET",url:"/api/v1/subscriptionLimits?requestType=dashboards"}).then(function(a){a.data.isExpired===!1?a.data.availableDashboards>0?t.go("app.reporting.dashboard.recommendedDashboard"):toastr.info("You have reached your Dashboards limit. Please upgrade to create more Dashboards"):toastr.info("Please renew!")},function(a){swal({title:"",text:"<span style='sweetAlertFont'>Something went wrong! Please try again!</span> .",html:!0})})},$(".insightsModalContent").on("click",function(a){$(".navbar").css("z-index","1"),$(".md-overlay").css("background","rgba(0,0,0,0.5)"),$("#insightsModalContent").addClass("md-show")}),$(".addRemoveModalContent").on("click",function(a){$(".navbar").css("z-index","1"),$(".md-overlay").css("background","rgba(0,0,0,0.5)"),$("#addRemoveModalContent").addClass("md-show")})}config.$inject=["$translateProvider"],pageTitle.$inject=["$rootScope","$timeout"],sideNavigation.$inject=["$timeout"],iboxTools.$inject=["$timeout"],minimalizaSidebar.$inject=["$timeout"],icheck.$inject=["$timeout"],chatSlimScroll.$inject=["$timeout"],fullScroll.$inject=["$timeout"],iboxToolsFullScreen.$inject=["$timeout"],slimScroll.$inject=["$timeout"],hcChart.$inject=["$timeout"],fileModel.$inject=["$parse"],MainCtrl.$inject=["$scope","$rootScope","$http","$timeout"],CustomWidgetController.$inject=["$scope","$uibModal"],SharedDashboardController.$inject=["$scope","$timeout","$rootScope","$http","$window","$state","$stateParams","createWidgets","$q"],NavigationController.$inject=["$scope","$state","$http","$stateParams","$rootScope"],function(){angular.module("inspinia",["ui.router","oc.lazyLoad","ui.bootstrap","pascalprecht.translate","ngIdle","ngSanitize","ngAnimate","ui.bootstrap.tpls","gridster","xeditable","smart-table","angular-intro"])}(),angular.module("inspinia").config(config),angular.module("inspinia").directive("pageTitle",pageTitle).directive("sideNavigation",sideNavigation).directive("iboxTools",iboxTools).directive("minimalizaSidebar",minimalizaSidebar).directive("vectorMap",vectorMap).directive("sparkline",sparkline).directive("icheck",icheck).directive("ionRangeSlider",ionRangeSlider).directive("dropZone",dropZone).directive("responsiveVideo",responsiveVideo).directive("chatSlimScroll",chatSlimScroll).directive("customValid",customValid).directive("fullScroll",fullScroll).directive("closeOffCanvas",closeOffCanvas).directive("clockPicker",clockPicker).directive("landingScrollspy",landingScrollspy).directive("fitHeight",fitHeight).directive("iboxToolsFullScreen",iboxToolsFullScreen).directive("slimScroll",slimScroll).directive("channelDiv",channelDiv).directive("chartHeight",chartHeight).directive("sizeWatcher",sizeWatcher).directive("expSizeWatcher",expSizeWatcher).directive("hcChart",hcChart).directive("fileModel",fileModel);var showMetricApp=angular.module("inspinia");showMetricApp.service("createWidgets",["$http","$q",function(a,t){this.widgetHandler=function(e,r,s){function i(e,r){function s(e,r){var s=t.defer();if(r)var i={method:"GET",url:"/api/v1/widget/"+e+"?isPublic="+r,timeout:y.promise,cancel:y};else var i={method:"GET",url:"/api/v1/widget/"+e,timeout:y.promise,cancel:y};return a(i).then(function(a){s.resolve(a.data[0])},function(a){s.reject(a)}),s.promise}var i=t.defer(),o=[];for(var n in e.widgets){var c=e.widgets[n].widgetType;"basic"!=c&&"adv"!=c&&"fusion"!=c&&"custom"!=c||o.push(s(e.widgets[n].widgetId,r))}return t.all(o).then(function(a){i.resolve(a)},function(a){i.reject(a)}),i.promise}function o(e,r){var s=t.defer(),i=[],o=0;return a({method:"POST",url:"/api/v1/customWidget/data/"+e._id,data:{startDate:r.startDate,endDate:r.endDate},timeout:y.promise,cancel:y}).then(function(a){o++;for(var t in a.data)a.data[t].widgetId==e._id&&i.push({_id:a.data[t]._id,chartName:"Custom Data "+o,
chartType:a.data[t].chartType,widgetId:a.data[t].widgetId,chartData:a.data[t].data,intervalType:a.data[t].intervalType,metricsCount:a.data[t].metricsCount});e.charts=i,s.resolve(e)},function(a){s.reject(a)}),s.promise}function n(a){var e=t.defer(),r=[];for(var s in a.charts){var i=[];if("line"==a.charts[s].chartType||"bar"==a.charts[s].chartType||"column"==a.charts[s].chartType||"area"==a.charts[s].chartType)for(var o in a.charts[s].chartData){var n=0;for(var c in r)if(r[c].key==a.charts[s].chartData[o].name){i=r[c].values;var h={x:moment(a.charts[s].chartData[o].date),y:a.charts[s].chartData[o].values};i.push(h),i.sort(function(a,t){var e=new Date(a.x),r=new Date(t.x);return e-r}),r[c].values=i,n=1}if(1!=n){i=[];var h={x:moment(a.charts[s].chartData[o].date),y:a.charts[s].chartData[o].values};i.push(h),i.sort(function(a,t){var e=new Date(a.x),r=new Date(t.x);return e-r}),r.push({type:a.charts[s].chartType,values:i,key:a.charts[s].chartData[o].name,color:null})}}else if("pie"==a.charts[s].chartType)for(var o in a.charts[s].chartData){var n=0;for(c in r){var l=0;r[c].key==a.charts[s].chartData[o].name&&(l=parseInt(r[c].y),r[c].y=parseInt(l)+parseInt(a.charts[s].chartData[o].values),n=1)}1!=n&&r.push({type:a.charts[s].chartType,y:parseInt(a.charts[s].chartData[o].values),key:a.charts[s].chartData[o].name,color:null})}}return e.resolve(r),e.promise}function c(a,e){var r,i=t.defer();return r=h(a,e,s),r.then(function(t){a.charts=t,i.resolve(a)},function(a){i.reject(a)}),i.promise}function h(e,r,s){var i=t.defer(),o=[];if(s)var n={method:"POST",url:"/api/v1/widgets/data/"+e._id,data:{startDate:r.startDate,endDate:r.endDate,params:"public"}};else var n={method:"POST",url:"/api/v1/widgets/data/"+e._id,data:{startDate:r.startDate,endDate:r.endDate,widId:e._id},timeout:y.promise,cancel:y};return a(n).then(function(a){for(var t in e.charts)for(var r in a.data)String(e.charts[t].metrics[0].metricId)===String(a.data[r].metricId)&&o.push({channelId:e.charts[t].channelId,chartType:"undefined"!=typeof e.charts[t].metrics[0].chartType?e.charts[t].metrics[0].chartType:"",chartSubType:void 0!=e.charts[t].metrics[0].subChartType?e.charts[t].metrics[0].subChartType:"",chartName:e.charts[t].name,chartColour:e.charts[t].metrics[0].color,chartOptions:e.charts[t].metrics[0].chartOptions,chartMetricId:a.data[r].metricId,metricDetails:a.data[r].metricDetails,chartObjectId:a.data[r].objectId,chartObjectTypeId:e.charts[t].metrics[0].objectTypeId,chartObjectName:e.charts[t].objectName,chartData:a.data[r].data});i.resolve(o)},function(a){g.widgets.length>0?(k=g.widgets.map(function(a){return a._id}).indexOf(a._id),k!==-1&&(a.data.id=g._id),i.reject(a)):i.reject(a)}),i.promise}function l(a,e){function r(a,t){return t>a?t-a:a-t}function r(a,t){return t>a?t-a:a-t}function s(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}function i(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}function s(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}function i(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}function s(a){for(var t=0,e=0;e<a.length;e++)t+=parseFloat(a[e].value);return t}var o=t.defer(),n=[],c={Facebook:"FB",Twitter:"TW","Google Analytics":"GA",FacebookAds:"FBAds",GoogleAdwords:"GAds",Instagram:"In",Pinterest:"Pi",Mailchimp:"Mc",Vimeo:"Vi",Linkedin:"Lin",YouTube:"YT",Moz:"Moz","Google Sheets":"GSheet",Aweber:"AW"},h=-1,l=0;if(a.charts.length>0){for(var p in a.charts){var d=a.charts[p].chartType;switch(d){case"bounceRateArea":var f=[];if("object"==typeof a.charts[p].chartData[0].total)for(var m=0;m<a.charts[p].chartData.length;m++){var y=parseFloat(a.charts[p].chartData[m].total[0].bounces),g=parseFloat(a.charts[p].chartData[m].total[0].sessions);if(0===g)var v=y;else var v=(y/g*100).toFixed(2);f.push({x:moment(a.charts[p].chartData[m].date),y:v,bounces:y,sessions:Math.round(100*g)/100})}a.charts[p].chartData=f;break;case"costPerClick":case"costPerThosuandImpressions":case"clickThroughRate":case"ConversionRate":case"costPerConversion":var f=[];if("costPerClick"==d)var D="Cost",b="Clicks";else if("costPerThosuandImpressions"==d)var D="Cost",b="Impressions";else if("clickThroughRate"==d)var D="Clicks",b="Impressions";else if("ConversionRate"==d)var D="Conversions",b="Clicks";else if("costPerConversion"==d)var D="Cost",b="Conversions";for(var m=0;m<a.charts[p].chartData.length;m++){var w=0,T=0;if("object"==typeof a.charts[p].chartData[m].total[0]&&(w="Cost"===D?parseFloat(a.charts[p].chartData[m].total[0][D]/1e6).toFixed(2):parseFloat(a.charts[p].chartData[m].total[0][D]),T=parseFloat(a.charts[p].chartData[m].total[0][b])),0===w)var k=w;else if("costPerThosuandImpressions"==d)var k=(w/T*1e3).toFixed(2);else if("clickThroughRate"==d||"clickThroughRate"==d||"costPerConversion"==d)var k="Infinity"===(w/T*100).toFixed(2)?0:(w/T*100).toFixed(2);else var k=(w/T).toFixed(2);f.push({x:moment(a.charts[p].chartData[m].date),y:k,dividend:w,divisor:T})}a.charts[p].chartData=f;break;case"line":case"area":case"bar":case"column":case"stackcolumn":case"mozoverview":case"negativeBar":if("object"==typeof a.charts[p].chartData[0].total){var x,C=a.charts[p].chartCode;for(ta in a.charts[p].metricDetails.objectTypes)a.charts[p].metricDetails.objectTypes[ta].objectTypeId==a.charts[p].chartObjectTypeId&&(x=a.charts[p].metricDetails.objectTypes[ta].meta.endpoint,a.charts[p].metricDetails.objectTypes[ta].meta.endpoint=void 0!=a.charts[p].metricDetails.objectTypes[ta].meta.endpointDisplay?a.charts[p].metricDetails.objectTypes[ta].meta.endpointDisplay:a.charts[p].metricDetails.objectTypes[ta].meta.endpoint);var N=[];if(0!=x.length)for(er in x){var F=x[er],A=[];for(q in a.charts[p].chartData){var S,O=0;if(null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length))for(var E in a.charts[p].chartData[q].total)if(E.search("/")>-1){S=E.split("/");for(var M in S)S[M]==F&&(O+=parseFloat(a.charts[p].chartData[q].total[E]))}else E==F&&(O=a.charts[p].chartData[q].total[F]);A.push({x:moment(a.charts[p].chartData[q].date),y:Math.round(100*O)/100})}N.push(A)}else{var A=[];if("fbTopReferringDomain"===a.charts[p].chartSubType){for(var j=[],I=0;I<a.charts[p].chartData.length;I++)if("object"==typeof a.charts[p].chartData[I].total)for(var P in a.charts[p].chartData[I].total)j.push({domain:P,value:a.charts[p].chartData[I].total[P]});var H=_.groupBy(j,"domain");for(var W in H){for(var R=W,B=0,m=0;m<H[W].length;m++)B+=parseFloat(H[W][m].value);A.push({x:R,y:isNaN(B)?0:B})}}else for(q in a.charts[p].chartData){var L,S,O=0,z=a.charts[p].chartData[q].total;if(null!=a.charts[p].chartData[q].total&&0!=Object.keys(a.charts[p].chartData[q].total).length){for(var E in a.charts[p].chartData[q].total){if(E.search("/")>-1){S=E.split("/");for(var M in S)O+=parseFloat(a.charts[p].chartData[q].total[E]),L=E}else O=a.charts[p].chartData[q].total[F];L=E}A.push({x:L,y:Math.round(100*O)/100})}}N.push(A)}var Y=[];if("userinteractions_clicks"==C&&"Facebook"==a.channelName){for(var m=0;m<N.length;m++)for(var V=0;V<N[m].length;V++)Y[V]||(Y[V]={x:0,y:0}),Y[V].x=N[0][V].x,Y[V].y+=N[m][V].y;N=Y}a.charts[p].chartData=N}else{var A=[];for(var q in a.charts[p].chartData)A.push({x:moment(a.charts[p].chartData[q].date),y:null!=a.charts[p].chartData[q].total?Math.round(100*a.charts[p].chartData[q].total)/100:0});a.charts[p].chartData=A}if("fbTopReferringDomain"===a.charts[p].chartSubType){var G=_.sortBy(A,"y").reverse(),U=[];if(A.length<10)var J=A.length-1;else var J=9;for(var I=0;I<=J;I++)U.push({x:G[I].x,y:G[I].y});a.charts[p].chartData=U}break;case"reachVsImpressions":case"engagedUsersReach":if("Total Impressions"==a.charts[p].chartName||"Engaged Users"==a.charts[p].chartName){for(var X=[],K=[],m=0;m<a.charts.length;m++)"Total Impressions"!=a.charts[m].chartName&&"Engaged Users"!=a.charts[m].chartName||(X=a.charts[m].chartData),"Total Reach"==a.charts[m].chartName&&(K=a.charts[m].chartData);var Z=[];for(var Q in X){var aa=X[Q].total/K[Q].total*100;!isNaN(aa)&&isFinite(aa)||(aa=0),Z.push({x:moment(X[Q].date),y:parseFloat(aa).toFixed(2),imp:X[Q].total,rea:K[Q].total})}a.charts[p].chartData=Z}else{var A=[];for(var q in a.charts[p].chartData)A.push({x:moment(a.charts[p].chartData[q].date),y:null!=a.charts[p].chartData[q].total?a.charts[p].chartData[q].total:0});a.charts[p].chartData=A}break;case"trafficSourcesBrkdwnLine":if("object"==typeof a.charts[p].chartData[0].total){var x;for(ta in a.charts[p].metricDetails.objectTypes)a.charts[p].metricDetails.objectTypes[ta].objectTypeId==a.charts[p].chartObjectTypeId&&(x=a.charts[p].metricDetails.objectTypes[ta].meta.endpoint);var N=[];for(q in a.charts[p].chartData){var S,O=0;if(null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length))for(var E in a.charts[p].chartData[q].total)a.charts[p].chartData[q].total["social/Yes"]="undefined"!=typeof a.charts[p].chartData[q].total["social/Yes"]?Number(a.charts[p].chartData[q].total["social/Yes"]):0,E.search("/")>-1&&(S=E.split("/"),"Yes"==S[1]&&(a.charts[p].chartData[q].total["social/Yes"]+=Number(a.charts[p].chartData[q].total[E]),a.charts[p].chartData[q].total[E]=0))}for(er in x){var F=x[er],A=[];for(q in a.charts[p].chartData){var S,O=0;if(null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length))for(var E in a.charts[p].chartData[q].total)if(E.search("/")>-1){S=E.split("/");for(var M in S)S[M]==F&&(O+=parseFloat(a.charts[p].chartData[q].total[E]))}else E==F&&(O=a.charts[p].chartData[q].total[F]);A.push({x:moment(a.charts[p].chartData[q].date),y:Math.round(100*O)/100})}N.push(A)}a.charts[p].chartData=N}else{var A=[];for(var q in a.charts[p].chartData)A.push({x:moment(a.charts[p].chartData[q].date),y:null!=a.charts[p].chartData[q].total?Math.round(100*a.charts[p].chartData[q].total)/100:0});a.charts[p].chartData=A}break;case"pie":if("object"==typeof a.charts[p].chartData[0].total){var x=[];for(var ta in a.charts[p].metricDetails.objectTypes)a.charts[p].metricDetails.objectTypes[ta].objectTypeId==a.charts[p].chartObjectTypeId&&(x=a.charts[p].metricDetails.objectTypes[ta].meta.endpoint);var N=[];for(er in x){var F=x[er];A=[];var O=0;for(q in a.charts[p].chartData)if(null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length))for(var E in a.charts[p].chartData[q].total)if(E.search("/")>-1){S=E.split("/");for(var M in S)S[M]==F&&(O+=parseFloat(a.charts[p].chartData[q].total[E]))}else E==F&&(O+=parseFloat(a.charts[p].chartData[q].total[F]));A.push({y:parseFloat(O).toFixed(2)%Math.floor(parseFloat(O).toFixed(2))>0?parseFloat(O).toFixed(2):parseFloat(O).toFixed(2)>1?parseInt(O):parseFloat(O)>0?parseFloat(O).toFixed(2):parseInt(O)}),N.push(A)}a.charts[p].chartData=N}else{var O=0;for(q in a.charts[p].chartData)O+=parseFloat(a.charts[p].chartData[q].total);A.push({y:parseFloat(O).toFixed(2)%Math.floor(parseFloat(O).toFixed(2))>0?parseFloat(O).toFixed(2):parseFloat(O).toFixed(2)>1?parseInt(O):parseFloat(O)>0?parseFloat(O).toFixed(2):parseInt(O)}),a.charts[p].chartData=A}break;case"trafficSourcesBrkdwnPie":if("object"==typeof a.charts[p].chartData[0].total){var x=[];for(ta in a.charts[p].metricDetails.objectTypes)a.charts[p].metricDetails.objectTypes[ta].objectTypeId==a.charts[p].chartObjectTypeId&&(x=a.charts[p].metricDetails.objectTypes[ta].meta.endpoint);var N=[];for(q in a.charts[p].chartData){var S,O=0;if(null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length))for(var E in a.charts[p].chartData[q].total)a.charts[p].chartData[q].total["social/Yes"]="undefined"!=typeof a.charts[p].chartData[q].total["social/Yes"]?Number(a.charts[p].chartData[q].total["social/Yes"]):0,E.search("/")>-1&&(S=E.split("/"),"Yes"==S[1]&&(a.charts[p].chartData[q].total["social/Yes"]+=Number(a.charts[p].chartData[q].total[E]),a.charts[p].chartData[q].total[E]=0))}for(er in x){var F=x[er];A=[];var O=0;for(q in a.charts[p].chartData)if(null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length))for(var E in a.charts[p].chartData[q].total)if(E.search("/")>-1){S=E.split("/");for(var M in S)S[M]==F&&(O+=parseFloat(a.charts[p].chartData[q].total[E]))}else E==F&&(O+=a.charts[p].chartData[q].total[F]);A.push({y:Math.round(100*O)/100}),N.push(A)}a.charts[p].chartData=N}else{var O=0;for(q in a.charts[p].chartData)O+=parseInt(a.charts[p].chartData[q].total);A.push({y:Math.round(100*O)/100}),a.charts[p].chartData=A}break;case"instagramPosts":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){var ea="images",ra="thumbnail",sa="likes",ia="comments",B="count",oa="caption",na="text",ca="link",ha="url",N=[];for(q in a.charts[p].chartData){var A={date:moment(a.charts[p].chartData[q].date).format("DD-MMM-YYYY"),image:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[ea]&&null!=a.charts[p].chartData[q].total[ea][ra]&&"undefined"!=typeof a.charts[p].chartData[q].total[ea][ra][ha]?a.charts[p].chartData[q].total[ea][ra][ha]:"",postComment:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[oa]&&"undefined"!=typeof a.charts[p].chartData[q].total[oa][na]?a.charts[p].chartData[q].total[oa][na]:"",likes:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[sa]&&"undefined"!=typeof a.charts[p].chartData[q].total[sa][B]?a.charts[p].chartData[q].total[sa][B]:0,comments:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[ia]&&"undefined"!=typeof a.charts[p].chartData[q].total[ia][B]?a.charts[p].chartData[q].total[ia][B]:0,links:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&"undefined"!=typeof a.charts[p].chartData[q].total[ca]?a.charts[p].chartData[q].total[ca]:""};N.push(A)}a.charts[p].chartData=N}break;case"instagramEngagements":var la=a.charts[p].chartSubType;if("instagramPostFrequency"===la||"instagramPostTypes"===la||"instagramPostEngagement"===la){var pa=0,sa="likes",ia="comments",ua=[];if("undefined"!=typeof a.charts[p].chartData[0])for(var m=0;m<a.charts[p].chartData.length;m++){pa++;var da=a.charts[p].chartData[m].total[sa].count,fa=a.charts[p].chartData[m].total[ia].count,ma=da+fa,W=a.charts[p].chartData[m].total.type;ua.push({type:W,engagement:ma})}for(var ya={},ga={},I=0;I<ua.length;I++){if(ya.hasOwnProperty(ua[I].type)){var W=ua[I].type;ya[W]+=1}else{var W=ua[I].type;ya[W]=1}if(ga.hasOwnProperty(ua[I].type)){var P=ua[I].type;ga[P]+=ua[I].engagement}else{var P=ua[I].type;ga[P]=ua[I].engagement}}}"instagramPostFrequency"===la?a.charts[p].chartData=pa:"instagramPostEngagement"===la?a.charts[p].chartData=ga:"instagramPostTypes"===la&&(a.charts[p].chartData=ya);break;case"highEngagementTweets":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){var sa="favorite_count",va="retweet_count",na="text",ca="expanded_url",N=[];for(q in a.charts[p].chartData){var A={date:moment(new Date(a.charts[p].chartData[q].date)).format("DD-MMM-YYYY"),likes:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&"undefined"!=typeof a.charts[p].chartData[q].total[sa]?a.charts[p].chartData[q].total[sa]:0,reTweet:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&"undefined"!=typeof a.charts[p].chartData[q].total[va]?a.charts[p].chartData[q].total[va]:0,postComment:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&"undefined"!=typeof a.charts[p].chartData[q].total[na]?a.charts[p].chartData[q].total[na]:0,links:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&"undefined"!=typeof a.charts[p].chartData[q].total.entities?a.charts[p].chartData[q].total.entities:0};N.push(A)}a.charts[p].chartData=N}break;case"highestEngagementLinkedIn":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){var sa="likes",Da="clicks",ba="impressions",wa="shares",ia="comments",na="text",ha="url",N=[];for(q in a.charts[p].chartData){var A={date:moment(a.charts[p].chartData[q].date).format("DD-MMM-YYYY"),link:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[ha]&&"undefined"!=typeof a.charts[p].chartData[q].total[ha]?a.charts[p].chartData[q].total[ha]:"",postComment:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[na]&&"undefined"!=typeof a.charts[p].chartData[q].total[na]?a.charts[p].chartData[q].total[na]:"",impressions:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[ba]&&"undefined"!=typeof a.charts[p].chartData[q].total[ba]?a.charts[p].chartData[q].total[ba]:0,shares:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[wa]&&"undefined"!=typeof a.charts[p].chartData[q].total[wa]?a.charts[p].chartData[q].total[wa]:0,likes:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[sa]&&"undefined"!=typeof a.charts[p].chartData[q].total[sa]?a.charts[p].chartData[q].total[sa]:0,comments:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[ia]&&"undefined"!=typeof a.charts[p].chartData[q].total[ia]?a.charts[p].chartData[q].total[ia]:0,clicks:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[Da]&&"undefined"!=typeof a.charts[p].chartData[q].total[Da]?a.charts[p].chartData[q].total[Da]:0};N.push(A)}a.charts[p].chartData=N}break;case"gaTopPagesByVisit":;if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++){var ka=$.map(a.charts[p].chartData[I].total,function(a,t){return[a]});Ta=Ta.concat(ka)}var xa="pageTitle",N=[],H=_.groupBy(Ta,"pagePath");for(var W in H){for(var Ca=W,g=0,Na=0,Fa=0,Aa=0,y=0,m=0;m<H[W].length;m++)g+=parseFloat(H[W][m].sessions),Na+=parseFloat(H[W][m].pageviews),y+=parseFloat(H[W][m].bounces),Aa+=parseFloat(H[W][m].exits),Fa+=parseFloat(H[W][m].timeOnPage);var Sa=r(Na,Aa);if(0===g)var v=y;else var v=(y/g*100).toFixed(2);if(0===Sa)var Oa=Fa;else var Oa=Fa/Sa;Oa=Math.ceil(Oa);var Ea=new Date(null);Ea.setSeconds(Oa),Oa=Ea.toISOString().substr(11,8);var Ca={bouncesRate:y,pagePath:Ca,sessions:g,pageTitle:H[W][0][xa],bouncesRate:v,avgTimeOnpage:Oa,pageviews:Na};N.push(Ca)}N.sort(function(a,t){return parseFloat(a.pageviews)-parseFloat(t.pageviews)}),N.reverse(),a.charts[p].chartData=N}break;case"gaPageContentEfficiencyTable":;if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++){var ka=$.map(a.charts[p].chartData[I].total,function(a,t){return[a]});Ta=Ta.concat(ka)}var xa="pageTitle",N=[],H=_.groupBy(Ta,"pagePath");for(var W in H){for(var Ca=W,Ma=0,Na=0,ja=0,Ia=0,Fa=0,Aa=0,y=0,g=0,Pa=0,Ha=0,m=0;m<H[W].length;m++){Ma+=parseFloat(H[W][m].uniquePageviews),g+=parseFloat(H[W][m].sessions),Na+=parseFloat(H[W][m].pageviews),y+=parseFloat(H[W][m].bounces),Aa+=parseFloat(H[W][m].exits),Fa+=parseFloat(H[W][m].timeOnPage),Ha+=H[W][m].pageviews*H[W][m].entranceRate,ja+=parseFloat(H[W][m].pageValue);var xa=H[W][m].pageTitle}var Sa=r(Na,Aa);if(0===g)var v=y;else var v=(y/g*100).toFixed(2);if(0===Sa)var Oa=Fa;else var Oa=Fa/Sa;Pa=Ha/Na;var Ca={uniquePageviews:Ma,sessions:g,pageviews:Na,pagePath:Ca,avgTimeOnPage:Oa,pageTitle:xa,entranceRate:Pa.toFixed(2),pageviews:Na,pageValue:ja,bounceRate:v},Ea=new Date(null);Ea.setSeconds(Ca.avgTimeOnPage),Ca.avgTimeOnPage=Ea.toISOString().substr(11,8),N.push(Ca)}N.sort(function(a,t){return parseFloat(a.pageviews)-parseFloat(t.pageviews)}),N.reverse(),a.charts[p].chartData=N}break;case"gaPageTechnicalEfficiencyTable":;if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++){var ka=$.map(a.charts[p].chartData[I].total,function(a,t){return[a]});Ta=Ta.concat(ka)}var xa="pageTitle",N=[],H=_.groupBy(Ta,"pagePath");for(var W in H){for(var Ca=W,Na=0,Wa=0,Ra=0,Ia=0,g=0,y=0,Ba=0,m=0;m<H[W].length;m++){Ba+=parseFloat(H[W][m].pageLoadTime),g+=parseFloat(H[W][m].sessions),y+=parseFloat(H[W][m].bounces),Na+=parseFloat(H[W][m].pageviews),Ra+=parseFloat(H[W][m].pageLoadSample),Ia+=parseFloat(H[W][m].bounceRate);var xa=H[W][m].pageTitle}var Wa=(Ba/Ra/1e3).toFixed(2);if(isNaN(Wa)&&(Wa=0),0===g)var v=y;else var v=y/g*100;Wa=Math.ceil(Wa);var Ca={pageviews:Na,sessions:g,pagePath:Ca,pageTitle:xa,avgPageLoadTime:Wa.toFixed(2),pageLoadSample:Ra,pageviews:Na,bounceRate:v.toFixed(2)};N.push(Ca)}N.sort(function(a,t){return parseFloat(a.pageviews)-parseFloat(t.pageviews)}),N.reverse(),a.charts[p].chartData=N}break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":;if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++){var ka=$.map(a.charts[p].chartData[I].total,function(a,t){return[a]});Ta=Ta.concat(ka)}var N=[],H=_.groupBy(Ta,"sourceMedium");for(var W in H){for(var _a=W,g=0,La=0,za=0,Ya=0,Ra=0,$a=0,m=0;m<H[W].length;m++)g+=parseFloat(H[W][m].sessions),La+=parseFloat(H[W][m].users),za+=parseFloat(H[W][m].newUsers),Ya+=parseFloat(H[W][m].goalConversionRateAll),Ra+=parseFloat(H[W][m].pageLoadSample),$a+=parseFloat(H[W][m].goalValuePerSession),Ia+=parseFloat(H[W][m].bounceRate);var Ca={sourceMedium:_a,sessions:g,users:La,newUsers:za,goalValuePerSession:$a,goalConversionRateAll:Ya.toFixed(2)};N.push(Ca)}N.sort(function(a,t){return parseFloat(a.sessions)-parseFloat(t.sessions)}),N.reverse(),a.charts[p].chartData=N}break;case"pageContentEfficiency":;if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++){var Va=$.isEmptyObject(a.charts[p].chartData[I].total);if(1!=Va){var ka=$.map(a.charts[p].chartData[I].total,function(a,t){return[a]});Ta=Ta.concat(ka)}}var xa="pageTitle",N=[],H=_.groupBy(Ta,"pagePath");for(var W in H){for(var v,Ma=0,Na=0,y=0,g=0,Pa=0,Ha=0,m=0;m<H[W].length;m++)Ma+=parseFloat(H[W][m].uniquePageviews),g+=parseFloat(H[W][m].sessions),Na+=parseFloat(H[W][m].pageviews),y+=parseFloat(H[W][m].bounces),Ha+=H[W][m].pageviews*H[W][m].entranceRate,xa=H[W][m].pageTitle;v=0===g?y:(y/g*100).toFixed(2),Pa=Ha/Na;var Ca={bounceRate:v,pageTitle:xa,uniquePageviews:Ma.toFixed(2),pageviews:Na,entranceRate:Pa.toFixed(2)};N.push(Ca)}N.sort(function(a,t){return parseFloat(a.uniquePageviews)-parseFloat(t.uniquePageviews)}),N.reverse();var qa=[];if(N.length>10)for(var m=0;m<10;m++)qa.push(N[m]);else for(var m=0;m<N.length;m++)qa.push(N[m]);a.charts[p].chartData=qa}break;case"gaSocialMediaOverview":;if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++){var ka=$.map(a.charts[p].chartData[I].total,function(a,t){return[a]});Ta=Ta.concat(ka)}var N=[];if("Time spent on site from various sources"==String(a.charts[p].chartName)){for(var I=0;I<Ta.length;I++)"Yes"===Ta[I].hasSocialSourceReferral&&(Ta[I].medium="social");var H=_.groupBy(Ta,"medium")}else var H=_.groupBy(Ta,"socialNetwork");for(var W in H){for(var Ga=W,Na=0,g=0,Aa=0,Fa=0,m=0;m<H[W].length;m++)g+=parseFloat(H[W][m].sessions),Na+=parseFloat(H[W][m].pageviews),Aa+=parseFloat(H[W][m].exits),Fa+=parseFloat(H[W][m].timeOnPage);var Ua=Na/g,Ja=Fa/(Na-Aa),Ca={sessions:Number(g),pageviewsPersession:isNaN(Ua)?0:Ua.toFixed(2),socialNetwork:Ga,avgtimeOnPage:isNaN(Ja)?0:Ja.toFixed(2)};"Time spent on site from various sources"==String(a.charts[p].chartName)?"(none)"!=String(Ca.socialNetwork)&&"organic"!=String(Ca.socialNetwork)&&"referral"!=String(Ca.socialNetwork)&&"ppc"!=String(Ca.socialNetwork)&&"social"!=String(Ca.socialNetwork)||N.push(Ca):N.push(Ca)}a.charts[p].chartData=N}break;case"pageTechnicalEfficiency":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++){var Va=$.isEmptyObject(a.charts[p].chartData[I].total);if(1!=Va){var ka=$.map(a.charts[p].chartData[I].total,function(a,t){return[a]});Ta=Ta.concat(ka)}}var xa="pageTitle",N=[],H=_.groupBy(Ta,"pagePath");for(var W in H){for(var Na=0,Wa=0,Ra=0,Ia=0,g=0,y=0,Ba=0,m=0;m<H[W].length;m++){Ba+=parseFloat(H[W][m].pageLoadTime),g+=parseFloat(H[W][m].sessions),y+=parseFloat(H[W][m].bounces),Na+=parseFloat(H[W][m].pageviews),Ra+=parseFloat(H[W][m].pageLoadSample);var xa=H[W][m].pageTitle}var Wa=(Ba/Ra/1e3).toFixed(2);if(isNaN(Wa)&&(Wa=0),0===g)var v=y;else var v=y/g*100;Wa=Math.ceil(Wa);var Ca={bounceRate:v.toFixed(2),pageTitle:xa,PageLoadTime:Wa.toFixed(2),pageviews:Na};N.push(Ca)}N.sort(function(a,t){return parseFloat(a.pageviews)-parseFloat(t.pageviews)}),N.reverse();var qa=[];if(N.length>10)for(var m=0;m<10;m++)qa.push(N[m]);else for(var m=0;m<N.length;m++)qa.push(N[m]);a.charts[p].chartData=qa}break;case"visitorAcquisitionEfficiency":;if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++){var Va=$.isEmptyObject(a.charts[p].chartData[I].total);if(1!=Va){var ka=$.map(a.charts[p].chartData[I].total,function(a,t){return[a]});Ta=Ta.concat(ka)}}var N=[],H=_.groupBy(Ta,"sourceMedium");for(var W in H){for(var _a=W,g=0,La=0,za=0,Ya=0,Ra=0,$a=0,m=0;m<H[W].length;m++)g+=parseFloat(H[W][m].sessions),za+=parseFloat(H[W][m].newUsers),Ya+=parseFloat(H[W][m].goalConversionRateAll),Ra+=parseFloat(H[W][m].pageLoadSample),$a+=parseFloat(H[W][m].goalValuePerSession);var Ca={newUsers:za.toFixed(2),sourceMedium:_a,goalValuePerSession:$a.toFixed(2),goalConversionRateAll:Ya.toFixed(2),sessions:g};N.push(Ca)}N.sort(function(a,t){return parseFloat(a.sessions)-parseFloat(t.sessions)}),N.reverse();var qa=[];if(N.length>10)for(var m=0;m<10;m++)qa.push(N[m]);else for(var m=0;m<N.length;m++)qa.push(N[m]);a.charts[p].chartData=qa}break;case"topReferringSites":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++){var Va=$.isEmptyObject(a.charts[p].chartData[I].total);if(1!=Va){var ka=$.map(a.charts[p].chartData[I].total,function(a,t){return[a]});Ta=Ta.concat(ka)}}var N=[],H=_.groupBy(Ta,"source");for(var W in H){for(var Xa=W,g=0,Ka=0,Za=0,m=0;m<H[W].length;m++)g+=parseFloat(H[W][m].sessions),Za+=parseFloat(H[W][m].goalCompletionsAll);Ka=g/Za;var Ca={source:Xa,goalCompletions:Number(Za.toFixed(2)),goalConversionRate:isNaN(Ya)?0:Ya,sessions:g};N.push(Ca)}N.sort(function(a,t){return parseFloat(t.sessions)-parseFloat(a.sessions)});var qa=[];if("Top referring sites(Table)"==String(a.charts[p].chartName))qa=N;else if(N.length>10)for(var m=0;m<10;m++)qa.push(N[m]);else for(var m=0;m<N.length;m++)qa.push(N[m]);a.charts[p].chartData=qa}break;case"fbReachByAge":var Qa={"13-17":{Female:0,Male:0,Unspecified:0},"18-24":{Female:0,Male:0,Unspecified:0},"25-34":{Female:0,Male:0,Unspecified:0},"35-44":{Female:0,Male:0,Unspecified:0},"45-54":{Female:0,Male:0,Unspecified:0},"55-64":{Female:0,Male:0,Unspecified:0},"65+":{Female:0,Male:0,Unspecified:0}};if("undefined"!=typeof a.charts[p].chartData[0]){if("object"==typeof a.charts[p].chartData[0].total)for(var q in a.charts[p].chartData)for(var P in a.charts[p].chartData[q].total){var at=P.split("."),tt=String(at[0]),et=String(at[1]);"F"==tt&&(tt="Female"),"M"==tt&&(tt="Male"),"U"==tt&&(tt="Unspecified"),void 0!=Qa[et]&&(Qa[et]=Qa[et]||0,Qa[et][tt]+=parseInt(a.charts[p].chartData[q].total[P]))}var rt=[],st=[];for(var W in Qa){rt.push(W);Qa[W].length}var it=rt[0];for(var ot in Qa[it]){var nt={};nt.name=ot;var ct=0;nt.data=[];for(var aa in Qa)nt.data[ct]=Qa[aa][ot],ct++;st.push(nt)}var ht=[Qa,rt,st]}a.charts[p].chartData=ht;break;case"fbStoreType":case"engagementDay":if("fbStoreType"==d&&"undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){var lt=[];for(var q in a.charts[p].chartData){var Ea,z={"page post":0,Other:0};for(var P in a.charts[p].chartData[q].total)"page post"===P?z[P]=a.charts[p].chartData[q].total[P]:z.Other+=a.charts[p].chartData[q].total[P];lt.push({date:moment(a.charts[p].chartData[q].date),total:z})}a.charts[p].chartData=lt}if("engagementDay"==d){var pt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ut={},dt={},ft={},mt={},yt={},gt={},vt={},Dt=[ut,dt,ft,mt,yt,gt,vt];if("undefined"!=typeof a.charts[p].chartData[0]){for(var m=0;m<a.charts[p].chartData.length;m++)if("undefined"!=typeof a.charts[p].chartData[m].date){var bt=new Date(a.charts[p].chartData[m].date),wt=bt.getDay();if(wt<7)for(var P in a.charts[p].chartData[m].total)"comment"!==P&&"like"!==P&&"link"!==P||(Dt[wt].hasOwnProperty(P)?Dt[wt][P]+=a.charts[p].chartData[m].total[P]:(Dt[wt][P]=0,Dt[wt][P]+=a.charts[p].chartData[m].total[P]))}for(var Tt=[],I=0;I<pt.length;I++)Tt.push({date:pt[I],total:Dt[I]})}a.charts[p].chartData=Tt}if("object"==typeof a.charts[p].chartData[0].total){var x;for(ta in a.charts[p].metricDetails.objectTypes)a.charts[p].metricDetails.objectTypes[ta].objectTypeId==a.charts[p].chartObjectTypeId&&(x="fbStoreType"==d?["page post","Other"]:a.charts[p].metricDetails.objectTypes[ta].meta.endpoint);a.charts[p].metricDetails.objectTypes[ta].meta.endpoint=a.charts[p].metricDetails.objectTypes[ta].meta.endpointDisplay;var N=[];for(er in x){var F=x[er],A=[];for(q in a.charts[p].chartData){var S,O=0;if(null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length))for(var E in a.charts[p].chartData[q].total)if(E.search("/")>-1){S=E.split("/");for(var M in S)S[M]==F&&(O+=parseFloat(a.charts[p].chartData[q].total[E]))}else E==F&&(O=a.charts[p].chartData[q].total[F]);(d="engagementDay")?A.push({x:a.charts[p].chartData[q].date,y:O}):A.push({x:moment(a.charts[p].chartData[q].date),y:O})}N.push(A)}a.charts[p].chartData=N}a.charts[p].chartType="line";break;case"fbReachByCountry":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++)Ta.push(a.charts[p].chartData[I].total);for(var kt={},m=0;m<Ta.length;m++)for(var W in Ta[m])kt.hasOwnProperty(W)?kt[W]+=Ta[m][W]:(kt[W]=0,kt[W]+=Ta[m][W]);var xt=[];for(var Ct in kt)xt.push([Ct,kt[Ct]]);xt.sort(function(a,t){return t[1]-a[1]}),kt={Others:0};for(var I=0;I<xt.length;I++)I<5?kt.hasOwnProperty(xt[I][0])?kt[xt[I][0]]=xt[I][1]:(kt[xt[I][0]]=0,kt[xt[I][0]]=xt[I][1]):kt.Others+=xt[I][1]}a.charts[p].chartData=kt;break;case"fbReachByCity":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++)Ta.push(a.charts[p].chartData[I].total);for(var kt={},m=0;m<Ta.length;m++)for(var W in Ta[m]){var Nt=W.split(","),Ft=Nt[0];kt.hasOwnProperty(W)?kt[Ft]+=Ta[m][W]:(kt[Ft]=0,kt[Ft]+=Ta[m][W])}var xt=[];for(var Ct in kt)xt.push([Ct,kt[Ct]]);xt.sort(function(a,t){return t[1]-a[1]}),kt={Others:0};for(var I=0;I<xt.length;I++)I<5?kt.hasOwnProperty(xt[I][0])?kt[xt[I][0]]=xt[I][1]:(kt[xt[I][0]]=0,kt[xt[I][0]]=xt[I][1]):kt.Others+=xt[I][1]}a.charts[p].chartData=kt;break;case"fanSource":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){var At={Others:0,page_profile:0,like_story:0,mobile:0,mobile_ads:0,external_connect:0,recommended_pages:0
};for(var q in a.charts[p].chartData)for(var P in a.charts[p].chartData[q].total)"undefined"!=a.charts[p].chartData[q].total[P]&&("page_profile"===P||"like_story"===P||"mobile"===P||"mobile_ads"===P||"external_connect"===P||"recommended_pages"===P?At[P]+=a.charts[p].chartData[q].total[P]:At.Others+=a.charts[p].chartData[q].total[P]);var St={"Page Profile":At.page_profile,"Like story ads":At.like_story,Mobile:At.mobile,"Mobile ads":At.mobile_ads,External:At.external_connect,"Recommended pages":At.recommended_pages," Others":At.Others};a.charts[p].chartData=St}a.charts[p].chartType="fbReachByCity";break;case"pinterestEngagementRate":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){var sa="likes",ia="comments",Ot="repins",na="name",ha="url",N=[];for(q in a.charts[p].chartData){var A={date:moment(a.charts[p].chartData[q].date).format("DD-MMM-YYYY"),postComment:null!=a.charts[p].chartData[q]&&Object.keys(0!=a.charts[p].chartData[q].length)&&null!=a.charts[p].chartData[q][na]&&"undefined"!=typeof a.charts[p].chartData[q][na]?a.charts[p].chartData[q][na]:"",likes:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[sa]&&"undefined"!=typeof a.charts[p].chartData[q].total[sa]?a.charts[p].chartData[q].total[sa]:0,repins:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[Ot]&&"undefined"!=typeof a.charts[p].chartData[q].total[Ot]?a.charts[p].chartData[q].total[Ot]:0,comments:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[ia]&&"undefined"!=typeof a.charts[p].chartData[q].total[ia]?a.charts[p].chartData[q].total[ia]:0,links:null!=a.charts[p].chartData[q]&&Object.keys(0!=a.charts[p].chartData[q].length)&&"undefined"!=typeof a.charts[p].chartData[q][ha]?a.charts[p].chartData[q][ha]:""};N.push(A)}a.charts[p].chartData=N}break;case"pinterestLeaderboard":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){var Et="collaborators",Mt="followers",jt="pins",na="name",ha="url",N=[];for(q in a.charts[p].chartData){var A={date:moment(a.charts[p].chartData[q].date).format("DD-MMM-YYYY"),postComment:null!=a.charts[p].chartData[q]&&Object.keys(0!=a.charts[p].chartData[q].length)&&null!=a.charts[p].chartData[q][na]&&"undefined"!=typeof a.charts[p].chartData[q][na]?a.charts[p].chartData[q][na]:"",collaborators:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[Et]&&"undefined"!=typeof a.charts[p].chartData[q].total[Et]?a.charts[p].chartData[q].total[Et]:0,pins:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[jt]&&"undefined"!=typeof a.charts[p].chartData[q].total[jt]?a.charts[p].chartData[q].total[jt]:0,followers:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total[Mt]&&"undefined"!=typeof a.charts[p].chartData[q].total[Mt]?a.charts[p].chartData[q].total[Mt]:0,links:null!=a.charts[p].chartData[q]&&Object.keys(0!=a.charts[p].chartData[q].length)&&"undefined"!=typeof a.charts[p].chartData[q][ha]?a.charts[p].chartData[q][ha]:""};N.push(A)}a.charts[p].chartData=N}break;case"vimeoTopVideos":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){var sa="likes",ia="comments",N=[];for(q in a.charts[p].chartData){var A={date:moment(a.charts[p].chartData[q].date).format("DD-MMM-YYYY"),link:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total.link&&"undefined"!=typeof a.charts[p].chartData[q].total.link?a.charts[p].chartData[q].total.link:"",Comment:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total.metadata.connections.comments.total&&"undefined"!=typeof a.charts[p].chartData[q].total.metadata.connections.comments.total?a.charts[p].chartData[q].total.metadata.connections.comments.total:"",likes:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total.metadata.connections.likes.total&&"undefined"!=typeof a.charts[p].chartData[q].total.metadata.connections.likes.total?a.charts[p].chartData[q].total.metadata.connections.likes.total:0,views:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total.stats.plays&&"undefined"!=typeof a.charts[p].chartData[q].total.stats.plays?a.charts[p].chartData[q].total.stats.plays:0,picture:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total.pictures.sizes[0].link&&"undefined"!=typeof a.charts[p].chartData[q].total.pictures.sizes[0].link?a.charts[p].chartData[q].total.pictures.sizes[0].link:0,title:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&null!=a.charts[p].chartData[q].total.name&&"undefined"!=typeof a.charts[p].chartData[q].total.name?a.charts[p].chartData[q].total.name:0};N.push(A)}a.charts[p].chartData=N}break;case"costPerActionType":var It=!1,Pt=[];if(a.meta){var A=[];for(var q in a.charts[p].chartData){var m,B=0;for(m in a.charts[p].chartData[q].total)a.charts[p].chartData[q].total.hasOwnProperty(m)&&B++;if(B){var Ht=0;for(var P in a.charts[p].chartData[q].total)a.meta==a.charts[p].chartData[q].total[P].action_type&&(Ht=1,A.push({x:moment(a.charts[p].chartData[q].date),y:null!=a.charts[p].chartData[q].total[P]?a.charts[p].chartData[q].total[P].value:0}));Ht||A.push({x:moment(a.charts[p].chartData[q].date),y:0})}else A.push({x:moment(a.charts[p].chartData[q].date),y:0})}a.charts[p].chartData=A}else{var A={};It=!0;for(var m=0;m<a.charts[p].chartData.length;m++)for(var P in a.charts[p].chartData[m].total)Pt.push(a.charts[p].chartData[m].total[P].action_type);var Wt=_.uniqBy(Pt);A.flag=It,A.action=Wt,a.charts[p].chartData=A}break;case"instagramHashtagLeaderBoard":if(null!=a.charts[p].chartData[0]){if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){var Rt="tag",ia="comments",sa="likes",N=[];for(q in a.charts[p].chartData){var A={tagLink:null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length)&&"undefined"!=typeof a.charts[p].chartData[q].total[Rt]?"https://www.instagram.com/explore/tags/"+a.charts[p].chartData[q].total[Rt]:"",tag:null!=a.charts[p].chartData[q].total&&null!=a.charts[p].chartData[q].total[Rt]&&"undefined"!=typeof a.charts[p].chartData[q].total[Rt]?a.charts[p].chartData[q].total[Rt]:0,likes:null!=a.charts[p].chartData[q].total&&null!=a.charts[p].chartData[q].total[sa]&&"undefined"!=typeof a.charts[p].chartData[q].total[sa]?a.charts[p].chartData[q].total[sa]:0,comments:null!=a.charts[p].chartData[q].total&&null!=a.charts[p].chartData[q].total[ia]&&"undefined"!=typeof a.charts[p].chartData[q].total[ia]?a.charts[p].chartData[q].total[ia]:0};N.push(A)}a.charts[p].chartData=N}}else a.charts[p].chartData=[];break;case"gaTopCountriesToSocialVisits":case"gaTopCitiesToSocialVisits":if("undefined"!=typeof a.charts[p].chartData[0]&&"object"==typeof a.charts[p].chartData[0].total){var Ta=[],N=[],Bt={},_t=0;a.charts[p].chartData.forEach(function(t){for(var e in t.total)e.indexOf(a.charts[p].metricDetails.objectTypes[0].meta.endpoint[0]+"/")!=-1&&Ta.push({country:e.split(a.charts[p].metricDetails.objectTypes[0].meta.endpoint[0]+"/").join(""),value:t.total[e]})});var H=_.groupBy(Ta,"country");for(var W in H){for(var kt=W,g=0,m=0;m<H[W].length;m++)g+=parseFloat(H[W][m].value);var Ca={country:kt,sessions:g};N.push(Ca)}var Lt=_.sortBy(N,"sessions").reverse();if(Lt.length){for(var zt=Lt.length<5?Lt.length:5,I=0;I<zt;I++)Bt[Lt[I].country]=Lt[I].sessions;if(Lt.length>5){for(var V=5;V<Lt.length;V++)_t+=Lt[V].sessions;Bt.Others=_t}else Bt.Others=0}}a.charts[p].chartData=Bt;break;case"audienceBehaviourbyDay":var pt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ut={},dt={},ft={},mt={},yt={},gt={},vt={},Dt=[ut,dt,ft,mt,yt,gt,vt];if("undefined"!=typeof a.charts[p].chartData[0])for(var m=0;m<a.charts[p].chartData.length;m++)if("undefined"!=typeof a.charts[p].chartData[m].date){var bt=new Date(a.charts[p].chartData[m].date),wt=bt.getDay();if(wt<7){for(var P in a.charts[p].chartData[m].total[0])"date"!=P&&"dayOfWeek"!=P&&"total"!=P&&(Dt[wt].hasOwnProperty(P)?Dt[wt][P]+=parseFloat(a.charts[p].chartData[m].total[0][P]):(Dt[wt][P]=0,Dt[wt][P]+=parseFloat(a.charts[p].chartData[m].total[0][P])));Dt[wt].bounceRate=0,0===Dt[wt].sessions?Dt[wt].bounceRate=Dt[wt].bounces:Dt[wt].bounceRate=Dt[wt].sessions/Dt[wt].bounces}}for(var Tt=[],I=0;I<pt.length;I++)Tt.push({date:pt[I],total:Dt[I]});a.charts[p].chartData=Tt;break;case"audienceBehaviourByTimeofday":if("object"==typeof a.charts[p].chartData[0].total){for(var Ta=[],I=0;I<a.charts[p].chartData.length;I++){var ka=$.map(a.charts[p].chartData[I].total,function(a,t){return[a]});Ta=Ta.concat(ka)}var Ea=[],N=[],H=_.groupBy(Ta,"hour");for(var W in H){for(var Yt=W,Na=0,y=0,g=0,$t=0,Vt=0,m=0;m<H[W].length;m++)g+=parseFloat(H[W][m].sessions),Na+=parseFloat(H[W][m].pageviews),y+=parseFloat(H[W][m].bounces),$t+=parseFloat(H[W][m].pageviewsPerSession),Vt+=parseFloat(H[W][m].percentNewSessions);if(0===g)var Ia=y;else var Ia=(y/g*100).toFixed(2);var Yt={hour:Yt,sessions:g,bounceRate:Ia,pageviews:Na,pageviewsPerSession:$t,percentNewSessions:Vt};N.push(Yt)}var qt=[];N.sort(function(a,t){return parseFloat(a.hour)-parseFloat(t.hour)});for(var I=0;I<N.length;I++)qt.push({date:N[I].hour,total:N[I]});a.charts[p].chartType="audienceBehaviourbyDay",a.charts[p].chartData=qt}break;case"socialContributionToSiteTraffic":if("object"==typeof a.charts[p].chartData[0].total){var x;for(ta in a.charts[p].metricDetails.objectTypes)a.charts[p].metricDetails.objectTypes[ta].objectTypeId==a.charts[p].chartObjectTypeId&&(x=a.charts[p].metricDetails.objectTypes[ta].meta.endpoint,a.charts[p].metricDetails.objectTypes[ta].meta.endpoint=void 0!=a.charts[p].metricDetails.objectTypes[ta].meta.endpointDisplay?a.charts[p].metricDetails.objectTypes[ta].meta.endpointDisplay:a.charts[p].metricDetails.objectTypes[ta].meta.endpoint);var N=[];if(0!=x.length)for(er in x){var F=x[er],A=[];for(q in a.charts[p].chartData){var S,O=0;if(null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length))for(var E in a.charts[p].chartData[q].total)if(E.search("/")>-1){S=E.split("/");for(var M in S)S[M]==F&&(O+=parseFloat(a.charts[p].chartData[q].total[E]))}else E==F&&(O=a.charts[p].chartData[q].total[F]);A.push({x:moment(a.charts[p].chartData[q].date),y:O})}N.push(A)}else{var A=[];for(q in a.charts[p].chartData){var L,S,O=0,z=a.charts[p].chartData[q].total;if(null!=a.charts[p].chartData[q].total&&0!=Object.keys(a.charts[p].chartData[q].total).length){for(var E in a.charts[p].chartData[q].total){if(E.search("/")>-1){S=E.split("/");for(var M in S)O+=parseFloat(a.charts[p].chartData[q].total[E]),L=E}else O=a.charts[p].chartData[q].total[F];L=E}A.push({x:L,y:O})}}N.push(A)}a.charts[p].chartData=A,a.charts[p].metricCode=a.charts[p].metricDetails.code,a.charts[p].metricName=a.charts[p].metricDetails.name}else{var A=[];for(var q in a.charts[p].chartData)A.push({x:moment(a.charts[p].chartData[q].date),y:null!=a.charts[p].chartData[q].total?a.charts[p].chartData[q].total:0});a.charts[p].chartData=A,a.charts[p].metricCode=a.charts[p].metricDetails.code,a.charts[p].metricName=a.charts[p].metricDetails.name}break;case"percentageArea":for(var m=0;m<a.charts[p].chartData.length;m++)if("object"==typeof a.charts[p].chartData[m].total){var x;for(ta in a.charts[p].metricDetails.objectTypes)a.charts[p].metricDetails.objectTypes[ta].objectTypeId==a.charts[p].chartObjectTypeId&&(x=a.charts[p].metricDetails.objectTypes[ta].meta.endpoint,a.charts[p].metricDetails.objectTypes[ta].meta.endpoint=void 0!=a.charts[p].metricDetails.objectTypes[ta].meta.endpointDisplay?a.charts[p].metricDetails.objectTypes[ta].meta.endpointDisplay:a.charts[p].metricDetails.objectTypes[ta].meta.endpoint);var N=[];if(0!=x.length)for(er in x){var F=x[er],A=[];for(q in a.charts[p].chartData){var S,O=0;if(null!=a.charts[p].chartData[q].total&&Object.keys(0!=a.charts[p].chartData[q].total.length))for(var E in a.charts[p].chartData[q].total)if(E.search("/")>-1){S=E.split("/");for(var M in S)S[M]==F&&(O+=parseFloat(a.charts[p].chartData[q].total[E]))}else E==F&&(O=a.charts[p].chartData[q].total[E]);A.push({x:moment(a.charts[p].chartData[q].date),y:O})}N.push(A)}else{var A=[];for(q in a.charts[p].chartData){var L,S,O=[],z=a.charts[p].chartData[q].total;if(null!=a.charts[p].chartData[q].total&&0!=a.charts[p].chartData[q].total&&0!=Object.keys(a.charts[p].chartData[q].total).length){for(var E in a.charts[p].chartData[q].total){if(E.search("/")>-1){S=E.split("/");for(var M in S)O=a.charts[p].chartData[q].total[E],L=E}else O=a.charts[p].chartData[q].total[E];L=moment(a.charts[p].chartData[q].date)}A.push({x:L,y:O})}}N.push(A)}a.charts[p].chartData=A,a.charts[p].metricCode=a.charts[p].metricDetails.code,a.charts[p].metricName=a.charts[p].metricDetails.name}break;case"stackbar":if("object"==typeof a.charts[p].chartData[0].total){for(var Q=[{"(none)":0,organic:0,paid:0,others:0,social:0,ppc:0,referral:0}],I=0;I<a.charts[p].chartData.length;I++)for(P in a.charts[p].chartData[I].total){var Gt=P.split("/");"(none)"!=Gt[0]&&"organic"!=Gt[0]&&"ppc"!=Gt[0]&&"social"!=Gt[0]&&"referral"!=Gt[0]?Q[0].others+=parseFloat(a.charts[p].chartData[I].total[P]):"referral"===Gt[0]&&"undefined"!=Gt[1]&&"Yes"===Gt[1]?Q[0].social+=parseFloat(a.charts[p].chartData[I].total[P]):Q[0][Gt[0]]+=parseFloat(a.charts[p].chartData[I].total[P])}var st=[];st.push({date:a.charts[p].chartName,total:Q})}a.charts[p].chartData=st;break;case"gaUsers":if("undefined"!=typeof a.charts[p].chartData[0]){var Ut={};if("string"!=typeof a.charts[p].chartData)for(var m=0;m<a.charts[p].chartData.length;m++){var W=a.charts[p].chartData[m][0];Ut[W]=a.charts[p].chartData[m][1]}a.charts[p].chartData=Ut}break;case"youtubeVideosOverview":for(var Jt=[],W=0;W<a.charts[p].chartData.length;W++)if("undefined"!=typeof a.charts[p].chartData[W]&&"object"==typeof a.charts[p].chartData[W]){var it=0,ia=0,sa=0,wa=0,Xt={name:a.charts[p].chartData[W].title,views:a.charts[p].chartData[W].viewCount,comments:a.charts[p].chartData[W].commentCount,likes:a.charts[p].chartData[W].likeCount,dislikes:a.charts[p].chartData[W].dislikeCount,shares:a.charts[p].chartData[W].favoriteCount};Jt.push(Xt)}a.charts[p].chartData=Jt;break;case"twitterEngagements":switch(String(a.charts[p].chartSubType)){case"activityByDayOfTheWeek":if("undefined"!=typeof a.charts[p].chartData[0]){for(var j=[],I=0;I<a.charts[p].chartData.length;I++)"object"==typeof a.charts[p].chartData[I].total&&(a.charts[p].chartData[I].total.created_at=new Date(a.charts[p].chartData[I].total.created_at).getDay(),j.push(a.charts[p].chartData[I].total));var H=_.groupBy(j,"created_at"),N=[];for(var W in H){for(var sa=0,Kt=0,ma=0,Zt=W,m=0;m<H[W].length;m++)sa+=parseFloat(H[W][m].favorite_count),Kt+=parseFloat(H[W][m].retweet_count);ma=sa+Kt;var Qt=m,Ca={day:Zt,tweets:Qt,engagement:ma};N.push(Ca)}N.sort(function(a,t){return parseFloat(a.day)-parseFloat(t.day)});for(var W in N)"0"===N[W].day&&(N[W].day="Sunday"),"1"===N[W].day&&(N[W].day="Monday"),"2"===N[W].day&&(N[W].day="Tuesday"),"3"===N[W].day&&(N[W].day="Wednesday"),"4"===N[W].day&&(N[W].day="Thursday"),"5"===N[W].day&&(N[W].day="Friday"),"6"===N[W].day&&(N[W].day="Saturday");a.charts[p].chartData=N}break;case"activityByTimeOfTheDay":var ae=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if("undefined"!=typeof a.charts[p].chartData[0]){for(var j=[],I=0;I<a.charts[p].chartData.length;I++)if("object"==typeof a.charts[p].chartData[I].total){var Ea=a.charts[p].chartData[I].total.created_at;a.charts[p].chartData[I].total.day=ae[new Date(Ea).getDay()],j.push(a.charts[p].chartData[I].total)}var H=_.groupBy(j,"day"),N=[];for(var W in H){for(var Zt=W,te=[],m=0;m<H[W].length;m++)te.push({time:new Date(H[W][m].created_at).getHours(),likes:H[W][m].favorite_count,reTweets:H[W][m].retweet_count});var ee=_.groupBy(te,"time");for(var Q in ee){for(var sa=0,Kt=0,ma=0,re=Q,V=0;V<ee[Q].length;V++)sa+=parseFloat(ee[Q][V].likes),Kt+=parseFloat(ee[Q][V].reTweets);ma=sa+Kt;var Ca={day:Zt,time:re,engagement:ma};N.push(Ca)}}a.charts[p].chartData=N}break;case"engagementByUsersTalkedAbout":for(var N=[],se=[],W=0;W<a.charts[p].chartData.length;W++)if("undefined"!=typeof a.charts[p].chartData[W]&&"object"==typeof a.charts[p].chartData[W].total){var sa=0,Kt=0,ma=0,ie=[],Zt=W;sa=parseFloat(a.charts[p].chartData[W].total.favorite_count),Kt=parseFloat(a.charts[p].chartData[W].total.retweet_count),ma=sa+Kt;for(var oe=void 0!=a.charts[p].chartData[W].total.entities&&void 0!=a.charts[p].chartData[W].total.entities?a.charts[p].chartData[W].total.entities.user_mentions.length:0,ne=void 0!=a.charts[p].chartData[W].total.entities&&void 0!=a.charts[p].chartData[W].total.entities?a.charts[p].chartData[W].total.entities.user_mentions:0,ce=0;ce<oe;ce++){var Xt={tweet:a.charts[p].chartData[W].total.text,engagement:ma,userMentionedScreenName:ne[ce].screen_name,userMentionedName:ne[ce].name,url:void 0!=a.charts[p].chartData[W].total.media?a.charts[p].chartData[W].total.media[0].expanded_url:"https://twitter.com/"+ne[ce].screen_name};ie.push(Xt)}for(var I=0;I<ie.length;I++)se.push(ie[I])}var Ta=[],qt=_.groupBy(se,"userMentionedScreenName");for(var P in qt){for(var ma=0,he=0;he<qt[P].length;he++)ma+=qt[P][he].engagement;Ta.push({userMentionedScreenName:P,engagement:ma})}Ta.sort(function(a,t){return parseFloat(t.engagement)-parseFloat(a.engagement)}),a.charts[p].chartData=Ta;break;case"topLinks":if("undefined"!=typeof a.charts[p].chartData[0]){var sa="favorite_count",va="retweet_count",le=[];if("object"==typeof a.charts[p].chartData[0].total)for(var m=0;m<a.charts[p].chartData.length;m++)if("undefined"!=typeof a.charts[p].chartData[m].total.entities)for(var I=0;I<a.charts[p].chartData[m].total.entities.urls.length;I++){var da=a.charts[p].chartData[m].total[sa],Kt=a.charts[p].chartData[m].total[va],ma=da+Kt,ha={url:a.charts[p].chartData[m].total.entities.urls[I].url,displayurl:a.charts[p].chartData[m].total.entities.urls[I].expanded_url,engagement:ma};le.push(ha)}var H=_.groupBy(le,"displayurl"),Ta=[];for(var P in H){for(var ma=0,he=0;he<H[P].length;he++)ma+=H[P][he].engagement;Ta.push({url:P,engagement:ma})}Ta.sort(function(a,t){return parseFloat(t.engagement)-parseFloat(a.engagement)}),a.charts[p].chartData=Ta}break;case"instagramActivityByDayOfTheWeek":if("undefined"!=typeof a.charts[p].chartData[0]){for(var j=[],I=0;I<a.charts[p].chartData.length;I++)"object"==typeof a.charts[p].chartData[I].total&&(a.charts[p].chartData[I].total.created_time=moment.unix(a.charts[p].chartData[I].total.created_time).format("YYYY/MMM/DD"),a.charts[p].chartData[I].total.created_time=new Date(a.charts[p].chartData[I].total.created_time).getDay(),j.push(a.charts[p].chartData[I].total));var H=_.groupBy(j,"created_time"),N=[];for(var W in H){for(var sa=0,ia=0,ma=0,Zt=W,m=0;m<H[W].length;m++)sa+=parseFloat(H[W][m].likes.count),ia+=parseFloat(H[W][m].comments.count);ma=sa+ia;var pe=m,Ca={day:Zt,tweets:pe,engagement:ma};N.push(Ca)}N.sort(function(a,t){return parseFloat(a.day)-parseFloat(t.day)});for(var W in N)"0"===N[W].day&&(N[W].day="Sunday"),"1"===N[W].day&&(N[W].day="Monday"),"2"===N[W].day&&(N[W].day="Tuesday"),"3"===N[W].day&&(N[W].day="Wednesday"),"4"===N[W].day&&(N[W].day="Thursday"),"5"===N[W].day&&(N[W].day="Friday"),"6"===N[W].day&&(N[W].day="Saturday");a.charts[p].chartData=N}break;case"instagramActivityByTimeOfTheDay":if("undefined"!=typeof a.charts[p].chartData[0]){for(var j=[],I=0;I<a.charts[p].chartData.length;I++)if("object"==typeof a.charts[p].chartData[I].total){var Ea=a.charts[p].chartData[I].total.created_time;a.charts[p].chartData[I].total.day=moment.unix(Ea).format("dddd"),j.push(a.charts[p].chartData[I].total)}var H=_.groupBy(j,"day"),N=[];for(var W in H){for(var Zt=W,te=[],m=0;m<H[W].length;m++){var Y=moment.unix(H[W][m].created_time);te.push({time:new Date(Y).getHours(),likes:H[W][m].likes.count,comments:H[W][m].comments.count})}var ee=_.groupBy(te,"time");for(var Q in ee){for(var sa=0,ia=0,ma=0,re=Q,V=0;V<ee[Q].length;V++)sa+=parseFloat(ee[Q][V].likes),ia+=parseFloat(ee[Q][V].comments);ma=sa+ia;var Ca={day:Zt,time:re,engagement:ma};N.push(Ca)}}a.charts[p].chartData=N}break;case"commentsAndLikes":if("undefined"!=typeof a.charts[p].chartData[0]){for(var N=[],I=0;I<a.charts[p].chartData.length;I++)"object"==typeof a.charts[p].chartData[I].total&&N.push({x:moment(a.charts[p].chartData[I].date).format("DD-MMM-YYYY"),y:parseFloat(a.charts[p].chartData[I].total.likes.count)+parseFloat(a.charts[p].chartData[I].total.comments.count),link:a.charts[p].chartData[I].total.link});a.charts[p].chartData=N}break;case"hashTag":if("undefined"!=typeof a.charts[p].chartData[0]){var sa="favorite_count",va="retweet_count",le=[];if("object"==typeof a.charts[p].chartData[0].total)for(var m=0;m<a.charts[p].chartData.length;m++)if("undefined"!=typeof a.charts[p].chartData[m].total.entities)for(var I=0;I<a.charts[p].chartData[m].total.entities.hashtags.length;I++){var da=a.charts[p].chartData[m].total[sa],Kt=a.charts[p].chartData[m].total[va],ma=da+Kt,ha={hashTag:a.charts[p].chartData[m].total.entities.hashtags[I].text,engagement:ma};le.push(ha)}var H=_.groupBy(le,"hashTag"),Ta=[];for(var P in H){for(var ma=0,he=0;he<H[P].length;he++)ma+=H[P][he].engagement;Ta.push({text:P,engagement:ma})}Ta.sort(function(a,t){return parseFloat(t.engagement)-parseFloat(a.engagement)}),a.charts[p].chartData=Ta}}break;case"campaignOverview":if("undefined"!=a.charts[p].chartData[0]){N=[];for(var ue=[],I=0;I<a.charts[p].chartData.length;I++)for(var P in a.charts[p].chartData[I].total)ue.push(a.charts[p].chartData[I].total[P]);var de=_.groupBy(ue,"Campaign ID");for(var W in de){for(var fe,me=W,ye="Campaign",ge="Campaign state",ve=0,De=0,be=0,we="Currency",Te="Start date",ke="End date",xe=0,Ce="Budget",m=0;m<de[W].length;m++)be+=parseFloat(de[W][m].Cost),we=de[W][m][we],xe+=parseFloat(de[W][m].Impressions),fe=de[W][m]["Unique cookies"],ve+=parseFloat(de[W][m].Clicks),De+=parseFloat(de[W][m].Conversions);if(0===be)var be=be;else var be=(be/1e6).toFixed(2);if(0===be)var Ne=be;else var Ne=(be/xe*1e3).toFixed(2);if(0===ve)var Fe=ve;else var Fe=(ve/xe*100).toFixed(2);if(0===be)var Ae=be;else var Ae=(be/ve).toFixed(2);if(0===be)var Se=be;else var Se=(be/De*100).toFixed(2);var Oe={Id:me,Name:de[W][0][ye],status:de[W][0][ge],Currency:de[W][0].Currency,startDate:de[W][0][Te],endDate:de[W][0][ke],Budget:de[W][0][Ce]/1e6,Impressions:xe,CPM:"Infinity"===Ne?0:Ne,CTR:"Infinity"===Fe?0:Fe,CPC:"Infinity"===Ae?0:Ae,CostPerConv:"Infinity"===Se?0:Se,Spent:be,Conversions:De,Clicks:ve,ImpressionReachValue:fe};N.push(Oe)}}a.charts[p].chartData=N;break;case"adgroupOverview":if("undefined"!=a.charts[p].chartData[0]){N=[];for(var Ee=[],I=0;I<a.charts[p].chartData.length;I++)for(var P in a.charts[p].chartData[I].total)Ee.push(a.charts[p].chartData[I].total[P]);var de=_.groupBy(Ee,"Ad group ID");for(var W in de){for(var Me=W,je="Ad group",ge="Ad group state",ve=0,De=0,be=0,we="Currency",Ie=0,xe=0,m=0;m<de[W].length;m++)be+=parseFloat(de[W][m].Cost),we=de[W][m][we],xe+=parseFloat(de[W][m].Impressions),Ie+=parseFloat(de[W][m].Totalconvvalue),ve+=parseFloat(de[W][m].Clicks),De+=parseFloat(de[W][m].Conversions);if(0===be)var be=be;else var be=(be/1e6).toFixed(2);if(0===be)var Ne=be;else var Ne=(be/xe*1e3).toFixed(2);if(0===ve)var Fe=ve;else var Fe=(ve/xe*100).toFixed(2);if(0===be)var Ae=be;else var Ae=(be/ve).toFixed(2);if(0===be)var Se=be;else var Se=(be/De*100).toFixed(2);var Oe={Id:Me,Name:de[W][0][je],status:de[W][0][ge],Currency:de[W][0].Currency,Impressions:xe,CPM:"Infinity"===Ne?0:Ne,CTR:"Infinity"===Fe?0:Fe,CPC:"Infinity"===Ae?0:Ae,CostPerConv:"Infinity"===Se?0:Se,Spent:be,Conversions:De,Totalconvvalue:Ie,Clicks:ve,CPMCBid:" --"===de[W][0].MaxCPM?0:parseFloat(de[W][0].MaxCPM)/1e6,CPCBid:" --"===de[W][0].MaxCPC?0:parseFloat(de[W][0].MaxCPC)/1e6,CPVBid:" --"===de[W][0].MaxCPV?0:parseFloat(de[W][0].MaxCPV)/1e6};N.push(Oe)}}a.charts[p].chartData=N;break;case"fbAdsAdgroupOverview":if("undefined"!=a.charts[p].chartData[0]){N=[];for(var Ee=[],I=0;I<a.charts[p].chartData.length;I++)for(var P in a.charts[p].chartData[I].total)Ee.push(a.charts[p].chartData[I].total[P]);var de=_.groupBy(Ee,"adset_id");for(var W in de){for(var Me=W,je="adset_name",ge="status",Pe="start_time",He="stop_time",ve=0,be=0,We="objective",K=0,xe=0,De=0,m=0;m<de[W].length;m++)be+=void 0!=de[W][m].spend?parseFloat(de[W][m].spend):0,K+=void 0!=de[W][m].reach?parseFloat(de[W][m].reach):0,xe+=void 0!=de[W][m].impressions?parseFloat(de[W][m].impressions):0,ve+=void 0!=de[W][m].clicks?parseFloat(de[W][m].clicks):0,De+=void 0!=de[W][m].actions?s(de[W][m].actions):0;if(0===be)var Ne=be;else var Ne=(be/xe*1e3).toFixed(2);if(0===ve)var Fe=ve;else var Fe=(ve/xe*100).toFixed(2);if(0===be)var Ae=be;else var Ae=(be/ve).toFixed(2);if(0===be)var Se=be;else var Se=(be/De*100).toFixed(2);var Oe={Id:Me,Name:de[W][0][je],Objective:de[W][0][We],status:de[W][0][ge],reach:K,Impressions:xe,CPM:"Infinity"===Ne?0:Ne,CTR:"Infinity"===Fe?0:Fe,CPC:"Infinity"===Ae?0:Ae,CostPerConv:"Infinity"===Se?0:Se,Spent:be.toFixed(2),Conversions:De,Clicks:ve,StartDate:de[W][0][Pe],EndDate:de[W][0][He]};N.push(Oe)}}a.charts[p].chartData=N;break;case"adOverview":if("undefined"!=a.charts[p].chartData[0]){N=[];for(var Ee=[],I=0;I<a.charts[p].chartData.length;I++)for(var P in a.charts[p].chartData[I].total)Ee.push(a.charts[p].chartData[I].total[P]);var Re=_.groupBy(Ee,"Ad ID");for(var W in Re){for(var Be=W,_e="Business Name",Le="Ad type",ve=0,De=0,be=0,Ie=0,we="Currency",xe=0,m=0;m<Re[W].length;m++)be+=parseFloat(Re[W][m].Cost),we=Re[W][m][we],xe+=parseFloat(Re[W][m].Impressions),Ie+=parseFloat(Re[W][m].Totalconvvalue),ve+=parseFloat(Re[W][m].Clicks),De+=parseFloat(Re[W][m].Conversions);if(0===be)var be=be;else var be=(be/1e6).toFixed(2);if(0===be)var Ne=be;else var Ne=(be/xe*1e3).toFixed(2);if(0===ve)var Fe=ve;else var Fe=(ve/xe*100).toFixed(2);if(0===be)var Ae=be;else var Ae=(be/ve).toFixed(2);if(0===De)var ze=De;else var ze=(De/ve*100).toFixed(2);var Oe={Id:Be,Name:Re[W][0][_e],type:Re[W][0][Le],Currency:Re[W][0].Currency,clickType:Re[W][0]["Click type"],Impressions:xe,CPM:"Infinity"===Ne?0:Ne,CTR:"Infinity"===Fe?0:Fe,CPC:"Infinity"===Ae?0:Ae,Totalconvvalue:Ie,Spent:be,Conversions:De,ConversionRate:"Infinity"===ze?0:ze,Clicks:ve};N.push(Oe)}}a.charts[p].chartData=N;break;case"adwordsDemography":var la=a.charts[p].chartSubType;if("undefined"!=a.charts[p].chartData[0]){N=[];for(var ue=[],I=0;I<a.charts[p].chartData.length;I++)for(var P in a.charts[p].chartData[I].total)ue.push(a.charts[p].chartData[I].total[P]);if("pieAge"===la||"tableAge"===la)var de=_.groupBy(ue,"Age Range");else if("pieGender"===la||"tableGender"===la)var de=_.groupBy(ue,"Gender");else if("pieDevice"===la||"tableDevice"===la)var de=_.groupBy(ue,"Device");for(var W in de){for(var et=W,ve=0,De=0,be=0,we="Currency",xe=0,Ie=0,m=0;m<de[W].length;m++)be+=parseFloat(de[W][m].Cost),xe+=parseFloat(de[W][m].Impressions),ve+=parseFloat(de[W][m].Clicks),De+=parseFloat(de[W][m].Conversions),Ie+=parseFloat(de[W][m].Totalconvvalue);if(0===be)var be=be;else var be=(be/1e6).toFixed(2);if(0===be)var Ne=be;else var Ne=(be/xe*1e3).toFixed(2);if(0===ve)var Fe=ve;else var Fe=(ve/xe*100).toFixed(2);if(0===be)var Ae=be;else var Ae=(be/ve).toFixed(2);if(0===De)var Ye=De;else var Ye=(De/ve*100).toFixed(2);var Oe={Currency:de[W][0].Currency,age:et,Impressions:xe,CPM:"Infinity"===Ne?0:Ne,CTR:"Infinity"===Fe?0:Fe,CPC:"Infinity"===Ae?0:Ae,conversionRate:"Infinity"===Ye?0:Ye,Spent:be,Conversions:De,Clicks:ve,Totalconvvalue:Ie};N.push(Oe)}}if("pieAge"===la||"pieGender"===la||"pieDevice"===la){for(var $e={},m=0;m<N.length;m++){var Ve=N[m].age;$e[Ve]=N[m].Impressions}N=$e}a.charts[p].chartData=N;break;case"fbAdsCampaignOverview":if("undefined"!=a.charts[p].chartData[0]){N=[];for(var ue=[],I=0;I<a.charts[p].chartData.length;I++)for(var P in a.charts[p].chartData[I].total)ue.push(a.charts[p].chartData[I].total[P]);var de=_.groupBy(ue,"campaign_id");for(var W in de){for(var fe,me=W,qe="campaign_name",ge="status",Da=0,Ge=0,Ue=0,Je=0,Xe=0,Ke=0,K=0,Ze=0,Te="start_time",ke="stop_time",ba=0,m=0;m<de[W].length;m++)ba+=void 0!=de[W][m].impressions?parseFloat(de[W][m].impressions):0,Da+=void 0!=de[W][m].clicks?parseFloat(de[W][m].clicks):0,Ge+=void 0!=de[W][m].actions?s(de[W][m].actions):0,Ue+=void 0!=de[W][m].cost_per_unique_action_type?i(de[W][m].cost_per_unique_action_type):0,Je+=void 0!=de[W][m].spend?parseFloat(de[W][m].spend):0,Xe+=void 0!=de[W][m].app_store_clicks?parseFloat(de[W][m].app_store_clicks):0,Ke+=void 0!=de[W][m].frequency?parseFloat(de[W][m].frequency):0,Ze+=void 0!=de[W][m].video_avg_percent_watched_actions?parseFloat(de[W][m].video_avg_percent_watched_actions):0,K+=void 0!=de[W][m].reach?parseFloat(de[W][m].reach):0;if(0===Je)var Ne=Je;else var Ne=(Je/ba*1e3).toFixed(2);if(0===Da)var Fe=Da;else var Fe=(Da/ba*100).toFixed(2);if(0===Je)var Ae=Je;else var Ae=(Je/Da).toFixed(2);if(0===Je);else{(Je/Ge*100).toFixed(2)}var Xa={Id:me,Name:de[W][0][qe],Objective:de[W][0].objective,status:de[W][0][ge],reach:K,Impressions:ba,cost:Je.toFixed(2),CPM:"Infinity"===Ne?0:Ne,CTR:"Infinity"===Fe?0:Fe,CPC:"Infinity"===Ae?0:Ae,Actions:"Infinity"===Ge?0:Ge,Spent:Je.toFixed(2),Conversions:Ge,Clicks:Da,StartDate:de[W][0][Te],EndDate:de[W][0][ke],AppStoreClicks:Xe,CostPerUniqueActionByType:Ue.toFixed(2),Frequency:Ke.toFixed(2),VideoAvgViewTime:isNaN(Ze)?0:Ze};N.push(Xa)}}a.charts[p].chartData=N;break;case"fbAdsAdOverview":if("undefined"!=a.charts[p].chartData[0]){N=[];for(var Qe=[],I=0;I<a.charts[p].chartData.length;I++)for(var P in a.charts[p].chartData[I].total)Qe.push(a.charts[p].chartData[I].total[P]);var ar=_.groupBy(Qe,"ad_id");for(var W in ar){for(var Da=0,tr=0,Ue=0,Je=0,Xe=0,Ke=0,K=0,Ze=0,ba=0,m=0;m<ar[W].length;m++)Da+=void 0!=ar[W][m].clicks?parseFloat(ar[W][m].clicks):0,ba+=void 0!=ar[W][m].impressions?parseFloat(ar[W][m].impressions):0,tr+=void 0!=ar[W][m].actions?s(ar[W][m].actions):0,Ue+=void 0!=ar[W][m].cost_per_unique_action_type?i(ar[W][m].cost_per_unique_action_type):0,Je+=void 0!=ar[W][m].spend?parseFloat(ar[W][m].spend):0,Xe+=void 0!=ar[W][m].app_store_clicks?parseFloat(ar[W][m].app_store_clicks):0,Ke+=void 0!=ar[W][m].frequency?parseFloat(ar[W][m].frequency):0,K+=void 0!=ar[W][m].reach?parseFloat(ar[W][m].reach):0;if(0===Je)var Ne=Je;else var Ne=(Je/ba*1e3).toFixed(2);if(0===Da)var Fe=Da;else var Fe=(Da/ba*100).toFixed(2);if(0===Je)var Ae=Je;else var Ae=(Je/Da).toFixed(2);var Xa={Id:W,AdName:ar[W][0].ad_name,AdSetName:ar[W][0].adset_name,CampaignName:ar[W][0].campaign_name,Objective:ar[W][0].objective,Status:ar[W][0].status,Reach:K,Impressions:ba,CPM:"Infinity"===Ne?0:Ne,CTR:"Infinity"===Fe?0:Fe,Actions:"Infinity"===tr?0:tr,Spend:Je,StartDate:ar[W][0].start_time,EndDate:ar[W][0].end_time,AppStoreClicks:Xe,CostPerUniqueActionByType:Ue.toFixed(2),Frequency:Ke.toFixed(2)};N.push(Xa)}}a.charts[p].chartData=N}}for(var p in a.charts)if("undefined"!=typeof a.charts[p].chartData[0])if(a.charts[p].chartData[0].x)for(var q in a.charts[p].chartData)l+=parseFloat(a.charts[p].chartData[q].y),parseFloat(l)>0&&0!=parseFloat(l)&&++h;else for(var er in a.charts[p].chartData)for(var q in a.charts[p].chartData[er])"undefined"!=typeof a.charts[p].chartData[er][q]&&(l+=parseFloat(a.charts[p].chartData[er][q].y),Number(l)>0&&0!=Number(l)&&++h);for(var p in a.charts){var d=a.charts[p].chartType,la=a.charts[p].chartSubType;
if("line"==d||"bar"==d||"column"==d||"stackcolumn"==d||"area"==d||"pie"==d||"reachVsImpressions"==d||"engagedUsersReach"==d||"mozoverview"==d||"trafficSourcesBrkdwnLine"==d||"bounceRateArea"==d||"negativeBar"==d||"trafficSourcesBrkdwnPie"==d||"costPerThosuandImpressions"==d||"clickThroughRate"==d||"costPerConversion"==d||"ConversionRate"==d||"costPerClick"==d||"costPerActionType"==d&&void 0!=a.meta){if("undefined"!=typeof a.charts[p].chartData[0])if(a.charts[p].chartData[0].x){var rr,sr=0,ir=!1,or=0,nr=0,cr=a.charts[p].chartData.length,hr=0,lr=0,pr=0,ur=0,dr=0,fr=0;if(a.charts[p].chartData.length>=14){for(var B=0,m=cr-1;m>=0;m--)0===B||B<7?("reachVsImpressions"==d||"engagedUsersReach"==d)&&a.charts[p].chartData[m].imp&&a.charts[p].chartData[m].rea?(pr+=parseFloat(a.charts[p].chartData[m].imp),ur+=parseFloat(a.charts[p].chartData[m].rea)):hr+=parseFloat(a.charts[p].chartData[m].y):B>=7&&B<14&&(("reachVsImpressions"==d||"engagedUsersReach"==d)&&a.charts[p].chartData[m].imp&&a.charts[p].chartData[m].rea?(dr+=parseFloat(a.charts[p].chartData[m].imp),fr+=parseFloat(a.charts[p].chartData[m].rea)):lr+=parseFloat(a.charts[p].chartData[m].y)),B++;"Total Impressions"!=a.charts[p].chartName&&"Engaged Users"!=a.charts[p].chartName||"reachVsImpressions"!=d&&"engagedUsersReach"!=d||(hr=isNaN(pr/ur)?0:pr/ur,lr=isNaN(dr/fr)?0:dr/fr),rr="WK"}else if("object"!=typeof a.charts[p].chartData[0].x){var mr=u(a.charts[p].chartData[0].x);if(mr){var yr=_.last(a.charts[p].chartData),gr=moment(yr.x).subtract(1,"days").format("YYYY-DD-MM");hr="Total Impressions"!=a.charts[p].chartName&&"Engaged Users"!=a.charts[p].chartName||"reachVsImpressions"!=d&&"engagedUsersReach"!=d?parseFloat(yr.y):isNaN(parseFloat(yr.imp)/parseFloat(yr.rea))?0:parseFloat(yr.imp)/parseFloat(yr.rea);for(var m=cr-1;m>=0;m--){var vr=moment(a.charts[p].chartData[m].x).format("YYYY-DD-MM");gr===vr&&(lr="Total Impressions"!=a.charts[p].chartName&&"Engaged Users"!=a.charts[p].chartName||"reachVsImpressions"!=d&&"engagedUsersReach"!=d?parseFloat(a.charts[p].chartData[m].y):isNaN(parseFloat(a.charts[p].chartData[m].imp)/parseFloat(a.charts[p].chartData[m].rea))?0:parseFloat(a.charts[p].chartData[m].imp)/parseFloat(a.charts[p].chartData[m].rea))}rr="Day"}}else{var yr=_.last(a.charts[p].chartData),gr=moment(yr.x).subtract(1,"days").format("YYYY-DD-MM");hr=parseFloat(yr.y);for(var m=cr-1;m>=0;m--){var vr=moment(a.charts[p].chartData[m].x).format("YYYY-DD-MM");gr===vr&&(lr=parseFloat(a.charts[p].chartData[m].y))}rr="Day"}var Dr,Z,br;hr>lr?(Dr="up",br=hr-lr,Z=lr>0?parseFloat(br/lr*100).toFixed(2):hr):hr<lr?(Dr="down",br=lr-hr,Z=lr>0?parseFloat(br/lr*100).toFixed(2):0):(br=lr-hr,Z=0);var wr=0,Tr=0;for(var q in a.charts[p].chartData)("reachVsImpressions"==d||"engagedUsersReach"==d)&&a.charts[p].chartData[q].imp&&a.charts[p].chartData[q].rea?(wr+=parseFloat(a.charts[p].chartData[q].imp),Tr+=parseFloat(a.charts[p].chartData[q].rea)):(isNaN(a.charts[p].chartData[q].y)&&(a.charts[p].chartData[q].y=0),sr+=parseFloat(a.charts[p].chartData[q].y)),parseFloat(a.charts[p].chartData[q].y)>0&&nr++;if("Total Impressions"!=a.charts[p].chartName&&"Engaged Users"!=a.charts[p].chartName||"reachVsImpressions"!=d&&"engagedUsersReach"!=d||(sr=isNaN(wr/Tr)?0:wr/Tr*100),"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.summaryType)if("avg"==a.charts[p].metricDetails.objectTypes[0].meta.summaryType)sr=0==nr&&0==sr?0:parseFloat(sr/nr).toFixed(2);else if("snapshot"==a.charts[p].metricDetails.objectTypes[0].meta.summaryType){var kr="";for(var Q in a.charts[p].chartData)kr<moment(a.charts[p].chartData[Q].x)&&(kr=moment(a.charts[p].chartData[Q].x),sr=a.charts[p].chartData[Q].y,0!=sr&&(or+=1));ir=or>=1}if("bounceRateArea"==d){var xr=0,g=0;for(var q in a.charts[p].chartData)xr+=parseFloat(a.charts[p].chartData[q].bounces),g+=parseFloat(a.charts[p].chartData[q].sessions);sr=xr/g*100}if("costPerClick"==d||"costPerThosuandImpressions"==d||"clickThroughRate"==d||"ConversionRate"==d||"costPerConversion"==d){var w=0,T=0;for(var q in a.charts[p].chartData)w+=parseFloat(a.charts[p].chartData[q].dividend),T+=parseFloat(a.charts[p].chartData[q].divisor);sr=0===w?w:"costPerThosuandImpressions"==d?w/T*1e3:"clickThroughRate"==d||"ConversionRate"==d||"costPerConversion"==d?"Infinity"===(w/T*100).toFixed(2)?0:(w/T*100).toFixed(2):w/T}if("line"==d||"bar"==d||"column"==d||"mozoverview"==d)"FacebookAds"==a.channelName&&"Cost Per Unique Action Type"==a.charts[p].metricDetails.name?n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,key:a.charts[p].chartName,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],summaryDisplay:parseFloat(sr).toFixed(2)%Math.floor(parseFloat(sr).toFixed(2))>0?parseFloat(sr).toFixed(2):parseFloat(sr).toFixed(2)>1?parseInt(sr):parseFloat(sr)>0?parseFloat(sr).toFixed(2):parseInt(sr),hasSnapshotData:ir}):("bar"==d||"column"==d)&&h<0&&0==sr?n.push({type:"line",channelName:c[a.channelName],values:a.charts[p].chartData,key:a.charts[p].metricDetails.name,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):n.push({subChartType:a.charts[p].subChartType,channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,key:"fbTopReferringDomain"===a.charts[p].chartSubType?void 0:a.charts[p].metricDetails.name,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,chartSubType:a.charts[p].chartSubType,hasSnapshotData:ir});else if("area"==d||"Reach Vs Impressions"==d||"EngagedUsersReach"==d||"negativeBar"==d)if("negativeBar"==d){var Cr=[];for(var Nr in a.charts[p].chartData)Cr.push({x:a.charts[p].chartData[Nr].x,y:-Math.abs(a.charts[p].chartData[Nr].y)});a.charts[p].chartType="area",n.push({channelName:c[a.channelName],type:"area",values:Cr,key:a.charts[p].metricDetails.name,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,area:!0,hasSnapshotData:ir})}else n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,key:a.charts[p].metricDetails.name,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir});else if("area"==d||"reachVsImpressions"==d||"engagedUsersReach"==d){var Fr=Math.round(100*sr)/100;n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,key:"Total Impressions"==a.charts[p].metricDetails.name?"Impressions/Reach (%)":a.charts[p].metricDetails.name,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:"Total Impressions"==a.charts[p].metricDetails.name||"Engaged users/Reach (%)"==a.charts[p].metricDetails.name?Fr+"%":Fr,area:!0,hasSnapshotData:ir})}else"bounceRateArea"==d?(a.charts[p].chartType="area",n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,key:a.charts[p].metricDetails.name,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir})):"costPerClick"==d||"costPerThosuandImpressions"==d||"clickThroughRate"==d||"ConversionRate"==d||"costPerConversion"==d?(a.charts[p].chartType="area",n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,key:a.charts[p].metricDetails.name,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir})):"costPerActionType"==d?n.push({channelName:c[a.channelName],type:"line",values:a.charts[p].chartData,key:a.meta.replace("_"," "),color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"trafficSourcesBrkdwnLine"==d?n.push({type:"line",channelName:c[a.channelName],values:a.charts[p].chartData,key:a.charts[p].metricDetails.name,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"trafficSourcesBrkdwnPie"==d?n.push({channelName:c[a.channelName],name:a.charts[p].chartName,type:"pie",values:a.charts[p].chartData,key:a.charts[p].metricDetails.name,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"percentageArea"==d?n.push({channelName:c[a.channelName],type:a.charts[p].chartType,metricCode:a.charts[p].metricCode,metricName:a.charts[p].metricName,key:a.charts[p].metricName,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",values:a.charts[p].chartData,color:a.charts[p].chartColour,arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):n.push({channelName:c[a.channelName],name:a.charts[p].chartName,type:a.charts[p].chartType,y:parseFloat(sr),key:a.charts[p].metricDetails.name,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,period:rr,variance:Z,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir})}else for(var er in a.charts[p].chartData){var rr,sr=0,nr=0,cr=a.charts[p].chartData[er].length,hr=0,lr=0;if(a.charts[p].chartData[er].length>=14){for(var B=0,m=cr-1;m>=0;m--)0===B||B<7?hr+=parseFloat(a.charts[p].chartData[er][m].y):B>=7&&B<14&&(lr+=parseFloat(a.charts[p].chartData[er][m].y)),B++;rr="WK"}else if(a.charts[p].chartData[er].length>0){var Ar=a.charts[p].chartData[er].length,yr=_.last(a.charts[p].chartData[er]);if("string"!=typeof yr.x){var gr=moment(yr.x).subtract(1,"days").format("YYYY-DD-MM");hr=parseFloat(yr.y)}else hr=parseFloat(a.charts[p].chartData[er][Ar-1].y);for(var m=cr-1;m>=0;m--)if("string"!=typeof yr.x){var vr=moment(a.charts[p].chartData[er][m].x).format("YYYY-DD-MM");gr===vr&&(lr=parseFloat(a.charts[p].chartData[er][m].y))}else lr=parseFloat(a.charts[p].chartData[er][Ar-2].y);rr="Day"}var Dr,br,Z;if(hr>lr)Dr="up",br=hr-lr,Z=lr>0?parseFloat(br/lr*100).toFixed(2):hr;else if(hr<lr)Dr="down",br=lr-hr,Z=lr>0?parseFloat(br/lr*100).toFixed(2):0;else var br=lr-hr,Z=0;for(var q in a.charts[p].chartData[er])if(sr+=parseFloat(a.charts[p].chartData[er][q].y),parseFloat(0!=a.charts[p].chartData[er][q].y)&&nr++,"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.summaryType)if("avg"==a.charts[p].metricDetails.objectTypes[0].meta.summaryType)sr=0==nr&&0==sr?0:parseFloat(sr/nr).toFixed(2);else if("snapshot"==a.charts[p].metricDetails.objectTypes[0].meta.summaryType){var kr="";_.findIndex(a.charts[p].chartData[er].y,function(a){return 0!==a.date});for(var Q in a.charts[p].chartData[er])kr<moment(a.charts[p].chartData[er][Q].x)&&(kr=moment(a.charts[p].chartData[er][Q].x),sr=a.charts[p].chartData[er][Q].y)}"line"==d||"bar"==d||"column"==d||"mozoverview"==d||"stackcolumn"==d?("bar"==d||"column"==d)&&h<0&&0==sr?n.push({channelName:c[a.channelName],type:"line",values:a.charts[p].chartData[er],key:a.charts[p].metricDetails.objectTypes[0].meta.endpoint,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData[er],key:"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:a.charts[p].metricDetails.objectTypes[0].meta.endpoint[er],unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[er]:"",color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[er]?a.charts[p].chartColour[er]:"",arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"trafficSourcesBrkdwnLine"==d?n.push({channelName:c[a.channelName],type:"line",values:a.charts[p].chartData[er],key:"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:a.charts[p].metricDetails.objectTypes[0].meta.endpoint[er],unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[er]:"",color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[er]?a.charts[p].chartColour[er]:"",arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"trafficSourcesBrkdwnPie"==d?n.push({channelName:c[a.channelName],name:a.charts[p].chartName,type:"pie",y:parseFloat(sr),key:"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:a.charts[p].metricDetails.objectTypes[0].meta.endpoint[er],unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[er]:"",color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[er]?a.charts[p].chartColour[er]:"",arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):"area"==d||"negativebar"==d?n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData[er],key:"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:a.charts[p].metricDetails.objectTypes[0].meta.endpoint[er],unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[er]:"",color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[er]?a.charts[p].chartColour[er]:"",arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,area:!0,hasSnapshotData:ir}):"costPerActionType"==d?n.push({channelName:c[a.channelName],type:"line",values:a.charts[p].chartData,key:a.meta,color:a.charts[p].chartColour[0],arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}):n.push({channelName:c[a.channelName],name:a.charts[p].chartName,type:a.charts[p].chartType,y:parseFloat(sr),key:"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName&&"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]?a.charts[p].metricDetails.objectTypes[0].meta.endpointDisplayName[endpointDisplayCode]:a.charts[p].metricDetails.objectTypes[0].meta.endpoint[er].replace(/\_/g," "),unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[er]:"",color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[er]?a.charts[p].chartColour[er]:"",arrow:Dr,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir})}}else if("tableAge"==la||"tableGender"==la||"tableDevice"==la)n.push({type:"campaignOverViewbyAge",values:a.charts[p].chartData});else if("fbReachByCity"==d||"gaUsers"===d||"pieAge"==la||"pieGender"==la||"pieDevice"==la){var Sr=0;for(var Or in a.charts[p].chartData)n.push({channelName:c[a.channelName],name:a.charts[p].chartName,type:"fbReachByCity",y:parseFloat(a.charts[p].chartData[Or]),key:Or,unit:void 0!=a.charts[p].metricDetails.objectTypes[0].meta.unit?a.charts[p].metricDetails.objectTypes[0].meta.unit[0]:"",color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[Sr]?a.charts[p].chartColour[Sr]:"",summaryDisplay:Math.round(100*a.charts[p].chartData[Or])/100,hasSnapshotData:ir}),++Sr}else if("costPerActionType"==d&&void 0==a.meta)n.push({type:"costPerActionType",values:a.charts[p].chartData});else switch(d){case"instagramPosts":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"stackbar":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"highEngagementTweets":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"highestEngagementLinkedIn":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"vimeoTopVideos":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"gaTopPagesByVisit":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"campaignOverview":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"adgroupOverview":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"fbAdsAdgroupOverview":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"adOverview":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"gaPageContentEfficiencyTable":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"gaPageTechnicalEfficiencyTable":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"audienceBehaviourbyDay":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData,color:a.charts[p].chartColour});break;case"socialContributionToSiteTraffic":n.push({type:a.charts[p].chartType,metricCode:a.charts[p].metricCode,metricName:a.charts[p].metricName,values:a.charts[p].chartData,color:a.charts[p].chartColour});break;case"pageTechnicalEfficiency":for(var xr=0,Er=0,m=0;m<a.charts[p].chartData.length;m++)xr+=Number(a.charts[p].chartData[m].bounceRate),Er+=Number(a.charts[p].chartData[m].PageLoadTime);var Mr=[{key:"Page LoadTime",value:Er,unit:"s"},{key:"Bounce Rate",value:xr,unit:"%"}];n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,summary:Mr,key:a.charts[p].chartName,color:a.charts[p].chartColour});break;case"pageContentEfficiency":for(var xr=0,Pa=0,Ma=0,Na=0,m=0;m<a.charts[p].chartData.length;m++)xr+=Number(a.charts[p].chartData[m].bounceRate),Pa+=Number(a.charts[p].chartData[m].entranceRate),Ma+=Number(a.charts[p].chartData[m].uniquePageviews),Na+=Number(a.charts[p].chartData[m].pageviews);var Mr=[{key:"Unique Page views",value:Ma},{key:"Page views",value:Na,unit:""},{key:"Bounce Rate",value:xr,unit:"%"},{key:"Entrance rate",value:Pa,unit:"%"}];n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,summary:Mr,key:a.charts[p].chartName,color:a.charts[p].chartColour});break;case"visitorAcquisitionEfficiency":for(var za=0,$a=0,Ya=0,m=0;m<a.charts[p].chartData.length;m++)Ya+=Number(a.charts[p].chartData[m].goalConversionRateAll),$a+=Number(a.charts[p].chartData[m].goalValuePerSession),za+=Number(a.charts[p].chartData[m].newUsers);var Mr=[{key:"New users",value:za},{key:"Per session goal value",value:$a,unit:""},{key:"Goal conversion rate",value:Ya,unit:"%"}];n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,summary:Mr,key:a.charts[p].chartName,color:a.charts[p].chartColour});break;case"gaSocialMediaOverview":n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,key:a.charts[p].chartName,color:a.charts[p].chartColour});break;case"topReferringSites":if("Top referring sites(Table)"==String(a.charts[p].chartName))n.push({type:"topReferringSitesTable",values:a.charts[p].chartData});else{for(var Ka=0,Za=0,m=0;m<a.charts[p].chartData.length;m++)Ka+=Number(a.charts[p].chartData[m].goalConversionRate),g+=Number(a.charts[p].chartData[m].sessions),Za+=Number(a.charts[p].chartData[m].goalCompletions);var Mr=[{key:"Sessions",value:g},{key:"Goal Completions",value:Za,unit:""},{key:"Goal conversion rate",value:Ka,unit:"%"}];n.push({channelName:c[a.channelName],type:a.charts[p].chartType,values:a.charts[p].chartData,summary:Mr,key:a.charts[p].chartName,color:a.charts[p].chartColour})}break;case"fbReachByAge":n.push({type:"fbReachByAge",values:a.charts[p].chartData,channelName:c[a.channelName]});break;case"instagramEngagements":if("instagramPostTypes"===a.charts[p].chartSubType){var Sr=0;for(var Or in a.charts[p].chartData)n.push({channelName:c[a.channelName],name:a.charts[p].chartName,type:"pie",key:Or,displaySummary:!1,y:parseFloat(a.charts[p].chartData[Or]),color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[Sr]?a.charts[p].chartColour[Sr]:""}),++Sr}else if("instagramPostEngagement"===a.charts[p].chartSubType){var Sr=0;for(var Or in a.charts[p].chartData)n.push({channelName:c[a.channelName],name:a.charts[p].chartName,type:"fbReachByCity",y:parseFloat(a.charts[p].chartData[Or]),key:Or,displaySummary:!1,color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[Sr]?a.charts[p].chartColour[Sr]:"",summaryDisplay:Math.round(100*a.charts[p].chartData[Or])/100,hasSnapshotData:ir}),++Sr}else if("instagramPostFrequency"===a.charts[p].chartSubType){var jr=new Date(e.startDate),Ir=new Date(e.endDate),Pr=Math.abs(Ir.getTime()-jr.getTime()),Hr=Math.ceil(Pr/864e5);n.push({channelName:c[a.channelName],key:"Post per day",type:"angularGauge",y:Math.round(a.charts[p].chartData/Hr*100)/100,displaySummary:!1,color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[Sr]?a.charts[p].chartColour[Sr]:"",summaryDisplay:Math.round(a.charts[p].chartData/Hr*100)/100,hasSnapshotData:ir})}break;case"fbReachByCountry":var Sr=0;for(var Or in a.charts[p].chartData)n.push({channelName:c[a.channelName],name:a.charts[p].chartName,type:"pie",y:parseFloat(a.charts[p].chartData[Or]),key:Or,color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[Sr]?a.charts[p].chartColour[Sr]:"",summaryDisplay:Math.round(100*a.charts[p].chartData[Or])/100,hasSnapshotData:ir}),++Sr;break;case"gaTopCountriesToSocialVisits":case"gaTopCitiesToSocialVisits":var Sr=0;for(var Or in a.charts[p].chartData)n.push({channelName:c[a.channelName],name:a.charts[p].chartName,type:"pie",y:parseFloat(a.charts[p].chartData[Or]),key:Or,color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[Sr]?a.charts[p].chartColour[Sr]:"",summaryDisplay:parseFloat(a.charts[p].chartData[Or]).toFixed(2)%Math.floor(a.charts[p].chartData[Or])>0?parseFloat(a.charts[p].chartData[Or]).toFixed(2):parseInt(a.charts[p].chartData[Or]),hasSnapshotData:ir}),++Sr;break;case"pinterestEngagementRate":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"pinterestLeaderboard":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"instagramHashtagLeaderBoard":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"percentageArea":if("undefined"!=typeof a.charts[p].chartData[0].y){var Wr=_.groupBy(a.charts[p].chartData,"y.socialNetwork"),Rr=0;for(var W in Wr){var rr,sr=0,or=0,ir=!1,nr=0,cr=Wr[W].length,hr=0,lr=0;if(a.charts[p].chartData.length>=14){for(var B=0,m=cr-1;m>=0;m--)(0===B||B<7)&&"undefined"!=typeof Wr[W][m].y?hr+=parseFloat(Wr[W][m].y.total):B>=7&&B<14&&"undefined"!=typeof Wr[W][m].y&&(lr+=parseFloat(Wr[W][m].y.total)),B++;rr="WK"}else if(a.charts[p].chartData.length>0){var Ar=Wr[W].length,yr=_.last(Wr[W]);if("string"!=typeof yr.x){var gr=moment(yr.x).subtract(1,"days").format("YYYY-DD-MM");hr=parseFloat(yr.y)}else hr=parseFloat(Wr[W][Ar-1].y.total);for(var m=cr-1;m>=0;m--)if("string"!=typeof yr.x){var vr=moment(Wr[W][m].x).format("YYYY-DD-MM");gr===vr&&(lr=parseFloat(Wr[W][m].y))}else lr=parseFloat(Wr[W][Ar-2].y.total);rr="Day"}var Dr,br,Z;if(hr>lr)Dr="up",br=hr-lr,Z=lr>0?parseFloat(br/lr*100).toFixed(2):hr;else if(hr<lr)Dr="down",br=lr-hr,Z=lr>0?parseFloat(br/lr*100).toFixed(2):0;else var br=lr-hr,Z=0;for(var q in Wr[W])if("undefined"!=typeof Wr[W][q].y&&(sr+=parseFloat(Wr[W][q].y.total)),"undefined"!=typeof Wr[W][q].y&&parseFloat(0!=Wr[W][q].y.total)&&nr++,"undefined"!=typeof a.charts[p].metricDetails.objectTypes[0].meta.summaryType)if("avg"==a.charts[p].metricDetails.objectTypes[0].meta.summaryType)sr=0==nr&&0==sr?0:parseFloat(sr/nr).toFixed(2);else if("snapshot"==a.charts[p].metricDetails.objectTypes[0].meta.summaryType){var kr="";for(var Q in Wr[er])kr<moment(Wr[W][Q].x)&&(kr=moment(Wr[W][Q].x),sr=Wr[W][Q].y.total,0!=sr&&(or+=1));ir=or>=1}n.push({channelName:c[a.channelName],type:a.charts[p].chartType,metricCode:a.charts[p].metricCode,metricName:a.charts[p].metricName,key:W,values:Wr[W],color:"undefined"!=typeof a.charts[p].chartColour&&"undefined"!=typeof a.charts[p].chartColour[Rr]?a.charts[p].chartColour[Rr]:"",arrow:Dr,totalChartLength:a.charts[p].chartData,variance:Z,period:rr,summaryDisplay:Math.round(100*sr)/100,hasSnapshotData:ir}),Rr++}}break;case"youtubeVideosOverview":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"twitterEngagements":"engagementByUsersTalkedAbout"===a.charts[p].chartSubType||"topLinks"===a.charts[p].chartSubType||"hashTag"===a.charts[p].chartSubType?n.push({type:a.charts[p].chartType,chartSubType:a.charts[p].chartSubType,values:a.charts[p].chartData}):n.push({channelName:c[a.channelName],type:a.charts[p].chartType,chartSubType:a.charts[p].chartSubType,values:a.charts[p].chartData,key:a.charts[p].chartName,color:a.charts[p].chartColour});break;case"fbAdsCampaignOverview":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData});break;case"fbAdsAdOverview":n.push({type:a.charts[p].chartType,values:a.charts[p].chartData})}}}return o.resolve(n),o.promise}function p(a,e,r){function s(a,t){var e;for(var r in N){e=!1;for(var s in t)N[r]==t[s]&&(e=!0);if(0==e)return N[r]}}function i(a,t){return a+t}function i(a,t){return a+t}function i(a,t){return a+t}var o=t.defer(),n=[];n.twitterEngagements=[],n.youtubeVideosOverview=[],n.lineCharts=[],n.barCharts=[],n.pieCharts=[],n.percentageAreaOptions=[],n.instagramPosts=[],n.highEngagementTweets=[],n.highestEngagementLinkedIn=[],n.pinterestEngagementRate=[],n.pinterestLeaderboard=[],n.gaTopPagesByVisit=[],n.angularGauge=[],n.multicharts=[],n.campaignOverViewbyAge=[],n.campaignOverview=[],n.adOverview=[],n.adgroupOverview=[],n.fbAdsAdgroupOverview=[],n.fbReachByAge=[],n.mozoverview=[],n.fbReachByCity=[],n.vimeoTopVideos=[],n.costPerActionType=[],n.topReferringSites=[],n.instagramHashtagLeaderBoard=[],n.gaPageContentEfficiencyTable=[],n.gaPageTechnicalEfficiencyTable=[],n.gaVisitorAcquisitionEfficiencyAnalysisTable=[],n.pageTechnicalEfficiency=[],n.pageContentEfficiency=[],n.visitorAcquisitionEfficiency=[],n.percentageArea=[],n.topReferringSites=[],n.topReferringSitesTable=[],n.gaSocialMediaOverview=[],n.stackbar=[],n.fbAdsCampaignOverview=[],n.fbAdsAdOverview=[];var c,h,l,p,m,y={lineDataOptions:{chart:{type:"lineChart",noData:"No data for chosen date range",margin:{top:20,right:25,bottom:30,left:35},x:function(a){return a.x},y:function(a){return parseFloat(a.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(a){return d3.time.format("%d/%m/%y")(new Date(a))},showMaxMin:!1},yAxis:{tickFormat:function(a){return d3.format("r")(a)},showMaxMin:!1},interpolate:"monotone",axisLabelDistance:-10,showLegend:!1,clipEdge:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},barDataOptions:{chart:{type:"multiBarChart",noData:"No data for chosen date range",margin:{top:20,right:25,bottom:30,left:35},x:function(a){return a.x},y:function(a){return parseFloat(a.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(a){return d3.time.format("%d/%m/%y")(new Date(a))},showMaxMin:!1},yAxis:{tickFormat:function(a){return d3.format("r")(a)},showMaxMin:!1},tooltip:{enabled:!1,headerEnabled:!0,headerFormatter:function(a){return d3.time.format("%d/%m/%y")(new Date(a))}},axisLabelDistance:-10,showLegend:!1,stacked:!0,showControls:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},pieDataOptions:{chart:{type:"pieChart",noData:"No data for chosen date range",margin:{top:0,right:15,bottom:15,left:15},x:function(a){return a.key},y:function(a){return a.y},showLabels:!1,showLegend:!1,labelsOutside:!1,tooltips:!0,labelThreshold:.01,labelSunbeamLayout:!0,legend:{rightAlign:!1,margin:{bottom:25}}}},percentageAreaOptions:{chart:{type:"area",noData:"No data for chosen date range",margin:{top:20,right:25,bottom:30,left:35},x:function(a){return a.x},y:function(a){return parseFloat(a.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(a){return d3.time.format("%d/%m/%y")(new Date(a))},showMaxMin:!1},yAxis:{tickFormat:function(a){return d3.format("r")(a)},showMaxMin:!1},interpolate:"monotone",axisLabelDistance:-10,showLegend:!1,clipEdge:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},instagramPosts:{chart:{type:"instagramPosts"}},campaignOverview:{chart:{type:"campaignOverview"}},adOverview:{chart:{type:"adOverview"}},adgroupOverview:{chart:{type:"adgroupOverview"}},fbAdsAdgroupOverview:{chart:{type:"fbAdsAdgroupOverview"}},highEngagementTweets:{chart:{type:"highEngagementTweets"}},mozoverview:{chart:{type:"mozoverview"}},highestEngagementLinkedIn:{chart:{type:"highestEngagementLinkedIn"}},vimeoTopVideos:{chart:{type:"vimeoTopVideos"}},campaignOverViewbyAge:{chart:{type:"campaignOverViewbyAge"}},gaTopPagesByVisit:{chart:{type:"gaTopPagesByVisit"}},gaPageContentEfficiencyTable:{chart:{type:"gaPageContentEfficiencyTable"}},gaPageTechnicalEfficiencyTable:{chart:{type:"gaPageTechnicalEfficiencyTable"}},gaVisitorAcquisitionEfficiencyAnalysisTable:{chart:{type:"gaVisitorAcquisitionEfficiencyAnalysisTable"}},topReferringSitesTable:{chart:{type:"topReferringSitesTable"}},visitorAcquisitionEfficiency:{chart:{type:"visitorAcquisitionEfficiency",margin:{top:20,right:30,bottom:30,left:35}}},engagementByUsersTalkedAbout:{chart:{type:"engagementByUsersTalkedAbout"}},youtubeVideosOverview:{chart:{type:"youtubeVideosOverview"}},pinterestEngagementRate:{chart:{type:"pinterestEngagementRate"}},pinterestLeaderboard:{chart:{type:"pinterestLeaderboard"}},costPerActionType:{chart:{type:"costPerActionType"}},fbAdsCampaignOverview:{chart:{type:"fbAdsCampaignOverview"}},fbAdsAdOverview:{chart:{type:"fbAdsAdOverview"}},emptyCharts:{chart:{type:"emptyCharts"}},multiDataOptions:{chart:{type:"multiChart",noData:"No data for chosen date range",margin:{top:20,right:30,bottom:30,left:35},x:function(a){return a.x},y:function(a){
return parseFloat(a.y)},useInteractiveGuideline:!0,xAxis:{tickFormat:function(a){return d3.time.format("%d/%m/%y")(new Date(a))},showMaxMin:!1},yAxis1:{tickFormat:function(a){return d3.format("r")(a)},showMaxMin:!1},yAxis2:{tickFormat:function(a){return d3.format("r")(a)},showMaxMin:!1},interpolate:"monotone",axisLabelDistance:-10,showLegend:!1,legend:{rightAlign:!1,margin:{bottom:25}}}},instagramHashtagLeaderBoard:{chart:{type:"instagramHashtagLeaderBoard"}}},g=0,v=[],D=[{W:1,H:1,N:0,r:1,c:1},{W:1,H:1,N:1,r:1,c:1},{W:1,H:1,N:2,r:2,c:1},{W:1,H:1,N:3,r:3,c:1},{W:1,H:1,N:4,r:4,c:1},{W:1,H:1,N:5,r:5,c:1},{W:1,H:1,N:6,r:6,c:1},{W:1,H:1,N:7,r:7,c:1},{W:1,H:1,N:8,r:8,c:1},{W:2,H:1,N:0,r:1,c:1},{W:2,H:1,N:1,r:1,c:1},{W:2,H:1,N:2,r:1,c:2},{W:2,H:1,N:3,r:2,c:1},{W:2,H:1,N:4,r:2,c:2},{W:2,H:1,N:5,r:2,c:3},{W:2,H:1,N:6,r:2,c:3},{W:2,H:1,N:7,r:3,c:3},{W:2,H:1,N:8,r:3,c:3},{W:3,H:1,N:0,r:1,c:1},{W:3,H:1,N:1,r:1,c:1},{W:3,H:1,N:2,r:1,c:2},{W:3,H:1,N:3,r:1,c:3},{W:3,H:1,N:4,r:2,c:2},{W:3,H:1,N:5,r:2,c:3},{W:3,H:1,N:6,r:2,c:3},{W:3,H:1,N:7,r:3,c:3},{W:3,H:1,N:8,r:3,c:3},{W:4,H:1,N:0,r:1,c:1},{W:4,H:1,N:1,r:1,c:1},{W:4,H:1,N:2,r:1,c:2},{W:4,H:1,N:3,r:1,c:3},{W:4,H:1,N:4,r:1,c:4},{W:4,H:1,N:5,r:2,c:3},{W:4,H:1,N:6,r:2,c:3},{W:4,H:1,N:7,r:3,c:3},{W:4,H:1,N:8,r:3,c:3},{W:5,H:1,N:0,r:1,c:1},{W:5,H:1,N:1,r:1,c:1},{W:5,H:1,N:2,r:1,c:2},{W:5,H:1,N:3,r:1,c:3},{W:5,H:1,N:4,r:1,c:4},{W:5,H:1,N:5,r:1,c:5},{W:5,H:1,N:6,r:2,c:3},{W:5,H:1,N:7,r:2,c:4},{W:5,H:1,N:8,r:2,c:4},{W:6,H:1,N:0,r:1,c:1},{W:6,H:1,N:1,r:1,c:1},{W:6,H:1,N:2,r:1,c:2},{W:6,H:1,N:3,r:1,c:3},{W:6,H:1,N:4,r:1,c:4},{W:6,H:1,N:5,r:1,c:5},{W:6,H:1,N:6,r:2,c:3},{W:6,H:1,N:7,r:2,c:4},{W:6,H:1,N:8,r:2,c:4},{W:1,H:2,N:0,r:1,c:1},{W:1,H:2,N:1,r:1,c:1},{W:1,H:2,N:2,r:2,c:1},{W:1,H:2,N:3,r:3,c:1},{W:1,H:2,N:4,r:4,c:1},{W:1,H:2,N:5,r:5,c:1},{W:1,H:2,N:6,r:6,c:1},{W:1,H:2,N:7,r:7,c:1},{W:1,H:2,N:8,r:8,c:1},{W:2,H:2,N:0,r:1,c:1},{W:2,H:2,N:1,r:1,c:1},{W:2,H:2,N:2,r:1,c:2},{W:2,H:2,N:3,r:2,c:2},{W:2,H:2,N:4,r:2,c:2},{W:2,H:2,N:5,r:3,c:2},{W:2,H:2,N:6,r:3,c:2},{W:2,H:2,N:7,r:4,c:2},{W:2,H:2,N:8,r:4,c:2},{W:3,H:2,N:0,r:1,c:1},{W:3,H:2,N:1,r:1,c:1},{W:3,H:2,N:2,r:1,c:2},{W:3,H:2,N:3,r:2,c:2},{W:3,H:2,N:4,r:2,c:2},{W:3,H:2,N:5,r:2,c:3},{W:3,H:2,N:6,r:2,c:3},{W:3,H:2,N:7,r:2,c:4},{W:3,H:2,N:8,r:2,c:4},{W:4,H:2,N:0,r:1,c:1},{W:4,H:2,N:1,r:1,c:1},{W:4,H:2,N:2,r:1,c:2},{W:4,H:2,N:3,r:1,c:3},{W:4,H:2,N:4,r:2,c:2},{W:4,H:2,N:5,r:2,c:3},{W:4,H:2,N:6,r:2,c:3},{W:4,H:2,N:7,r:2,c:4},{W:4,H:2,N:8,r:2,c:4},{W:5,H:2,N:0,r:1,c:1},{W:5,H:2,N:1,r:1,c:1},{W:5,H:2,N:2,r:1,c:2},{W:5,H:2,N:3,r:1,c:3},{W:5,H:2,N:4,r:2,c:2},{W:5,H:2,N:5,r:2,c:3},{W:5,H:2,N:6,r:2,c:3},{W:5,H:2,N:7,r:2,c:4},{W:5,H:2,N:8,r:2,c:4},{W:6,H:2,N:0,r:1,c:1},{W:6,H:2,N:1,r:1,c:1},{W:6,H:2,N:2,r:1,c:2},{W:6,H:2,N:3,r:1,c:3},{W:6,H:2,N:4,r:2,c:2},{W:6,H:2,N:5,r:2,c:3},{W:6,H:2,N:6,r:2,c:3},{W:6,H:2,N:7,r:2,c:4},{W:6,H:2,N:8,r:2,c:4},{W:1,H:3,N:0,r:1,c:1},{W:1,H:3,N:1,r:1,c:1},{W:1,H:3,N:2,r:2,c:1},{W:1,H:3,N:3,r:3,c:1},{W:1,H:3,N:4,r:4,c:1},{W:1,H:3,N:5,r:5,c:1},{W:1,H:3,N:6,r:6,c:1},{W:1,H:3,N:7,r:7,c:1},{W:1,H:3,N:8,r:8,c:1},{W:2,H:3,N:0,r:1,c:1},{W:2,H:3,N:1,r:1,c:1},{W:2,H:3,N:2,r:2,c:1},{W:2,H:3,N:3,r:3,c:1},{W:2,H:3,N:4,r:2,c:2},{W:2,H:3,N:5,r:3,c:2},{W:2,H:3,N:6,r:3,c:2},{W:2,H:3,N:7,r:4,c:2},{W:2,H:3,N:8,r:4,c:2},{W:3,H:3,N:0,r:1,c:1},{W:3,H:3,N:1,r:1,c:1},{W:3,H:3,N:2,r:1,c:2},{W:3,H:3,N:3,r:2,c:2},{W:3,H:3,N:4,r:2,c:2},{W:3,H:3,N:5,r:2,c:3},{W:3,H:3,N:6,r:2,c:3},{W:3,H:3,N:7,r:2,c:4},{W:3,H:3,N:8,r:2,c:4},{W:4,H:3,N:0,r:1,c:1},{W:4,H:3,N:1,r:1,c:1},{W:4,H:3,N:2,r:1,c:2},{W:4,H:3,N:3,r:1,c:3},{W:4,H:3,N:4,r:2,c:2},{W:4,H:3,N:5,r:2,c:3},{W:4,H:3,N:6,r:2,c:3},{W:4,H:3,N:7,r:2,c:4},{W:4,H:3,N:8,r:2,c:4},{W:5,H:3,N:0,r:1,c:1},{W:5,H:3,N:1,r:1,c:1},{W:5,H:3,N:2,r:1,c:2},{W:5,H:3,N:3,r:1,c:3},{W:5,H:3,N:4,r:2,c:2},{W:5,H:3,N:5,r:2,c:3},{W:5,H:3,N:6,r:2,c:3},{W:5,H:3,N:7,r:2,c:4},{W:5,H:3,N:8,r:2,c:4},{W:6,H:3,N:0,r:1,c:1},{W:6,H:3,N:1,r:1,c:1},{W:6,H:3,N:2,r:1,c:2},{W:6,H:3,N:3,r:1,c:3},{W:6,H:3,N:4,r:2,c:2},{W:6,H:3,N:5,r:2,c:3},{W:6,H:3,N:6,r:2,c:3},{W:6,H:3,N:7,r:2,c:4},{W:6,H:3,N:8,r:2,c:4}];if("customFusion"==a.widgetType)for(var b in e)if("costPerActionType"!=e[b].type||a.meta)switch(e[b].type){case"line":case"area":case"bar":case"column":case"reachVsImpressions":case"engagedUsersReach":n.lineCharts.push(e[b]);break;case"stackcolumn":n.barCharts.push(e[b]);break;case"pie":n.pieCharts.push(e[b]);break;case"instagramPosts":n.instagramPosts.push(e[b]);break;case"highEngagementTweets":n.highEngagementTweets.push(e[b]);break;case"highestEngagementLinkedIn":n.highestEngagementLinkedIn.push(e[b]);break;case"gaTopPagesByVisit":n.gaTopPagesByVisit.push(e[b]);break;case"campaignOverViewbyAge":n.campaignOverViewbyAge.push(e[b]);break;case"pageContentEfficiency":n.pageContentEfficiency.push(e[b]);break;case"pageTechnicalEfficiency":n.pageTechnicalEfficiency.push(e[b]);break;case"visitorAcquisitionEfficiency":n.visitorAcquisitionEfficiency.push(e[b]);break;case"gaPageContentEfficiencyTable":n.gaPageContentEfficiencyTable.push(e[b]);break;case"gaPageTechnicalEfficiencyTable":n.gaPageTechnicalEfficiencyTable.push(e[b]);break;case"topReferringSites":n.topReferringSites.push(e[b]);break;case"topReferringSitesTable":n.topReferringSitesTable.push(e[b]);break;case"gaSocialMediaOverview":n.gaSocialMediaOverview.push(e[b]);break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":n.gaVisitorAcquisitionEfficiencyAnalysisTable.push(e[b]);break;case"fbReachByCity":n.fbReachByCity.push(e[b]);break;case"fbReachByAge":n.fbReachByAge.push(e[b]);break;case"pinterestEngagementRate":n.pinterestEngagementRate.push(e[b]);break;case"pinterestLeaderboard":n.pinterestLeaderboard.push(e[b]);break;case"audienceBehaviourbyDay":case"socialContributionToSiteTraffic":n.multicharts.push(e[b]);break;case"vimeoTopVideos":n.vimeoTopVideos.push(e[b]);break;case"campaignOverview":n.campaignOverview.push(e[b]);break;case"adgroupOverview":n.adgroupOverview.push(e[b]);break;case"fbAdsAdgroupOverview":n.fbAdsAdgroupOverview.push(e[b]);break;case"adOverview":n.adOverview.push(e[b]);break;case"percentageArea":n.percentageArea.push(e[b]);break;case"mozoverview":for(var w=0;w<e[b].values.length;w++)e[b].values[w].x=moment(e[b].values[w].x).format("YYYY-DD-MM");n.mozoverview.push(e[b]);break;case"angularGauge":n.angularGauge.push(e[b]);break;case"stackbar":n.stackbar.push(e[b]);break;case"instagramHashtagLeaderBoard":n.instagramHashtagLeaderBoard.push(e[b]);break;case"twitterEngagements":n.twitterEngagements.push(e[b]);break;case"youtubeVideosOverview":n.youtubeVideosOverview.push(e[b]);break;case"fbAdsCampaignOverview":n.fbAdsCampaignOverview.push(e[b]);break;case"fbAdsAdOverview":n.fbAdsAdOverview.push(e[b])}else n.costPerActionType.push(e[b]);else for(var b in e)if("line"==e[b].type||"area"==e[b].type||"reachVsImpressions"==e[b].type||"engagedUsersReach"==e[b].type||"costPerActionType"==e[b].type&&void 0!=a.meta)n.lineCharts.push(e[b]);else if("costPerActionType"!=e[b].type||a.meta)switch(e[b].type){case"bar":case"column":case"stackcolumn":n.barCharts.push(e[b]);break;case"pie":n.pieCharts.push(e[b]);break;case"instagramPosts":n.instagramPosts.push(e[b]);break;case"highEngagementTweets":n.highEngagementTweets.push(e[b]);break;case"highestEngagementLinkedIn":n.highestEngagementLinkedIn.push(e[b]);break;case"gaTopPagesByVisit":n.gaTopPagesByVisit.push(e[b]);break;case"campaignOverViewbyAge":n.campaignOverViewbyAge.push(e[b]);break;case"pageContentEfficiency":n.pageContentEfficiency.push(e[b]);break;case"pageTechnicalEfficiency":n.pageTechnicalEfficiency.push(e[b]);break;case"visitorAcquisitionEfficiency":n.visitorAcquisitionEfficiency.push(e[b]);break;case"gaPageContentEfficiencyTable":n.gaPageContentEfficiencyTable.push(e[b]);break;case"gaPageTechnicalEfficiencyTable":n.gaPageTechnicalEfficiencyTable.push(e[b]);break;case"topReferringSites":n.topReferringSites.push(e[b]);break;case"topReferringSitesTable":n.topReferringSitesTable.push(e[b]);break;case"gaSocialMediaOverview":n.gaSocialMediaOverview.push(e[b]);break;case"gaVisitorAcquisitionEfficiencyAnalysisTable":n.gaVisitorAcquisitionEfficiencyAnalysisTable.push(e[b]);break;case"fbReachByCity":n.fbReachByCity.push(e[b]);break;case"fbReachByAge":n.fbReachByAge.push(e[b]);break;case"pinterestEngagementRate":n.pinterestEngagementRate.push(e[b]);break;case"pinterestLeaderboard":n.pinterestLeaderboard.push(e[b]);break;case"audienceBehaviourbyDay":case"socialContributionToSiteTraffic":n.multicharts.push(e[b]);break;case"vimeoTopVideos":n.vimeoTopVideos.push(e[b]);break;case"campaignOverview":n.campaignOverview.push(e[b]);break;case"adgroupOverview":n.adgroupOverview.push(e[b]);break;case"fbAdsAdgroupOverview":n.fbAdsAdgroupOverview.push(e[b]);break;case"adOverview":n.adOverview.push(e[b]);break;case"percentageArea":n.percentageArea.push(e[b]);break;case"mozoverview":for(var w=0;w<e[b].values.length;w++)e[b].values[w].x=moment(e[b].values[w].x).format("YYYY-DD-MM");n.mozoverview.push(e[b]);break;case"angularGauge":n.angularGauge.push(e[b]);break;case"stackbar":n.stackbar.push(e[b]);break;case"instagramHashtagLeaderBoard":n.instagramHashtagLeaderBoard.push(e[b]);break;case"twitterEngagements":n.twitterEngagements.push(e[b]);break;case"youtubeVideosOverview":n.youtubeVideosOverview.push(e[b]);break;case"fbAdsCampaignOverview":n.fbAdsCampaignOverview.push(e[b]);break;case"fbAdsAdOverview":n.fbAdsAdOverview.push(e[b])}else n.costPerActionType.push(e[b]);var T=[],k={},x={},C={},N=["#EF5350","#EC407A","#9C27B0","#42A5F5","#26A69A","#FFCA28","#FF7043","#8D6E63"];if(1==n.lineCharts.length){for(var F=[],A=[],w=0;w<n.lineCharts.length;w++){for(var S=[],O=[],E=0;E<n.lineCharts[w].values.length;E++){S.push("string"==typeof n.lineCharts[w].values[E].x?n.lineCharts[w].values[E].x:n.lineCharts[w].values[E].x.format("DD-MMM-YYYY"));var M=String(n.lineCharts[w].values[E].y).indexOf(".")?parseFloat(n.lineCharts[w].values[E].y):parseInt(n.lineCharts[w].values[E].y);O.push(M)}A.push({name:"(none)"===n.lineCharts[w].key?"Direct":"fbTopReferringDomain"===n.lineCharts[0].chartSubType?"Top Referring Domain":n.lineCharts[w].key,data:O,tooltip:{valueSuffix:n.lineCharts[w].unit},color:n.lineCharts[w].color})}k={chart:{type:n.lineCharts[0].type,reflow:!0,zoomType:"x"},exporting:{enabled:!1},tooltip:{shared:!0},credits:{enabled:!1},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}if("string"!=typeof this.value||u(this.value)){var a=this.value.split("-");return a[1]+" "+a[0]}return this.value}},tickInterval:"fbTopReferringDomain"===n.lineCharts[0].chartSubType?0:7,min:0},yAxis:[{title:{text:null}}],title:{text:"",style:{display:"none"}},series:A},F.push(k),g++,v.push({options:y.lineDataOptions,data:n.lineCharts,api:{},chartOptions:k});var j=0;for(var b in n.lineCharts)for(Y in n.lineCharts[b].values)j+=parseFloat(n.lineCharts[b].values[Y].y);0==j&&(v[v.length-1].options.chart.yDomain=[0,10])}if(n.lineCharts.length>1){var I,F=[],A=[];for(var b in n.lineCharts){var S=[],O=[];I=n.lineCharts[b].type;for(var P in T)if(n.lineCharts[b].color==T[P]){var H=s(n.lineCharts[b].color,T);n.lineCharts[b].color=H}for(var E=0;E<n.lineCharts[b].values.length;E++)if("object"!=typeof n.lineCharts[b].values[E].x){var W=u(n.lineCharts[b].values[E].x);if(W){S.push(n.lineCharts[b].values[E].x.format("DD-MMM-YYYY"));var M=String(n.lineCharts[b].values[E].y).indexOf(".")?parseFloat(n.lineCharts[b].values[E].y):parseInt(n.lineCharts[b].values[E].y);O.push(M)}else{S.push(n.lineCharts[b].values[E].x);var M=String(n.lineCharts[b].values[E].y).indexOf(".")?parseFloat(n.lineCharts[b].values[E].y):parseInt(n.lineCharts[b].values[E].y);O.push(M)}}else{S.push(n.lineCharts[b].values[E].x.format("DD-MMM-YYYY"));var M=String(n.lineCharts[b].values[E].y).indexOf(".")?parseFloat(n.lineCharts[b].values[E].y):parseInt(n.lineCharts[b].values[E].y);O.push(M)}if("string"==typeof n.lineCharts[b].values[0].x){var R=_.findIndex(f,function(a){return a==n.lineCharts[b].values[0].x});if(R==-1)var B="string";else var B="dayOfWeek"}else if("number"==typeof n.lineCharts[b].values[0].x)var B="number";else var B="date";"reachVsImpressions"==I||"engagedUsersReach"==I?A.push({name:n.lineCharts[b].key,yAxis:"string"==typeof b?parseInt(b):b,tooltip:{valueSuffix:"Impressions/Reach (%)"===n.lineCharts[b].key||"Engaged users/Reach (%)"===n.lineCharts[b].key?"%":n.lineCharts[b].unit},xAxisData:S,xAxisType:B,data:O,type:"area",color:n.lineCharts[b].color}):A.push({name:"(none)"===n.lineCharts[b].key?"Direct":"fbTopReferringDomain"===n.lineCharts[b].chartSubType?"Top Referring Domain":n.lineCharts[b].key,tooltip:{valueSuffix:n.lineCharts[b].unit},xAxisData:S,xAxisType:B,data:O,type:n.lineCharts[b].type,color:n.lineCharts[b].color}),T.push(n.lineCharts[b].color)}if("object"!=typeof n.lineCharts[b].values[0].x){var W=u(n.lineCharts[b].values[0].x);k=W?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:A}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:S},title:{text:"",style:{display:"none"}},series:A}}else k="reachVsImpressions"==I||"engagedUsersReach"==I?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},yAxis:[{title:{text:"reachVsImpressions"==I?"Impressions/Reach (%)":"Engaged users/Reach (%)"}},{title:{text:"Total Reach"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:"fbTopReferringDomain"===n.lineCharts[0].chartSubType?0:7,min:0},title:{text:"",style:{display:"none"}},series:A};T=[];var L=[];for(var b in n.lineCharts){var z=0;for(var Y in n.lineCharts[b].values)z+=parseFloat(n.lineCharts[b].values[Y].y);L[b]={summaryTotal:z}}var $=0,V=0;for(P in L)$=parseInt(L[P].summaryTotal),0==$&&(V=1);var q=$/L.length;for(var b in n.lineCharts){var z=0;for(Y in n.lineCharts[b].values)z+=parseFloat(n.lineCharts[b].values[Y].y);z>q?n.lineCharts[b].yAxis=2:n.lineCharts[b].yAxis=1}var G=_.groupBy(A,"xAxisType");for(var U in G){g++;var J=[];if(G[U].length>1){for(var X=G[U][0].xAxisData,K=[],w=0;w<G[U].length;w++){var R=_.findIndex(n.lineCharts,function(a){return a.key==G[U][w].name&&void 0!=a.key});R!=-1&&K.push(n.lineCharts[R]),J.push({name:G[U][w].name,tooltip:G[U][w].tooltip,data:G[U][w].data,type:G[U][w].type,color:G[U][w].color})}if("object"!=typeof G[U][0].data[0]){var W=u(G[U][0].xAxisData[0]);k=W?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:X,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:J}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:X},title:{text:"",style:{display:"none"}},series:J}}else k="reachVsImpressions"==I||"engagedUsersReach"==I?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:X,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},yAxis:[{title:{text:"reachVsImpressions"==I?"Impressions/Reach (%)":"Engaged users/Reach (%)"}},{title:{text:"Total Reach"},opposite:!0}],title:{text:"",style:{display:"none"}},series:J}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:X,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:J};v.push({options:y.multiDataOptions,data:K,api:{},chartOptions:k})}else{var X=G[U][0].xAxisData,K=[],R=_.findIndex(n.lineCharts,function(a){return a.key==G[U][0].name&&void 0!=a.key});if(R!=-1&&K.push(n.lineCharts[R]),J.push({name:G[U][0].name,tooltip:G[U][0].tooltip,data:G[U][0].data,type:G[U][0].type,color:G[U][0].color}),"object"!=typeof G[U][0].data[0]){var W=u(G[U][0].xAxisData[0]);k=W?{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:X,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:J}:{chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:X},title:{text:"",style:{display:"none"}},series:J}}else k={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:X,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},series:J};v.push({options:y.multiDataOptions,data:K,api:{},chartOptions:k})}}1==V&&(v[v.length-1].options.chart.yDomain1=[0,10])}if(n.barCharts.length>0){var F=[],A=[];g++;for(var b in n.barCharts){var S=[],O=[];for(var P in T)if(n.barCharts[b].color==T[P]){var H=s(n.barCharts[b].color,T);n.barCharts[b].color=H}for(var E=0;E<n.barCharts[b].values.length;E++){var Z;"string"==typeof n.barCharts[b].values[E].x?(Z="string",S.push(n.barCharts[b].values[E].x)):(Z="date",S.push(n.barCharts[b].values[E].x.format("DD-MMM-YYYY")));var M=String(n.barCharts[b].values[E].y).indexOf(".")?parseFloat(n.barCharts[b].values[E].y):parseInt(n.barCharts[b].values[E].y);O.push(M)}A.push({name:"(none)"===n.barCharts[b].key?"Direct":n.barCharts[b].key,data:O,tooltip:{valueSuffix:n.barCharts[b].unit},color:n.barCharts[b].color}),T.push(n.barCharts[b].color)}"string"===Z?k={chart:{type:n.barCharts[b].type,reflow:!0,zoomType:"x"},credits:{enabled:!1},legend:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:S},tooltip:{formatter:function(){return this.x+":</br>"+this.y}},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],series:A}:"stackcolumn"===n.barCharts[b].type?(n.barCharts[b].type="column",k={chart:{type:"column",reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},plotOptions:{column:{stacking:"normal"}},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],series:A}):k={chart:{type:n.barCharts[b].type,reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0,valueSuffix:"Session Duration"==n.barCharts[b].key?"sec":""},xAxis:{type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],series:A},T=[];var L=[];for(var b in n.barCharts){var z=0;for(var Y in n.barCharts[b].values)z+=parseFloat(n.barCharts[b].values[Y].y);L[b]={summaryTotal:z}}var $=0;for(P in L)$+=parseInt(L[P].summaryTotal);v.push({options:y.pieDataOptions,data:n.barCharts,api:{},chartOptions:k}),0==$&&(v[v.length-1].options.chart.yDomain=[0,10])}if(n.stackbar.length>0){var F=[],A=[];g++;for(keys in n.stackbar[b].values[0].total[0]){var O=[],S=[];for(var b in n.stackbar)if(S.push(n.stackbar[b].values[0].date),"organic"==keys){var Q=-Math.abs(n.stackbar[b].values[0].total[0][keys]);O.push(Q)}else O.push(n.stackbar[b].values[0].total[0][keys]);A.push({name:"(none)"===keys?"Direct":keys,data:O})}k={chart:{type:"bar",reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:[{categories:S,reversed:!1,labels:{step:1}},{opposite:!0,reversed:!1,categories:S,linkedTo:0,labels:{step:1}}],title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null},labels:{formatter:function(){return""}}}],plotOptions:{series:{stacking:"normal",pointPadding:0,groupPadding:0}},tooltip:{formatter:function(){return"<b>"+this.series.name+this.point.category+"</b><br/>visit: "+Highcharts.numberFormat(Math.abs(this.point.y),0)}},series:A},v.push({options:y.barDataOptions,data:n.stackbar,api:{},chartOptions:k})}if(n.multicharts.length>0){var F=[],S=[],A=[],aa=[];for(var b in n.multicharts){var ta=b;if("socialContributionToSiteTraffic"===n.multicharts[ta].type){for(var E=0;E<n.multicharts[ta].values.length;E++)S.push(n.multicharts[ta].values[E].x);for(var ea=[],ra=0;ra<n.multicharts[ta].values.length;ra++)ea.push(String(n.multicharts[ta].values[ra].y).indexOf(".")?parseFloat(n.multicharts[ta].values[ra].y):parseInt(multicharts[ta].values[ra].y));A.push({type:"sessions"==n.multicharts[ta].metricCode?"column":"line",name:n.multicharts[ta].metricName,data:ea,yAxis:("sessions"==n.multicharts[ta].metricCode,0),color:n.multicharts[ta].color[ta]});var sa=ea.reduce(i),ia={summaryDisplay:Math.round(100*sa)/100,key:void 0,showComparision:!1,variance:0,color:n.multicharts[ta].color[ta]};aa.push(ia);var oa=[{title:{text:"Total sessions"}},{title:{text:"Sessions from social sources"},opposite:!0}],na={type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0}}else{for(var oa=[{title:{text:null}},{title:{text:null},opposite:!0}],na={type:"datetime",categories:S},E=0;E<n.multicharts[b].values.length;E++)S.push(n.multicharts[b].values[E].date);var w=0;for(var U in n.multicharts[b].values[0].total){for(var ca=[],E=0;E<n.multicharts[b].values.length;E++){var Q=Math.round(100*n.multicharts[b].values[E].total[U])/100;ca.push(Q)}if("pageviews"==U){A.push({type:"column",name:"Page views",data:ca,yAxis:0,tooltip:{valueSuffix:""},color:n.multicharts[b].color[w]});var sa=ca.reduce(i),ia={summaryDisplay:Math.round(100*sa)/100,key:void 0,showComparision:!1,variance:0,color:n.multicharts[b].color[w]};aa.push(ia)}else if("total"!=U&&"sessions"!=U&&"hour"!=U&&"bounces"!=U){var ha,la;"pageviewsPerSession"==U?(ha="Pages / Session",la="pages"):"bounceRate"==U?(ha="Bounce rate",la="%"):"percentNewSessions"==U&&(ha="% New sessions",la="%"),A.push({type:"line",data:ca,name:ha,tooltip:{valueSuffix:la},yAxis:1,color:n.multicharts[b].color[w]});var sa=ca.reduce(i),ia={summaryDisplay:Math.round(100*sa)/100,key:void 0,showComparision:!1,variance:0,color:n.multicharts[b].color[w]};aa.push(ia)}w++}}}k={chart:{zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:na,title:{text:"",style:{display:"none"}},yAxis:oa,series:A},g++,v.push({options:y.multiDataOptions,data:aa,api:{},chartOptions:k}),0==$&&(v[v.length-1].options.chart.yDomain=[0,10])}if(n.percentageArea.length>0){g++;for(var F=[],S=[],A=[],aa=[],E=0;E<n.percentageArea[0].totalChartLength.length;E++)S.push(moment(n.percentageArea[0].totalChartLength[E].x).format("DD-MMM-YYYY"));var pa=0;for(var ta in n.percentageArea){var ua=_.groupBy(n.percentageArea[ta].values,"y.socialNetwork");for(var U in ua){for(var da=[],E=0;E<n.percentageArea[ta].totalChartLength.length;E++)da.push({y:0});for(var fa=0;fa<ua[U].length;fa++)for(var w=0;w<n.percentageArea[ta].totalChartLength.length;w++){var ma=moment(ua[U][fa].x).format("YYYY-DD-MM")==moment(n.percentageArea[ta].totalChartLength[w].x).format("YYYY-DD-MM");ma===!0&&"undefined"!=typeof ua[U][fa].y&&(da[w].y=parseInt(ua[U][fa].y.total))}A.push({type:"area",color:n.percentageArea[ta].color,name:U,data:da}),pa++}var ia={summaryDisplay:Math.round(100*sa)/100,key:n.percentageArea[ta].metricName,showComparision:!1,variance:0,color:n.percentageArea[ta].color[ta]};aa.push(ia)}var na={type:"datetime",categories:S,labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}var a=this.value.split("-");return a[1]+" "+a[0]}},tickInterval:7,min:0};k={chart:{zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:na,title:{text:"",style:{display:"none"}},yAxis:{title:{text:"value"}},plotOptions:{area:{stacking:"normal",lineColor:"#ffffff",lineWidth:1,marker:{lineWidth:1,lineColor:"#ffffff"}}},series:A},v.push({options:y.percentageAreaOptions,data:n.percentageArea,api:{},chartOptions:k}),0==$&&(v[v.length-1].options.chart.yDomain=[0,10])}if(n.pieCharts.length>0){var F=[],A=[];g++;var S=[],O=[];for(var b in n.pieCharts){for(var P in T)if(n.pieCharts[b].color==T[P]){var H=s(n.pieCharts[b].color,T);n.pieCharts[b].color=H}T.push(n.pieCharts[b].color);var ya=String(n.pieCharts[b].y).indexOf(".")?parseFloat(n.pieCharts[b].y):parseInt(n.pieCharts[b].y),ha=n.pieCharts[b].key;O.push({y:ya,name:"(none)"===ha?"Direct":ha,color:n.pieCharts[b].color})}A.push({data:O,name:n.pieCharts[b].name}),k={chart:{type:n.pieCharts[0].type,reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},title:{text:"",style:{display:"none"}},yAxis:[{title:{text:null}}],tooltip:{formatter:function(){return this.key+":"+this.y+"</b>"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer"}},series:A},T=[],v.push({options:y.pieDataOptions,data:n.pieCharts,api:{},chartOptions:k})}if(n.fbReachByCity.length>0){var F=[],A=[];g++;var S=[],O=[];for(var b in n.fbReachByCity){for(var P in T)if(n.fbReachByCity[b].color==T[P]){var H=s(n.fbReachByCity[b].color,T);n.fbReachByCity[b].color=H}T.push(n.fbReachByCity[b].color);var ya=String(n.fbReachByCity[b].y).indexOf(".")?parseFloat(n.fbReachByCity[b].y):parseInt(n.fbReachByCity[b].y),ha=n.fbReachByCity[b].key;O.push({y:ya,name:ha,color:n.fbReachByCity[b].color})}var ha=n.fbReachByCity[b].name;A.push({data:O,name:ha}),k={chart:{type:"pie",reflow:!0,zoomType:"x"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0}}},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{formatter:function(){return this.key+":"+this.y+"</b>"}},title:{text:"",style:{display:"none"}},series:A},T=[],v.push({options:y.pieDataOptions,data:n.fbReachByCity,api:{},chartOptions:k})}if(n.fbReachByAge.length>0){var F=[],A=[];g++,k={chart:{type:"column",reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:n.fbReachByAge[0].values[1]},yAxis:[{title:{text:null},min:0}],title:{text:"",style:{display:"none"}},plotOptions:{column:{stacking:"normal"}},series:n.fbReachByAge[0].values[2]},colorarray=["#b2aee8","#aee8b2","#e8b2ae","#98DF8A","#756BB1","#FFBB78","#0F9D58","#20bfaf","#bb24d1","#dcdf41"];for(var ga=[],sa=0,w=0;w<n.fbReachByAge[0].values[1].length;w++){for(var ta=0;ta<n.fbReachByAge[0].values[2].length;ta++)sa+=n.fbReachByAge[0].values[2][ta].data[w];var ia={channelName:n.fbReachByAge[0].channelName,summaryDisplay:sa,type:"pie",key:n.fbReachByAge[0].values[1][w],showComparision:"false",variance:0,color:colorarray[w]};ga.push(ia)}T=[];var L=[];for(var b in ga){var z=0;z+=parseFloat(ga.summaryDisplay),L[b]={summaryTotal:z}}var $=0;for(P in L)$+=parseInt(L[P].summaryTotal);v.push({options:y.pieDataOptions,data:ga,api:{},chartOptions:k})}if(n.instagramPosts.length>0&&n.instagramPosts[0].values.length>0&&(g++,v.push({options:y.instagramPosts,data:n.instagramPosts[0].values})),n.vimeoTopVideos.length>0&&n.vimeoTopVideos[0].values.length>0&&(g++,v.push({options:y.vimeoTopVideos,data:n.vimeoTopVideos[0].values})),n.highEngagementTweets.length>0&&n.highEngagementTweets[0].values.length>0&&(g++,v.push({options:y.highEngagementTweets,data:n.highEngagementTweets[0].values})),n.highestEngagementLinkedIn.length>0&&n.highestEngagementLinkedIn[0].values.length>0&&(g++,v.push({options:y.highestEngagementLinkedIn,data:n.highestEngagementLinkedIn[0].values})),n.gaTopPagesByVisit.length>0&&n.gaTopPagesByVisit[0].values.length>0&&(g++,v.push({options:y.gaTopPagesByVisit,data:n.gaTopPagesByVisit[0].values})),n.campaignOverViewbyAge.length>0&&n.campaignOverViewbyAge[0].values.length>0&&(g++,v.push({options:y.campaignOverViewbyAge,data:n.campaignOverViewbyAge[0].values})),n.campaignOverview.length>0&&n.campaignOverview[0].values.length>0&&(g++,v.push({options:y.campaignOverview,data:n.campaignOverview[0].values})),n.adgroupOverview.length>0&&n.adgroupOverview[0].values.length>0&&(g++,v.push({options:y.adgroupOverview,data:n.adgroupOverview[0].values})),n.fbAdsAdgroupOverview.length>0&&n.fbAdsAdgroupOverview[0].values.length>0&&(g++,v.push({options:y.fbAdsAdgroupOverview,data:n.fbAdsAdgroupOverview[0].values})),n.adOverview.length>0&&n.adOverview[0].values.length>0&&(g++,v.push({options:y.adOverview,data:n.adOverview[0].values})),n.gaPageContentEfficiencyTable.length>0&&n.gaPageContentEfficiencyTable[0].values.length>0&&(g++,v.push({options:y.gaPageContentEfficiencyTable,data:n.gaPageContentEfficiencyTable[0].values})),n.topReferringSitesTable.length>0&&n.topReferringSitesTable[0].values.length>0&&(g++,v.push({options:y.topReferringSitesTable,data:n.topReferringSitesTable[0].values})),n.gaPageTechnicalEfficiencyTable.length>0&&n.gaPageTechnicalEfficiencyTable[0].values.length>0&&(g++,v.push({options:y.gaPageTechnicalEfficiencyTable,data:n.gaPageTechnicalEfficiencyTable[0].values})),n.gaVisitorAcquisitionEfficiencyAnalysisTable.length>0&&n.gaVisitorAcquisitionEfficiencyAnalysisTable[0].values.length>0&&(g++,v.push({options:y.gaVisitorAcquisitionEfficiencyAnalysisTable,data:n.gaVisitorAcquisitionEfficiencyAnalysisTable[0].values})),n.pageTechnicalEfficiency.length>0){var F=[],A=[];g++;for(var b in n.pageTechnicalEfficiency){var va=[],O=[];O[0]=[],O[1]=[];for(var E=0;E<n.pageTechnicalEfficiency[b].values.length;E++)va.push(String(n.pageTechnicalEfficiency[b].values[E].pageTitle)),O[0].push(Number(n.pageTechnicalEfficiency[b].values[E].PageLoadTime)),O[1].push(Number(n.pageTechnicalEfficiency[b].values[E].bounceRate));for(var w=0;w<n.pageTechnicalEfficiency[b].summary.length;w++)A.push({name:n.pageTechnicalEfficiency[b].summary[w].key,yAxis:w,tooltip:{valueSuffix:n.pageTechnicalEfficiency[b].summary[w].unit},data:O[w],type:0==w?"column":"line",color:n.pageTechnicalEfficiency[b].color[w]
})}k={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:va,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:va.length-1},yAxis:[{title:{text:"Page LoadTime"}},{title:{text:"Bounce Rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A},v.push({options:y.visitorAcquisitionEfficiency,data:n.pageTechnicalEfficiency,api:{},chartOptions:k})}if(n.visitorAcquisitionEfficiency.length>0){var F=[],A=[];g++;for(var b in n.visitorAcquisitionEfficiency){var va=[],O=[];O[0]=[],O[1]=[],O[2]=[];for(var E=0;E<n.visitorAcquisitionEfficiency[b].values.length;E++)va.push(String(n.visitorAcquisitionEfficiency[b].values[E].sourceMedium)),O[0].push(Number(n.visitorAcquisitionEfficiency[b].values[E].newUsers)),O[1].push(Number(n.visitorAcquisitionEfficiency[b].values[E].goalValuePerSession)),O[2].push(Number(n.visitorAcquisitionEfficiency[b].values[E].goalConversionRateAll));for(var w=0;w<n.visitorAcquisitionEfficiency[b].summary.length;w++)A.push({name:n.visitorAcquisitionEfficiency[b].summary[w].key,yAxis:w<1?0:1,tooltip:{valueSuffix:n.visitorAcquisitionEfficiency[b].summary[w].unit},data:O[w],type:w<1?"column":"line",color:n.visitorAcquisitionEfficiency[b].color[w]})}k={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:va,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:va.length-1},yAxis:[{title:{text:"New users"}},{title:{text:"Goal value & Goal conversion rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A},v.push({options:y.visitorAcquisitionEfficiency,data:n.visitorAcquisitionEfficiency,api:{},chartOptions:k})}if(n.gaSocialMediaOverview.length>0){var F=[],A=[];g++;for(var b in n.gaSocialMediaOverview)for(var E=0;E<n.gaSocialMediaOverview[b].values.length;E++)A.push({x:Number(n.gaSocialMediaOverview[b].values[E].pageviewsPersession),y:Number(n.gaSocialMediaOverview[b].values[E].sessions),z:Number(n.gaSocialMediaOverview[b].values[E].avgtimeOnPage),name:"(none)"===String(n.gaSocialMediaOverview[b].values[E].socialNetwork)?"Direct":String(n.gaSocialMediaOverview[b].values[E].socialNetwork)});k={chart:{reflow:!0,type:"bubble",zoomType:"xy"},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{useHTML:!0,headerFormat:"<table>",pointFormat:'<tr><th colspan="2"><h3>{point.name}</h3></th></tr><tr><th>Page Views Per Session:</th><td>{point.x}pages</td></tr><tr><th>Sessions:</th><td>{point.y}</td></tr><tr><th>Time on Page:</th><td>{point.z}s</td></tr>',footerFormat:"</table>",enabled:!0,shared:!0},xAxis:{labels:{formatter:function(){return this.value}},title:{text:"Page Views Per Session"}},yAxis:{title:{text:"Sessions"}},title:{text:"",style:{display:"none"}},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}"}}},series:[{data:A}]},v.push({options:y.visitorAcquisitionEfficiency,data:n.gaSocialMediaOverview,api:{},chartOptions:k})}if(n.topReferringSites.length>0){var F=[],A=[];g++;for(var b in n.topReferringSites){var va=[],O=[];O[0]=[],O[1]=[],O[2]=[];for(var E=0;E<n.topReferringSites[b].values.length;E++)va.push(String(n.topReferringSites[b].values[E].source)),O[0].push(Number(n.topReferringSites[b].values[E].sessions)),O[1].push(Number(n.topReferringSites[b].values[E].goalCompletions)),O[2].push(Number(n.topReferringSites[b].values[E].goalConversionRate));for(var w=0;w<n.topReferringSites[b].summary.length;w++)A.push({name:n.topReferringSites[b].summary[w].key,yAxis:w<=1?0:1,tooltip:{valueSuffix:n.topReferringSites[b].summary[w].unit},data:O[w],type:w<1?"column":"line",color:n.topReferringSites[b].color[w]})}k={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:va,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:va.length-1},yAxis:[{title:{text:"Sessions & Goal completions"}},{title:{text:"Goal conversion rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A},v.push({options:y.visitorAcquisitionEfficiency,data:n.topReferringSites,api:{},chartOptions:k})}if(n.pageContentEfficiency.length>0){var A=[];g++;for(var b in n.pageContentEfficiency){var va=[],O=[];O[0]=[],O[1]=[],O[2]=[],O[3]=[];for(var E=0;E<n.pageContentEfficiency[b].values.length;E++)va.push(String(n.pageContentEfficiency[b].values[E].pageTitle)),O[0].push(Number(n.pageContentEfficiency[b].values[E].uniquePageviews)),O[1].push(Number(n.pageContentEfficiency[b].values[E].pageviews)),O[2].push(Number(n.pageContentEfficiency[b].values[E].bounceRate)),O[3].push(Number(n.pageContentEfficiency[b].values[E].entranceRate));for(var w=0;w<n.pageContentEfficiency[b].summary.length;w++)A.push({name:n.pageContentEfficiency[b].summary[w].key,yAxis:w<2?0:1,tooltip:{valueSuffix:n.pageContentEfficiency[b].summary[w].unit},data:O[w],type:w<2?"column":"line",color:n.pageContentEfficiency[b].color[w]})}k={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:va,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:va.length-1},yAxis:[{title:{text:"Unique Page views & Page views"}},{title:{text:"Entrance Rate & Bounce Rate"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A},v.push({options:y.visitorAcquisitionEfficiency,data:n.pageContentEfficiency,api:{},chartOptions:k})}if(n.pinterestEngagementRate.length>0&&n.pinterestEngagementRate[0].values.length>0&&(g++,v.push({options:y.pinterestEngagementRate,data:n.pinterestEngagementRate[0].values})),n.pinterestLeaderboard.length>0&&n.pinterestLeaderboard[0].values.length>0&&(g++,v.push({options:y.pinterestLeaderboard,data:n.pinterestLeaderboard[0].values})),n.costPerActionType.length>0&&v.push({options:y.costPerActionType,data:n.costPerActionType}),n.mozoverview.length>0){for(var ea=[],w=0;w<n.mozoverview.length;w++){var Da=n.mozoverview[w].values.length-1;switch(n.mozoverview[w].key){case"Links":var ba=parseInt(n.mozoverview[w].values[Da].y);break;case"External equity links":var wa=parseInt(n.mozoverview[w].values[Da].y);break;case"Domain Authority (/100)":var Ta=n.mozoverview[w].values[Da].y;break;case"Page Authority (/100)":var ka=n.mozoverview[w].values[Da].y;break;case"Moz Rank (/10)":var xa=n.mozoverview[w].values[Da].y}}var Ca={mozRankURL:xa,externalEquityLinks:wa,domainageAuthority:Ta,links:ba,pageAuthority:ka};v.push({options:y.mozoverview,data:n.mozoverview,displayData:Ca})}if(n.angularGauge.length>0&&(0!=n.angularGauge[0].y&&(g++,k={chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1},credits:{enabled:!1},exporting:{enabled:!1},yAxis:{min:0,max:100,minorTickInterval:"auto",minorTickWidth:1,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",tickPixelInterval:30,tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#666",title:{text:"Post/day"},plotBands:[{from:0,to:20,color:"#55BF3B"},{from:20,to:60,color:"#DDDF0D"},{from:60,to:100,color:"#DF5353"}]},title:{text:"",style:{display:"none"}},series:[{name:"Post Per Day",data:[n.angularGauge[0].y],tooltip:{valueSuffix:" post/day"}}]}),v.push({options:y.pieDataOptions,data:n.angularGauge,chartOptions:k})),n.instagramHashtagLeaderBoard.length>0&&n.instagramHashtagLeaderBoard[0].values.length>0&&(g++,v.push({options:y.instagramHashtagLeaderBoard,data:n.instagramHashtagLeaderBoard[0].values})),n.twitterEngagements.length>0){var Na=[],Fa=[],Aa=0,Sa=0,Oa=[];for(var b in n.twitterEngagements)if("activityByDayOfTheWeek"==n.twitterEngagements[b].chartSubType||"instagramActivityByDayOfTheWeek"==n.twitterEngagements[b].chartSubType)Aa=1,Na.push(n.twitterEngagements[b]);else if("activityByTimeOfTheDay"==n.twitterEngagements[b].chartSubType||"instagramActivityByTimeOfTheDay"==n.twitterEngagements[b].chartSubType){Sa=1;var A=[];Fa.push(n.twitterEngagements[b])}else if(n.twitterEngagements[b].values.length>0&&"commentsAndLikes"==n.twitterEngagements[b].chartSubType){g++;for(var A=[],Ea=[],Ma=[],E=0;E<n.twitterEngagements[b].values.length;E++)Ma.push(n.twitterEngagements[b].values[E].x);Ea=_.uniqBy(Ma);for(var E=0;E<n.twitterEngagements[b].values.length;E++){var ja=_.indexOf(Ea,n.twitterEngagements[b].values[E].x);A.push({x:ja,y:Number(n.twitterEngagements[b].values[E].y),z:Number(n.twitterEngagements[b].values[E].y),color:n.twitterEngagements[b].color[ja],link:n.twitterEngagements[b].values[E].link,date:Ea[ja]})}if(Ea.length>7)var Ia=7;else var Ia=1;k={chart:{reflow:!0,type:"bubble",zoomType:"xy"},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{useHTML:!0,headerFormat:"<table>",pointFormat:"<tr><th>Date:</th><td>{point.date}</td></tr><tr><th>Engagement:</th><td>{point.y}</td></tr><tr><th>Link:</th><td>{point.link}</td></tr>",footerFormat:"</table>",enabled:!0,shared:!0},xAxis:{labels:{},categories:Ea,title:{text:null},labels:{formatter:function(){if("object"==typeof this.value||"number"==typeof this.value){var a=new Date(this.value);return d[a.getMonth()]+" "+a.getDate()}if("string"!=typeof this.value||u(this.value)){var a=this.value.split("-");return a[1]+" "+a[0]}return this.value}},tickInterval:Ia},yAxis:{title:{text:"Engagements"}},title:{text:"",style:{display:"none"}},plotOptions:{series:{dataLabels:{enabled:!1}}},series:[{data:A}]},v.push({options:y.visitorAcquisitionEfficiency,data:n.twitterEngagements[b],api:{},chartOptions:k})}else if(n.twitterEngagements[b].values.length>0&&("topLinks"===n.twitterEngagements[b].chartSubType||"hashTag"===n.twitterEngagements[b].chartSubType)){g++;var Pa={chart:{type:n.twitterEngagements[b].chartSubType}};v.push({options:Pa,data:n.twitterEngagements[b].values})}else if(n.twitterEngagements[b].values.length>0&&("engagementByUsersTalkedAbout"===n.twitterEngagements[b].chartSubType||"hashTag"===n.twitterEngagements[b].chartSubType)){g++;var Pa={chart:{type:n.twitterEngagements[b].chartSubType}};v.push({options:Pa,data:n.twitterEngagements[b].values})}if(Sa>0){var A=[];g++;for(var b in Fa)for(var E=0;E<Fa[b].values.length;E++){if("Sunday"==String(Fa[b].values[E].day))var ja=0;else if("Monday"==String(Fa[b].values[E].day))var ja=1;else if("Tuesday"==String(Fa[b].values[E].day))var ja=2;else if("Wednesday"==String(Fa[b].values[E].day))var ja=3;else if("Thursday"==String(Fa[b].values[E].day))var ja=4;else if("Friday"==String(Fa[b].values[E].day))var ja=5;else if("Saturday"==String(Fa[b].values[E].day))var ja=6;A.push({x:ja,y:Number(Fa[b].values[E].time),z:Number(Fa[b].values[E].engagement),color:Fa[b].color[ja]})}x={chart:{reflow:!0,type:"bubble",zoomType:"xy"},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{useHTML:!0,headerFormat:"<table>",pointFormat:"<tr><th>Time:</th><td>{point.y}</td></tr><tr><th>Engagement:</th><td>{point.z}</td></tr>",footerFormat:"</table>",enabled:!0,shared:!0},xAxis:{labels:{},categories:f,title:{text:null},max:f.length-1},yAxis:{title:{text:"Time"},min:0,max:28,tickInterval:7},title:{text:"",style:{display:"none"}},plotOptions:{series:{dataLabels:{enabled:!1}}},series:[{data:A}]},v.push({options:y.visitorAcquisitionEfficiency,data:Fa,api:{},chartOptions:x})}if(Aa>0){var A=[],va=[];Oa[0]=[],Oa[1]=[];var Ha=[];g++;for(var Pa=0;Pa<Na.length;Pa++){va.length<Na[Pa].values.length&&(va.length=0);for(var E=0;E<Na[Pa].values.length;E++)if(va.length<Na[Pa].values.length&&va.push(String(Na[Pa].values[E].day)),"activityByDayOfTheWeek"==Na[Pa].chartSubType){var Wa="Tweets count";Oa[0].push({tweet:Number(Na[Pa].values[E].tweets)}),Oa[1].push({tweetEngage:Number(Na[Pa].values[E].engagement)})}else{var Wa="Posts count";Oa[0].push({instaTweet:Number(Na[Pa].values[E].tweets)}),Oa[1].push({instaEngage:Number(Na[Pa].values[E].engagement)})}}for(var w=0;w<Oa.length;w++)for(var U=0;U<Oa[w].length;U++)for(var Ra in Oa[w][U])Ha.push(Oa[w][U]);for(var Ba=[],fa=0;fa<Ha.length;fa++)Ba.push(Ha[fa]);var _a=[],La=[],za=[],Ya=[];for(var fa in Ba)for(var Ra in Ba[fa])switch(Ra){case"tweet":_a.push(Ba[fa][Ra]);break;case"tweetEngage":Ya.push(Ba[fa][Ra]);break;case"instaTweet":La.push(Ba[fa][Ra]);break;case"instaEngage":za.push(Ba[fa][Ra]);break;default:console.log("err")}_a.length&&A.push({name:"Tweet",yAxis:0,tooltip:{valueSuffix:""},data:_a,type:"column",color:n.twitterEngagements[b].color[0]}),La.length&&A.push({name:"Post",yAxis:0,tooltip:{valueSuffix:""},data:La,type:"column",color:n.twitterEngagements[b].color[1]}),za.length&&A.push({name:"Engagement",yAxis:1,tooltip:{valueSuffix:""},data:za,type:"line",color:n.twitterEngagements[b].color[2]}),Ya.length&&A.push({name:"Engagement",yAxis:1,tooltip:{valueSuffix:""},data:Ya,type:"line",color:n.twitterEngagements[b].color[3]}),C={chart:{reflow:!0,zoomType:"x"},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,shared:!0},xAxis:{categories:va,labels:{formatter:function(){return this.value}},tickInterval:1,min:0,max:va.length-1},yAxis:[{title:{text:Wa}},{title:{text:"Engagement count"},opposite:!0}],title:{text:"",style:{display:"none"}},series:A},v.push({options:y.visitorAcquisitionEfficiency,data:Na,api:{},chartOptions:C})}}if(n.youtubeVideosOverview.length>0){g++;for(var b in n.youtubeVideosOverview){var Pa={chart:{type:n.youtubeVideosOverview[b].type}};n.youtubeVideosOverview[0].values.length>0&&v.push({options:Pa,data:n.youtubeVideosOverview[0].values})}}if(n.fbAdsCampaignOverview.length>0&&n.fbAdsCampaignOverview[0].values.length>0&&(g++,v.push({options:y.fbAdsCampaignOverview,data:n.fbAdsCampaignOverview[0].values})),n.fbAdsAdOverview.length>0&&n.fbAdsAdOverview[0].values.length>0&&(g++,v.push({options:y.fbAdsAdOverview,data:n.fbAdsAdOverview[0].values})),0==v.length)if("custom"==a.widgetType){var $a="";$a="localhost"==window.location.hostname?"http://localhost:8080/api/v1/create/customdata/"+a._id:window.location.hostname+"/api/v1/create/customdata/"+a._id,v.push({options:y.emptyCharts,data:[{message:"No data for chosen date range. Please send your data to: "+$a}]})}else v.push({options:y.emptyCharts,data:[{message:"No data for chosen date range"}]});var Va=function(){c="undefined"!=typeof a.size?a.size.h:3,h="undefined"!=typeof a.size?a.size.w:3;for(var t=0;t<D.length;t++)D[t].W==h&&D[t].H==c&&D[t].N==g&&(l=D[t].c,p=D[t].r)};if(Va(),m="custom"==a.widgetType?"Custom Data":"undefined"!=typeof a.name?a.name:"","undefined"!=typeof v[0].data[0]&&"undefined"!=v[0].data[0].displaySummary&&v[0].data[0].displaySummary===!1)var qa={showSummary:!1,name:m,visibility:!0,id:a._id,color:a.color,chart:v,layoutOptionsX:l,layoutOptionsY:p};else if("undefined"!=typeof v[0].data[0]&&"undefined"!=typeof v[0].data[0].key)var qa={name:m,visibility:!0,id:a._id,color:a.color,chart:v,layoutOptionsX:l,layoutOptionsY:p};else var qa={showSummary:!1,name:m,visibility:!0,id:a._id,color:a.color,chart:v,layoutOptionsX:l,layoutOptionsY:p};return o.resolve(qa),o.promise}function u(a){var t=new Date(a);return!isNaN(t.getDate())}var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=t.defer(),y=t.defer(),g=JSON.parse(JSON.stringify(e));switch(e.widgetType){case"customFusion":var v=[],D=[],b=[];v.push(i(e,s)),t.all(v).then(function(a){var e=a[0];for(var i in e)"basic"==e[i].widgetType||"adv"==e[i].widgetType||"fusion"==e[i].widgetType?D.push(c(e[i],r,s)):"custom"==e[i].widgetType&&D.push(o(e[i],r));t.all(D).then(function(a){for(var e in a)"basic"==a[e].widgetType||"adv"==a[e].widgetType||"fusion"==a[e].widgetType?b.push(l(a[e])):"custom"==a[e].widgetType&&b.push(n(a[e]));t.all(b).then(function(a){var t=[];for(var e in a)for(var r in a[e])t.push(a[e][r]);var s=p(g,t);s.then(function(a){m.resolve(a)},function(a){m.reject(a)})},function(a){m.reject(a)})},function(a){m.reject(a)})},function(a){m.reject(a)});break;case"basic":case"adv":case"fusion":var w=c(g,r,s);w.then(function(a){var t=l(a,r);t.then(function(a){var t=p(e,a);t.then(function(a){m.resolve(a)},function(a){m.reject(a)})},function(a){m.reject(a)})},function(a){m.reject(a)});break;case"custom":var w=o(g,r);w.then(function(a){var t=n(a);t.then(function(a){var t=p(e,a,r);t.then(function(a){m.resolve(a)},function(a){m.reject(a)})},function(a){m.reject(a)})},function(a){m.reject(a)})}return m.promise}}]),showMetricApp.service("generateChartColours",function(){this.fetchRandomColors=function(a){for(var t,e=["#EF5350","#EC407A","#9C27B0","#42A5F5","#26A69A","#FFCA28","#FF7043","#8D6E63"],r=[];r.length<a;)t=e[Math.floor(Math.random()*(e.length-1))+1],r.indexOf(t)==-1?r.push(t):r.length>e.length&&r.indexOf(t,e.length-1)==-1&&r.push(t);return r},this.fetchWidgetColor=function(a){var t;switch(a){case"Facebook":t="#3B5998";break;case"Google Analytics":t="#F26630";break;case"Twitter":t="#5EA9DD";break;case"FacebookAds":t="#4E5664";break;case"GoogleAdwords":t="#1A925A";break;case"Instagram":t="#895A4D";break;case"YouTube":t="#CC181E";break;default:t="#04509B"}return t}}),showMetricApp.controller("MainCtrl",MainCtrl),showMetricApp.controller("CustomWidgetController",CustomWidgetController),showMetricApp.controller("SharedDashboardController",SharedDashboardController),showMetricApp.controller("NavigationController",NavigationController);